(self["webpackChunkdapp_libp2p"]=self["webpackChunkdapp_libp2p"]||[]).push([[998],{9662:function(t,e,n){"use strict";var r=n(614),i=n(6330),s=TypeError;t.exports=function(t){if(r(t))return t;throw s(i(t)+" is not a function")}},6077:function(t,e,n){"use strict";var r=n(614),i=String,s=TypeError;t.exports=function(t){if("object"==typeof t||r(t))return t;throw s("Can't set "+i(t)+" as a prototype")}},5787:function(t,e,n){"use strict";var r=n(7976),i=TypeError;t.exports=function(t,e){if(r(e,t))return t;throw i("Incorrect invocation")}},9670:function(t,e,n){"use strict";var r=n(111),i=String,s=TypeError;t.exports=function(t){if(r(t))return t;throw s(i(t)+" is not an object")}},3013:function(t){"use strict";t.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},260:function(t,e,n){"use strict";var r,i,s,o=n(3013),a=n(9781),c=n(7854),u=n(614),l=n(111),h=n(2597),d=n(648),f=n(6330),p=n(8880),g=n(8052),y=n(7045),b=n(7976),w=n(9518),m=n(7674),v=n(5112),E=n(9711),A=n(9909),x=A.enforce,S=A.get,_=c.Int8Array,I=_&&_.prototype,R=c.Uint8ClampedArray,C=R&&R.prototype,k=_&&w(_),L=I&&w(I),T=Object.prototype,B=c.TypeError,O=v("toStringTag"),N=E("TYPED_ARRAY_TAG"),D="TypedArrayConstructor",U=o&&!!m&&"Opera"!==d(c.opera),P=!1,M={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},Z={BigInt64Array:8,BigUint64Array:8},F=function(t){if(!l(t))return!1;var e=d(t);return"DataView"===e||h(M,e)||h(Z,e)},V=function(t){var e=w(t);if(l(e)){var n=S(e);return n&&h(n,D)?n[D]:V(e)}},H=function(t){if(!l(t))return!1;var e=d(t);return h(M,e)||h(Z,e)},$=function(t){if(H(t))return t;throw B("Target is not a typed array")},j=function(t){if(u(t)&&(!m||b(k,t)))return t;throw B(f(t)+" is not a typed array constructor")},K=function(t,e,n,r){if(a){if(n)for(var i in M){var s=c[i];if(s&&h(s.prototype,t))try{delete s.prototype[t]}catch(o){try{s.prototype[t]=e}catch(u){}}}L[t]&&!n||g(L,t,n?e:U&&I[t]||e,r)}},z=function(t,e,n){var r,i;if(a){if(m){if(n)for(r in M)if(i=c[r],i&&h(i,t))try{delete i[t]}catch(s){}if(k[t]&&!n)return;try{return g(k,t,n?e:U&&k[t]||e)}catch(s){}}for(r in M)i=c[r],!i||i[t]&&!n||g(i,t,e)}};for(r in M)i=c[r],s=i&&i.prototype,s?x(s)[D]=i:U=!1;for(r in Z)i=c[r],s=i&&i.prototype,s&&(x(s)[D]=i);if((!U||!u(k)||k===Function.prototype)&&(k=function(){throw B("Incorrect invocation")},U))for(r in M)c[r]&&m(c[r],k);if((!U||!L||L===T)&&(L=k.prototype,U))for(r in M)c[r]&&m(c[r].prototype,L);if(U&&w(C)!==L&&m(C,L),a&&!h(L,O))for(r in P=!0,y(L,O,{configurable:!0,get:function(){return l(this)?this[N]:void 0}}),M)c[r]&&p(c[r],N,r);t.exports={NATIVE_ARRAY_BUFFER_VIEWS:U,TYPED_ARRAY_TAG:P&&N,aTypedArray:$,aTypedArrayConstructor:j,exportTypedArrayMethod:K,exportTypedArrayStaticMethod:z,getTypedArrayConstructor:V,isView:F,isTypedArray:H,TypedArray:k,TypedArrayPrototype:L}},7745:function(t,e,n){"use strict";var r=n(6244);t.exports=function(t,e){var n=0,i=r(e),s=new t(i);while(i>n)s[n]=e[n++];return s}},1318:function(t,e,n){"use strict";var r=n(5656),i=n(1400),s=n(6244),o=function(t){return function(e,n,o){var a,c=r(e),u=s(c),l=i(o,u);if(t&&n!=n){while(u>l)if(a=c[l++],a!=a)return!0}else for(;u>l;l++)if((t||l in c)&&c[l]===n)return t||l||0;return!t&&-1}};t.exports={includes:o(!0),indexOf:o(!1)}},3658:function(t,e,n){"use strict";var r=n(9781),i=n(3157),s=TypeError,o=Object.getOwnPropertyDescriptor,a=r&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(t){return t instanceof TypeError}}();t.exports=a?function(t,e){if(i(t)&&!o(t,"length").writable)throw s("Cannot set read only .length");return t.length=e}:function(t,e){return t.length=e}},1843:function(t,e,n){"use strict";var r=n(6244);t.exports=function(t,e){for(var n=r(t),i=new e(n),s=0;s<n;s++)i[s]=t[n-s-1];return i}},1572:function(t,e,n){"use strict";var r=n(6244),i=n(9303),s=RangeError;t.exports=function(t,e,n,o){var a=r(t),c=i(n),u=c<0?a+c:c;if(u>=a||u<0)throw s("Incorrect index");for(var l=new e(a),h=0;h<a;h++)l[h]=h===u?o:t[h];return l}},4326:function(t,e,n){"use strict";var r=n(1702),i=r({}.toString),s=r("".slice);t.exports=function(t){return s(i(t),8,-1)}},648:function(t,e,n){"use strict";var r=n(1694),i=n(614),s=n(4326),o=n(5112),a=o("toStringTag"),c=Object,u="Arguments"==s(function(){return arguments}()),l=function(t,e){try{return t[e]}catch(n){}};t.exports=r?s:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=l(e=c(t),a))?n:u?s(e):"Object"==(r=s(e))&&i(e.callee)?"Arguments":r}},9920:function(t,e,n){"use strict";var r=n(2597),i=n(3887),s=n(1236),o=n(3070);t.exports=function(t,e,n){for(var a=i(e),c=o.f,u=s.f,l=0;l<a.length;l++){var h=a[l];r(t,h)||n&&r(n,h)||c(t,h,u(e,h))}}},8544:function(t,e,n){"use strict";var r=n(7293);t.exports=!r((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},8880:function(t,e,n){"use strict";var r=n(9781),i=n(3070),s=n(9114);t.exports=r?function(t,e,n){return i.f(t,e,s(1,n))}:function(t,e,n){return t[e]=n,t}},9114:function(t){"use strict";t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},7045:function(t,e,n){"use strict";var r=n(6339),i=n(3070);t.exports=function(t,e,n){return n.get&&r(n.get,e,{getter:!0}),n.set&&r(n.set,e,{setter:!0}),i.f(t,e,n)}},8052:function(t,e,n){"use strict";var r=n(614),i=n(3070),s=n(6339),o=n(3072);t.exports=function(t,e,n,a){a||(a={});var c=a.enumerable,u=void 0!==a.name?a.name:e;if(r(n)&&s(n,u,a),a.global)c?t[e]=n:o(e,n);else{try{a.unsafe?t[e]&&(c=!0):delete t[e]}catch(l){}c?t[e]=n:i.f(t,e,{value:n,enumerable:!1,configurable:!a.nonConfigurable,writable:!a.nonWritable})}return t}},3072:function(t,e,n){"use strict";var r=n(7854),i=Object.defineProperty;t.exports=function(t,e){try{i(r,t,{value:e,configurable:!0,writable:!0})}catch(n){r[t]=e}return e}},9781:function(t,e,n){"use strict";var r=n(7293);t.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},4154:function(t){"use strict";var e="object"==typeof document&&document.all,n="undefined"==typeof e&&void 0!==e;t.exports={all:e,IS_HTMLDDA:n}},317:function(t,e,n){"use strict";var r=n(7854),i=n(111),s=r.document,o=i(s)&&i(s.createElement);t.exports=function(t){return o?s.createElement(t):{}}},7207:function(t){"use strict";var e=TypeError,n=9007199254740991;t.exports=function(t){if(t>n)throw e("Maximum allowed index exceeded");return t}},3678:function(t){"use strict";t.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}},8113:function(t){"use strict";t.exports="undefined"!=typeof navigator&&String(navigator.userAgent)||""},7392:function(t,e,n){"use strict";var r,i,s=n(7854),o=n(8113),a=s.process,c=s.Deno,u=a&&a.versions||c&&c.version,l=u&&u.v8;l&&(r=l.split("."),i=r[0]>0&&r[0]<4?1:+(r[0]+r[1])),!i&&o&&(r=o.match(/Edge\/(\d+)/),(!r||r[1]>=74)&&(r=o.match(/Chrome\/(\d+)/),r&&(i=+r[1]))),t.exports=i},748:function(t){"use strict";t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},1060:function(t,e,n){"use strict";var r=n(1702),i=Error,s=r("".replace),o=function(t){return String(i(t).stack)}("zxcasd"),a=/\n\s*at [^:]*:[^\n]*/,c=a.test(o);t.exports=function(t,e){if(c&&"string"==typeof t&&!i.prepareStackTrace)while(e--)t=s(t,a,"");return t}},2109:function(t,e,n){"use strict";var r=n(7854),i=n(1236).f,s=n(8880),o=n(8052),a=n(3072),c=n(9920),u=n(4705);t.exports=function(t,e){var n,l,h,d,f,p,g=t.target,y=t.global,b=t.stat;if(l=y?r:b?r[g]||a(g,{}):(r[g]||{}).prototype,l)for(h in e){if(f=e[h],t.dontCallGetSet?(p=i(l,h),d=p&&p.value):d=l[h],n=u(y?h:g+(b?".":"#")+h,t.forced),!n&&void 0!==d){if(typeof f==typeof d)continue;c(f,d)}(t.sham||d&&d.sham)&&s(f,"sham",!0),o(l,h,f,t)}}},7293:function(t){"use strict";t.exports=function(t){try{return!!t()}catch(e){return!0}}},4374:function(t,e,n){"use strict";var r=n(7293);t.exports=!r((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}))},6916:function(t,e,n){"use strict";var r=n(4374),i=Function.prototype.call;t.exports=r?i.bind(i):function(){return i.apply(i,arguments)}},6530:function(t,e,n){"use strict";var r=n(9781),i=n(2597),s=Function.prototype,o=r&&Object.getOwnPropertyDescriptor,a=i(s,"name"),c=a&&"something"===function(){}.name,u=a&&(!r||r&&o(s,"name").configurable);t.exports={EXISTS:a,PROPER:c,CONFIGURABLE:u}},5668:function(t,e,n){"use strict";var r=n(1702),i=n(9662);t.exports=function(t,e,n){try{return r(i(Object.getOwnPropertyDescriptor(t,e)[n]))}catch(s){}}},1702:function(t,e,n){"use strict";var r=n(4374),i=Function.prototype,s=i.call,o=r&&i.bind.bind(s,s);t.exports=r?o:function(t){return function(){return s.apply(t,arguments)}}},5005:function(t,e,n){"use strict";var r=n(7854),i=n(614),s=function(t){return i(t)?t:void 0};t.exports=function(t,e){return arguments.length<2?s(r[t]):r[t]&&r[t][e]}},8173:function(t,e,n){"use strict";var r=n(9662),i=n(8554);t.exports=function(t,e){var n=t[e];return i(n)?void 0:r(n)}},7854:function(t,e,n){"use strict";var r=function(t){return t&&t.Math==Math&&t};t.exports=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof n.g&&n.g)||function(){return this}()||this||Function("return this")()},2597:function(t,e,n){"use strict";var r=n(1702),i=n(7908),s=r({}.hasOwnProperty);t.exports=Object.hasOwn||function(t,e){return s(i(t),e)}},3501:function(t){"use strict";t.exports={}},4664:function(t,e,n){"use strict";var r=n(9781),i=n(7293),s=n(317);t.exports=!r&&!i((function(){return 7!=Object.defineProperty(s("div"),"a",{get:function(){return 7}}).a}))},8361:function(t,e,n){"use strict";var r=n(1702),i=n(7293),s=n(4326),o=Object,a=r("".split);t.exports=i((function(){return!o("z").propertyIsEnumerable(0)}))?function(t){return"String"==s(t)?a(t,""):o(t)}:o},9587:function(t,e,n){"use strict";var r=n(614),i=n(111),s=n(7674);t.exports=function(t,e,n){var o,a;return s&&r(o=e.constructor)&&o!==n&&i(a=o.prototype)&&a!==n.prototype&&s(t,a),t}},2788:function(t,e,n){"use strict";var r=n(1702),i=n(614),s=n(5465),o=r(Function.toString);i(s.inspectSource)||(s.inspectSource=function(t){return o(t)}),t.exports=s.inspectSource},9909:function(t,e,n){"use strict";var r,i,s,o=n(4811),a=n(7854),c=n(111),u=n(8880),l=n(2597),h=n(5465),d=n(6200),f=n(3501),p="Object already initialized",g=a.TypeError,y=a.WeakMap,b=function(t){return s(t)?i(t):r(t,{})},w=function(t){return function(e){var n;if(!c(e)||(n=i(e)).type!==t)throw g("Incompatible receiver, "+t+" required");return n}};if(o||h.state){var m=h.state||(h.state=new y);m.get=m.get,m.has=m.has,m.set=m.set,r=function(t,e){if(m.has(t))throw g(p);return e.facade=t,m.set(t,e),e},i=function(t){return m.get(t)||{}},s=function(t){return m.has(t)}}else{var v=d("state");f[v]=!0,r=function(t,e){if(l(t,v))throw g(p);return e.facade=t,u(t,v,e),e},i=function(t){return l(t,v)?t[v]:{}},s=function(t){return l(t,v)}}t.exports={set:r,get:i,has:s,enforce:b,getterFor:w}},3157:function(t,e,n){"use strict";var r=n(4326);t.exports=Array.isArray||function(t){return"Array"==r(t)}},4067:function(t,e,n){"use strict";var r=n(648);t.exports=function(t){var e=r(t);return"BigInt64Array"==e||"BigUint64Array"==e}},614:function(t,e,n){"use strict";var r=n(4154),i=r.all;t.exports=r.IS_HTMLDDA?function(t){return"function"==typeof t||t===i}:function(t){return"function"==typeof t}},4705:function(t,e,n){"use strict";var r=n(7293),i=n(614),s=/#|\.prototype\./,o=function(t,e){var n=c[a(t)];return n==l||n!=u&&(i(e)?r(e):!!e)},a=o.normalize=function(t){return String(t).replace(s,".").toLowerCase()},c=o.data={},u=o.NATIVE="N",l=o.POLYFILL="P";t.exports=o},8554:function(t){"use strict";t.exports=function(t){return null===t||void 0===t}},111:function(t,e,n){"use strict";var r=n(614),i=n(4154),s=i.all;t.exports=i.IS_HTMLDDA?function(t){return"object"==typeof t?null!==t:r(t)||t===s}:function(t){return"object"==typeof t?null!==t:r(t)}},1913:function(t){"use strict";t.exports=!1},2190:function(t,e,n){"use strict";var r=n(5005),i=n(614),s=n(7976),o=n(3307),a=Object;t.exports=o?function(t){return"symbol"==typeof t}:function(t){var e=r("Symbol");return i(e)&&s(e.prototype,a(t))}},6244:function(t,e,n){"use strict";var r=n(7466);t.exports=function(t){return r(t.length)}},6339:function(t,e,n){"use strict";var r=n(1702),i=n(7293),s=n(614),o=n(2597),a=n(9781),c=n(6530).CONFIGURABLE,u=n(2788),l=n(9909),h=l.enforce,d=l.get,f=String,p=Object.defineProperty,g=r("".slice),y=r("".replace),b=r([].join),w=a&&!i((function(){return 8!==p((function(){}),"length",{value:8}).length})),m=String(String).split("String"),v=t.exports=function(t,e,n){"Symbol("===g(f(e),0,7)&&(e="["+y(f(e),/^Symbol\(([^)]*)\)/,"$1")+"]"),n&&n.getter&&(e="get "+e),n&&n.setter&&(e="set "+e),(!o(t,"name")||c&&t.name!==e)&&(a?p(t,"name",{value:e,configurable:!0}):t.name=e),w&&n&&o(n,"arity")&&t.length!==n.arity&&p(t,"length",{value:n.arity});try{n&&o(n,"constructor")&&n.constructor?a&&p(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(i){}var r=h(t);return o(r,"source")||(r.source=b(m,"string"==typeof e?e:"")),t};Function.prototype.toString=v((function(){return s(this)&&d(this).source||u(this)}),"toString")},4758:function(t){"use strict";var e=Math.ceil,n=Math.floor;t.exports=Math.trunc||function(t){var r=+t;return(r>0?n:e)(r)}},6277:function(t,e,n){"use strict";var r=n(1340);t.exports=function(t,e){return void 0===t?arguments.length<2?"":e:r(t)}},3070:function(t,e,n){"use strict";var r=n(9781),i=n(4664),s=n(3353),o=n(9670),a=n(4948),c=TypeError,u=Object.defineProperty,l=Object.getOwnPropertyDescriptor,h="enumerable",d="configurable",f="writable";e.f=r?s?function(t,e,n){if(o(t),e=a(e),o(n),"function"===typeof t&&"prototype"===e&&"value"in n&&f in n&&!n[f]){var r=l(t,e);r&&r[f]&&(t[e]=n.value,n={configurable:d in n?n[d]:r[d],enumerable:h in n?n[h]:r[h],writable:!1})}return u(t,e,n)}:u:function(t,e,n){if(o(t),e=a(e),o(n),i)try{return u(t,e,n)}catch(r){}if("get"in n||"set"in n)throw c("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},1236:function(t,e,n){"use strict";var r=n(9781),i=n(6916),s=n(5296),o=n(9114),a=n(5656),c=n(4948),u=n(2597),l=n(4664),h=Object.getOwnPropertyDescriptor;e.f=r?h:function(t,e){if(t=a(t),e=c(e),l)try{return h(t,e)}catch(n){}if(u(t,e))return o(!i(s.f,t,e),t[e])}},8006:function(t,e,n){"use strict";var r=n(6324),i=n(748),s=i.concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,s)}},5181:function(t,e){"use strict";e.f=Object.getOwnPropertySymbols},9518:function(t,e,n){"use strict";var r=n(2597),i=n(614),s=n(7908),o=n(6200),a=n(8544),c=o("IE_PROTO"),u=Object,l=u.prototype;t.exports=a?u.getPrototypeOf:function(t){var e=s(t);if(r(e,c))return e[c];var n=e.constructor;return i(n)&&e instanceof n?n.prototype:e instanceof u?l:null}},7976:function(t,e,n){"use strict";var r=n(1702);t.exports=r({}.isPrototypeOf)},6324:function(t,e,n){"use strict";var r=n(1702),i=n(2597),s=n(5656),o=n(1318).indexOf,a=n(3501),c=r([].push);t.exports=function(t,e){var n,r=s(t),u=0,l=[];for(n in r)!i(a,n)&&i(r,n)&&c(l,n);while(e.length>u)i(r,n=e[u++])&&(~o(l,n)||c(l,n));return l}},5296:function(t,e){"use strict";var n={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,i=r&&!n.call({1:2},1);e.f=i?function(t){var e=r(this,t);return!!e&&e.enumerable}:n},7674:function(t,e,n){"use strict";var r=n(5668),i=n(9670),s=n(6077);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{t=r(Object.prototype,"__proto__","set"),t(n,[]),e=n instanceof Array}catch(o){}return function(n,r){return i(n),s(r),e?t(n,r):n.__proto__=r,n}}():void 0)},2140:function(t,e,n){"use strict";var r=n(6916),i=n(614),s=n(111),o=TypeError;t.exports=function(t,e){var n,a;if("string"===e&&i(n=t.toString)&&!s(a=r(n,t)))return a;if(i(n=t.valueOf)&&!s(a=r(n,t)))return a;if("string"!==e&&i(n=t.toString)&&!s(a=r(n,t)))return a;throw o("Can't convert object to primitive value")}},3887:function(t,e,n){"use strict";var r=n(5005),i=n(1702),s=n(8006),o=n(5181),a=n(9670),c=i([].concat);t.exports=r("Reflect","ownKeys")||function(t){var e=s.f(a(t)),n=o.f;return n?c(e,n(t)):e}},4488:function(t,e,n){"use strict";var r=n(8554),i=TypeError;t.exports=function(t){if(r(t))throw i("Can't call method on "+t);return t}},6200:function(t,e,n){"use strict";var r=n(2309),i=n(9711),s=r("keys");t.exports=function(t){return s[t]||(s[t]=i(t))}},5465:function(t,e,n){"use strict";var r=n(7854),i=n(3072),s="__core-js_shared__",o=r[s]||i(s,{});t.exports=o},2309:function(t,e,n){"use strict";var r=n(1913),i=n(5465);(t.exports=function(t,e){return i[t]||(i[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.32.0",mode:r?"pure":"global",copyright:"© 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.32.0/LICENSE",source:"https://github.com/zloirock/core-js"})},6293:function(t,e,n){"use strict";var r=n(7392),i=n(7293),s=n(7854),o=s.String;t.exports=!!Object.getOwnPropertySymbols&&!i((function(){var t=Symbol();return!o(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&r&&r<41}))},1400:function(t,e,n){"use strict";var r=n(9303),i=Math.max,s=Math.min;t.exports=function(t,e){var n=r(t);return n<0?i(n+e,0):s(n,e)}},4599:function(t,e,n){"use strict";var r=n(7593),i=TypeError;t.exports=function(t){var e=r(t,"number");if("number"==typeof e)throw i("Can't convert number to bigint");return BigInt(e)}},5656:function(t,e,n){"use strict";var r=n(8361),i=n(4488);t.exports=function(t){return r(i(t))}},9303:function(t,e,n){"use strict";var r=n(4758);t.exports=function(t){var e=+t;return e!==e||0===e?0:r(e)}},7466:function(t,e,n){"use strict";var r=n(9303),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},7908:function(t,e,n){"use strict";var r=n(4488),i=Object;t.exports=function(t){return i(r(t))}},7593:function(t,e,n){"use strict";var r=n(6916),i=n(111),s=n(2190),o=n(8173),a=n(2140),c=n(5112),u=TypeError,l=c("toPrimitive");t.exports=function(t,e){if(!i(t)||s(t))return t;var n,c=o(t,l);if(c){if(void 0===e&&(e="default"),n=r(c,t,e),!i(n)||s(n))return n;throw u("Can't convert object to primitive value")}return void 0===e&&(e="number"),a(t,e)}},4948:function(t,e,n){"use strict";var r=n(7593),i=n(2190);t.exports=function(t){var e=r(t,"string");return i(e)?e:e+""}},1694:function(t,e,n){"use strict";var r=n(5112),i=r("toStringTag"),s={};s[i]="z",t.exports="[object z]"===String(s)},1340:function(t,e,n){"use strict";var r=n(648),i=String;t.exports=function(t){if("Symbol"===r(t))throw TypeError("Cannot convert a Symbol value to a string");return i(t)}},6330:function(t){"use strict";var e=String;t.exports=function(t){try{return e(t)}catch(n){return"Object"}}},9711:function(t,e,n){"use strict";var r=n(1702),i=0,s=Math.random(),o=r(1..toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+o(++i+s,36)}},3307:function(t,e,n){"use strict";var r=n(6293);t.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},3353:function(t,e,n){"use strict";var r=n(9781),i=n(7293);t.exports=r&&i((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},8053:function(t){"use strict";var e=TypeError;t.exports=function(t,n){if(t<n)throw e("Not enough arguments");return t}},4811:function(t,e,n){"use strict";var r=n(7854),i=n(614),s=r.WeakMap;t.exports=i(s)&&/native code/.test(String(s))},5112:function(t,e,n){"use strict";var r=n(7854),i=n(2309),s=n(2597),o=n(9711),a=n(6293),c=n(3307),u=r.Symbol,l=i("wks"),h=c?u["for"]||u:u&&u.withoutSetter||o;t.exports=function(t){return s(l,t)||(l[t]=a&&s(u,t)?u[t]:h("Symbol."+t)),l[t]}},7658:function(t,e,n){"use strict";var r=n(2109),i=n(7908),s=n(6244),o=n(3658),a=n(7207),c=n(7293),u=c((function(){return 4294967297!==[].push.call({length:4294967296},1)})),l=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(t){return t instanceof TypeError}},h=u||!l();r({target:"Array",proto:!0,arity:1,forced:h},{push:function(t){var e=i(this),n=s(e),r=arguments.length;a(n+r);for(var c=0;c<r;c++)e[n]=arguments[c],n++;return o(e,n),n}})},1439:function(t,e,n){"use strict";var r=n(1843),i=n(260),s=i.aTypedArray,o=i.exportTypedArrayMethod,a=i.getTypedArrayConstructor;o("toReversed",(function(){return r(s(this),a(this))}))},7585:function(t,e,n){"use strict";var r=n(260),i=n(1702),s=n(9662),o=n(7745),a=r.aTypedArray,c=r.getTypedArrayConstructor,u=r.exportTypedArrayMethod,l=i(r.TypedArrayPrototype.sort);u("toSorted",(function(t){void 0!==t&&s(t);var e=a(this),n=o(c(e),e);return l(n,t)}))},5315:function(t,e,n){"use strict";var r=n(1572),i=n(260),s=n(4067),o=n(9303),a=n(4599),c=i.aTypedArray,u=i.getTypedArrayConstructor,l=i.exportTypedArrayMethod,h=!!function(){try{new Int8Array(1)["with"](2,{valueOf:function(){throw 8}})}catch(t){return 8===t}}();l("with",{with:function(t,e){var n=c(this),i=o(t),l=s(n)?a(e):+e;return r(n,u(n),i,l)}}["with"],!h)},2801:function(t,e,n){"use strict";var r=n(2109),i=n(7854),s=n(5005),o=n(9114),a=n(3070).f,c=n(2597),u=n(5787),l=n(9587),h=n(6277),d=n(3678),f=n(1060),p=n(9781),g=n(1913),y="DOMException",b=s("Error"),w=s(y),m=function(){u(this,v);var t=arguments.length,e=h(t<1?void 0:arguments[0]),n=h(t<2?void 0:arguments[1],"Error"),r=new w(e,n),i=b(e);return i.name=y,a(r,"stack",o(1,f(i.stack,1))),l(r,this,m),r},v=m.prototype=w.prototype,E="stack"in b(y),A="stack"in new w(1,2),x=w&&p&&Object.getOwnPropertyDescriptor(i,y),S=!!x&&!(x.writable&&x.configurable),_=E&&!S&&!A;r({global:!0,constructor:!0,forced:g||_},{DOMException:_?m:w});var I=s(y),R=I.prototype;if(R.constructor!==I)for(var C in g||a(R,"constructor",o(1,I)),d)if(c(d,C)){var k=d[C],L=k.s;c(I,L)||a(I,L,o(6,k.c))}},6229:function(t,e,n){"use strict";var r=n(8052),i=n(1702),s=n(1340),o=n(8053),a=URLSearchParams,c=a.prototype,u=i(c.append),l=i(c["delete"]),h=i(c.forEach),d=i([].push),f=new a("a=1&a=2&b=3");f["delete"]("a",1),f["delete"]("b",void 0),f+""!=="a=2"&&r(c,"delete",(function(t){var e=arguments.length,n=e<2?void 0:arguments[1];if(e&&void 0===n)return l(this,t);var r=[];h(this,(function(t,e){d(r,{key:e,value:t})})),o(e,1);var i,a=s(t),c=s(n),f=0,p=0,g=!1,y=r.length;while(f<y)i=r[f++],g||i.key===a?(g=!0,l(this,i.key)):p++;while(p<y)i=r[p++],i.key===a&&i.value===c||u(this,i.key,i.value)}),{enumerable:!0,unsafe:!0})},7330:function(t,e,n){"use strict";var r=n(8052),i=n(1702),s=n(1340),o=n(8053),a=URLSearchParams,c=a.prototype,u=i(c.getAll),l=i(c.has),h=new a("a=1");!h.has("a",2)&&h.has("a",void 0)||r(c,"has",(function(t){var e=arguments.length,n=e<2?void 0:arguments[1];if(e&&void 0===n)return l(this,t);var r=u(this,t);o(e,1);var i=s(n),a=0;while(a<r.length)if(r[a++]===i)return!0;return!1}),{enumerable:!0,unsafe:!0})},2062:function(t,e,n){"use strict";var r=n(9781),i=n(1702),s=n(7045),o=URLSearchParams.prototype,a=i(o.forEach);r&&!("size"in o)&&s(o,"size",{get:function(){var t=0;return a(this,(function(){t++})),t},configurable:!0,enumerable:!0})},7679:function(t){t.exports=r;var e=128,n=127;function r(t,i){var s,o=0,a=(i=i||0,0),c=i,u=t.length;do{if(c>=u||a>49)throw r.bytes=0,new RangeError("Could not decode varint");s=t[c++],o+=a<28?(s&n)<<a:(s&n)*Math.pow(2,a),a+=7}while(s>=e);return r.bytes=c-i,o}},1880:function(t){t.exports=s;var e=128,n=127,r=~n,i=Math.pow(2,31);function s(t,n,o){if(Number.MAX_SAFE_INTEGER&&t>Number.MAX_SAFE_INTEGER)throw s.bytes=0,new RangeError("Could not encode varint");n=n||[],o=o||0;var a=o;while(t>=i)n[o++]=255&t|e,t/=128;while(t&r)n[o++]=255&t|e,t>>>=7;return n[o]=0|t,s.bytes=o-a+1,n}},3818:function(t,e,n){t.exports={encode:n(1880),decode:n(7679),encodingLength:n(4834)}},4834:function(t){var e=Math.pow(2,7),n=Math.pow(2,14),r=Math.pow(2,21),i=Math.pow(2,28),s=Math.pow(2,35),o=Math.pow(2,42),a=Math.pow(2,49),c=Math.pow(2,56),u=Math.pow(2,63);t.exports=function(t){return t<e?1:t<n?2:t<r?3:t<i?4:t<s?5:t<o?6:t<a?7:t<c?8:t<u?9:10}},781:function(t){t.exports=r;var e=128,n=127;function r(t,i){var s,o=0,a=(i=i||0,0),c=i,u=t.length;do{if(c>=u||a>49)throw r.bytes=0,new RangeError("Could not decode varint");s=t[c++],o+=a<28?(s&n)<<a:(s&n)*Math.pow(2,a),a+=7}while(s>=e);return r.bytes=c-i,o}},7972:function(t){t.exports=s;var e=128,n=127,r=~n,i=Math.pow(2,31);function s(t,n,o){if(Number.MAX_SAFE_INTEGER&&t>Number.MAX_SAFE_INTEGER)throw s.bytes=0,new RangeError("Could not encode varint");n=n||[],o=o||0;var a=o;while(t>=i)n[o++]=255&t|e,t/=128;while(t&r)n[o++]=255&t|e,t>>>=7;return n[o]=0|t,s.bytes=o-a+1,n}},8032:function(t,e,n){t.exports={encode:n(7972),decode:n(781),encodingLength:n(702)}},702:function(t){var e=Math.pow(2,7),n=Math.pow(2,14),r=Math.pow(2,21),i=Math.pow(2,28),s=Math.pow(2,35),o=Math.pow(2,42),a=Math.pow(2,49),c=Math.pow(2,56),u=Math.pow(2,63);t.exports=function(t){return t<e?1:t<n?2:t<r?3:t<i?4:t<s?5:t<o?6:t<a?7:t<c?8:t<u?9:10}},851:function(t){t.exports=r;var e=128,n=127;function r(t,i){var s,o=0,a=(i=i||0,0),c=i,u=t.length;do{if(c>=u||a>49)throw r.bytes=0,new RangeError("Could not decode varint");s=t[c++],o+=a<28?(s&n)<<a:(s&n)*Math.pow(2,a),a+=7}while(s>=e);return r.bytes=c-i,o}},3453:function(t){t.exports=s;var e=128,n=127,r=~n,i=Math.pow(2,31);function s(t,n,o){if(Number.MAX_SAFE_INTEGER&&t>Number.MAX_SAFE_INTEGER)throw s.bytes=0,new RangeError("Could not encode varint");n=n||[],o=o||0;var a=o;while(t>=i)n[o++]=255&t|e,t/=128;while(t&r)n[o++]=255&t|e,t>>>=7;return n[o]=0|t,s.bytes=o-a+1,n}},2982:function(t,e,n){t.exports={encode:n(3453),decode:n(851),encodingLength:n(6219)}},6219:function(t){var e=Math.pow(2,7),n=Math.pow(2,14),r=Math.pow(2,21),i=Math.pow(2,28),s=Math.pow(2,35),o=Math.pow(2,42),a=Math.pow(2,49),c=Math.pow(2,56),u=Math.pow(2,63);t.exports=function(t){return t<e?1:t<n?2:t<r?3:t<i?4:t<s?5:t<o?6:t<a?7:t<c?8:t<u?9:10}},5186:function(t){"use strict";function e(t,e){var n=new Array(arguments.length-1),r=0,i=2,s=!0;while(i<arguments.length)n[r++]=arguments[i++];return new Promise((function(i,o){n[r]=function(t){if(s)if(s=!1,t)o(t);else{var e=new Array(arguments.length-1),n=0;while(n<e.length)e[n++]=arguments[n];i.apply(null,e)}};try{t.apply(e||null,n)}catch(a){s&&(s=!1,o(a))}}))}t.exports=e},8673:function(t,e,n){"use strict";n(7658);var r=e;r.length=function(t){var e=t.length;if(!e)return 0;var n=0;while(--e%4>1&&"="===t.charAt(e))++n;return Math.ceil(3*t.length)/4-n};for(var i=new Array(64),s=new Array(123),o=0;o<64;)s[i[o]=o<26?o+65:o<52?o+71:o<62?o-4:o-59|43]=o++;r.encode=function(t,e,n){var r,s=null,o=[],a=0,c=0;while(e<n){var u=t[e++];switch(c){case 0:o[a++]=i[u>>2],r=(3&u)<<4,c=1;break;case 1:o[a++]=i[r|u>>4],r=(15&u)<<2,c=2;break;case 2:o[a++]=i[r|u>>6],o[a++]=i[63&u],c=0;break}a>8191&&((s||(s=[])).push(String.fromCharCode.apply(String,o)),a=0)}return c&&(o[a++]=i[r],o[a++]=61,1===c&&(o[a++]=61)),s?(a&&s.push(String.fromCharCode.apply(String,o.slice(0,a))),s.join("")):String.fromCharCode.apply(String,o.slice(0,a))};var a="invalid encoding";r.decode=function(t,e,n){for(var r,i=n,o=0,c=0;c<t.length;){var u=t.charCodeAt(c++);if(61===u&&o>1)break;if(void 0===(u=s[u]))throw Error(a);switch(o){case 0:r=u,o=1;break;case 1:e[n++]=r<<2|(48&u)>>4,r=u,o=2;break;case 2:e[n++]=(15&r)<<4|(60&u)>>2,r=u,o=3;break;case 3:e[n++]=(3&r)<<6|u,o=0;break}}if(1===o)throw Error(a);return n-i},r.test=function(t){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(t)}},8825:function(t,e,n){"use strict";function r(){this._listeners={}}n(7658),t.exports=r,r.prototype.on=function(t,e,n){return(this._listeners[t]||(this._listeners[t]=[])).push({fn:e,ctx:n||this}),this},r.prototype.off=function(t,e){if(void 0===t)this._listeners={};else if(void 0===e)this._listeners[t]=[];else for(var n=this._listeners[t],r=0;r<n.length;)n[r].fn===e?n.splice(r,1):++r;return this},r.prototype.emit=function(t){var e=this._listeners[t];if(e){for(var n=[],r=1;r<arguments.length;)n.push(arguments[r++]);for(r=0;r<e.length;)e[r].fn.apply(e[r++].ctx,n)}return this}},2913:function(t,e,n){"use strict";function r(t){return"undefined"!==typeof Float32Array?function(){var e=new Float32Array([-0]),n=new Uint8Array(e.buffer),r=128===n[3];function i(t,r,i){e[0]=t,r[i]=n[0],r[i+1]=n[1],r[i+2]=n[2],r[i+3]=n[3]}function s(t,r,i){e[0]=t,r[i]=n[3],r[i+1]=n[2],r[i+2]=n[1],r[i+3]=n[0]}function o(t,r){return n[0]=t[r],n[1]=t[r+1],n[2]=t[r+2],n[3]=t[r+3],e[0]}function a(t,r){return n[3]=t[r],n[2]=t[r+1],n[1]=t[r+2],n[0]=t[r+3],e[0]}t.writeFloatLE=r?i:s,t.writeFloatBE=r?s:i,t.readFloatLE=r?o:a,t.readFloatBE=r?a:o}():function(){function e(t,e,n,r){var i=e<0?1:0;if(i&&(e=-e),0===e)t(1/e>0?0:2147483648,n,r);else if(isNaN(e))t(2143289344,n,r);else if(e>34028234663852886e22)t((i<<31|2139095040)>>>0,n,r);else if(e<11754943508222875e-54)t((i<<31|Math.round(e/1401298464324817e-60))>>>0,n,r);else{var s=Math.floor(Math.log(e)/Math.LN2),o=8388607&Math.round(e*Math.pow(2,-s)*8388608);t((i<<31|s+127<<23|o)>>>0,n,r)}}function n(t,e,n){var r=t(e,n),i=2*(r>>31)+1,s=r>>>23&255,o=8388607&r;return 255===s?o?NaN:i*(1/0):0===s?1401298464324817e-60*i*o:i*Math.pow(2,s-150)*(o+8388608)}t.writeFloatLE=e.bind(null,i),t.writeFloatBE=e.bind(null,s),t.readFloatLE=n.bind(null,o),t.readFloatBE=n.bind(null,a)}(),"undefined"!==typeof Float64Array?function(){var e=new Float64Array([-0]),n=new Uint8Array(e.buffer),r=128===n[7];function i(t,r,i){e[0]=t,r[i]=n[0],r[i+1]=n[1],r[i+2]=n[2],r[i+3]=n[3],r[i+4]=n[4],r[i+5]=n[5],r[i+6]=n[6],r[i+7]=n[7]}function s(t,r,i){e[0]=t,r[i]=n[7],r[i+1]=n[6],r[i+2]=n[5],r[i+3]=n[4],r[i+4]=n[3],r[i+5]=n[2],r[i+6]=n[1],r[i+7]=n[0]}function o(t,r){return n[0]=t[r],n[1]=t[r+1],n[2]=t[r+2],n[3]=t[r+3],n[4]=t[r+4],n[5]=t[r+5],n[6]=t[r+6],n[7]=t[r+7],e[0]}function a(t,r){return n[7]=t[r],n[6]=t[r+1],n[5]=t[r+2],n[4]=t[r+3],n[3]=t[r+4],n[2]=t[r+5],n[1]=t[r+6],n[0]=t[r+7],e[0]}t.writeDoubleLE=r?i:s,t.writeDoubleBE=r?s:i,t.readDoubleLE=r?o:a,t.readDoubleBE=r?a:o}():function(){function e(t,e,n,r,i,s){var o=r<0?1:0;if(o&&(r=-r),0===r)t(0,i,s+e),t(1/r>0?0:2147483648,i,s+n);else if(isNaN(r))t(0,i,s+e),t(2146959360,i,s+n);else if(r>17976931348623157e292)t(0,i,s+e),t((o<<31|2146435072)>>>0,i,s+n);else{var a;if(r<22250738585072014e-324)a=r/5e-324,t(a>>>0,i,s+e),t((o<<31|a/4294967296)>>>0,i,s+n);else{var c=Math.floor(Math.log(r)/Math.LN2);1024===c&&(c=1023),a=r*Math.pow(2,-c),t(4503599627370496*a>>>0,i,s+e),t((o<<31|c+1023<<20|1048576*a&1048575)>>>0,i,s+n)}}}function n(t,e,n,r,i){var s=t(r,i+e),o=t(r,i+n),a=2*(o>>31)+1,c=o>>>20&2047,u=4294967296*(1048575&o)+s;return 2047===c?u?NaN:a*(1/0):0===c?5e-324*a*u:a*Math.pow(2,c-1075)*(u+4503599627370496)}t.writeDoubleLE=e.bind(null,i,0,4),t.writeDoubleBE=e.bind(null,s,4,0),t.readDoubleLE=n.bind(null,o,0,4),t.readDoubleBE=n.bind(null,a,4,0)}(),t}function i(t,e,n){e[n]=255&t,e[n+1]=t>>>8&255,e[n+2]=t>>>16&255,e[n+3]=t>>>24}function s(t,e,n){e[n]=t>>>24,e[n+1]=t>>>16&255,e[n+2]=t>>>8&255,e[n+3]=255&t}function o(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0}function a(t,e){return(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}n(1439),n(7585),n(5315),t.exports=r(r)},6332:function(module){"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}module.exports=inquire},1168:function(t){"use strict";function e(t,e,n){var r=n||8192,i=r>>>1,s=null,o=r;return function(n){if(n<1||n>i)return t(n);o+n>r&&(s=t(r),o=0);var a=e.call(s,o,o+=n);return 7&o&&(o=1+(7|o)),a}}t.exports=e},9561:function(t,e,n){"use strict";n(7658);var r=e;r.length=function(t){for(var e=0,n=0,r=0;r<t.length;++r)n=t.charCodeAt(r),n<128?e+=1:n<2048?e+=2:55296===(64512&n)&&56320===(64512&t.charCodeAt(r+1))?(++r,e+=4):e+=3;return e},r.read=function(t,e,n){var r=n-e;if(r<1)return"";var i,s=null,o=[],a=0;while(e<n)i=t[e++],i<128?o[a++]=i:i>191&&i<224?o[a++]=(31&i)<<6|63&t[e++]:i>239&&i<365?(i=((7&i)<<18|(63&t[e++])<<12|(63&t[e++])<<6|63&t[e++])-65536,o[a++]=55296+(i>>10),o[a++]=56320+(1023&i)):o[a++]=(15&i)<<12|(63&t[e++])<<6|63&t[e++],a>8191&&((s||(s=[])).push(String.fromCharCode.apply(String,o)),a=0);return s?(a&&s.push(String.fromCharCode.apply(String,o.slice(0,a))),s.join("")):String.fromCharCode.apply(String,o.slice(0,a))},r.write=function(t,e,n){for(var r,i,s=n,o=0;o<t.length;++o)r=t.charCodeAt(o),r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=63&r|128):55296===(64512&r)&&56320===(64512&(i=t.charCodeAt(o+1)))?(r=65536+((1023&r)<<10)+(1023&i),++o,e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=63&r|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=63&r|128);return n-s}},4870:function(t,e,n){"use strict";n.d(e,{Bj:function(){return s},Fl:function(){return jt},IU:function(){return Lt},Jd:function(){return S},PG:function(){return It},Um:function(){return xt},WL:function(){return Ht},X$:function(){return C},X3:function(){return kt},Xl:function(){return Tt},dq:function(){return Ut},iH:function(){return Pt},j:function(){return I},lk:function(){return _},nZ:function(){return a},qj:function(){return At},qq:function(){return v},yT:function(){return Ct}});n(7658);var r=n(7139);let i;class s{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=i,!t&&i&&(this.index=(i.scopes||(i.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const e=i;try{return i=this,t()}finally{i=e}}else 0}on(){i=this}off(){i=this.parent}stop(t){if(this._active){let e,n;for(e=0,n=this.effects.length;e<n;e++)this.effects[e].stop();for(e=0,n=this.cleanups.length;e<n;e++)this.cleanups[e]();if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].stop(!0);if(!this.detached&&this.parent&&!t){const t=this.parent.scopes.pop();t&&t!==this&&(this.parent.scopes[this.index]=t,t.index=this.index)}this.parent=void 0,this._active=!1}}}function o(t,e=i){e&&e.active&&e.effects.push(t)}function a(){return i}const c=t=>{const e=new Set(t);return e.w=0,e.n=0,e},u=t=>(t.w&g)>0,l=t=>(t.n&g)>0,h=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=g},d=t=>{const{deps:e}=t;if(e.length){let n=0;for(let r=0;r<e.length;r++){const i=e[r];u(i)&&!l(i)?i.delete(t):e[n++]=i,i.w&=~g,i.n&=~g}e.length=n}},f=new WeakMap;let p=0,g=1;const y=30;let b;const w=Symbol(""),m=Symbol("");class v{constructor(t,e=null,n){this.fn=t,this.scheduler=e,this.active=!0,this.deps=[],this.parent=void 0,o(this,n)}run(){if(!this.active)return this.fn();let t=b,e=A;while(t){if(t===this)return;t=t.parent}try{return this.parent=b,b=this,A=!0,g=1<<++p,p<=y?h(this):E(this),this.fn()}finally{p<=y&&d(this),g=1<<--p,b=this.parent,A=e,this.parent=void 0,this.deferStop&&this.stop()}}stop(){b===this?this.deferStop=!0:this.active&&(E(this),this.onStop&&this.onStop(),this.active=!1)}}function E(t){const{deps:e}=t;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(t);e.length=0}}let A=!0;const x=[];function S(){x.push(A),A=!1}function _(){const t=x.pop();A=void 0===t||t}function I(t,e,n){if(A&&b){let e=f.get(t);e||f.set(t,e=new Map);let r=e.get(n);r||e.set(n,r=c());const i=void 0;R(r,i)}}function R(t,e){let n=!1;p<=y?l(t)||(t.n|=g,n=!u(t)):n=!t.has(b),n&&(t.add(b),b.deps.push(t))}function C(t,e,n,i,s,o){const a=f.get(t);if(!a)return;let u=[];if("clear"===e)u=[...a.values()];else if("length"===n&&(0,r.kJ)(t)){const t=Number(i);a.forEach(((e,n)=>{("length"===n||n>=t)&&u.push(e)}))}else switch(void 0!==n&&u.push(a.get(n)),e){case"add":(0,r.kJ)(t)?(0,r.S0)(n)&&u.push(a.get("length")):(u.push(a.get(w)),(0,r._N)(t)&&u.push(a.get(m)));break;case"delete":(0,r.kJ)(t)||(u.push(a.get(w)),(0,r._N)(t)&&u.push(a.get(m)));break;case"set":(0,r._N)(t)&&u.push(a.get(w));break}if(1===u.length)u[0]&&k(u[0]);else{const t=[];for(const e of u)e&&t.push(...e);k(c(t))}}function k(t,e){const n=(0,r.kJ)(t)?t:[...t];for(const r of n)r.computed&&L(r,e);for(const r of n)r.computed||L(r,e)}function L(t,e){(t!==b||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}const T=(0,r.fY)("__proto__,__v_isRef,__isVue"),B=new Set(Object.getOwnPropertyNames(Symbol).filter((t=>"arguments"!==t&&"caller"!==t)).map((t=>Symbol[t])).filter(r.yk)),O=Z(),N=Z(!1,!0),D=Z(!0),U=P();function P(){const t={};return["includes","indexOf","lastIndexOf"].forEach((e=>{t[e]=function(...t){const n=Lt(this);for(let e=0,i=this.length;e<i;e++)I(n,"get",e+"");const r=n[e](...t);return-1===r||!1===r?n[e](...t.map(Lt)):r}})),["push","pop","shift","unshift","splice"].forEach((e=>{t[e]=function(...t){S();const n=Lt(this)[e].apply(this,t);return _(),n}})),t}function M(t){const e=Lt(this);return I(e,"has",t),e.hasOwnProperty(t)}function Z(t=!1,e=!1){return function(n,i,s){if("__v_isReactive"===i)return!t;if("__v_isReadonly"===i)return t;if("__v_isShallow"===i)return e;if("__v_raw"===i&&s===(t?e?mt:wt:e?bt:yt).get(n))return n;const o=(0,r.kJ)(n);if(!t){if(o&&(0,r.RI)(U,i))return Reflect.get(U,i,s);if("hasOwnProperty"===i)return M}const a=Reflect.get(n,i,s);return((0,r.yk)(i)?B.has(i):T(i))?a:(t||I(n,"get",i),e?a:Ut(a)?o&&(0,r.S0)(i)?a:a.value:(0,r.Kn)(a)?t?St(a):At(a):a)}}const F=H(),V=H(!0);function H(t=!1){return function(e,n,i,s){let o=e[n];if(Rt(o)&&Ut(o)&&!Ut(i))return!1;if(!t&&(Ct(i)||Rt(i)||(o=Lt(o),i=Lt(i)),!(0,r.kJ)(e)&&Ut(o)&&!Ut(i)))return o.value=i,!0;const a=(0,r.kJ)(e)&&(0,r.S0)(n)?Number(n)<e.length:(0,r.RI)(e,n),c=Reflect.set(e,n,i,s);return e===Lt(s)&&(a?(0,r.aU)(i,o)&&C(e,"set",n,i,o):C(e,"add",n,i)),c}}function $(t,e){const n=(0,r.RI)(t,e),i=t[e],s=Reflect.deleteProperty(t,e);return s&&n&&C(t,"delete",e,void 0,i),s}function j(t,e){const n=Reflect.has(t,e);return(0,r.yk)(e)&&B.has(e)||I(t,"has",e),n}function K(t){return I(t,"iterate",(0,r.kJ)(t)?"length":w),Reflect.ownKeys(t)}const z={get:O,set:F,deleteProperty:$,has:j,ownKeys:K},q={get:D,set(t,e){return!0},deleteProperty(t,e){return!0}},G=(0,r.l7)({},z,{get:N,set:V}),W=t=>t,J=t=>Reflect.getPrototypeOf(t);function Y(t,e,n=!1,r=!1){t=t["__v_raw"];const i=Lt(t),s=Lt(e);n||(e!==s&&I(i,"get",e),I(i,"get",s));const{has:o}=J(i),a=r?W:n?Ot:Bt;return o.call(i,e)?a(t.get(e)):o.call(i,s)?a(t.get(s)):void(t!==i&&t.get(e))}function Q(t,e=!1){const n=this["__v_raw"],r=Lt(n),i=Lt(t);return e||(t!==i&&I(r,"has",t),I(r,"has",i)),t===i?n.has(t):n.has(t)||n.has(i)}function X(t,e=!1){return t=t["__v_raw"],!e&&I(Lt(t),"iterate",w),Reflect.get(t,"size",t)}function tt(t){t=Lt(t);const e=Lt(this),n=J(e),r=n.has.call(e,t);return r||(e.add(t),C(e,"add",t,t)),this}function et(t,e){e=Lt(e);const n=Lt(this),{has:i,get:s}=J(n);let o=i.call(n,t);o||(t=Lt(t),o=i.call(n,t));const a=s.call(n,t);return n.set(t,e),o?(0,r.aU)(e,a)&&C(n,"set",t,e,a):C(n,"add",t,e),this}function nt(t){const e=Lt(this),{has:n,get:r}=J(e);let i=n.call(e,t);i||(t=Lt(t),i=n.call(e,t));const s=r?r.call(e,t):void 0,o=e.delete(t);return i&&C(e,"delete",t,void 0,s),o}function rt(){const t=Lt(this),e=0!==t.size,n=void 0,r=t.clear();return e&&C(t,"clear",void 0,void 0,n),r}function it(t,e){return function(n,r){const i=this,s=i["__v_raw"],o=Lt(s),a=e?W:t?Ot:Bt;return!t&&I(o,"iterate",w),s.forEach(((t,e)=>n.call(r,a(t),a(e),i)))}}function st(t,e,n){return function(...i){const s=this["__v_raw"],o=Lt(s),a=(0,r._N)(o),c="entries"===t||t===Symbol.iterator&&a,u="keys"===t&&a,l=s[t](...i),h=n?W:e?Ot:Bt;return!e&&I(o,"iterate",u?m:w),{next(){const{value:t,done:e}=l.next();return e?{value:t,done:e}:{value:c?[h(t[0]),h(t[1])]:h(t),done:e}},[Symbol.iterator](){return this}}}}function ot(t){return function(...e){return"delete"!==t&&this}}function at(){const t={get(t){return Y(this,t)},get size(){return X(this)},has:Q,add:tt,set:et,delete:nt,clear:rt,forEach:it(!1,!1)},e={get(t){return Y(this,t,!1,!0)},get size(){return X(this)},has:Q,add:tt,set:et,delete:nt,clear:rt,forEach:it(!1,!0)},n={get(t){return Y(this,t,!0)},get size(){return X(this,!0)},has(t){return Q.call(this,t,!0)},add:ot("add"),set:ot("set"),delete:ot("delete"),clear:ot("clear"),forEach:it(!0,!1)},r={get(t){return Y(this,t,!0,!0)},get size(){return X(this,!0)},has(t){return Q.call(this,t,!0)},add:ot("add"),set:ot("set"),delete:ot("delete"),clear:ot("clear"),forEach:it(!0,!0)},i=["keys","values","entries",Symbol.iterator];return i.forEach((i=>{t[i]=st(i,!1,!1),n[i]=st(i,!0,!1),e[i]=st(i,!1,!0),r[i]=st(i,!0,!0)})),[t,n,e,r]}const[ct,ut,lt,ht]=at();function dt(t,e){const n=e?t?ht:lt:t?ut:ct;return(e,i,s)=>"__v_isReactive"===i?!t:"__v_isReadonly"===i?t:"__v_raw"===i?e:Reflect.get((0,r.RI)(n,i)&&i in e?n:e,i,s)}const ft={get:dt(!1,!1)},pt={get:dt(!1,!0)},gt={get:dt(!0,!1)};const yt=new WeakMap,bt=new WeakMap,wt=new WeakMap,mt=new WeakMap;function vt(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Et(t){return t["__v_skip"]||!Object.isExtensible(t)?0:vt((0,r.W7)(t))}function At(t){return Rt(t)?t:_t(t,!1,z,ft,yt)}function xt(t){return _t(t,!1,G,pt,bt)}function St(t){return _t(t,!0,q,gt,wt)}function _t(t,e,n,i,s){if(!(0,r.Kn)(t))return t;if(t["__v_raw"]&&(!e||!t["__v_isReactive"]))return t;const o=s.get(t);if(o)return o;const a=Et(t);if(0===a)return t;const c=new Proxy(t,2===a?i:n);return s.set(t,c),c}function It(t){return Rt(t)?It(t["__v_raw"]):!(!t||!t["__v_isReactive"])}function Rt(t){return!(!t||!t["__v_isReadonly"])}function Ct(t){return!(!t||!t["__v_isShallow"])}function kt(t){return It(t)||Rt(t)}function Lt(t){const e=t&&t["__v_raw"];return e?Lt(e):t}function Tt(t){return(0,r.Nj)(t,"__v_skip",!0),t}const Bt=t=>(0,r.Kn)(t)?At(t):t,Ot=t=>(0,r.Kn)(t)?St(t):t;function Nt(t){A&&b&&(t=Lt(t),R(t.dep||(t.dep=c())))}function Dt(t,e){t=Lt(t);const n=t.dep;n&&k(n)}function Ut(t){return!(!t||!0!==t.__v_isRef)}function Pt(t){return Mt(t,!1)}function Mt(t,e){return Ut(t)?t:new Zt(t,e)}class Zt{constructor(t,e){this.__v_isShallow=e,this.dep=void 0,this.__v_isRef=!0,this._rawValue=e?t:Lt(t),this._value=e?t:Bt(t)}get value(){return Nt(this),this._value}set value(t){const e=this.__v_isShallow||Ct(t)||Rt(t);t=e?t:Lt(t),(0,r.aU)(t,this._rawValue)&&(this._rawValue=t,this._value=e?t:Bt(t),Dt(this,t))}}function Ft(t){return Ut(t)?t.value:t}const Vt={get:(t,e,n)=>Ft(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const i=t[e];return Ut(i)&&!Ut(n)?(i.value=n,!0):Reflect.set(t,e,n,r)}};function Ht(t){return It(t)?t:new Proxy(t,Vt)}class $t{constructor(t,e,n,r){this._setter=e,this.dep=void 0,this.__v_isRef=!0,this["__v_isReadonly"]=!1,this._dirty=!0,this.effect=new v(t,(()=>{this._dirty||(this._dirty=!0,Dt(this))})),this.effect.computed=this,this.effect.active=this._cacheable=!r,this["__v_isReadonly"]=n}get value(){const t=Lt(this);return Nt(t),!t._dirty&&t._cacheable||(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function jt(t,e,n=!1){let i,s;const o=(0,r.mf)(t);o?(i=t,s=r.dG):(i=t.get,s=t.set);const a=new $t(i,s,o||!s,n);return a}},3396:function(t,e,n){"use strict";n.d(e,{$d:function(){return o},FN:function(){return ln},Fl:function(){return kn},HY:function(){return ke},Ko:function(){return Tt},P$:function(){return nt},Q6:function(){return ct},U2:function(){return it},Uk:function(){return Qe},Us:function(){return xe},Wm:function(){return Ge},Y8:function(){return Q},_:function(){return qe},h:function(){return Ln},iD:function(){return Fe},ic:function(){return xt},kq:function(){return Xe},nJ:function(){return tt},nK:function(){return at},wg:function(){return De},wy:function(){return J}});n(7658);var r=n(4870),i=n(7139);function s(t,e,n,r){let i;try{i=r?t(...r):t()}catch(s){a(s,e,n)}return i}function o(t,e,n,r){if((0,i.mf)(t)){const o=s(t,e,n,r);return o&&(0,i.tI)(o)&&o.catch((t=>{a(t,e,n)})),o}const c=[];for(let i=0;i<t.length;i++)c.push(o(t[i],e,n,r));return c}function a(t,e,n,r=!0){const i=e?e.vnode:null;if(e){let r=e.parent;const i=e.proxy,o=n;while(r){const e=r.ec;if(e)for(let n=0;n<e.length;n++)if(!1===e[n](t,i,o))return;r=r.parent}const a=e.appContext.config.errorHandler;if(a)return void s(a,null,10,[t,i,o])}c(t,n,i,r)}function c(t,e,n,r=!0){console.error(t)}let u=!1,l=!1;const h=[];let d=0;const f=[];let p=null,g=0;const y=Promise.resolve();let b=null;function w(t){const e=b||y;return t?e.then(this?t.bind(this):t):e}function m(t){let e=d+1,n=h.length;while(e<n){const r=e+n>>>1,i=I(h[r]);i<t?e=r+1:n=r}return e}function v(t){h.length&&h.includes(t,u&&t.allowRecurse?d+1:d)||(null==t.id?h.push(t):h.splice(m(t.id),0,t),E())}function E(){u||l||(l=!0,b=y.then(C))}function A(t){const e=h.indexOf(t);e>d&&h.splice(e,1)}function x(t){(0,i.kJ)(t)?f.push(...t):p&&p.includes(t,t.allowRecurse?g+1:g)||f.push(t),E()}function S(t,e=(u?d+1:0)){for(0;e<h.length;e++){const t=h[e];t&&t.pre&&(h.splice(e,1),e--,t())}}function _(t){if(f.length){const t=[...new Set(f)];if(f.length=0,p)return void p.push(...t);for(p=t,p.sort(((t,e)=>I(t)-I(e))),g=0;g<p.length;g++)p[g]();p=null,g=0}}const I=t=>null==t.id?1/0:t.id,R=(t,e)=>{const n=I(t)-I(e);if(0===n){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return n};function C(t){l=!1,u=!0,h.sort(R);i.dG;try{for(d=0;d<h.length;d++){const t=h[d];t&&!1!==t.active&&s(t,null,14)}}finally{d=0,h.length=0,_(t),u=!1,b=null,(h.length||f.length)&&C(t)}}function k(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||i.kT;let s=n;const a=e.startsWith("update:"),c=a&&e.slice(7);if(c&&c in r){const t=`${"modelValue"===c?"model":c}Modifiers`,{number:e,trim:o}=r[t]||i.kT;o&&(s=n.map((t=>(0,i.HD)(t)?t.trim():t))),e&&(s=n.map(i.h5))}let u;let l=r[u=(0,i.hR)(e)]||r[u=(0,i.hR)((0,i._A)(e))];!l&&a&&(l=r[u=(0,i.hR)((0,i.rs)(e))]),l&&o(l,t,6,s);const h=r[u+"Once"];if(h){if(t.emitted){if(t.emitted[u])return}else t.emitted={};t.emitted[u]=!0,o(h,t,6,s)}}function L(t,e,n=!1){const r=e.emitsCache,s=r.get(t);if(void 0!==s)return s;const o=t.emits;let a={},c=!1;if(!(0,i.mf)(t)){const r=t=>{const n=L(t,e,!0);n&&(c=!0,(0,i.l7)(a,n))};!n&&e.mixins.length&&e.mixins.forEach(r),t.extends&&r(t.extends),t.mixins&&t.mixins.forEach(r)}return o||c?((0,i.kJ)(o)?o.forEach((t=>a[t]=null)):(0,i.l7)(a,o),(0,i.Kn)(t)&&r.set(t,a),a):((0,i.Kn)(t)&&r.set(t,null),null)}function T(t,e){return!(!t||!(0,i.F7)(e))&&(e=e.slice(2).replace(/Once$/,""),(0,i.RI)(t,e[0].toLowerCase()+e.slice(1))||(0,i.RI)(t,(0,i.rs)(e))||(0,i.RI)(t,e))}let B=null,O=null;function N(t){const e=B;return B=t,O=t&&t.type.__scopeId||null,e}function D(t,e=B,n){if(!e)return t;if(t._n)return t;const r=(...n)=>{r._d&&Me(-1);const i=N(e);let s;try{s=t(...n)}finally{N(i),r._d&&Me(1)}return s};return r._n=!0,r._c=!0,r._d=!0,r}function U(t){const{type:e,vnode:n,proxy:r,withProxy:s,props:o,propsOptions:[c],slots:u,attrs:l,emit:h,render:d,renderCache:f,data:p,setupState:g,ctx:y,inheritAttrs:b}=t;let w,m;const v=N(t);try{if(4&n.shapeFlag){const t=s||r;w=tn(d.call(t,t,f,o,g,p,y)),m=l}else{const t=e;0,w=tn(t.length>1?t(o,{attrs:l,slots:u,emit:h}):t(o,null)),m=e.props?l:P(l)}}catch(A){Oe.length=0,a(A,t,1),w=Ge(Te)}let E=w;if(m&&!1!==b){const t=Object.keys(m),{shapeFlag:e}=E;t.length&&7&e&&(c&&t.some(i.tR)&&(m=M(m,c)),E=Ye(E,m))}return n.dirs&&(E=Ye(E),E.dirs=E.dirs?E.dirs.concat(n.dirs):n.dirs),n.transition&&(E.transition=n.transition),w=E,N(v),w}const P=t=>{let e;for(const n in t)("class"===n||"style"===n||(0,i.F7)(n))&&((e||(e={}))[n]=t[n]);return e},M=(t,e)=>{const n={};for(const r in t)(0,i.tR)(r)&&r.slice(9)in e||(n[r]=t[r]);return n};function Z(t,e,n){const{props:r,children:i,component:s}=t,{props:o,children:a,patchFlag:c}=e,u=s.emitsOptions;if(e.dirs||e.transition)return!0;if(!(n&&c>=0))return!(!i&&!a||a&&a.$stable)||r!==o&&(r?!o||F(r,o,u):!!o);if(1024&c)return!0;if(16&c)return r?F(r,o,u):!!o;if(8&c){const t=e.dynamicProps;for(let e=0;e<t.length;e++){const n=t[e];if(o[n]!==r[n]&&!T(u,n))return!0}}return!1}function F(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let i=0;i<r.length;i++){const s=r[i];if(e[s]!==t[s]&&!T(n,s))return!0}return!1}function V({vnode:t,parent:e},n){while(e&&e.subTree===t)(t=e.vnode).el=n,e=e.parent}const H=t=>t.__isSuspense;function $(t,e){e&&e.pendingBranch?(0,i.kJ)(t)?e.effects.push(...t):e.effects.push(t):x(t)}const j={};function K(t,e,n){return z(t,e,n)}function z(t,e,{immediate:n,deep:a,flush:c,onTrack:u,onTrigger:l}=i.kT){var h;const d=(0,r.nZ)()===(null==(h=un)?void 0:h.scope)?un:null;let f,p,g=!1,y=!1;if((0,r.dq)(t)?(f=()=>t.value,g=(0,r.yT)(t)):(0,r.PG)(t)?(f=()=>t,a=!0):(0,i.kJ)(t)?(y=!0,g=t.some((t=>(0,r.PG)(t)||(0,r.yT)(t))),f=()=>t.map((t=>(0,r.dq)(t)?t.value:(0,r.PG)(t)?W(t):(0,i.mf)(t)?s(t,d,2):void 0))):f=(0,i.mf)(t)?e?()=>s(t,d,2):()=>{if(!d||!d.isUnmounted)return p&&p(),o(t,d,3,[w])}:i.dG,e&&a){const t=f;f=()=>W(t())}let b,w=t=>{p=x.onStop=()=>{s(t,d,4)}};if(mn){if(w=i.dG,e?n&&o(e,d,3,[f(),y?[]:void 0,w]):f(),"sync"!==c)return i.dG;{const t=Bn();b=t.__watcherHandles||(t.__watcherHandles=[])}}let m=y?new Array(t.length).fill(j):j;const E=()=>{if(x.active)if(e){const t=x.run();(a||g||(y?t.some(((t,e)=>(0,i.aU)(t,m[e]))):(0,i.aU)(t,m)))&&(p&&p(),o(e,d,3,[t,m===j?void 0:y&&m[0]===j?[]:m,w]),m=t)}else x.run()};let A;E.allowRecurse=!!e,"sync"===c?A=E:"post"===c?A=()=>Ae(E,d&&d.suspense):(E.pre=!0,d&&(E.id=d.uid),A=()=>v(E));const x=new r.qq(f,A);e?n?E():m=x.run():"post"===c?Ae(x.run.bind(x),d&&d.suspense):x.run();const S=()=>{x.stop(),d&&d.scope&&(0,i.Od)(d.scope.effects,x)};return b&&b.push(S),S}function q(t,e,n){const r=this.proxy,s=(0,i.HD)(t)?t.includes(".")?G(r,t):()=>r[t]:t.bind(r,r);let o;(0,i.mf)(e)?o=e:(o=e.handler,n=e);const a=un;pn(this);const c=z(s,o.bind(r),n);return a?pn(a):gn(),c}function G(t,e){const n=e.split(".");return()=>{let e=t;for(let t=0;t<n.length&&e;t++)e=e[n[t]];return e}}function W(t,e){if(!(0,i.Kn)(t)||t["__v_skip"])return t;if(e=e||new Set,e.has(t))return t;if(e.add(t),(0,r.dq)(t))W(t.value,e);else if((0,i.kJ)(t))for(let n=0;n<t.length;n++)W(t[n],e);else if((0,i.DM)(t)||(0,i._N)(t))t.forEach((t=>{W(t,e)}));else if((0,i.PO)(t))for(const n in t)W(t[n],e);return t}function J(t,e){const n=B;if(null===n)return t;const r=In(n)||n.proxy,s=t.dirs||(t.dirs=[]);for(let o=0;o<e.length;o++){let[t,n,a,c=i.kT]=e[o];t&&((0,i.mf)(t)&&(t={mounted:t,updated:t}),t.deep&&W(n),s.push({dir:t,instance:r,value:n,oldValue:void 0,arg:a,modifiers:c}))}return t}function Y(t,e,n,i){const s=t.dirs,a=e&&e.dirs;for(let c=0;c<s.length;c++){const u=s[c];a&&(u.oldValue=a[c].value);let l=u.dir[i];l&&((0,r.Jd)(),o(l,n,8,[t.el,u,t,e]),(0,r.lk)())}}function Q(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Et((()=>{t.isMounted=!0})),St((()=>{t.isUnmounting=!0})),t}const X=[Function,Array],tt={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:X,onEnter:X,onAfterEnter:X,onEnterCancelled:X,onBeforeLeave:X,onLeave:X,onAfterLeave:X,onLeaveCancelled:X,onBeforeAppear:X,onAppear:X,onAfterAppear:X,onAppearCancelled:X},et={name:"BaseTransition",props:tt,setup(t,{slots:e}){const n=ln(),i=Q();let s;return()=>{const o=e.default&&ct(e.default(),!0);if(!o||!o.length)return;let a=o[0];if(o.length>1){let t=!1;for(const e of o)if(e.type!==Te){0,a=e,t=!0;break}}const c=(0,r.IU)(t),{mode:u}=c;if(i.isLeaving)return st(a);const l=ot(a);if(!l)return st(a);const h=it(l,c,i,n);at(l,h);const d=n.subTree,f=d&&ot(d);let p=!1;const{getTransitionKey:g}=l.type;if(g){const t=g();void 0===s?s=t:t!==s&&(s=t,p=!0)}if(f&&f.type!==Te&&(!$e(l,f)||p)){const t=it(f,c,i,n);if(at(f,t),"out-in"===u)return i.isLeaving=!0,t.afterLeave=()=>{i.isLeaving=!1,!1!==n.update.active&&n.update()},st(a);"in-out"===u&&l.type!==Te&&(t.delayLeave=(t,e,n)=>{const r=rt(i,f);r[String(f.key)]=f,t._leaveCb=()=>{e(),t._leaveCb=void 0,delete h.delayedLeave},h.delayedLeave=n})}return a}}},nt=et;function rt(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function it(t,e,n,r){const{appear:s,mode:a,persisted:c=!1,onBeforeEnter:u,onEnter:l,onAfterEnter:h,onEnterCancelled:d,onBeforeLeave:f,onLeave:p,onAfterLeave:g,onLeaveCancelled:y,onBeforeAppear:b,onAppear:w,onAfterAppear:m,onAppearCancelled:v}=e,E=String(t.key),A=rt(n,t),x=(t,e)=>{t&&o(t,r,9,e)},S=(t,e)=>{const n=e[1];x(t,e),(0,i.kJ)(t)?t.every((t=>t.length<=1))&&n():t.length<=1&&n()},_={mode:a,persisted:c,beforeEnter(e){let r=u;if(!n.isMounted){if(!s)return;r=b||u}e._leaveCb&&e._leaveCb(!0);const i=A[E];i&&$e(t,i)&&i.el._leaveCb&&i.el._leaveCb(),x(r,[e])},enter(t){let e=l,r=h,i=d;if(!n.isMounted){if(!s)return;e=w||l,r=m||h,i=v||d}let o=!1;const a=t._enterCb=e=>{o||(o=!0,x(e?i:r,[t]),_.delayedLeave&&_.delayedLeave(),t._enterCb=void 0)};e?S(e,[t,a]):a()},leave(e,r){const i=String(t.key);if(e._enterCb&&e._enterCb(!0),n.isUnmounting)return r();x(f,[e]);let s=!1;const o=e._leaveCb=n=>{s||(s=!0,r(),x(n?y:g,[e]),e._leaveCb=void 0,A[i]===t&&delete A[i])};A[i]=t,p?S(p,[e,o]):o()},clone(t){return it(t,e,n,r)}};return _}function st(t){if(lt(t))return t=Ye(t),t.children=null,t}function ot(t){return lt(t)?t.children?t.children[0]:void 0:t}function at(t,e){6&t.shapeFlag&&t.component?at(t.component.subTree,e):128&t.shapeFlag?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function ct(t,e=!1,n){let r=[],i=0;for(let s=0;s<t.length;s++){let o=t[s];const a=null==n?o.key:String(n)+String(null!=o.key?o.key:s);o.type===ke?(128&o.patchFlag&&i++,r=r.concat(ct(o.children,e,a))):(e||o.type!==Te)&&r.push(null!=a?Ye(o,{key:a}):o)}if(i>1)for(let s=0;s<r.length;s++)r[s].patchFlag=-2;return r}const ut=t=>!!t.type.__asyncLoader;const lt=t=>t.type.__isKeepAlive;RegExp,RegExp;function ht(t,e){return(0,i.kJ)(t)?t.some((t=>ht(t,e))):(0,i.HD)(t)?t.split(",").includes(e):!!(0,i.Kj)(t)&&t.test(e)}function dt(t,e){pt(t,"a",e)}function ft(t,e){pt(t,"da",e)}function pt(t,e,n=un){const r=t.__wdc||(t.__wdc=()=>{let e=n;while(e){if(e.isDeactivated)return;e=e.parent}return t()});if(wt(e,r,n),n){let t=n.parent;while(t&&t.parent)lt(t.parent.vnode)&&gt(r,e,n,t),t=t.parent}}function gt(t,e,n,r){const s=wt(e,t,r,!0);_t((()=>{(0,i.Od)(r[e],s)}),n)}function yt(t){t.shapeFlag&=-257,t.shapeFlag&=-513}function bt(t){return 128&t.shapeFlag?t.ssContent:t}function wt(t,e,n=un,i=!1){if(n){const s=n[t]||(n[t]=[]),a=e.__weh||(e.__weh=(...i)=>{if(n.isUnmounted)return;(0,r.Jd)(),pn(n);const s=o(e,n,t,i);return gn(),(0,r.lk)(),s});return i?s.unshift(a):s.push(a),a}}const mt=t=>(e,n=un)=>(!mn||"sp"===t)&&wt(t,((...t)=>e(...t)),n),vt=mt("bm"),Et=mt("m"),At=mt("bu"),xt=mt("u"),St=mt("bum"),_t=mt("um"),It=mt("sp"),Rt=mt("rtg"),Ct=mt("rtc");function kt(t,e=un){wt("ec",t,e)}const Lt=Symbol.for("v-ndc");function Tt(t,e,n,r){let s;const o=n&&n[r];if((0,i.kJ)(t)||(0,i.HD)(t)){s=new Array(t.length);for(let n=0,r=t.length;n<r;n++)s[n]=e(t[n],n,void 0,o&&o[n])}else if("number"===typeof t){0,s=new Array(t);for(let n=0;n<t;n++)s[n]=e(n+1,n,void 0,o&&o[n])}else if((0,i.Kn)(t))if(t[Symbol.iterator])s=Array.from(t,((t,n)=>e(t,n,void 0,o&&o[n])));else{const n=Object.keys(t);s=new Array(n.length);for(let r=0,i=n.length;r<i;r++){const i=n[r];s[r]=e(t[i],i,r,o&&o[r])}}else s=[];return n&&(n[r]=s),s}const Bt=t=>t?yn(t)?In(t)||t.proxy:Bt(t.parent):null,Ot=(0,i.l7)(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Bt(t.parent),$root:t=>Bt(t.root),$emit:t=>t.emit,$options:t=>Ht(t),$forceUpdate:t=>t.f||(t.f=()=>v(t.update)),$nextTick:t=>t.n||(t.n=w.bind(t.proxy)),$watch:t=>q.bind(t)}),Nt=(t,e)=>t!==i.kT&&!t.__isScriptSetup&&(0,i.RI)(t,e),Dt={get({_:t},e){const{ctx:n,setupState:s,data:o,props:a,accessCache:c,type:u,appContext:l}=t;let h;if("$"!==e[0]){const r=c[e];if(void 0!==r)switch(r){case 1:return s[e];case 2:return o[e];case 4:return n[e];case 3:return a[e]}else{if(Nt(s,e))return c[e]=1,s[e];if(o!==i.kT&&(0,i.RI)(o,e))return c[e]=2,o[e];if((h=t.propsOptions[0])&&(0,i.RI)(h,e))return c[e]=3,a[e];if(n!==i.kT&&(0,i.RI)(n,e))return c[e]=4,n[e];Pt&&(c[e]=0)}}const d=Ot[e];let f,p;return d?("$attrs"===e&&(0,r.j)(t,"get",e),d(t)):(f=u.__cssModules)&&(f=f[e])?f:n!==i.kT&&(0,i.RI)(n,e)?(c[e]=4,n[e]):(p=l.config.globalProperties,(0,i.RI)(p,e)?p[e]:void 0)},set({_:t},e,n){const{data:r,setupState:s,ctx:o}=t;return Nt(s,e)?(s[e]=n,!0):r!==i.kT&&(0,i.RI)(r,e)?(r[e]=n,!0):!(0,i.RI)(t.props,e)&&(("$"!==e[0]||!(e.slice(1)in t))&&(o[e]=n,!0))},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:s,propsOptions:o}},a){let c;return!!n[a]||t!==i.kT&&(0,i.RI)(t,a)||Nt(e,a)||(c=o[0])&&(0,i.RI)(c,a)||(0,i.RI)(r,a)||(0,i.RI)(Ot,a)||(0,i.RI)(s.config.globalProperties,a)},defineProperty(t,e,n){return null!=n.get?t._.accessCache[e]=0:(0,i.RI)(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function Ut(t){return(0,i.kJ)(t)?t.reduce(((t,e)=>(t[e]=null,t)),{}):t}let Pt=!0;function Mt(t){const e=Ht(t),n=t.proxy,s=t.ctx;Pt=!1,e.beforeCreate&&Ft(e.beforeCreate,t,"bc");const{data:o,computed:a,methods:c,watch:u,provide:l,inject:h,created:d,beforeMount:f,mounted:p,beforeUpdate:g,updated:y,activated:b,deactivated:w,beforeDestroy:m,beforeUnmount:v,destroyed:E,unmounted:A,render:x,renderTracked:S,renderTriggered:_,errorCaptured:I,serverPrefetch:R,expose:C,inheritAttrs:k,components:L,directives:T,filters:B}=e,O=null;if(h&&Zt(h,s,O),c)for(const r in c){const t=c[r];(0,i.mf)(t)&&(s[r]=t.bind(n))}if(o){0;const e=o.call(n,n);0,(0,i.Kn)(e)&&(t.data=(0,r.qj)(e))}if(Pt=!0,a)for(const r in a){const t=a[r],e=(0,i.mf)(t)?t.bind(n,n):(0,i.mf)(t.get)?t.get.bind(n,n):i.dG;0;const o=!(0,i.mf)(t)&&(0,i.mf)(t.set)?t.set.bind(n):i.dG,c=kn({get:e,set:o});Object.defineProperty(s,r,{enumerable:!0,configurable:!0,get:()=>c.value,set:t=>c.value=t})}if(u)for(const r in u)Vt(u[r],s,n,r);if(l){const t=(0,i.mf)(l)?l.call(n):l;Reflect.ownKeys(t).forEach((e=>{ne(e,t[e])}))}function N(t,e){(0,i.kJ)(e)?e.forEach((e=>t(e.bind(n)))):e&&t(e.bind(n))}if(d&&Ft(d,t,"c"),N(vt,f),N(Et,p),N(At,g),N(xt,y),N(dt,b),N(ft,w),N(kt,I),N(Ct,S),N(Rt,_),N(St,v),N(_t,A),N(It,R),(0,i.kJ)(C))if(C.length){const e=t.exposed||(t.exposed={});C.forEach((t=>{Object.defineProperty(e,t,{get:()=>n[t],set:e=>n[t]=e})}))}else t.exposed||(t.exposed={});x&&t.render===i.dG&&(t.render=x),null!=k&&(t.inheritAttrs=k),L&&(t.components=L),T&&(t.directives=T)}function Zt(t,e,n=i.dG){(0,i.kJ)(t)&&(t=qt(t));for(const s in t){const n=t[s];let o;o=(0,i.Kn)(n)?"default"in n?re(n.from||s,n.default,!0):re(n.from||s):re(n),(0,r.dq)(o)?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>o.value,set:t=>o.value=t}):e[s]=o}}function Ft(t,e,n){o((0,i.kJ)(t)?t.map((t=>t.bind(e.proxy))):t.bind(e.proxy),e,n)}function Vt(t,e,n,r){const s=r.includes(".")?G(n,r):()=>n[r];if((0,i.HD)(t)){const n=e[t];(0,i.mf)(n)&&K(s,n)}else if((0,i.mf)(t))K(s,t.bind(n));else if((0,i.Kn)(t))if((0,i.kJ)(t))t.forEach((t=>Vt(t,e,n,r)));else{const r=(0,i.mf)(t.handler)?t.handler.bind(n):e[t.handler];(0,i.mf)(r)&&K(s,r,t)}else 0}function Ht(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:s,optionsCache:o,config:{optionMergeStrategies:a}}=t.appContext,c=o.get(e);let u;return c?u=c:s.length||n||r?(u={},s.length&&s.forEach((t=>$t(u,t,a,!0))),$t(u,e,a)):u=e,(0,i.Kn)(e)&&o.set(e,u),u}function $t(t,e,n,r=!1){const{mixins:i,extends:s}=e;s&&$t(t,s,n,!0),i&&i.forEach((e=>$t(t,e,n,!0)));for(const o in e)if(r&&"expose"===o);else{const r=jt[o]||n&&n[o];t[o]=r?r(t[o],e[o]):e[o]}return t}const jt={data:Kt,props:Jt,emits:Jt,methods:Wt,computed:Wt,beforeCreate:Gt,created:Gt,beforeMount:Gt,mounted:Gt,beforeUpdate:Gt,updated:Gt,beforeDestroy:Gt,beforeUnmount:Gt,destroyed:Gt,unmounted:Gt,activated:Gt,deactivated:Gt,errorCaptured:Gt,serverPrefetch:Gt,components:Wt,directives:Wt,watch:Yt,provide:Kt,inject:zt};function Kt(t,e){return e?t?function(){return(0,i.l7)((0,i.mf)(t)?t.call(this,this):t,(0,i.mf)(e)?e.call(this,this):e)}:e:t}function zt(t,e){return Wt(qt(t),qt(e))}function qt(t){if((0,i.kJ)(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Gt(t,e){return t?[...new Set([].concat(t,e))]:e}function Wt(t,e){return t?(0,i.l7)(Object.create(null),t,e):e}function Jt(t,e){return t?(0,i.kJ)(t)&&(0,i.kJ)(e)?[...new Set([...t,...e])]:(0,i.l7)(Object.create(null),Ut(t),Ut(null!=e?e:{})):e}function Yt(t,e){if(!t)return e;if(!e)return t;const n=(0,i.l7)(Object.create(null),t);for(const r in e)n[r]=Gt(t[r],e[r]);return n}function Qt(){return{app:null,config:{isNativeTag:i.NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Xt=0;function te(t,e){return function(n,r=null){(0,i.mf)(n)||(n=(0,i.l7)({},n)),null==r||(0,i.Kn)(r)||(r=null);const s=Qt();const o=new Set;let a=!1;const c=s.app={_uid:Xt++,_component:n,_props:r,_container:null,_context:s,_instance:null,version:On,get config(){return s.config},set config(t){0},use(t,...e){return o.has(t)||(t&&(0,i.mf)(t.install)?(o.add(t),t.install(c,...e)):(0,i.mf)(t)&&(o.add(t),t(c,...e))),c},mixin(t){return s.mixins.includes(t)||s.mixins.push(t),c},component(t,e){return e?(s.components[t]=e,c):s.components[t]},directive(t,e){return e?(s.directives[t]=e,c):s.directives[t]},mount(i,o,u){if(!a){0;const l=Ge(n,r);return l.appContext=s,o&&e?e(l,i):t(l,i,u),a=!0,c._container=i,i.__vue_app__=c,In(l.component)||l.component.proxy}},unmount(){a&&(t(null,c._container),delete c._container.__vue_app__)},provide(t,e){return s.provides[t]=e,c},runWithContext(t){ee=c;try{return t()}finally{ee=null}}};return c}}let ee=null;function ne(t,e){if(un){let n=un.provides;const r=un.parent&&un.parent.provides;r===n&&(n=un.provides=Object.create(r)),n[t]=e}else 0}function re(t,e,n=!1){const r=un||B;if(r||ee){const s=r?null==r.parent?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:ee._context.provides;if(s&&t in s)return s[t];if(arguments.length>1)return n&&(0,i.mf)(e)?e.call(r&&r.proxy):e}else 0}function ie(t,e,n,s=!1){const o={},a={};(0,i.Nj)(a,je,1),t.propsDefaults=Object.create(null),oe(t,e,o,a);for(const r in t.propsOptions[0])r in o||(o[r]=void 0);n?t.props=s?o:(0,r.Um)(o):t.type.props?t.props=o:t.props=a,t.attrs=a}function se(t,e,n,s){const{props:o,attrs:a,vnode:{patchFlag:c}}=t,u=(0,r.IU)(o),[l]=t.propsOptions;let h=!1;if(!(s||c>0)||16&c){let r;oe(t,e,o,a)&&(h=!0);for(const s in u)e&&((0,i.RI)(e,s)||(r=(0,i.rs)(s))!==s&&(0,i.RI)(e,r))||(l?!n||void 0===n[s]&&void 0===n[r]||(o[s]=ae(l,u,s,void 0,t,!0)):delete o[s]);if(a!==u)for(const t in a)e&&(0,i.RI)(e,t)||(delete a[t],h=!0)}else if(8&c){const n=t.vnode.dynamicProps;for(let r=0;r<n.length;r++){let s=n[r];if(T(t.emitsOptions,s))continue;const c=e[s];if(l)if((0,i.RI)(a,s))c!==a[s]&&(a[s]=c,h=!0);else{const e=(0,i._A)(s);o[e]=ae(l,u,e,c,t,!1)}else c!==a[s]&&(a[s]=c,h=!0)}}h&&(0,r.X$)(t,"set","$attrs")}function oe(t,e,n,s){const[o,a]=t.propsOptions;let c,u=!1;if(e)for(let r in e){if((0,i.Gg)(r))continue;const l=e[r];let h;o&&(0,i.RI)(o,h=(0,i._A)(r))?a&&a.includes(h)?(c||(c={}))[h]=l:n[h]=l:T(t.emitsOptions,r)||r in s&&l===s[r]||(s[r]=l,u=!0)}if(a){const e=(0,r.IU)(n),s=c||i.kT;for(let r=0;r<a.length;r++){const c=a[r];n[c]=ae(o,e,c,s[c],t,!(0,i.RI)(s,c))}}return u}function ae(t,e,n,r,s,o){const a=t[n];if(null!=a){const t=(0,i.RI)(a,"default");if(t&&void 0===r){const t=a.default;if(a.type!==Function&&!a.skipFactory&&(0,i.mf)(t)){const{propsDefaults:i}=s;n in i?r=i[n]:(pn(s),r=i[n]=t.call(null,e),gn())}else r=t}a[0]&&(o&&!t?r=!1:!a[1]||""!==r&&r!==(0,i.rs)(n)||(r=!0))}return r}function ce(t,e,n=!1){const r=e.propsCache,s=r.get(t);if(s)return s;const o=t.props,a={},c=[];let u=!1;if(!(0,i.mf)(t)){const r=t=>{u=!0;const[n,r]=ce(t,e,!0);(0,i.l7)(a,n),r&&c.push(...r)};!n&&e.mixins.length&&e.mixins.forEach(r),t.extends&&r(t.extends),t.mixins&&t.mixins.forEach(r)}if(!o&&!u)return(0,i.Kn)(t)&&r.set(t,i.Z6),i.Z6;if((0,i.kJ)(o))for(let h=0;h<o.length;h++){0;const t=(0,i._A)(o[h]);ue(t)&&(a[t]=i.kT)}else if(o){0;for(const t in o){const e=(0,i._A)(t);if(ue(e)){const n=o[t],r=a[e]=(0,i.kJ)(n)||(0,i.mf)(n)?{type:n}:(0,i.l7)({},n);if(r){const t=de(Boolean,r.type),n=de(String,r.type);r[0]=t>-1,r[1]=n<0||t<n,(t>-1||(0,i.RI)(r,"default"))&&c.push(e)}}}}const l=[a,c];return(0,i.Kn)(t)&&r.set(t,l),l}function ue(t){return"$"!==t[0]}function le(t){const e=t&&t.toString().match(/^\s*(function|class) (\w+)/);return e?e[2]:null===t?"null":""}function he(t,e){return le(t)===le(e)}function de(t,e){return(0,i.kJ)(e)?e.findIndex((e=>he(e,t))):(0,i.mf)(e)&&he(e,t)?0:-1}const fe=t=>"_"===t[0]||"$stable"===t,pe=t=>(0,i.kJ)(t)?t.map(tn):[tn(t)],ge=(t,e,n)=>{if(e._n)return e;const r=D(((...t)=>pe(e(...t))),n);return r._c=!1,r},ye=(t,e,n)=>{const r=t._ctx;for(const s in t){if(fe(s))continue;const n=t[s];if((0,i.mf)(n))e[s]=ge(s,n,r);else if(null!=n){0;const t=pe(n);e[s]=()=>t}}},be=(t,e)=>{const n=pe(e);t.slots.default=()=>n},we=(t,e)=>{if(32&t.vnode.shapeFlag){const n=e._;n?(t.slots=(0,r.IU)(e),(0,i.Nj)(e,"_",n)):ye(e,t.slots={})}else t.slots={},e&&be(t,e);(0,i.Nj)(t.slots,je,1)},me=(t,e,n)=>{const{vnode:r,slots:s}=t;let o=!0,a=i.kT;if(32&r.shapeFlag){const t=e._;t?n&&1===t?o=!1:((0,i.l7)(s,e),n||1!==t||delete s._):(o=!e.$stable,ye(e,s)),a=e}else e&&(be(t,e),a={default:1});if(o)for(const i in s)fe(i)||i in a||delete s[i]};function ve(t,e,n,o,a=!1){if((0,i.kJ)(t))return void t.forEach(((t,r)=>ve(t,e&&((0,i.kJ)(e)?e[r]:e),n,o,a)));if(ut(o)&&!a)return;const c=4&o.shapeFlag?In(o.component)||o.component.proxy:o.el,u=a?null:c,{i:l,r:h}=t;const d=e&&e.r,f=l.refs===i.kT?l.refs={}:l.refs,p=l.setupState;if(null!=d&&d!==h&&((0,i.HD)(d)?(f[d]=null,(0,i.RI)(p,d)&&(p[d]=null)):(0,r.dq)(d)&&(d.value=null)),(0,i.mf)(h))s(h,l,12,[u,f]);else{const e=(0,i.HD)(h),s=(0,r.dq)(h);if(e||s){const r=()=>{if(t.f){const n=e?(0,i.RI)(p,h)?p[h]:f[h]:h.value;a?(0,i.kJ)(n)&&(0,i.Od)(n,c):(0,i.kJ)(n)?n.includes(c)||n.push(c):e?(f[h]=[c],(0,i.RI)(p,h)&&(p[h]=f[h])):(h.value=[c],t.k&&(f[t.k]=h.value))}else e?(f[h]=u,(0,i.RI)(p,h)&&(p[h]=u)):s&&(h.value=u,t.k&&(f[t.k]=u))};u?(r.id=-1,Ae(r,n)):r()}else 0}}function Ee(){}const Ae=$;function xe(t){return Se(t)}function Se(t,e){Ee();const n=(0,i.E9)();n.__VUE__=!0;const{insert:s,remove:o,patchProp:a,createElement:c,createText:u,createComment:l,setText:h,setElementText:d,parentNode:f,nextSibling:p,setScopeId:g=i.dG,insertStaticContent:y}=t,b=(t,e,n,r=null,i=null,s=null,o=!1,a=null,c=!!e.dynamicChildren)=>{if(t===e)return;t&&!$e(t,e)&&(r=X(t),q(t,i,s,!0),t=null),-2===e.patchFlag&&(c=!1,e.dynamicChildren=null);const{type:u,ref:l,shapeFlag:h}=e;switch(u){case Le:w(t,e,n,r);break;case Te:m(t,e,n,r);break;case Be:null==t&&E(e,n,r,o);break;case ke:N(t,e,n,r,i,s,o,a,c);break;default:1&h?R(t,e,n,r,i,s,o,a,c):6&h?D(t,e,n,r,i,s,o,a,c):(64&h||128&h)&&u.process(t,e,n,r,i,s,o,a,c,et)}null!=l&&i&&ve(l,t&&t.ref,s,e||t,!e)},w=(t,e,n,r)=>{if(null==t)s(e.el=u(e.children),n,r);else{const n=e.el=t.el;e.children!==t.children&&h(n,e.children)}},m=(t,e,n,r)=>{null==t?s(e.el=l(e.children||""),n,r):e.el=t.el},E=(t,e,n,r)=>{[t.el,t.anchor]=y(t.children,e,n,r,t.el,t.anchor)},x=({el:t,anchor:e},n,r)=>{let i;while(t&&t!==e)i=p(t),s(t,n,r),t=i;s(e,n,r)},I=({el:t,anchor:e})=>{let n;while(t&&t!==e)n=p(t),o(t),t=n;o(e)},R=(t,e,n,r,i,s,o,a,c)=>{o=o||"svg"===e.type,null==t?C(e,n,r,i,s,o,a,c):T(t,e,i,s,o,a,c)},C=(t,e,n,r,o,u,l,h)=>{let f,p;const{type:g,props:y,shapeFlag:b,transition:w,dirs:m}=t;if(f=t.el=c(t.type,u,y&&y.is,y),8&b?d(f,t.children):16&b&&L(t.children,f,null,r,o,u&&"foreignObject"!==g,l,h),m&&Y(t,null,r,"created"),k(f,t,t.scopeId,l,r),y){for(const e in y)"value"===e||(0,i.Gg)(e)||a(f,e,null,y[e],u,t.children,r,o,Q);"value"in y&&a(f,"value",null,y.value),(p=y.onVnodeBeforeMount)&&sn(p,r,t)}m&&Y(t,null,r,"beforeMount");const v=(!o||o&&!o.pendingBranch)&&w&&!w.persisted;v&&w.beforeEnter(f),s(f,e,n),((p=y&&y.onVnodeMounted)||v||m)&&Ae((()=>{p&&sn(p,r,t),v&&w.enter(f),m&&Y(t,null,r,"mounted")}),o)},k=(t,e,n,r,i)=>{if(n&&g(t,n),r)for(let s=0;s<r.length;s++)g(t,r[s]);if(i){let n=i.subTree;if(e===n){const e=i.vnode;k(t,e,e.scopeId,e.slotScopeIds,i.parent)}}},L=(t,e,n,r,i,s,o,a,c=0)=>{for(let u=c;u<t.length;u++){const c=t[u]=a?en(t[u]):tn(t[u]);b(null,c,e,n,r,i,s,o,a)}},T=(t,e,n,r,s,o,c)=>{const u=e.el=t.el;let{patchFlag:l,dynamicChildren:h,dirs:f}=e;l|=16&t.patchFlag;const p=t.props||i.kT,g=e.props||i.kT;let y;n&&_e(n,!1),(y=g.onVnodeBeforeUpdate)&&sn(y,n,e,t),f&&Y(e,t,n,"beforeUpdate"),n&&_e(n,!0);const b=s&&"foreignObject"!==e.type;if(h?B(t.dynamicChildren,h,u,n,r,b,o):c||$(t,e,u,null,n,r,b,o,!1),l>0){if(16&l)O(u,e,p,g,n,r,s);else if(2&l&&p.class!==g.class&&a(u,"class",null,g.class,s),4&l&&a(u,"style",p.style,g.style,s),8&l){const i=e.dynamicProps;for(let e=0;e<i.length;e++){const o=i[e],c=p[o],l=g[o];l===c&&"value"!==o||a(u,o,c,l,s,t.children,n,r,Q)}}1&l&&t.children!==e.children&&d(u,e.children)}else c||null!=h||O(u,e,p,g,n,r,s);((y=g.onVnodeUpdated)||f)&&Ae((()=>{y&&sn(y,n,e,t),f&&Y(e,t,n,"updated")}),r)},B=(t,e,n,r,i,s,o)=>{for(let a=0;a<e.length;a++){const c=t[a],u=e[a],l=c.el&&(c.type===ke||!$e(c,u)||70&c.shapeFlag)?f(c.el):n;b(c,u,l,null,r,i,s,o,!0)}},O=(t,e,n,r,s,o,c)=>{if(n!==r){if(n!==i.kT)for(const u in n)(0,i.Gg)(u)||u in r||a(t,u,n[u],null,c,e.children,s,o,Q);for(const u in r){if((0,i.Gg)(u))continue;const l=r[u],h=n[u];l!==h&&"value"!==u&&a(t,u,h,l,c,e.children,s,o,Q)}"value"in r&&a(t,"value",n.value,r.value)}},N=(t,e,n,r,i,o,a,c,l)=>{const h=e.el=t?t.el:u(""),d=e.anchor=t?t.anchor:u("");let{patchFlag:f,dynamicChildren:p,slotScopeIds:g}=e;g&&(c=c?c.concat(g):g),null==t?(s(h,n,r),s(d,n,r),L(e.children,n,d,i,o,a,c,l)):f>0&&64&f&&p&&t.dynamicChildren?(B(t.dynamicChildren,p,n,i,o,a,c),(null!=e.key||i&&e===i.subTree)&&Ie(t,e,!0)):$(t,e,n,d,i,o,a,c,l)},D=(t,e,n,r,i,s,o,a,c)=>{e.slotScopeIds=a,null==t?512&e.shapeFlag?i.ctx.activate(e,n,r,o,c):P(e,n,r,i,s,o,c):M(t,e,c)},P=(t,e,n,r,i,s,o)=>{const a=t.component=cn(t,r,i);if(lt(t)&&(a.ctx.renderer=et),vn(a),a.asyncDep){if(i&&i.registerDep(a,F),!t.el){const t=a.subTree=Ge(Te);m(null,t,e,n)}}else F(a,t,e,n,i,s,o)},M=(t,e,n)=>{const r=e.component=t.component;if(Z(t,e,n)){if(r.asyncDep&&!r.asyncResolved)return void H(r,e,n);r.next=e,A(r.update),r.update()}else e.el=t.el,r.vnode=e},F=(t,e,n,s,o,a,c)=>{const u=()=>{if(t.isMounted){let e,{next:n,bu:r,u:s,parent:u,vnode:l}=t,h=n;0,_e(t,!1),n?(n.el=l.el,H(t,n,c)):n=l,r&&(0,i.ir)(r),(e=n.props&&n.props.onVnodeBeforeUpdate)&&sn(e,u,n,l),_e(t,!0);const d=U(t);0;const p=t.subTree;t.subTree=d,b(p,d,f(p.el),X(p),t,o,a),n.el=d.el,null===h&&V(t,d.el),s&&Ae(s,o),(e=n.props&&n.props.onVnodeUpdated)&&Ae((()=>sn(e,u,n,l)),o)}else{let r;const{el:c,props:u}=e,{bm:l,m:h,parent:d}=t,f=ut(e);if(_e(t,!1),l&&(0,i.ir)(l),!f&&(r=u&&u.onVnodeBeforeMount)&&sn(r,d,e),_e(t,!0),c&&rt){const n=()=>{t.subTree=U(t),rt(c,t.subTree,t,o,null)};f?e.type.__asyncLoader().then((()=>!t.isUnmounted&&n())):n()}else{0;const r=t.subTree=U(t);0,b(null,r,n,s,t,o,a),e.el=r.el}if(h&&Ae(h,o),!f&&(r=u&&u.onVnodeMounted)){const t=e;Ae((()=>sn(r,d,t)),o)}(256&e.shapeFlag||d&&ut(d.vnode)&&256&d.vnode.shapeFlag)&&t.a&&Ae(t.a,o),t.isMounted=!0,e=n=s=null}},l=t.effect=new r.qq(u,(()=>v(h)),t.scope),h=t.update=()=>l.run();h.id=t.uid,_e(t,!0),h()},H=(t,e,n)=>{e.component=t;const i=t.vnode.props;t.vnode=e,t.next=null,se(t,e.props,i,n),me(t,e.children,n),(0,r.Jd)(),S(),(0,r.lk)()},$=(t,e,n,r,i,s,o,a,c=!1)=>{const u=t&&t.children,l=t?t.shapeFlag:0,h=e.children,{patchFlag:f,shapeFlag:p}=e;if(f>0){if(128&f)return void K(u,h,n,r,i,s,o,a,c);if(256&f)return void j(u,h,n,r,i,s,o,a,c)}8&p?(16&l&&Q(u,i,s),h!==u&&d(n,h)):16&l?16&p?K(u,h,n,r,i,s,o,a,c):Q(u,i,s,!0):(8&l&&d(n,""),16&p&&L(h,n,r,i,s,o,a,c))},j=(t,e,n,r,s,o,a,c,u)=>{t=t||i.Z6,e=e||i.Z6;const l=t.length,h=e.length,d=Math.min(l,h);let f;for(f=0;f<d;f++){const r=e[f]=u?en(e[f]):tn(e[f]);b(t[f],r,n,null,s,o,a,c,u)}l>h?Q(t,s,o,!0,!1,d):L(e,n,r,s,o,a,c,u,d)},K=(t,e,n,r,s,o,a,c,u)=>{let l=0;const h=e.length;let d=t.length-1,f=h-1;while(l<=d&&l<=f){const r=t[l],i=e[l]=u?en(e[l]):tn(e[l]);if(!$e(r,i))break;b(r,i,n,null,s,o,a,c,u),l++}while(l<=d&&l<=f){const r=t[d],i=e[f]=u?en(e[f]):tn(e[f]);if(!$e(r,i))break;b(r,i,n,null,s,o,a,c,u),d--,f--}if(l>d){if(l<=f){const t=f+1,i=t<h?e[t].el:r;while(l<=f)b(null,e[l]=u?en(e[l]):tn(e[l]),n,i,s,o,a,c,u),l++}}else if(l>f)while(l<=d)q(t[l],s,o,!0),l++;else{const p=l,g=l,y=new Map;for(l=g;l<=f;l++){const t=e[l]=u?en(e[l]):tn(e[l]);null!=t.key&&y.set(t.key,l)}let w,m=0;const v=f-g+1;let E=!1,A=0;const x=new Array(v);for(l=0;l<v;l++)x[l]=0;for(l=p;l<=d;l++){const r=t[l];if(m>=v){q(r,s,o,!0);continue}let i;if(null!=r.key)i=y.get(r.key);else for(w=g;w<=f;w++)if(0===x[w-g]&&$e(r,e[w])){i=w;break}void 0===i?q(r,s,o,!0):(x[i-g]=l+1,i>=A?A=i:E=!0,b(r,e[i],n,null,s,o,a,c,u),m++)}const S=E?Re(x):i.Z6;for(w=S.length-1,l=v-1;l>=0;l--){const t=g+l,i=e[t],d=t+1<h?e[t+1].el:r;0===x[l]?b(null,i,n,d,s,o,a,c,u):E&&(w<0||l!==S[w]?z(i,n,d,2):w--)}}},z=(t,e,n,r,i=null)=>{const{el:o,type:a,transition:c,children:u,shapeFlag:l}=t;if(6&l)return void z(t.component.subTree,e,n,r);if(128&l)return void t.suspense.move(e,n,r);if(64&l)return void a.move(t,e,n,et);if(a===ke){s(o,e,n);for(let t=0;t<u.length;t++)z(u[t],e,n,r);return void s(t.anchor,e,n)}if(a===Be)return void x(t,e,n);const h=2!==r&&1&l&&c;if(h)if(0===r)c.beforeEnter(o),s(o,e,n),Ae((()=>c.enter(o)),i);else{const{leave:t,delayLeave:r,afterLeave:i}=c,a=()=>s(o,e,n),u=()=>{t(o,(()=>{a(),i&&i()}))};r?r(o,a,u):u()}else s(o,e,n)},q=(t,e,n,r=!1,i=!1)=>{const{type:s,props:o,ref:a,children:c,dynamicChildren:u,shapeFlag:l,patchFlag:h,dirs:d}=t;if(null!=a&&ve(a,null,n,t,!0),256&l)return void e.ctx.deactivate(t);const f=1&l&&d,p=!ut(t);let g;if(p&&(g=o&&o.onVnodeBeforeUnmount)&&sn(g,e,t),6&l)J(t.component,n,r);else{if(128&l)return void t.suspense.unmount(n,r);f&&Y(t,null,e,"beforeUnmount"),64&l?t.type.remove(t,e,n,i,et,r):u&&(s!==ke||h>0&&64&h)?Q(u,e,n,!1,!0):(s===ke&&384&h||!i&&16&l)&&Q(c,e,n),r&&G(t)}(p&&(g=o&&o.onVnodeUnmounted)||f)&&Ae((()=>{g&&sn(g,e,t),f&&Y(t,null,e,"unmounted")}),n)},G=t=>{const{type:e,el:n,anchor:r,transition:i}=t;if(e===ke)return void W(n,r);if(e===Be)return void I(t);const s=()=>{o(n),i&&!i.persisted&&i.afterLeave&&i.afterLeave()};if(1&t.shapeFlag&&i&&!i.persisted){const{leave:e,delayLeave:r}=i,o=()=>e(n,s);r?r(t.el,s,o):o()}else s()},W=(t,e)=>{let n;while(t!==e)n=p(t),o(t),t=n;o(e)},J=(t,e,n)=>{const{bum:r,scope:s,update:o,subTree:a,um:c}=t;r&&(0,i.ir)(r),s.stop(),o&&(o.active=!1,q(a,t,e,n)),c&&Ae(c,e),Ae((()=>{t.isUnmounted=!0}),e),e&&e.pendingBranch&&!e.isUnmounted&&t.asyncDep&&!t.asyncResolved&&t.suspenseId===e.pendingId&&(e.deps--,0===e.deps&&e.resolve())},Q=(t,e,n,r=!1,i=!1,s=0)=>{for(let o=s;o<t.length;o++)q(t[o],e,n,r,i)},X=t=>6&t.shapeFlag?X(t.component.subTree):128&t.shapeFlag?t.suspense.next():p(t.anchor||t.el),tt=(t,e,n)=>{null==t?e._vnode&&q(e._vnode,null,null,!0):b(e._vnode||null,t,e,null,null,null,n),S(),_(),e._vnode=t},et={p:b,um:q,m:z,r:G,mt:P,mc:L,pc:$,pbc:B,n:X,o:t};let nt,rt;return e&&([nt,rt]=e(et)),{render:tt,hydrate:nt,createApp:te(tt,nt)}}function _e({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function Ie(t,e,n=!1){const r=t.children,s=e.children;if((0,i.kJ)(r)&&(0,i.kJ)(s))for(let i=0;i<r.length;i++){const t=r[i];let e=s[i];1&e.shapeFlag&&!e.dynamicChildren&&((e.patchFlag<=0||32===e.patchFlag)&&(e=s[i]=en(s[i]),e.el=t.el),n||Ie(t,e)),e.type===Le&&(e.el=t.el)}}function Re(t){const e=t.slice(),n=[0];let r,i,s,o,a;const c=t.length;for(r=0;r<c;r++){const c=t[r];if(0!==c){if(i=n[n.length-1],t[i]<c){e[r]=i,n.push(r);continue}s=0,o=n.length-1;while(s<o)a=s+o>>1,t[n[a]]<c?s=a+1:o=a;c<t[n[s]]&&(s>0&&(e[r]=n[s-1]),n[s]=r)}}s=n.length,o=n[s-1];while(s-- >0)n[s]=o,o=e[o];return n}const Ce=t=>t.__isTeleport;const ke=Symbol.for("v-fgt"),Le=Symbol.for("v-txt"),Te=Symbol.for("v-cmt"),Be=Symbol.for("v-stc"),Oe=[];let Ne=null;function De(t=!1){Oe.push(Ne=t?null:[])}function Ue(){Oe.pop(),Ne=Oe[Oe.length-1]||null}let Pe=1;function Me(t){Pe+=t}function Ze(t){return t.dynamicChildren=Pe>0?Ne||i.Z6:null,Ue(),Pe>0&&Ne&&Ne.push(t),t}function Fe(t,e,n,r,i,s){return Ze(qe(t,e,n,r,i,s,!0))}function Ve(t,e,n,r,i){return Ze(Ge(t,e,n,r,i,!0))}function He(t){return!!t&&!0===t.__v_isVNode}function $e(t,e){return t.type===e.type&&t.key===e.key}const je="__vInternal",Ke=({key:t})=>null!=t?t:null,ze=({ref:t,ref_key:e,ref_for:n})=>("number"===typeof t&&(t=""+t),null!=t?(0,i.HD)(t)||(0,r.dq)(t)||(0,i.mf)(t)?{i:B,r:t,k:e,f:!!n}:t:null);function qe(t,e=null,n=null,r=0,s=null,o=(t===ke?0:1),a=!1,c=!1){const u={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Ke(e),ref:e&&ze(e),scopeId:O,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:B};return c?(nn(u,n),128&o&&t.normalize(u)):n&&(u.shapeFlag|=(0,i.HD)(n)?8:16),Pe>0&&!a&&Ne&&(u.patchFlag>0||6&o)&&32!==u.patchFlag&&Ne.push(u),u}const Ge=We;function We(t,e=null,n=null,s=0,o=null,a=!1){if(t&&t!==Lt||(t=Te),He(t)){const r=Ye(t,e,!0);return n&&nn(r,n),Pe>0&&!a&&Ne&&(6&r.shapeFlag?Ne[Ne.indexOf(t)]=r:Ne.push(r)),r.patchFlag|=-2,r}if(Cn(t)&&(t=t.__vccOpts),e){e=Je(e);let{class:t,style:n}=e;t&&!(0,i.HD)(t)&&(e.class=(0,i.C_)(t)),(0,i.Kn)(n)&&((0,r.X3)(n)&&!(0,i.kJ)(n)&&(n=(0,i.l7)({},n)),e.style=(0,i.j5)(n))}const c=(0,i.HD)(t)?1:H(t)?128:Ce(t)?64:(0,i.Kn)(t)?4:(0,i.mf)(t)?2:0;return qe(t,e,n,s,o,c,a,!0)}function Je(t){return t?(0,r.X3)(t)||je in t?(0,i.l7)({},t):t:null}function Ye(t,e,n=!1){const{props:r,ref:s,patchFlag:o,children:a}=t,c=e?rn(r||{},e):r,u={__v_isVNode:!0,__v_skip:!0,type:t.type,props:c,key:c&&Ke(c),ref:e&&e.ref?n&&s?(0,i.kJ)(s)?s.concat(ze(e)):[s,ze(e)]:ze(e):s,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==ke?-1===o?16:16|o:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Ye(t.ssContent),ssFallback:t.ssFallback&&Ye(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return u}function Qe(t=" ",e=0){return Ge(Le,null,t,e)}function Xe(t="",e=!1){return e?(De(),Ve(Te,null,t)):Ge(Te,null,t)}function tn(t){return null==t||"boolean"===typeof t?Ge(Te):(0,i.kJ)(t)?Ge(ke,null,t.slice()):"object"===typeof t?en(t):Ge(Le,null,String(t))}function en(t){return null===t.el&&-1!==t.patchFlag||t.memo?t:Ye(t)}function nn(t,e){let n=0;const{shapeFlag:r}=t;if(null==e)e=null;else if((0,i.kJ)(e))n=16;else if("object"===typeof e){if(65&r){const n=e.default;return void(n&&(n._c&&(n._d=!1),nn(t,n()),n._c&&(n._d=!0)))}{n=32;const r=e._;r||je in e?3===r&&B&&(1===B.slots._?e._=1:(e._=2,t.patchFlag|=1024)):e._ctx=B}}else(0,i.mf)(e)?(e={default:e,_ctx:B},n=32):(e=String(e),64&r?(n=16,e=[Qe(e)]):n=8);t.children=e,t.shapeFlag|=n}function rn(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const t in r)if("class"===t)e.class!==r.class&&(e.class=(0,i.C_)([e.class,r.class]));else if("style"===t)e.style=(0,i.j5)([e.style,r.style]);else if((0,i.F7)(t)){const n=e[t],s=r[t];!s||n===s||(0,i.kJ)(n)&&n.includes(s)||(e[t]=n?[].concat(n,s):s)}else""!==t&&(e[t]=r[t])}return e}function sn(t,e,n,r=null){o(t,e,7,[n,r])}const on=Qt();let an=0;function cn(t,e,n){const s=t.type,o=(e?e.appContext:t.appContext)||on,a={uid:an++,vnode:t,type:s,parent:e,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,scope:new r.Bj(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(o.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:ce(s,o),emitsOptions:L(s,o),emit:null,emitted:null,propsDefaults:i.kT,inheritAttrs:s.inheritAttrs,ctx:i.kT,data:i.kT,props:i.kT,attrs:i.kT,slots:i.kT,refs:i.kT,setupState:i.kT,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=e?e.root:a,a.emit=k.bind(null,a),t.ce&&t.ce(a),a}let un=null;const ln=()=>un||B;let hn,dn,fn="__VUE_INSTANCE_SETTERS__";(dn=(0,i.E9)()[fn])||(dn=(0,i.E9)()[fn]=[]),dn.push((t=>un=t)),hn=t=>{dn.length>1?dn.forEach((e=>e(t))):dn[0](t)};const pn=t=>{hn(t),t.scope.on()},gn=()=>{un&&un.scope.off(),hn(null)};function yn(t){return 4&t.vnode.shapeFlag}let bn,wn,mn=!1;function vn(t,e=!1){mn=e;const{props:n,children:r}=t.vnode,i=yn(t);ie(t,n,i,e),we(t,r);const s=i?En(t,e):void 0;return mn=!1,s}function En(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=(0,r.Xl)(new Proxy(t.ctx,Dt));const{setup:o}=n;if(o){const n=t.setupContext=o.length>1?_n(t):null;pn(t),(0,r.Jd)();const c=s(o,t,0,[t.props,n]);if((0,r.lk)(),gn(),(0,i.tI)(c)){if(c.then(gn,gn),e)return c.then((n=>{An(t,n,e)})).catch((e=>{a(e,t,0)}));t.asyncDep=c}else An(t,c,e)}else xn(t,e)}function An(t,e,n){(0,i.mf)(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:(0,i.Kn)(e)&&(t.setupState=(0,r.WL)(e)),xn(t,n)}function xn(t,e,n){const s=t.type;if(!t.render){if(!e&&bn&&!s.render){const e=s.template||Ht(t).template;if(e){0;const{isCustomElement:n,compilerOptions:r}=t.appContext.config,{delimiters:o,compilerOptions:a}=s,c=(0,i.l7)((0,i.l7)({isCustomElement:n,delimiters:o},r),a);s.render=bn(e,c)}}t.render=s.render||i.dG,wn&&wn(t)}pn(t),(0,r.Jd)(),Mt(t),(0,r.lk)(),gn()}function Sn(t){return t.attrsProxy||(t.attrsProxy=new Proxy(t.attrs,{get(e,n){return(0,r.j)(t,"get","$attrs"),e[n]}}))}function _n(t){const e=e=>{t.exposed=e||{}};return{get attrs(){return Sn(t)},slots:t.slots,emit:t.emit,expose:e}}function In(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy((0,r.WL)((0,r.Xl)(t.exposed)),{get(e,n){return n in e?e[n]:n in Ot?Ot[n](t):void 0},has(t,e){return e in t||e in Ot}}))}function Rn(t,e=!0){return(0,i.mf)(t)?t.displayName||t.name:t.name||e&&t.__name}function Cn(t){return(0,i.mf)(t)&&"__vccOpts"in t}const kn=(t,e)=>(0,r.Fl)(t,e,mn);function Ln(t,e,n){const r=arguments.length;return 2===r?(0,i.Kn)(e)&&!(0,i.kJ)(e)?He(e)?Ge(t,null,[e]):Ge(t,e):Ge(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):3===r&&He(n)&&(n=[n]),Ge(t,e,n))}const Tn=Symbol.for("v-scx"),Bn=()=>{{const t=re(Tn);return t}};const On="3.3.4"},9242:function(t,e,n){"use strict";n.d(e,{nr:function(){return ct},ri:function(){return dt}});n(7658);var r=n(7139),i=n(3396),s=n(4870);const o="http://www.w3.org/2000/svg",a="undefined"!==typeof document?document:null,c=a&&a.createElement("template"),u={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const i=e?a.createElementNS(o,t):a.createElement(t,n?{is:n}:void 0);return"select"===t&&r&&null!=r.multiple&&i.setAttribute("multiple",r.multiple),i},createText:t=>a.createTextNode(t),createComment:t=>a.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>a.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,i,s){const o=n?n.previousSibling:e.lastChild;if(i&&(i===s||i.nextSibling)){while(1)if(e.insertBefore(i.cloneNode(!0),n),i===s||!(i=i.nextSibling))break}else{c.innerHTML=r?`<svg>${t}</svg>`:t;const i=c.content;if(r){const t=i.firstChild;while(t.firstChild)i.appendChild(t.firstChild);i.removeChild(t)}e.insertBefore(i,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}};function l(t,e,n){const r=t._vtc;r&&(e=(e?[e,...r]:[...r]).join(" ")),null==e?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}function h(t,e,n){const i=t.style,s=(0,r.HD)(n);if(n&&!s){if(e&&!(0,r.HD)(e))for(const t in e)null==n[t]&&f(i,t,"");for(const t in n)f(i,t,n[t])}else{const r=i.display;s?e!==n&&(i.cssText=n):e&&t.removeAttribute("style"),"_vod"in t&&(i.display=r)}}const d=/\s*!important$/;function f(t,e,n){if((0,r.kJ)(n))n.forEach((n=>f(t,e,n)));else if(null==n&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const i=y(t,e);d.test(n)?t.setProperty((0,r.rs)(i),n.replace(d,""),"important"):t[i]=n}}const p=["Webkit","Moz","ms"],g={};function y(t,e){const n=g[e];if(n)return n;let i=(0,r._A)(e);if("filter"!==i&&i in t)return g[e]=i;i=(0,r.kC)(i);for(let r=0;r<p.length;r++){const n=p[r]+i;if(n in t)return g[e]=n}return e}const b="http://www.w3.org/1999/xlink";function w(t,e,n,i,s){if(i&&e.startsWith("xlink:"))null==n?t.removeAttributeNS(b,e.slice(6,e.length)):t.setAttributeNS(b,e,n);else{const i=(0,r.Pq)(e);null==n||i&&!(0,r.yA)(n)?t.removeAttribute(e):t.setAttribute(e,i?"":n)}}function m(t,e,n,i,s,o,a){if("innerHTML"===e||"textContent"===e)return i&&a(i,s,o),void(t[e]=null==n?"":n);const c=t.tagName;if("value"===e&&"PROGRESS"!==c&&!c.includes("-")){t._value=n;const r="OPTION"===c?t.getAttribute("value"):t.value,i=null==n?"":n;return r!==i&&(t.value=i),void(null==n&&t.removeAttribute(e))}let u=!1;if(""===n||null==n){const i=typeof t[e];"boolean"===i?n=(0,r.yA)(n):null==n&&"string"===i?(n="",u=!0):"number"===i&&(n=0,u=!0)}try{t[e]=n}catch(l){0}u&&t.removeAttribute(e)}function v(t,e,n,r){t.addEventListener(e,n,r)}function E(t,e,n,r){t.removeEventListener(e,n,r)}function A(t,e,n,r,i=null){const s=t._vei||(t._vei={}),o=s[e];if(r&&o)o.value=r;else{const[n,a]=S(e);if(r){const o=s[e]=C(r,i);v(t,n,o,a)}else o&&(E(t,n,o,a),s[e]=void 0)}}const x=/(?:Once|Passive|Capture)$/;function S(t){let e;if(x.test(t)){let n;e={};while(n=t.match(x))t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}const n=":"===t[2]?t.slice(3):(0,r.rs)(t.slice(2));return[n,e]}let _=0;const I=Promise.resolve(),R=()=>_||(I.then((()=>_=0)),_=Date.now());function C(t,e){const n=t=>{if(t._vts){if(t._vts<=n.attached)return}else t._vts=Date.now();(0,i.$d)(k(t,n.value),e,5,[t])};return n.value=t,n.attached=R(),n}function k(t,e){if((0,r.kJ)(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map((t=>e=>!e._stopped&&t&&t(e)))}return e}const L=/^on[a-z]/,T=(t,e,n,i,s=!1,o,a,c,u)=>{"class"===e?l(t,i,s):"style"===e?h(t,n,i):(0,r.F7)(e)?(0,r.tR)(e)||A(t,e,n,i,a):("."===e[0]?(e=e.slice(1),1):"^"===e[0]?(e=e.slice(1),0):B(t,e,i,s))?m(t,e,i,o,a,c,u):("true-value"===e?t._trueValue=i:"false-value"===e&&(t._falseValue=i),w(t,e,i,s))};function B(t,e,n,i){return i?"innerHTML"===e||"textContent"===e||!!(e in t&&L.test(e)&&(0,r.mf)(n)):"spellcheck"!==e&&"draggable"!==e&&"translate"!==e&&("form"!==e&&(("list"!==e||"INPUT"!==t.tagName)&&(("type"!==e||"TEXTAREA"!==t.tagName)&&((!L.test(e)||!(0,r.HD)(n))&&e in t))))}"undefined"!==typeof HTMLElement&&HTMLElement;const O="transition",N="animation",D=(t,{slots:e})=>(0,i.h)(i.P$,F(t),e);D.displayName="Transition";const U={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},P=D.props=(0,r.l7)({},i.nJ,U),M=(t,e=[])=>{(0,r.kJ)(t)?t.forEach((t=>t(...e))):t&&t(...e)},Z=t=>!!t&&((0,r.kJ)(t)?t.some((t=>t.length>1)):t.length>1);function F(t){const e={};for(const r in t)r in U||(e[r]=t[r]);if(!1===t.css)return e;const{name:n="v",type:i,duration:s,enterFromClass:o=`${n}-enter-from`,enterActiveClass:a=`${n}-enter-active`,enterToClass:c=`${n}-enter-to`,appearFromClass:u=o,appearActiveClass:l=a,appearToClass:h=c,leaveFromClass:d=`${n}-leave-from`,leaveActiveClass:f=`${n}-leave-active`,leaveToClass:p=`${n}-leave-to`}=t,g=V(s),y=g&&g[0],b=g&&g[1],{onBeforeEnter:w,onEnter:m,onEnterCancelled:v,onLeave:E,onLeaveCancelled:A,onBeforeAppear:x=w,onAppear:S=m,onAppearCancelled:_=v}=e,I=(t,e,n)=>{j(t,e?h:c),j(t,e?l:a),n&&n()},R=(t,e)=>{t._isLeaving=!1,j(t,d),j(t,p),j(t,f),e&&e()},C=t=>(e,n)=>{const r=t?S:m,s=()=>I(e,t,n);M(r,[e,s]),K((()=>{j(e,t?u:o),$(e,t?h:c),Z(r)||q(e,i,y,s)}))};return(0,r.l7)(e,{onBeforeEnter(t){M(w,[t]),$(t,o),$(t,a)},onBeforeAppear(t){M(x,[t]),$(t,u),$(t,l)},onEnter:C(!1),onAppear:C(!0),onLeave(t,e){t._isLeaving=!0;const n=()=>R(t,e);$(t,d),Y(),$(t,f),K((()=>{t._isLeaving&&(j(t,d),$(t,p),Z(E)||q(t,i,b,n))})),M(E,[t,n])},onEnterCancelled(t){I(t,!1),M(v,[t])},onAppearCancelled(t){I(t,!0),M(_,[t])},onLeaveCancelled(t){R(t),M(A,[t])}})}function V(t){if(null==t)return null;if((0,r.Kn)(t))return[H(t.enter),H(t.leave)];{const e=H(t);return[e,e]}}function H(t){const e=(0,r.He)(t);return e}function $(t,e){e.split(/\s+/).forEach((e=>e&&t.classList.add(e))),(t._vtc||(t._vtc=new Set)).add(e)}function j(t,e){e.split(/\s+/).forEach((e=>e&&t.classList.remove(e)));const{_vtc:n}=t;n&&(n.delete(e),n.size||(t._vtc=void 0))}function K(t){requestAnimationFrame((()=>{requestAnimationFrame(t)}))}let z=0;function q(t,e,n,r){const i=t._endId=++z,s=()=>{i===t._endId&&r()};if(n)return setTimeout(s,n);const{type:o,timeout:a,propCount:c}=G(t,e);if(!o)return r();const u=o+"end";let l=0;const h=()=>{t.removeEventListener(u,d),s()},d=e=>{e.target===t&&++l>=c&&h()};setTimeout((()=>{l<c&&h()}),a+1),t.addEventListener(u,d)}function G(t,e){const n=window.getComputedStyle(t),r=t=>(n[t]||"").split(", "),i=r(`${O}Delay`),s=r(`${O}Duration`),o=W(i,s),a=r(`${N}Delay`),c=r(`${N}Duration`),u=W(a,c);let l=null,h=0,d=0;e===O?o>0&&(l=O,h=o,d=s.length):e===N?u>0&&(l=N,h=u,d=c.length):(h=Math.max(o,u),l=h>0?o>u?O:N:null,d=l?l===O?s.length:c.length:0);const f=l===O&&/\b(transform|all)(,|$)/.test(r(`${O}Property`).toString());return{type:l,timeout:h,propCount:d,hasTransform:f}}function W(t,e){while(t.length<e.length)t=t.concat(t);return Math.max(...e.map(((e,n)=>J(e)+J(t[n]))))}function J(t){return 1e3*Number(t.slice(0,-1).replace(",","."))}function Y(){return document.body.offsetHeight}const Q=new WeakMap,X=new WeakMap,tt={name:"TransitionGroup",props:(0,r.l7)({},P,{tag:String,moveClass:String}),setup(t,{slots:e}){const n=(0,i.FN)(),r=(0,i.Y8)();let o,a;return(0,i.ic)((()=>{if(!o.length)return;const e=t.moveClass||`${t.name||"v"}-move`;if(!it(o[0].el,n.vnode.el,e))return;o.forEach(et),o.forEach(nt);const r=o.filter(rt);Y(),r.forEach((t=>{const n=t.el,r=n.style;$(n,e),r.transform=r.webkitTransform=r.transitionDuration="";const i=n._moveCb=t=>{t&&t.target!==n||t&&!/transform$/.test(t.propertyName)||(n.removeEventListener("transitionend",i),n._moveCb=null,j(n,e))};n.addEventListener("transitionend",i)}))})),()=>{const c=(0,s.IU)(t),u=F(c);let l=c.tag||i.HY;o=a,a=e.default?(0,i.Q6)(e.default()):[];for(let t=0;t<a.length;t++){const e=a[t];null!=e.key&&(0,i.nK)(e,(0,i.U2)(e,u,r,n))}if(o)for(let t=0;t<o.length;t++){const e=o[t];(0,i.nK)(e,(0,i.U2)(e,u,r,n)),Q.set(e,e.el.getBoundingClientRect())}return(0,i.Wm)(l,null,a)}}};tt.props;function et(t){const e=t.el;e._moveCb&&e._moveCb(),e._enterCb&&e._enterCb()}function nt(t){X.set(t,t.el.getBoundingClientRect())}function rt(t){const e=Q.get(t),n=X.get(t),r=e.left-n.left,i=e.top-n.top;if(r||i){const e=t.el.style;return e.transform=e.webkitTransform=`translate(${r}px,${i}px)`,e.transitionDuration="0s",t}}function it(t,e,n){const r=t.cloneNode();t._vtc&&t._vtc.forEach((t=>{t.split(/\s+/).forEach((t=>t&&r.classList.remove(t)))})),n.split(/\s+/).forEach((t=>t&&r.classList.add(t))),r.style.display="none";const i=1===e.nodeType?e:e.parentNode;i.appendChild(r);const{hasTransform:s}=G(r);return i.removeChild(r),s}const st=t=>{const e=t.props["onUpdate:modelValue"]||!1;return(0,r.kJ)(e)?t=>(0,r.ir)(e,t):e};function ot(t){t.target.composing=!0}function at(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const ct={created(t,{modifiers:{lazy:e,trim:n,number:i}},s){t._assign=st(s);const o=i||s.props&&"number"===s.props.type;v(t,e?"change":"input",(e=>{if(e.target.composing)return;let i=t.value;n&&(i=i.trim()),o&&(i=(0,r.h5)(i)),t._assign(i)})),n&&v(t,"change",(()=>{t.value=t.value.trim()})),e||(v(t,"compositionstart",ot),v(t,"compositionend",at),v(t,"change",at))},mounted(t,{value:e}){t.value=null==e?"":e},beforeUpdate(t,{value:e,modifiers:{lazy:n,trim:i,number:s}},o){if(t._assign=st(o),t.composing)return;if(document.activeElement===t&&"range"!==t.type){if(n)return;if(i&&t.value.trim()===e)return;if((s||"number"===t.type)&&(0,r.h5)(t.value)===e)return}const a=null==e?"":e;t.value!==a&&(t.value=a)}};const ut=(0,r.l7)({patchProp:T},u);let lt;function ht(){return lt||(lt=(0,i.Us)(ut))}const dt=(...t)=>{const e=ht().createApp(...t);const{mount:n}=e;return e.mount=t=>{const i=ft(t);if(!i)return;const s=e._component;(0,r.mf)(s)||s.render||s.template||(s.template=i.innerHTML),i.innerHTML="";const o=n(i,!1,i instanceof SVGElement);return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},e};function ft(t){if((0,r.HD)(t)){const e=document.querySelector(t);return e}return t}},7139:function(t,e,n){"use strict";n.d(e,{C_:function(){return Q},DM:function(){return b},E9:function(){return j},F7:function(){return u},Gg:function(){return L},HD:function(){return E},He:function(){return H},Kj:function(){return m},Kn:function(){return x},NO:function(){return a},Nj:function(){return F},Od:function(){return d},PO:function(){return C},Pq:function(){return tt},RI:function(){return p},S0:function(){return k},W7:function(){return R},WV:function(){return rt},Z6:function(){return s},_A:function(){return O},_N:function(){return y},aU:function(){return M},dG:function(){return o},e1:function(){return z},fY:function(){return r},h5:function(){return V},hR:function(){return P},hq:function(){return it},ir:function(){return Z},j5:function(){return q},kC:function(){return U},kJ:function(){return g},kT:function(){return i},l7:function(){return h},mf:function(){return v},rs:function(){return D},tI:function(){return S},tR:function(){return l},yA:function(){return et},yk:function(){return A},zw:function(){return st}});n(7658);function r(t,e){const n=Object.create(null),r=t.split(",");for(let i=0;i<r.length;i++)n[r[i]]=!0;return e?t=>!!n[t.toLowerCase()]:t=>!!n[t]}const i={},s=[],o=()=>{},a=()=>!1,c=/^on[^a-z]/,u=t=>c.test(t),l=t=>t.startsWith("onUpdate:"),h=Object.assign,d=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},f=Object.prototype.hasOwnProperty,p=(t,e)=>f.call(t,e),g=Array.isArray,y=t=>"[object Map]"===I(t),b=t=>"[object Set]"===I(t),w=t=>"[object Date]"===I(t),m=t=>"[object RegExp]"===I(t),v=t=>"function"===typeof t,E=t=>"string"===typeof t,A=t=>"symbol"===typeof t,x=t=>null!==t&&"object"===typeof t,S=t=>x(t)&&v(t.then)&&v(t.catch),_=Object.prototype.toString,I=t=>_.call(t),R=t=>I(t).slice(8,-1),C=t=>"[object Object]"===I(t),k=t=>E(t)&&"NaN"!==t&&"-"!==t[0]&&""+parseInt(t,10)===t,L=r(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),T=t=>{const e=Object.create(null);return n=>{const r=e[n];return r||(e[n]=t(n))}},B=/-(\w)/g,O=T((t=>t.replace(B,((t,e)=>e?e.toUpperCase():"")))),N=/\B([A-Z])/g,D=T((t=>t.replace(N,"-$1").toLowerCase())),U=T((t=>t.charAt(0).toUpperCase()+t.slice(1))),P=T((t=>t?`on${U(t)}`:"")),M=(t,e)=>!Object.is(t,e),Z=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},F=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},V=t=>{const e=parseFloat(t);return isNaN(e)?t:e},H=t=>{const e=E(t)?Number(t):NaN;return isNaN(e)?t:e};let $;const j=()=>$||($="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:{});const K="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console",z=r(K);function q(t){if(g(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],i=E(r)?Y(r):q(r);if(i)for(const t in i)e[t]=i[t]}return e}return E(t)||x(t)?t:void 0}const G=/;(?![^(]*\))/g,W=/:([^]+)/,J=/\/\*[^]*?\*\//g;function Y(t){const e={};return t.replace(J,"").split(G).forEach((t=>{if(t){const n=t.split(W);n.length>1&&(e[n[0].trim()]=n[1].trim())}})),e}function Q(t){let e="";if(E(t))e=t;else if(g(t))for(let n=0;n<t.length;n++){const r=Q(t[n]);r&&(e+=r+" ")}else if(x(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const X="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",tt=r(X);function et(t){return!!t||""===t}function nt(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=rt(t[r],e[r]);return n}function rt(t,e){if(t===e)return!0;let n=w(t),r=w(e);if(n||r)return!(!n||!r)&&t.getTime()===e.getTime();if(n=A(t),r=A(e),n||r)return t===e;if(n=g(t),r=g(e),n||r)return!(!n||!r)&&nt(t,e);if(n=x(t),r=x(e),n||r){if(!n||!r)return!1;const i=Object.keys(t).length,s=Object.keys(e).length;if(i!==s)return!1;for(const n in t){const r=t.hasOwnProperty(n),i=e.hasOwnProperty(n);if(r&&!i||!r&&i||!rt(t[n],e[n]))return!1}}return String(t)===String(e)}function it(t,e){return t.findIndex((t=>rt(t,e)))}const st=t=>E(t)?t:null==t?"":g(t)||x(t)&&(t.toString===_||!v(t.toString))?JSON.stringify(t,ot,2):String(t),ot=(t,e)=>e&&e.__v_isRef?ot(t,e.value):y(e)?{[`Map(${e.size})`]:[...e.entries()].reduce(((t,[e,n])=>(t[`${e} =>`]=n,t)),{})}:b(e)?{[`Set(${e.size})`]:[...e.values()]}:!x(e)||g(e)||C(e)?e:String(e)},5210:function(t){var e=1e3,n=60*e,r=60*n,i=24*r,s=7*i,o=365.25*i;function a(t){if(t=String(t),!(t.length>100)){var a=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(a){var c=parseFloat(a[1]),u=(a[2]||"ms").toLowerCase();switch(u){case"years":case"year":case"yrs":case"yr":case"y":return c*o;case"weeks":case"week":case"w":return c*s;case"days":case"day":case"d":return c*i;case"hours":case"hour":case"hrs":case"hr":case"h":return c*r;case"minutes":case"minute":case"mins":case"min":case"m":return c*n;case"seconds":case"second":case"secs":case"sec":case"s":return c*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return c;default:return}}}}function c(t){var s=Math.abs(t);return s>=i?Math.round(t/i)+"d":s>=r?Math.round(t/r)+"h":s>=n?Math.round(t/n)+"m":s>=e?Math.round(t/e)+"s":t+"ms"}function u(t){var s=Math.abs(t);return s>=i?l(t,s,i,"day"):s>=r?l(t,s,r,"hour"):s>=n?l(t,s,n,"minute"):s>=e?l(t,s,e,"second"):t+" ms"}function l(t,e,n,r){var i=e>=1.5*n;return Math.round(t/n)+" "+r+(i?"s":"")}t.exports=function(t,e){e=e||{};var n=typeof t;if("string"===n&&t.length>0)return a(t);if("number"===n&&isFinite(t))return e.long?u(t):c(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},5652:function(t,e,n){function r(){return!("undefined"===typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"===typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!==typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!==typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))}function i(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;e.splice(1,0,n,"color: inherit");let r=0,i=0;e[0].replace(/%[a-zA-Z%]/g,(t=>{"%%"!==t&&(r++,"%c"===t&&(i=r))})),e.splice(i,0,n)}function s(t){try{t?e.storage.setItem("debug",t):e.storage.removeItem("debug")}catch(n){}}function o(){let t;try{t=e.storage.getItem("debug")}catch(n){}return!t&&"undefined"!==typeof process&&"env"in process&&(t={NODE_ENV:"production",BASE_URL:""}.DEBUG),t}function a(){try{return localStorage}catch(t){}}e.formatArgs=i,e.save=s,e.load=o,e.useColors=r,e.storage=a(),e.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.log=console.debug||console.log||(()=>{}),t.exports=n(2940)(e);const{formatters:c}=t.exports;c.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},2940:function(t,e,n){function r(t){function e(t){let e=0;for(let n=0;n<t.length;n++)e=(e<<5)-e+t.charCodeAt(n),e|=0;return r.colors[Math.abs(e)%r.colors.length]}function r(t){let e,n,s,o=null;function a(...t){if(!a.enabled)return;const n=a,i=Number(new Date),s=i-(e||i);n.diff=s,n.prev=e,n.curr=i,e=i,t[0]=r.coerce(t[0]),"string"!==typeof t[0]&&t.unshift("%O");let o=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,((e,i)=>{if("%%"===e)return"%";o++;const s=r.formatters[i];if("function"===typeof s){const r=t[o];e=s.call(n,r),t.splice(o,1),o--}return e})),r.formatArgs.call(n,t);const c=n.log||r.log;c.apply(n,t)}return a.namespace=t,a.useColors=r.useColors(),a.color=r.selectColor(t),a.extend=i,a.destroy=r.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==o?o:(n!==r.namespaces&&(n=r.namespaces,s=r.enabled(t)),s),set:t=>{o=t}}),"function"===typeof r.init&&r.init(a),a}function i(t,e){const n=r(this.namespace+("undefined"===typeof e?":":e)+t);return n.log=this.log,n}function s(t){let e;r.save(t),r.namespaces=t,r.names=[],r.skips=[];const n=("string"===typeof t?t:"").split(/[\s,]+/),i=n.length;for(e=0;e<i;e++)n[e]&&(t=n[e].replace(/\*/g,".*?"),"-"===t[0]?r.skips.push(new RegExp("^"+t.slice(1)+"$")):r.names.push(new RegExp("^"+t+"$")))}function o(){const t=[...r.names.map(c),...r.skips.map(c).map((t=>"-"+t))].join(",");return r.enable(""),t}function a(t){if("*"===t[t.length-1])return!0;let e,n;for(e=0,n=r.skips.length;e<n;e++)if(r.skips[e].test(t))return!1;for(e=0,n=r.names.length;e<n;e++)if(r.names[e].test(t))return!0;return!1}function c(t){return t.toString().substring(2,t.toString().length-2).replace(/\.\*\?$/,"*")}function u(t){return t instanceof Error?t.stack||t.message:t}function l(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.debug=r,r.default=r,r.coerce=u,r.disable=o,r.enable=s,r.enabled=a,r.humanize=n(5210),r.destroy=l,Object.keys(t).forEach((e=>{r[e]=t[e]})),r.names=[],r.skips=[],r.formatters={},r.selectColor=e,r.enable(r.load()),r}n(7658),t.exports=r},9998:function(t){"use strict";function e(t,e){for(const n in e)Object.defineProperty(t,n,{value:e[n],enumerable:!0,configurable:!0});return t}function n(t,n,r){if(!t||"string"===typeof t)throw new TypeError("Please pass an Error to err-code");r||(r={}),"object"===typeof n&&(r=n,n=""),n&&(r.code=n);try{return e(t,r)}catch(i){r.message=t.message,r.stack=t.stack;const n=function(){};n.prototype=Object.create(Object.getPrototypeOf(t));const s=e(new n,r);return s}}t.exports=n},4772:function(t,e,n){"use strict";n(7658);const r=n(6169);function i(t,e,n){return new r.EventIterator((({push:n})=>(this.addEventListener(t,n,e),()=>this.removeEventListener(t,n,e))),n)}e.zN=r.EventIterator,r.EventIterator},6169:function(t,e,n){"use strict";n(7658),Object.defineProperty(e,"__esModule",{value:!0});class r{constructor(){this.pullQueue=[],this.pushQueue=[],this.eventHandlers={},this.isPaused=!1,this.isStopped=!1}push(t){if(this.isStopped)return;const e={value:t,done:!1};if(this.pullQueue.length){const t=this.pullQueue.shift();t&&t.resolve(e)}else this.pushQueue.push(Promise.resolve(e)),void 0!==this.highWaterMark&&this.pushQueue.length>=this.highWaterMark&&!this.isPaused&&(this.isPaused=!0,this.eventHandlers.highWater?this.eventHandlers.highWater():console&&console.warn(`EventIterator queue reached ${this.pushQueue.length} items`))}stop(){if(!this.isStopped){this.isStopped=!0,this.remove();for(const t of this.pullQueue)t.resolve({value:void 0,done:!0});this.pullQueue.length=0}}fail(t){if(!this.isStopped)if(this.isStopped=!0,this.remove(),this.pullQueue.length){for(const e of this.pullQueue)e.reject(t);this.pullQueue.length=0}else{const e=Promise.reject(t);e.catch((()=>{})),this.pushQueue.push(e)}}remove(){Promise.resolve().then((()=>{this.removeCallback&&this.removeCallback()}))}[Symbol.asyncIterator](){return{next:t=>{const e=this.pushQueue.shift();return e?(void 0!==this.lowWaterMark&&this.pushQueue.length<=this.lowWaterMark&&this.isPaused&&(this.isPaused=!1,this.eventHandlers.lowWater&&this.eventHandlers.lowWater()),e):this.isStopped?Promise.resolve({value:void 0,done:!0}):new Promise(((t,e)=>{this.pullQueue.push({resolve:t,reject:e})}))},return:()=>(this.isStopped=!0,this.pushQueue.length=0,this.remove(),Promise.resolve({value:void 0,done:!0}))}}}class i{constructor(t,{highWaterMark:e=100,lowWaterMark:n=1}={}){const i=new r;i.highWaterMark=e,i.lowWaterMark=n,i.removeCallback=t({push:t=>i.push(t),stop:()=>i.stop(),fail:t=>i.fail(t),on:(t,e)=>{i.eventHandlers[t]=e}})||(()=>{}),this[Symbol.asyncIterator]=()=>i[Symbol.asyncIterator](),Object.freeze(this)}}e.EventIterator=i,e["default"]=i},6856:function(t,e,n){"use strict";n(7658);var r=Object.prototype.hasOwnProperty,i="~";function s(){}function o(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function a(t,e,n,r,s){if("function"!==typeof n)throw new TypeError("The listener must be a function");var a=new o(n,r||t,s),c=i?i+e:e;return t._events[c]?t._events[c].fn?t._events[c]=[t._events[c],a]:t._events[c].push(a):(t._events[c]=a,t._eventsCount++),t}function c(t,e){0===--t._eventsCount?t._events=new s:delete t._events[e]}function u(){this._events=new s,this._eventsCount=0}Object.create&&(s.prototype=Object.create(null),(new s).__proto__||(i=!1)),u.prototype.eventNames=function(){var t,e,n=[];if(0===this._eventsCount)return n;for(e in t=this._events)r.call(t,e)&&n.push(i?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},u.prototype.listeners=function(t){var e=i?i+t:t,n=this._events[e];if(!n)return[];if(n.fn)return[n.fn];for(var r=0,s=n.length,o=new Array(s);r<s;r++)o[r]=n[r].fn;return o},u.prototype.listenerCount=function(t){var e=i?i+t:t,n=this._events[e];return n?n.fn?1:n.length:0},u.prototype.emit=function(t,e,n,r,s,o){var a=i?i+t:t;if(!this._events[a])return!1;var c,u,l=this._events[a],h=arguments.length;if(l.fn){switch(l.once&&this.removeListener(t,l.fn,void 0,!0),h){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,e),!0;case 3:return l.fn.call(l.context,e,n),!0;case 4:return l.fn.call(l.context,e,n,r),!0;case 5:return l.fn.call(l.context,e,n,r,s),!0;case 6:return l.fn.call(l.context,e,n,r,s,o),!0}for(u=1,c=new Array(h-1);u<h;u++)c[u-1]=arguments[u];l.fn.apply(l.context,c)}else{var d,f=l.length;for(u=0;u<f;u++)switch(l[u].once&&this.removeListener(t,l[u].fn,void 0,!0),h){case 1:l[u].fn.call(l[u].context);break;case 2:l[u].fn.call(l[u].context,e);break;case 3:l[u].fn.call(l[u].context,e,n);break;case 4:l[u].fn.call(l[u].context,e,n,r);break;default:if(!c)for(d=1,c=new Array(h-1);d<h;d++)c[d-1]=arguments[d];l[u].fn.apply(l[u].context,c)}}return!0},u.prototype.on=function(t,e,n){return a(this,t,e,n,!1)},u.prototype.once=function(t,e,n){return a(this,t,e,n,!0)},u.prototype.removeListener=function(t,e,n,r){var s=i?i+t:t;if(!this._events[s])return this;if(!e)return c(this,s),this;var o=this._events[s];if(o.fn)o.fn!==e||r&&!o.once||n&&o.context!==n||c(this,s);else{for(var a=0,u=[],l=o.length;a<l;a++)(o[a].fn!==e||r&&!o[a].once||n&&o[a].context!==n)&&u.push(o[a]);u.length?this._events[s]=1===u.length?u[0]:u:c(this,s)}return this},u.prototype.removeAllListeners=function(t){var e;return t?(e=i?i+t:t,this._events[e]&&c(this,e)):(this._events=new s,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=i,u.EventEmitter=u,t.exports=u},8694:function(t){t.exports=function(t){if(!t)throw Error("hashlru must have a max value, of type number, greater than 0");var e=0,n=Object.create(null),r=Object.create(null);function i(i,s){n[i]=s,e++,e>=t&&(e=0,r=n,n=Object.create(null))}return{has:function(t){return void 0!==n[t]||void 0!==r[t]},remove:function(t){void 0!==n[t]&&(n[t]=void 0),void 0!==r[t]&&(r[t]=void 0)},get:function(t){var e=n[t];return void 0!==e?e:void 0!==(e=r[t])?(i(t,e),e):void 0},set:function(t,e){void 0!==n[t]?n[t]=e:i(t,e)},clear:function(){n=Object.create(null),r=Object.create(null)}}}},4024:function(t){function e(){return"undefined"!==typeof window&&"object"===typeof window.process&&"renderer"===window.process.type||(!("undefined"===typeof process||"object"!==typeof process.versions||!process.versions.electron)||"object"===typeof navigator&&"string"===typeof navigator.userAgent&&navigator.userAgent.indexOf("Electron")>=0)}t.exports=e},9969:function(t){"use strict";t.exports=t=>{if("[object Object]"!==Object.prototype.toString.call(t))return!1;const e=Object.getPrototypeOf(t);return null===e||e===Object.prototype}},535:function(t,e,n){"use strict";n(7658);const r=n(9969),{hasOwnProperty:i}=Object.prototype,{propertyIsEnumerable:s}=Object,o=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,enumerable:!0,configurable:!0}),a=this,c={concatArrays:!1,ignoreUndefined:!1},u=t=>{const e=[];for(const n in t)i.call(t,n)&&e.push(n);if(Object.getOwnPropertySymbols){const n=Object.getOwnPropertySymbols(t);for(const r of n)s.call(t,r)&&e.push(r)}return e};function l(t){return Array.isArray(t)?h(t):r(t)?d(t):t}function h(t){const e=t.slice(0,0);return u(t).forEach((n=>{o(e,n,l(t[n]))})),e}function d(t){const e=null===Object.getPrototypeOf(t)?Object.create(null):{};return u(t).forEach((n=>{o(e,n,l(t[n]))})),e}const f=(t,e,n,r)=>(n.forEach((n=>{"undefined"===typeof e[n]&&r.ignoreUndefined||(n in t&&t[n]!==Object.getPrototypeOf(t)?o(t,n,g(t[n],e[n],r)):o(t,n,l(e[n])))})),t),p=(t,e,n)=>{let r=t.slice(0,0),s=0;return[t,e].forEach((e=>{const a=[];for(let n=0;n<e.length;n++)i.call(e,n)&&(a.push(String(n)),o(r,s++,e===t?e[n]:l(e[n])));r=f(r,e,u(e).filter((t=>!a.includes(t))),n)})),r};function g(t,e,n){return n.concatArrays&&Array.isArray(t)&&Array.isArray(e)?p(t,e,n):r(e)&&r(t)?f(t,e,u(e),n):l(e)}t.exports=function(...t){const e=g(l(c),this!==a&&this||{},c);let n={_:{}};for(const i of t)if(void 0!==i){if(!r(i))throw new TypeError("`"+i+"` is not an Option Object");n=g(n,{_:i},e)}return n._}},98:function(t,e,n){n(7658),function(){var t,n,r,i,s,o,a,c;c=function(t){var e,n,r,i;return e=(t&255<<24)>>>24,n=(t&255<<16)>>>16,r=(65280&t)>>>8,i=255&t,[e,n,r,i].join(".")},a=function(t){var e,r,i,s,o,a;for(e=[],i=s=0;s<=3;i=++s){if(0===t.length)break;if(i>0){if("."!==t[0])throw new Error("Invalid IP");t=t.substring(1)}a=n(t),o=a[0],r=a[1],t=t.substring(r),e.push(o)}if(0!==t.length)throw new Error("Invalid IP");switch(e.length){case 1:if(e[0]>4294967295)throw new Error("Invalid IP");return e[0]>>>0;case 2:if(e[0]>255||e[1]>16777215)throw new Error("Invalid IP");return(e[0]<<24|e[1])>>>0;case 3:if(e[0]>255||e[1]>255||e[2]>65535)throw new Error("Invalid IP");return(e[0]<<24|e[1]<<16|e[2])>>>0;case 4:if(e[0]>255||e[1]>255||e[2]>255||e[3]>255)throw new Error("Invalid IP");return(e[0]<<24|e[1]<<16|e[2]<<8|e[3])>>>0;default:throw new Error("Invalid IP")}},r=function(t){return t.charCodeAt(0)},i=r("0"),o=r("a"),s=r("A"),n=function(t){var e,n,a,c,u;c=0,e=10,n="9",a=0,t.length>1&&"0"===t[a]&&("x"===t[a+1]||"X"===t[a+1]?(a+=2,e=16):"0"<=t[a+1]&&t[a+1]<="9"&&(a++,e=8,n="7")),u=a;while(a<t.length){if("0"<=t[a]&&t[a]<=n)c=c*e+(r(t[a])-i)>>>0;else{if(16!==e)break;if("a"<=t[a]&&t[a]<="f")c=c*e+(10+r(t[a])-o)>>>0;else{if(!("A"<=t[a]&&t[a]<="F"))break;c=c*e+(10+r(t[a])-s)>>>0}}if(c>4294967295)throw new Error("too large");a++}if(a===u)throw new Error("empty octet");return[c,a]},t=function(){function t(t,e){var n,r,i;if("string"!==typeof t)throw new Error("Missing `net' parameter");if(e||(i=t.split("/",2),t=i[0],e=i[1]),e||(e=32),"string"===typeof e&&e.indexOf(".")>-1){try{this.maskLong=a(e)}catch(s){throw s,new Error("Invalid mask: "+e)}for(n=r=32;r>=0;n=--r)if(this.maskLong===4294967295<<32-n>>>0){this.bitmask=n;break}}else{if(!e&&0!==e)throw new Error("Invalid mask: empty");this.bitmask=parseInt(e,10),this.maskLong=0,this.bitmask>0&&(this.maskLong=4294967295<<32-this.bitmask>>>0)}try{this.netLong=(a(t)&this.maskLong)>>>0}catch(s){throw s,new Error("Invalid net address: "+t)}if(!(this.bitmask<=32))throw new Error("Invalid mask for ip4: "+e);this.size=Math.pow(2,32-this.bitmask),this.base=c(this.netLong),this.mask=c(this.maskLong),this.hostmask=c(~this.maskLong),this.first=this.bitmask<=30?c(this.netLong+1):this.base,this.last=this.bitmask<=30?c(this.netLong+this.size-2):c(this.netLong+this.size-1),this.broadcast=this.bitmask<=30?c(this.netLong+this.size-1):void 0}return t.prototype.contains=function(e){return"string"===typeof e&&(e.indexOf("/")>0||4!==e.split(".").length)&&(e=new t(e)),e instanceof t?this.contains(e.base)&&this.contains(e.broadcast||e.last):(a(e)&this.maskLong)>>>0===(this.netLong&this.maskLong)>>>0},t.prototype.next=function(e){return null==e&&(e=1),new t(c(this.netLong+this.size*e),this.mask)},t.prototype.forEach=function(t){var e,n,r;r=a(this.first),n=a(this.last),e=0;while(r<=n)t(c(r),r,e),e++,r++},t.prototype.toString=function(){return this.base+"/"+this.bitmask},t}(),e.ip2long=a,e.long2ip=c,e.Netmask=t}.call(this)},9799:function(t,e,n){"use strict";n(1439),n(7585),n(5315),t.exports=c;var r,i=n(7102),s=i.LongBits,o=i.utf8;function a(t,e){return RangeError("index out of range: "+t.pos+" + "+(e||1)+" > "+t.len)}function c(t){this.buf=t,this.pos=0,this.len=t.length}var u="undefined"!==typeof Uint8Array?function(t){if(t instanceof Uint8Array||Array.isArray(t))return new c(t);throw Error("illegal buffer")}:function(t){if(Array.isArray(t))return new c(t);throw Error("illegal buffer")},l=function(){return i.Buffer?function(t){return(c.create=function(t){return i.Buffer.isBuffer(t)?new r(t):u(t)})(t)}:u};function h(){var t=new s(0,0),e=0;if(!(this.len-this.pos>4)){for(;e<3;++e){if(this.pos>=this.len)throw a(this);if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*e)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(127&this.buf[this.pos++])<<7*e)>>>0,t}for(;e<4;++e)if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*e)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(127&this.buf[this.pos])<<28)>>>0,t.hi=(t.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return t;if(e=0,this.len-this.pos>4){for(;e<5;++e)if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*e+3)>>>0,this.buf[this.pos++]<128)return t}else for(;e<5;++e){if(this.pos>=this.len)throw a(this);if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*e+3)>>>0,this.buf[this.pos++]<128)return t}throw Error("invalid varint encoding")}function d(t,e){return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0}function f(){if(this.pos+8>this.len)throw a(this,8);return new s(d(this.buf,this.pos+=4),d(this.buf,this.pos+=4))}c.create=l(),c.prototype._slice=i.Array.prototype.subarray||i.Array.prototype.slice,c.prototype.uint32=function(){var t=4294967295;return function(){if(t=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return t;if(t=(t|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return t;if(t=(t|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return t;if(t=(t|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return t;if(t=(t|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return t;if((this.pos+=5)>this.len)throw this.pos=this.len,a(this,10);return t}}(),c.prototype.int32=function(){return 0|this.uint32()},c.prototype.sint32=function(){var t=this.uint32();return t>>>1^-(1&t)|0},c.prototype.bool=function(){return 0!==this.uint32()},c.prototype.fixed32=function(){if(this.pos+4>this.len)throw a(this,4);return d(this.buf,this.pos+=4)},c.prototype.sfixed32=function(){if(this.pos+4>this.len)throw a(this,4);return 0|d(this.buf,this.pos+=4)},c.prototype.float=function(){if(this.pos+4>this.len)throw a(this,4);var t=i.float.readFloatLE(this.buf,this.pos);return this.pos+=4,t},c.prototype.double=function(){if(this.pos+8>this.len)throw a(this,4);var t=i.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,t},c.prototype.bytes=function(){var t=this.uint32(),e=this.pos,n=this.pos+t;if(n>this.len)throw a(this,t);return this.pos+=t,Array.isArray(this.buf)?this.buf.slice(e,n):e===n?new this.buf.constructor(0):this._slice.call(this.buf,e,n)},c.prototype.string=function(){var t=this.bytes();return o.read(t,0,t.length)},c.prototype.skip=function(t){if("number"===typeof t){if(this.pos+t>this.len)throw a(this,t);this.pos+=t}else do{if(this.pos>=this.len)throw a(this)}while(128&this.buf[this.pos++]);return this},c.prototype.skipType=function(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:while(4!==(t=7&this.uint32()))this.skipType(t);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+t+" at offset "+this.pos)}return this},c._configure=function(t){r=t,c.create=l(),r._configure();var e=i.Long?"toLong":"toNumber";i.merge(c.prototype,{int64:function(){return h.call(this)[e](!1)},uint64:function(){return h.call(this)[e](!0)},sint64:function(){return h.call(this).zzDecode()[e](!1)},fixed64:function(){return f.call(this)[e](!0)},sfixed64:function(){return f.call(this)[e](!1)}})}},8894:function(t,e,n){"use strict";t.exports=s;var r=n(9799);(s.prototype=Object.create(r.prototype)).constructor=s;var i=n(7102);function s(t){r.call(this,t)}s._configure=function(){i.Buffer&&(s.prototype._slice=i.Buffer.prototype.slice)},s.prototype.string=function(){var t=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+t,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+t,this.len))},s._configure()},6350:function(t,e,n){"use strict";t.exports=i;var r=n(7102);function i(t,e){this.lo=t>>>0,this.hi=e>>>0}var s=i.zero=new i(0,0);s.toNumber=function(){return 0},s.zzEncode=s.zzDecode=function(){return this},s.length=function(){return 1};var o=i.zeroHash="\0\0\0\0\0\0\0\0";i.fromNumber=function(t){if(0===t)return s;var e=t<0;e&&(t=-t);var n=t>>>0,r=(t-n)/4294967296>>>0;return e&&(r=~r>>>0,n=~n>>>0,++n>4294967295&&(n=0,++r>4294967295&&(r=0))),new i(n,r)},i.from=function(t){if("number"===typeof t)return i.fromNumber(t);if(r.isString(t)){if(!r.Long)return i.fromNumber(parseInt(t,10));t=r.Long.fromString(t)}return t.low||t.high?new i(t.low>>>0,t.high>>>0):s},i.prototype.toNumber=function(t){if(!t&&this.hi>>>31){var e=1+~this.lo>>>0,n=~this.hi>>>0;return e||(n=n+1>>>0),-(e+4294967296*n)}return this.lo+4294967296*this.hi},i.prototype.toLong=function(t){return r.Long?new r.Long(0|this.lo,0|this.hi,Boolean(t)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(t)}};var a=String.prototype.charCodeAt;i.fromHash=function(t){return t===o?s:new i((a.call(t,0)|a.call(t,1)<<8|a.call(t,2)<<16|a.call(t,3)<<24)>>>0,(a.call(t,4)|a.call(t,5)<<8|a.call(t,6)<<16|a.call(t,7)<<24)>>>0)},i.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},i.prototype.zzEncode=function(){var t=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^t)>>>0,this.lo=(this.lo<<1^t)>>>0,this},i.prototype.zzDecode=function(){var t=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^t)>>>0,this.hi=(this.hi>>>1^t)>>>0,this},i.prototype.length=function(){var t=this.lo,e=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return 0===n?0===e?t<16384?t<128?1:2:t<2097152?3:4:e<16384?e<128?5:6:e<2097152?7:8:n<128?9:10}},7102:function(t,e,n){"use strict";n(1439),n(7585),n(5315);var r=e;function i(t,e,n){for(var r=Object.keys(e),i=0;i<r.length;++i)void 0!==t[r[i]]&&n||(t[r[i]]=e[r[i]]);return t}function s(t){function e(t,n){if(!(this instanceof e))return new e(t,n);Object.defineProperty(this,"message",{get:function(){return t}}),Error.captureStackTrace?Error.captureStackTrace(this,e):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),n&&i(this,n)}return e.prototype=Object.create(Error.prototype,{constructor:{value:e,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return t},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),e}r.asPromise=n(5186),r.base64=n(8673),r.EventEmitter=n(8825),r.float=n(2913),r.inquire=n(6332),r.utf8=n(9561),r.pool=n(1168),r.LongBits=n(6350),r.isNode=Boolean("undefined"!==typeof n.g&&n.g&&n.g.process&&n.g.process.versions&&n.g.process.versions.node),r.global=r.isNode&&n.g||"undefined"!==typeof window&&window||"undefined"!==typeof self&&self||this,r.emptyArray=Object.freeze?Object.freeze([]):[],r.emptyObject=Object.freeze?Object.freeze({}):{},r.isInteger=Number.isInteger||function(t){return"number"===typeof t&&isFinite(t)&&Math.floor(t)===t},r.isString=function(t){return"string"===typeof t||t instanceof String},r.isObject=function(t){return t&&"object"===typeof t},r.isset=r.isSet=function(t,e){var n=t[e];return!(null==n||!t.hasOwnProperty(e))&&("object"!==typeof n||(Array.isArray(n)?n.length:Object.keys(n).length)>0)},r.Buffer=function(){try{var t=r.inquire("buffer").Buffer;return t.prototype.utf8Write?t:null}catch(e){return null}}(),r._Buffer_from=null,r._Buffer_allocUnsafe=null,r.newBuffer=function(t){return"number"===typeof t?r.Buffer?r._Buffer_allocUnsafe(t):new r.Array(t):r.Buffer?r._Buffer_from(t):"undefined"===typeof Uint8Array?t:new Uint8Array(t)},r.Array="undefined"!==typeof Uint8Array?Uint8Array:Array,r.Long=r.global.dcodeIO&&r.global.dcodeIO.Long||r.global.Long||r.inquire("long"),r.key2Re=/^true|false|0|1$/,r.key32Re=/^-?(?:0|[1-9][0-9]*)$/,r.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,r.longToHash=function(t){return t?r.LongBits.from(t).toHash():r.LongBits.zeroHash},r.longFromHash=function(t,e){var n=r.LongBits.fromHash(t);return r.Long?r.Long.fromBits(n.lo,n.hi,e):n.toNumber(Boolean(e))},r.merge=i,r.lcFirst=function(t){return t.charAt(0).toLowerCase()+t.substring(1)},r.newError=s,r.ProtocolError=s("ProtocolError"),r.oneOfGetter=function(t){for(var e={},n=0;n<t.length;++n)e[t[n]]=1;return function(){for(var t=Object.keys(this),n=t.length-1;n>-1;--n)if(1===e[t[n]]&&void 0!==this[t[n]]&&null!==this[t[n]])return t[n]}},r.oneOfSetter=function(t){return function(e){for(var n=0;n<t.length;++n)t[n]!==e&&delete this[t[n]]}},r.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},r._configure=function(){var t=r.Buffer;t?(r._Buffer_from=t.from!==Uint8Array.from&&t.from||function(e,n){return new t(e,n)},r._Buffer_allocUnsafe=t.allocUnsafe||function(e){return new t(e)}):r._Buffer_from=r._Buffer_allocUnsafe=null}},7156:function(t,e,n){"use strict";t.exports=h;var r,i=n(7102),s=i.LongBits,o=i.base64,a=i.utf8;function c(t,e,n){this.fn=t,this.len=e,this.next=void 0,this.val=n}function u(){}function l(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}function h(){this.len=0,this.head=new c(u,0,0),this.tail=this.head,this.states=null}var d=function(){return i.Buffer?function(){return(h.create=function(){return new r})()}:function(){return new h}};function f(t,e,n){e[n]=255&t}function p(t,e,n){while(t>127)e[n++]=127&t|128,t>>>=7;e[n]=t}function g(t,e){this.len=t,this.next=void 0,this.val=e}function y(t,e,n){while(t.hi)e[n++]=127&t.lo|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;while(t.lo>127)e[n++]=127&t.lo|128,t.lo=t.lo>>>7;e[n++]=t.lo}function b(t,e,n){e[n]=255&t,e[n+1]=t>>>8&255,e[n+2]=t>>>16&255,e[n+3]=t>>>24}h.create=d(),h.alloc=function(t){return new i.Array(t)},i.Array!==Array&&(h.alloc=i.pool(h.alloc,i.Array.prototype.subarray)),h.prototype._push=function(t,e,n){return this.tail=this.tail.next=new c(t,e,n),this.len+=e,this},g.prototype=Object.create(c.prototype),g.prototype.fn=p,h.prototype.uint32=function(t){return this.len+=(this.tail=this.tail.next=new g((t>>>=0)<128?1:t<16384?2:t<2097152?3:t<268435456?4:5,t)).len,this},h.prototype.int32=function(t){return t<0?this._push(y,10,s.fromNumber(t)):this.uint32(t)},h.prototype.sint32=function(t){return this.uint32((t<<1^t>>31)>>>0)},h.prototype.uint64=function(t){var e=s.from(t);return this._push(y,e.length(),e)},h.prototype.int64=h.prototype.uint64,h.prototype.sint64=function(t){var e=s.from(t).zzEncode();return this._push(y,e.length(),e)},h.prototype.bool=function(t){return this._push(f,1,t?1:0)},h.prototype.fixed32=function(t){return this._push(b,4,t>>>0)},h.prototype.sfixed32=h.prototype.fixed32,h.prototype.fixed64=function(t){var e=s.from(t);return this._push(b,4,e.lo)._push(b,4,e.hi)},h.prototype.sfixed64=h.prototype.fixed64,h.prototype.float=function(t){return this._push(i.float.writeFloatLE,4,t)},h.prototype.double=function(t){return this._push(i.float.writeDoubleLE,8,t)};var w=i.Array.prototype.set?function(t,e,n){e.set(t,n)}:function(t,e,n){for(var r=0;r<t.length;++r)e[n+r]=t[r]};h.prototype.bytes=function(t){var e=t.length>>>0;if(!e)return this._push(f,1,0);if(i.isString(t)){var n=h.alloc(e=o.length(t));o.decode(t,n,0),t=n}return this.uint32(e)._push(w,e,t)},h.prototype.string=function(t){var e=a.length(t);return e?this.uint32(e)._push(a.write,e,t):this._push(f,1,0)},h.prototype.fork=function(){return this.states=new l(this),this.head=this.tail=new c(u,0,0),this.len=0,this},h.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new c(u,0,0),this.len=0),this},h.prototype.ldelim=function(){var t=this.head,e=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=t.next,this.tail=e,this.len+=n),this},h.prototype.finish=function(){var t=this.head.next,e=this.constructor.alloc(this.len),n=0;while(t)t.fn(t.val,e,n),n+=t.len,t=t.next;return e},h._configure=function(t){r=t,h.create=d(),r._configure()}},8252:function(t,e,n){"use strict";n(1439),n(7585),n(5315),t.exports=s;var r=n(7156);(s.prototype=Object.create(r.prototype)).constructor=s;var i=n(7102);function s(){r.call(this)}function o(t,e,n){t.length<40?i.utf8.write(t,e,n):e.utf8Write?e.utf8Write(t,n):e.write(t,n)}s._configure=function(){s.alloc=i._Buffer_allocUnsafe,s.writeBytesBuffer=i.Buffer&&i.Buffer.prototype instanceof Uint8Array&&"set"===i.Buffer.prototype.set.name?function(t,e,n){e.set(t,n)}:function(t,e,n){if(t.copy)t.copy(e,n,0,t.length);else for(var r=0;r<t.length;)e[n++]=t[r++]}},s.prototype.bytes=function(t){i.isString(t)&&(t=i._Buffer_from(t,"base64"));var e=t.length>>>0;return this.uint32(e),e&&this._push(s.writeBytesBuffer,e,t),this},s.prototype.string=function(t){var e=i.Buffer.byteLength(t);return this.uint32(e),e&&this._push(o,e,t),this},s._configure()},5698:function(t,e,n){"use strict";
/*!
 * MIT License
 * 
 * Copyright (c) 2017-2022 Peculiar Ventures, LLC
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 * 
 */
n(1439),n(7585),n(5315),n(2801);const r="[object ArrayBuffer]";class i{static isArrayBuffer(t){return Object.prototype.toString.call(t)===r}static toArrayBuffer(t){return this.isArrayBuffer(t)?t:t.byteLength===t.buffer.byteLength||0===t.byteOffset&&t.byteLength===t.buffer.byteLength?t.buffer:this.toUint8Array(t.buffer).slice(t.byteOffset,t.byteOffset+t.byteLength).buffer}static toUint8Array(t){return this.toView(t,Uint8Array)}static toView(t,e){if(t.constructor===e)return t;if(this.isArrayBuffer(t))return new e(t);if(this.isArrayBufferView(t))return new e(t.buffer,t.byteOffset,t.byteLength);throw new TypeError("The provided value is not of type '(ArrayBuffer or ArrayBufferView)'")}static isBufferSource(t){return this.isArrayBufferView(t)||this.isArrayBuffer(t)}static isArrayBufferView(t){return ArrayBuffer.isView(t)||t&&this.isArrayBuffer(t.buffer)}static isEqual(t,e){const n=i.toUint8Array(t),r=i.toUint8Array(e);if(n.length!==r.byteLength)return!1;for(let i=0;i<n.length;i++)if(n[i]!==r[i])return!1;return!0}static concat(...t){let e;e=!Array.isArray(t[0])||t[1]instanceof Function?Array.isArray(t[0])&&t[1]instanceof Function?t[0]:t[t.length-1]instanceof Function?t.slice(0,t.length-1):t:t[0];let n=0;for(const s of e)n+=s.byteLength;const r=new Uint8Array(n);let i=0;for(const s of e){const t=this.toUint8Array(s);r.set(t,i),i+=t.length}return t[t.length-1]instanceof Function?this.toView(r,t[t.length-1]):r.buffer}}const s="string",o=/^[0-9a-f]+$/i,a=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/,c=/^[a-zA-Z0-9-_]+$/;class u{static fromString(t){const e=unescape(encodeURIComponent(t)),n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n.buffer}static toString(t){const e=i.toUint8Array(t);let n="";for(let i=0;i<e.length;i++)n+=String.fromCharCode(e[i]);const r=decodeURIComponent(escape(n));return r}}class l{static toString(t,e=!1){const n=i.toArrayBuffer(t),r=new DataView(n);let s="";for(let i=0;i<n.byteLength;i+=2){const t=r.getUint16(i,e);s+=String.fromCharCode(t)}return s}static fromString(t,e=!1){const n=new ArrayBuffer(2*t.length),r=new DataView(n);for(let i=0;i<t.length;i++)r.setUint16(2*i,t.charCodeAt(i),e);return n}}class h{static isHex(t){return typeof t===s&&o.test(t)}static isBase64(t){return typeof t===s&&a.test(t)}static isBase64Url(t){return typeof t===s&&c.test(t)}static ToString(t,e="utf8"){const n=i.toUint8Array(t);switch(e.toLowerCase()){case"utf8":return this.ToUtf8String(n);case"binary":return this.ToBinary(n);case"hex":return this.ToHex(n);case"base64":return this.ToBase64(n);case"base64url":return this.ToBase64Url(n);case"utf16le":return l.toString(n,!0);case"utf16":case"utf16be":return l.toString(n);default:throw new Error(`Unknown type of encoding '${e}'`)}}static FromString(t,e="utf8"){if(!t)return new ArrayBuffer(0);switch(e.toLowerCase()){case"utf8":return this.FromUtf8String(t);case"binary":return this.FromBinary(t);case"hex":return this.FromHex(t);case"base64":return this.FromBase64(t);case"base64url":return this.FromBase64Url(t);case"utf16le":return l.fromString(t,!0);case"utf16":case"utf16be":return l.fromString(t);default:throw new Error(`Unknown type of encoding '${e}'`)}}static ToBase64(t){const e=i.toUint8Array(t);if("undefined"!==typeof btoa){const t=this.ToString(e,"binary");return btoa(t)}return Buffer.from(e).toString("base64")}static FromBase64(t){const e=this.formatString(t);if(!e)return new ArrayBuffer(0);if(!h.isBase64(e))throw new TypeError("Argument 'base64Text' is not Base64 encoded");return"undefined"!==typeof atob?this.FromBinary(atob(e)):new Uint8Array(Buffer.from(e,"base64")).buffer}static FromBase64Url(t){const e=this.formatString(t);if(!e)return new ArrayBuffer(0);if(!h.isBase64Url(e))throw new TypeError("Argument 'base64url' is not Base64Url encoded");return this.FromBase64(this.Base64Padding(e.replace(/\-/g,"+").replace(/\_/g,"/")))}static ToBase64Url(t){return this.ToBase64(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}static FromUtf8String(t,e=h.DEFAULT_UTF8_ENCODING){switch(e){case"ascii":return this.FromBinary(t);case"utf8":return u.fromString(t);case"utf16":case"utf16be":return l.fromString(t);case"utf16le":case"usc2":return l.fromString(t,!0);default:throw new Error(`Unknown type of encoding '${e}'`)}}static ToUtf8String(t,e=h.DEFAULT_UTF8_ENCODING){switch(e){case"ascii":return this.ToBinary(t);case"utf8":return u.toString(t);case"utf16":case"utf16be":return l.toString(t);case"utf16le":case"usc2":return l.toString(t,!0);default:throw new Error(`Unknown type of encoding '${e}'`)}}static FromBinary(t){const e=t.length,n=new Uint8Array(e);for(let r=0;r<e;r++)n[r]=t.charCodeAt(r);return n.buffer}static ToBinary(t){const e=i.toUint8Array(t);let n="";for(let r=0;r<e.length;r++)n+=String.fromCharCode(e[r]);return n}static ToHex(t){const e=i.toUint8Array(t);let n="";const r=e.length;for(let i=0;i<r;i++){const t=e[i];t<16&&(n+="0"),n+=t.toString(16)}return n}static FromHex(t){let e=this.formatString(t);if(!e)return new ArrayBuffer(0);if(!h.isHex(e))throw new TypeError("Argument 'hexString' is not HEX encoded");e.length%2&&(e=`0${e}`);const n=new Uint8Array(e.length/2);for(let r=0;r<e.length;r+=2){const t=e.slice(r,r+2);n[r/2]=parseInt(t,16)}return n.buffer}static ToUtf16String(t,e=!1){return l.toString(t,e)}static FromUtf16String(t,e=!1){return l.fromString(t,e)}static Base64Padding(t){const e=4-t.length%4;if(e<4)for(let n=0;n<e;n++)t+="=";return t}static formatString(t){return(null===t||void 0===t?void 0:t.replace(/[\n\r\t ]/g,""))||""}}function d(t,...e){const n=arguments[0];for(let r=1;r<arguments.length;r++){const t=arguments[r];for(const e in t)n[e]=t[e]}return n}function f(...t){const e=t.map((t=>t.byteLength)).reduce(((t,e)=>t+e)),n=new Uint8Array(e);let r=0;return t.map((t=>new Uint8Array(t))).forEach((t=>{for(const e of t)n[r++]=e})),n.buffer}function p(t,e){if(!t||!e)return!1;if(t.byteLength!==e.byteLength)return!1;const n=new Uint8Array(t),r=new Uint8Array(e);for(let i=0;i<t.byteLength;i++)if(n[i]!==r[i])return!1;return!0}h.DEFAULT_UTF8_ENCODING="utf8",e.vJ=i,e.ep=h},89:function(t,e){"use strict";e.Z=(t,e)=>{const n=t.__vccOpts||t;for(const[r,i]of e)n[r]=i;return n}},4063:function(t,e,n){"use strict";function r(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}n.d(e,{Z:function(){return r}})},9371:function(t,e,n){"use strict";function r(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}n.d(e,{Z:function(){return r}})},8829:function(t,e,n){"use strict";function r(t,e){return e.get?e.get.call(t):e.value}n.d(e,{Z:function(){return s}});var i=n(9371);function s(t,e){var n=(0,i.Z)(t,e,"get");return r(t,n)}},714:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(4063);function i(t,e,n){(0,r.Z)(t,e),e.set(t,n)}},2575:function(t,e,n){"use strict";function r(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}n.d(e,{Z:function(){return s}});var i=n(9371);function s(t,e,n){var s=(0,i.Z)(t,e,"set");return r(t,s,n),n}},9614:function(t,e,n){"use strict";function r(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}n.d(e,{Z:function(){return r}})},3781:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(4063);function i(t,e){(0,r.Z)(t,e),e.add(t)}},7327:function(t,e,n){"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function i(t,e){if("object"!==r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function s(t){var e=i(t,"string");return"symbol"===r(e)?e:String(e)}function o(t,e,n){return e=s(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,{Z:function(){return o}})},4906:function(t,e,n){"use strict";n.d(e,{C:function(){return i},aY:function(){return s},h6:function(){return o}});var r=n(1043);function i(t){return Boolean((0,r.cs)(t))}function s(t){return Boolean((0,r.XK)(t))}function o(t){return Boolean((0,r.yb)(t))}},1043:function(t,e,n){"use strict";n.d(e,{yb:function(){return l},cs:function(){return c},XK:function(){return u}});var r=n(7327);n(1439),n(7585),n(5315);class i{constructor(){(0,r.Z)(this,"index",0),(0,r.Z)(this,"input","")}new(t){return this.index=0,this.input=t,this}readAtomically(t){const e=this.index,n=t();return void 0===n&&(this.index=e),n}parseWith(t){const e=t();if(this.index===this.input.length)return e}peekChar(){if(!(this.index>=this.input.length))return this.input[this.index]}readChar(){if(!(this.index>=this.input.length))return this.input[this.index++]}readGivenChar(t){return this.readAtomically((()=>{const e=this.readChar();if(e===t)return e}))}readSeparator(t,e,n){return this.readAtomically((()=>{if(!(e>0&&void 0===this.readGivenChar(t)))return n()}))}readNumber(t,e,n,r){return this.readAtomically((()=>{let i=0,s=0;const o=this.peekChar();if(void 0===o)return;const a="0"===o,c=2**(8*r)-1;while(1){const n=this.readAtomically((()=>{const e=this.readChar();if(void 0===e)return;const n=Number.parseInt(e,t);return Number.isNaN(n)?void 0:n}));if(void 0===n)break;if(i*=t,i+=n,i>c)return;if(s+=1,void 0!==e&&s>e)return}return 0===s||!n&&a&&s>1?void 0:i}))}readIPv4Addr(){return this.readAtomically((()=>{const t=new Uint8Array(4);for(let e=0;e<t.length;e++){const n=this.readSeparator(".",e,(()=>this.readNumber(10,3,!1,1)));if(void 0===n)return;t[e]=n}return t}))}readIPv6Addr(){const t=t=>{for(let e=0;e<t.length/2;e++){const n=2*e;if(e<t.length-3){const r=this.readSeparator(":",e,(()=>this.readIPv4Addr()));if(void 0!==r)return t[n]=r[0],t[n+1]=r[1],t[n+2]=r[2],t[n+3]=r[3],[n+4,!0]}const r=this.readSeparator(":",e,(()=>this.readNumber(16,4,!0,2)));if(void 0===r)return[n,!1];t[n]=r>>8,t[n+1]=255&r}return[t.length,!1]};return this.readAtomically((()=>{const e=new Uint8Array(16),[n,r]=t(e);if(16===n)return e;if(r)return;if(void 0===this.readGivenChar(":"))return;if(void 0===this.readGivenChar(":"))return;const i=new Uint8Array(14),s=16-(n+2),[o]=t(i.subarray(0,s));return e.set(i.subarray(0,o),16-o),e}))}readIPAddr(){return this.readIPv4Addr()??this.readIPv6Addr()}}const s=45,o=15,a=new i;function c(t){if(!(t.length>o))return a.new(t).parseWith((()=>a.readIPv4Addr()))}function u(t){if(!(t.length>s))return a.new(t).parseWith((()=>a.readIPv6Addr()))}function l(t){if(!(t.length>s))return a.new(t).parseWith((()=>a.readIPAddr()))}},3779:function(t,e,n){"use strict";n.d(e,{t:function(){return bi}});var r=n(7327),i=n(5326),s=n(4856),o=n(1869);n(1439),n(7585),n(5315),n(7658);function a(t){return null!=globalThis.Buffer?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function c(t=0){return null!=globalThis.Buffer?.alloc?a(globalThis.Buffer.alloc(t)):new Uint8Array(t)}function u(t=0){return null!=globalThis.Buffer?.allocUnsafe?a(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function l(t,e){null==e&&(e=t.reduce(((t,e)=>t+e.length),0));const n=u(e);let r=0;for(const i of t)n.set(i,r),r+=i.length;return a(n)}function h(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let n=0;n<t.byteLength;n++)if(t[n]!==e[n])return!1;return!0}const d=Symbol.for("@achingbrain/uint8arraylist");function f(t,e){if(null==e||e<0)throw new RangeError("index is out of bounds");let n=0;for(const r of t){const t=n+r.byteLength;if(e<t)return{buf:r,index:e-n};n=t}throw new RangeError("index is out of bounds")}function p(t){return Boolean(t?.[d])}class g{constructor(...t){Object.defineProperty(this,d,{value:!0}),this.bufs=[],this.length=0,t.length>0&&this.appendAll(t)}*[Symbol.iterator](){yield*this.bufs}get byteLength(){return this.length}append(...t){this.appendAll(t)}appendAll(t){let e=0;for(const n of t)if(n instanceof Uint8Array)e+=n.byteLength,this.bufs.push(n);else{if(!p(n))throw new Error("Could not append value, must be an Uint8Array or a Uint8ArrayList");e+=n.byteLength,this.bufs.push(...n.bufs)}this.length+=e}prepend(...t){this.prependAll(t)}prependAll(t){let e=0;for(const n of t.reverse())if(n instanceof Uint8Array)e+=n.byteLength,this.bufs.unshift(n);else{if(!p(n))throw new Error("Could not prepend value, must be an Uint8Array or a Uint8ArrayList");e+=n.byteLength,this.bufs.unshift(...n.bufs)}this.length+=e}get(t){const e=f(this.bufs,t);return e.buf[e.index]}set(t,e){const n=f(this.bufs,t);n.buf[n.index]=e}write(t,e=0){if(t instanceof Uint8Array)for(let n=0;n<t.length;n++)this.set(e+n,t[n]);else{if(!p(t))throw new Error("Could not write value, must be an Uint8Array or a Uint8ArrayList");for(let n=0;n<t.length;n++)this.set(e+n,t.get(n))}}consume(t){if(t=Math.trunc(t),!(Number.isNaN(t)||t<=0)){if(t===this.byteLength)return this.bufs=[],void(this.length=0);while(this.bufs.length>0){if(!(t>=this.bufs[0].byteLength)){this.bufs[0]=this.bufs[0].subarray(t),this.length-=t;break}t-=this.bufs[0].byteLength,this.length-=this.bufs[0].byteLength,this.bufs.shift()}}}slice(t,e){const{bufs:n,length:r}=this._subList(t,e);return l(n,r)}subarray(t,e){const{bufs:n,length:r}=this._subList(t,e);return 1===n.length?n[0]:l(n,r)}sublist(t,e){const{bufs:n,length:r}=this._subList(t,e),i=new g;return i.length=r,i.bufs=n,i}_subList(t,e){if(t=t??0,e=e??this.length,t<0&&(t=this.length+t),e<0&&(e=this.length+e),t<0||e>this.length)throw new RangeError("index is out of bounds");if(t===e)return{bufs:[],length:0};if(0===t&&e===this.length)return{bufs:[...this.bufs],length:this.length};const n=[];let r=0;for(let i=0;i<this.bufs.length;i++){const s=this.bufs[i],o=r,a=o+s.byteLength;if(r=a,t>=a)continue;const c=t>=o&&t<a,u=e>o&&e<=a;if(c&&u){if(t===o&&e===a){n.push(s);break}const r=t-o;n.push(s.subarray(r,r+(e-t)));break}if(c){if(0===t){n.push(s);continue}n.push(s.subarray(t-o))}else{if(u){if(e===a){n.push(s);break}n.push(s.subarray(0,e-o));break}n.push(s)}}return{bufs:n,length:e-t}}indexOf(t,e=0){if(!p(t)&&!(t instanceof Uint8Array))throw new TypeError('The "value" argument must be a Uint8ArrayList or Uint8Array');const n=t instanceof Uint8Array?t:t.subarray();if(e=Number(e??0),isNaN(e)&&(e=0),e<0&&(e=this.length+e),e<0&&(e=0),0===t.length)return e>this.length?this.length:e;const r=n.byteLength;if(0===r)throw new TypeError("search must be at least 1 byte long");const i=256,s=new Int32Array(i);for(let l=0;l<i;l++)s[l]=-1;for(let l=0;l<r;l++)s[n[l]]=l;const o=s,a=this.byteLength-n.byteLength,c=n.byteLength-1;let u;for(let l=e;l<=a;l+=u){u=0;for(let t=c;t>=0;t--){const e=this.get(l+t);if(n[t]!==e){u=Math.max(1,t-o[e]);break}}if(0===u)return l}return-1}getInt8(t){const e=this.subarray(t,t+1),n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.getInt8(0)}setInt8(t,e){const n=u(1),r=new DataView(n.buffer,n.byteOffset,n.byteLength);r.setInt8(0,e),this.write(n,t)}getInt16(t,e){const n=this.subarray(t,t+2),r=new DataView(n.buffer,n.byteOffset,n.byteLength);return r.getInt16(0,e)}setInt16(t,e,n){const r=c(2),i=new DataView(r.buffer,r.byteOffset,r.byteLength);i.setInt16(0,e,n),this.write(r,t)}getInt32(t,e){const n=this.subarray(t,t+4),r=new DataView(n.buffer,n.byteOffset,n.byteLength);return r.getInt32(0,e)}setInt32(t,e,n){const r=c(4),i=new DataView(r.buffer,r.byteOffset,r.byteLength);i.setInt32(0,e,n),this.write(r,t)}getBigInt64(t,e){const n=this.subarray(t,t+8),r=new DataView(n.buffer,n.byteOffset,n.byteLength);return r.getBigInt64(0,e)}setBigInt64(t,e,n){const r=c(8),i=new DataView(r.buffer,r.byteOffset,r.byteLength);i.setBigInt64(0,e,n),this.write(r,t)}getUint8(t){const e=this.subarray(t,t+1),n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.getUint8(0)}setUint8(t,e){const n=u(1),r=new DataView(n.buffer,n.byteOffset,n.byteLength);r.setUint8(0,e),this.write(n,t)}getUint16(t,e){const n=this.subarray(t,t+2),r=new DataView(n.buffer,n.byteOffset,n.byteLength);return r.getUint16(0,e)}setUint16(t,e,n){const r=c(2),i=new DataView(r.buffer,r.byteOffset,r.byteLength);i.setUint16(0,e,n),this.write(r,t)}getUint32(t,e){const n=this.subarray(t,t+4),r=new DataView(n.buffer,n.byteOffset,n.byteLength);return r.getUint32(0,e)}setUint32(t,e,n){const r=c(4),i=new DataView(r.buffer,r.byteOffset,r.byteLength);i.setUint32(0,e,n),this.write(r,t)}getBigUint64(t,e){const n=this.subarray(t,t+8),r=new DataView(n.buffer,n.byteOffset,n.byteLength);return r.getBigUint64(0,e)}setBigUint64(t,e,n){const r=c(8),i=new DataView(r.buffer,r.byteOffset,r.byteLength);i.setBigUint64(0,e,n),this.write(r,t)}getFloat32(t,e){const n=this.subarray(t,t+4),r=new DataView(n.buffer,n.byteOffset,n.byteLength);return r.getFloat32(0,e)}setFloat32(t,e,n){const r=c(4),i=new DataView(r.buffer,r.byteOffset,r.byteLength);i.setFloat32(0,e,n),this.write(r,t)}getFloat64(t,e){const n=this.subarray(t,t+8),r=new DataView(n.buffer,n.byteOffset,n.byteLength);return r.getFloat64(0,e)}setFloat64(t,e,n){const r=c(8),i=new DataView(r.buffer,r.byteOffset,r.byteLength);i.setFloat64(0,e,n),this.write(r,t)}equals(t){if(null==t)return!1;if(!(t instanceof g))return!1;if(t.bufs.length!==this.bufs.length)return!1;for(let e=0;e<this.bufs.length;e++)if(!h(this.bufs[e],t.bufs[e]))return!1;return!0}static fromUint8Arrays(t,e){const n=new g;return n.bufs=t,null==e&&(e=t.reduce(((t,e)=>t+e.byteLength),0)),n.length=e,n}}var y=n(3154);function b(t){return null!=globalThis.Buffer?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function w(t=0){return null!=globalThis.Buffer?.allocUnsafe?b(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}const m=Math.pow(2,7),v=Math.pow(2,14),E=Math.pow(2,21),A=Math.pow(2,28),x=Math.pow(2,35),S=Math.pow(2,42),_=Math.pow(2,49),I=Math.pow(2,56),R=Math.pow(2,63),C={encodingLength(t){return t<m?1:t<v?2:t<E?3:t<A?4:t<x?5:t<S?6:t<_?7:t<I?8:t<R?9:10},encode(t,e,n=0){if(null!=Number.MAX_SAFE_INTEGER&&t>Number.MAX_SAFE_INTEGER)throw new RangeError("Could not encode varint");return null==e&&(e=w(C.encodingLength(t))),y.Z.fromNumber(t).toBytes(e,n),e},decode(t,e=0){return y.Z.fromBytes(t,e).toNumber(!0)}};function k(t){return null!=globalThis.Buffer?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function L(t=0){return null!=globalThis.Buffer?.allocUnsafe?k(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function T(t){return null!=t[Symbol.asyncIterator]}const B=t=>{const e=C.encodingLength(t),n=L(e);return C.encode(t,n),B.bytes=e,n};function O(t,e){e=e??{};const n=e.lengthEncoder??B;function*r(t){const e=n(t.byteLength);e instanceof Uint8Array?yield e:yield*e,t instanceof Uint8Array?yield t:yield*t}return T(t)?async function*(){for await(const e of t)yield*r(e)}():function*(){for(const e of t)yield*r(e)}()}B.bytes=0,O.single=(t,e)=>{e=e??{};const n=e.lengthEncoder??B;return new g(n(t.byteLength),t)};var N=n(9998);const D=8,U=4194304;var P;(function(t){t[t["LENGTH"]=0]="LENGTH",t[t["DATA"]=1]="DATA"})(P||(P={}));const M=t=>{const e=C.decode(t);return M.bytes=C.encodingLength(e),e};function Z(t,e){const n=new g;let r=P.LENGTH,i=-1;const s=e?.lengthDecoder??M,o=e?.maxLengthLength??D,a=e?.maxDataLength??U;function*c(){while(n.byteLength>0){if(r===P.LENGTH)try{if(i=s(n),i<0)throw N(new Error("invalid message length"),"ERR_INVALID_MSG_LENGTH");if(i>a)throw N(new Error("message length too long"),"ERR_MSG_DATA_TOO_LONG");const t=s.bytes;n.consume(t),null!=e?.onLength&&e.onLength(i),r=P.DATA}catch(t){if(t instanceof RangeError){if(n.byteLength>o)throw N(new Error("message length length too long"),"ERR_MSG_LENGTH_TOO_LONG");break}throw t}if(r===P.DATA){if(n.byteLength<i)break;const t=n.sublist(0,i);n.consume(i),null!=e?.onData&&e.onData(t),yield t,r=P.LENGTH}}}return T(t)?async function*(){for await(const e of t)n.append(e),yield*c();if(n.byteLength>0)throw N(new Error("unexpected end of input"),"ERR_UNEXPECTED_EOF")}():function*(){for(const e of t)n.append(e),yield*c();if(n.byteLength>0)throw N(new Error("unexpected end of input"),"ERR_UNEXPECTED_EOF")}()}M.bytes=0,Z.fromReader=(t,e)=>{let n=1;const r=async function*(){while(1)try{const{done:e,value:r}=await t.next(n);if(!0===e)return;null!=r&&(yield r)}catch(e){if("ERR_UNDER_READ"===e.code)return{done:!0,value:null};throw e}finally{n=1}}(),i=t=>{n=t};return Z(r,{...e??{},onLength:i})};var F=n(1564);function V(){const t={};return t.promise=new Promise(((e,n)=>{t.resolve=e,t.reject=n})),t}function H(){const t=V();let e=!1;return{sink:async n=>{if(e)throw new Error("already piped");e=!0,t.resolve(n)},source:async function*(){const e=await t.promise;yield*e}()}}function $(){const t=H(),e=H();return[{source:t.source,sink:e.sink},{source:e.source,sink:t.sink}]}var j=n(5211),K=n(800);const z=65535,q=z-16,G=Boolean(globalThis.process?.env?.DUMP_SESSION_KEYS),W=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4));function J(t){return t instanceof Uint8Array||null!=t&&"object"===typeof t&&"Uint8Array"===t.constructor.name}const Y=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),Q=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0];if(!Q)throw new Error("Non little-endian hardware is not supported");function X(t){if("string"!==typeof t)throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array((new TextEncoder).encode(t))}function tt(t){if("string"===typeof t)t=X(t);else{if(!J(t))throw new Error("expected Uint8Array, got "+typeof t);t=t.slice()}return t}const et=t=>"[object Object]"===Object.prototype.toString.call(t)&&t.constructor===Object;function nt(t,e){if(void 0!==e&&("object"!==typeof e||!et(e)))throw new Error("options must be object or undefined");const n=Object.assign(t,e);return n}function rt(t,e){if(!J(t))throw new Error("Uint8Array expected");if("number"===typeof e&&t.length!==e)throw new Error(`Uint8Array length ${e} expected`)}function it(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return 0===n}const st=(t,e)=>(Object.assign(e,t),e);function ot(t,e,n,r){if("function"===typeof t.setBigUint64)return t.setBigUint64(e,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),a=Number(n&s),c=r?4:0,u=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+u,a,r)}function at(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`wrong positive integer: ${t}`)}function ct(t){if("boolean"!==typeof t)throw new Error(`boolean expected, not ${t}`)}function ut(t){return null!=t&&"object"===typeof t&&(t instanceof Uint8Array||"Uint8Array"===t.constructor.name)}function lt(t,...e){if(!ut(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error(`Uint8Array expected of length ${e}, not of length=${t.length}`)}function ht(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function dt(t,e){lt(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const ft=(t,e)=>255&t[e++]|(255&t[e++])<<8;class pt{constructor(t){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,t=tt(t),rt(t,32);const e=ft(t,0),n=ft(t,2),r=ft(t,4),i=ft(t,6),s=ft(t,8),o=ft(t,10),a=ft(t,12),c=ft(t,14);this.r[0]=8191&e,this.r[1]=8191&(e>>>13|n<<3),this.r[2]=7939&(n>>>10|r<<6),this.r[3]=8191&(r>>>7|i<<9),this.r[4]=255&(i>>>4|s<<12),this.r[5]=s>>>1&8190,this.r[6]=8191&(s>>>14|o<<2),this.r[7]=8065&(o>>>11|a<<5),this.r[8]=8191&(a>>>8|c<<8),this.r[9]=c>>>5&127;for(let u=0;u<8;u++)this.pad[u]=ft(t,16+2*u)}process(t,e,n=!1){const r=n?0:2048,{h:i,r:s}=this,o=s[0],a=s[1],c=s[2],u=s[3],l=s[4],h=s[5],d=s[6],f=s[7],p=s[8],g=s[9],y=ft(t,e+0),b=ft(t,e+2),w=ft(t,e+4),m=ft(t,e+6),v=ft(t,e+8),E=ft(t,e+10),A=ft(t,e+12),x=ft(t,e+14);let S=i[0]+(8191&y),_=i[1]+(8191&(y>>>13|b<<3)),I=i[2]+(8191&(b>>>10|w<<6)),R=i[3]+(8191&(w>>>7|m<<9)),C=i[4]+(8191&(m>>>4|v<<12)),k=i[5]+(v>>>1&8191),L=i[6]+(8191&(v>>>14|E<<2)),T=i[7]+(8191&(E>>>11|A<<5)),B=i[8]+(8191&(A>>>8|x<<8)),O=i[9]+(x>>>5|r),N=0,D=N+S*o+_*(5*g)+I*(5*p)+R*(5*f)+C*(5*d);N=D>>>13,D&=8191,D+=k*(5*h)+L*(5*l)+T*(5*u)+B*(5*c)+O*(5*a),N+=D>>>13,D&=8191;let U=N+S*a+_*o+I*(5*g)+R*(5*p)+C*(5*f);N=U>>>13,U&=8191,U+=k*(5*d)+L*(5*h)+T*(5*l)+B*(5*u)+O*(5*c),N+=U>>>13,U&=8191;let P=N+S*c+_*a+I*o+R*(5*g)+C*(5*p);N=P>>>13,P&=8191,P+=k*(5*f)+L*(5*d)+T*(5*h)+B*(5*l)+O*(5*u),N+=P>>>13,P&=8191;let M=N+S*u+_*c+I*a+R*o+C*(5*g);N=M>>>13,M&=8191,M+=k*(5*p)+L*(5*f)+T*(5*d)+B*(5*h)+O*(5*l),N+=M>>>13,M&=8191;let Z=N+S*l+_*u+I*c+R*a+C*o;N=Z>>>13,Z&=8191,Z+=k*(5*g)+L*(5*p)+T*(5*f)+B*(5*d)+O*(5*h),N+=Z>>>13,Z&=8191;let F=N+S*h+_*l+I*u+R*c+C*a;N=F>>>13,F&=8191,F+=k*o+L*(5*g)+T*(5*p)+B*(5*f)+O*(5*d),N+=F>>>13,F&=8191;let V=N+S*d+_*h+I*l+R*u+C*c;N=V>>>13,V&=8191,V+=k*a+L*o+T*(5*g)+B*(5*p)+O*(5*f),N+=V>>>13,V&=8191;let H=N+S*f+_*d+I*h+R*l+C*u;N=H>>>13,H&=8191,H+=k*c+L*a+T*o+B*(5*g)+O*(5*p),N+=H>>>13,H&=8191;let $=N+S*p+_*f+I*d+R*h+C*l;N=$>>>13,$&=8191,$+=k*u+L*c+T*a+B*o+O*(5*g),N+=$>>>13,$&=8191;let j=N+S*g+_*p+I*f+R*d+C*h;N=j>>>13,j&=8191,j+=k*l+L*u+T*c+B*a+O*o,N+=j>>>13,j&=8191,N=(N<<2)+N|0,N=N+D|0,D=8191&N,N>>>=13,U+=N,i[0]=D,i[1]=U,i[2]=P,i[3]=M,i[4]=Z,i[5]=F,i[6]=V,i[7]=H,i[8]=$,i[9]=j}finalize(){const{h:t,pad:e}=this,n=new Uint16Array(10);let r=t[1]>>>13;t[1]&=8191;for(let o=2;o<10;o++)t[o]+=r,r=t[o]>>>13,t[o]&=8191;t[0]+=5*r,r=t[0]>>>13,t[0]&=8191,t[1]+=r,r=t[1]>>>13,t[1]&=8191,t[2]+=r,n[0]=t[0]+5,r=n[0]>>>13,n[0]&=8191;for(let o=1;o<10;o++)n[o]=t[o]+r,r=n[o]>>>13,n[o]&=8191;n[9]-=8192;let i=(1^r)-1;for(let o=0;o<10;o++)n[o]&=i;i=~i;for(let o=0;o<10;o++)t[o]=t[o]&i|n[o];t[0]=65535&(t[0]|t[1]<<13),t[1]=65535&(t[1]>>>3|t[2]<<10),t[2]=65535&(t[2]>>>6|t[3]<<7),t[3]=65535&(t[3]>>>9|t[4]<<4),t[4]=65535&(t[4]>>>12|t[5]<<1|t[6]<<14),t[5]=65535&(t[6]>>>2|t[7]<<11),t[6]=65535&(t[7]>>>5|t[8]<<8),t[7]=65535&(t[8]>>>8|t[9]<<5);let s=t[0]+e[0];t[0]=65535&s;for(let o=1;o<8;o++)s=(t[o]+e[o]|0)+(s>>>16)|0,t[o]=65535&s}update(t){ht(this);const{buffer:e,blockLen:n}=this;t=tt(t);const r=t.length;for(let i=0;i<r;){const s=Math.min(n-this.pos,r-i);if(s!==n)e.set(t.subarray(i,i+s),this.pos),this.pos+=s,i+=s,this.pos===n&&(this.process(e,0,!1),this.pos=0);else for(;n<=r-i;i+=n)this.process(t,i)}return this}destroy(){this.h.fill(0),this.r.fill(0),this.buffer.fill(0),this.pad.fill(0)}digestInto(t){ht(this),dt(t,this),this.finished=!0;const{buffer:e,h:n}=this;let{pos:r}=this;if(r){for(e[r++]=1;r<16;r++)e[r]=0;this.process(e,0,!0)}this.finalize();let i=0;for(let s=0;s<8;s++)t[i++]=n[s]>>>0,t[i++]=n[s]>>>8;return t}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const n=t.slice(0,e);return this.destroy(),n}}function gt(t){const e=(e,n)=>t(n).update(tt(e)).digest(),n=t(new Uint8Array(32));return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=e=>t(e),e}const yt=gt((t=>new pt(t))),bt=X("expand 16-byte k"),wt=X("expand 32-byte k"),mt=W(bt),vt=W(wt);function Et(t,e){return t<<e|t>>>32-e}function At(t){return t.byteOffset%4===0}const xt=64,St=16,_t=2**32-1,It=new Uint32Array;function Rt(t,e,n,r,i,s,o,a){const c=i.length,u=new Uint8Array(xt),l=W(u),h=At(i)&&At(s),d=h?W(i):It,f=h?W(s):It;for(let p=0;p<c;o++){if(t(e,n,r,l,o,a),o>=_t)throw new Error("arx: counter overflow");const g=Math.min(xt,c-p);if(h&&g===xt){const t=p/4;if(p%4!==0)throw new Error("arx: invalid block position");for(let e,n=0;n<St;n++)e=t+n,f[e]=d[e]^l[n];p+=xt}else{for(let t,e=0;e<g;e++)t=p+e,s[t]=i[t]^u[e];p+=g}}}function Ct(t,e){const{allowShortKeys:n,extendNonceFn:r,counterLength:i,counterRight:s,rounds:o}=nt({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if("function"!==typeof t)throw new Error("core must be a function");return at(i),at(o),ct(s),ct(n),(e,a,c,u,l=0)=>{lt(e),lt(a),lt(c);const h=c.length;if(u||(u=new Uint8Array(h)),lt(u),at(l),l<0||l>=_t)throw new Error("arx: counter overflow");if(u.length<h)throw new Error(`arx: output (${u.length}) is shorter than data (${h})`);const d=[];let f,p,g=e.length;if(32===g)f=e.slice(),d.push(f),p=vt;else{if(16!==g||!n)throw new Error(`arx: invalid 32-byte key, got length=${g}`);f=new Uint8Array(32),f.set(e),f.set(e,16),p=mt,d.push(f)}At(a)||(a=a.slice(),d.push(a));const y=W(f);if(r){if(24!==a.length)throw new Error("arx: extended nonce must be 24 bytes");r(p,y,W(a.subarray(0,16)),y),a=a.subarray(16)}const b=16-i;if(b!==a.length)throw new Error(`arx: nonce must be ${b} or 16 bytes`);if(12!==b){const t=new Uint8Array(12);t.set(a,s?0:12-a.length),a=t,d.push(a)}const w=W(a);Rt(t,p,y,w,c,u,l,o);while(d.length>0)d.pop().fill(0);return u}}function kt(t,e,n,r,i,s=20){let o=t[0],a=t[1],c=t[2],u=t[3],l=e[0],h=e[1],d=e[2],f=e[3],p=e[4],g=e[5],y=e[6],b=e[7],w=i,m=n[0],v=n[1],E=n[2],A=o,x=a,S=c,_=u,I=l,R=h,C=d,k=f,L=p,T=g,B=y,O=b,N=w,D=m,U=v,P=E;for(let Z=0;Z<s;Z+=2)A=A+I|0,N=Et(N^A,16),L=L+N|0,I=Et(I^L,12),A=A+I|0,N=Et(N^A,8),L=L+N|0,I=Et(I^L,7),x=x+R|0,D=Et(D^x,16),T=T+D|0,R=Et(R^T,12),x=x+R|0,D=Et(D^x,8),T=T+D|0,R=Et(R^T,7),S=S+C|0,U=Et(U^S,16),B=B+U|0,C=Et(C^B,12),S=S+C|0,U=Et(U^S,8),B=B+U|0,C=Et(C^B,7),_=_+k|0,P=Et(P^_,16),O=O+P|0,k=Et(k^O,12),_=_+k|0,P=Et(P^_,8),O=O+P|0,k=Et(k^O,7),A=A+R|0,P=Et(P^A,16),B=B+P|0,R=Et(R^B,12),A=A+R|0,P=Et(P^A,8),B=B+P|0,R=Et(R^B,7),x=x+C|0,N=Et(N^x,16),O=O+N|0,C=Et(C^O,12),x=x+C|0,N=Et(N^x,8),O=O+N|0,C=Et(C^O,7),S=S+k|0,D=Et(D^S,16),L=L+D|0,k=Et(k^L,12),S=S+k|0,D=Et(D^S,8),L=L+D|0,k=Et(k^L,7),_=_+I|0,U=Et(U^_,16),T=T+U|0,I=Et(I^T,12),_=_+I|0,U=Et(U^_,8),T=T+U|0,I=Et(I^T,7);let M=0;r[M++]=o+A|0,r[M++]=a+x|0,r[M++]=c+S|0,r[M++]=u+_|0,r[M++]=l+I|0,r[M++]=h+R|0,r[M++]=d+C|0,r[M++]=f+k|0,r[M++]=p+L|0,r[M++]=g+T|0,r[M++]=y+B|0,r[M++]=b+O|0,r[M++]=w+N|0,r[M++]=m+D|0,r[M++]=v+U|0,r[M++]=E+P|0}function Lt(t,e,n,r){let i=t[0],s=t[1],o=t[2],a=t[3],c=e[0],u=e[1],l=e[2],h=e[3],d=e[4],f=e[5],p=e[6],g=e[7],y=n[0],b=n[1],w=n[2],m=n[3];for(let E=0;E<20;E+=2)i=i+c|0,y=Et(y^i,16),d=d+y|0,c=Et(c^d,12),i=i+c|0,y=Et(y^i,8),d=d+y|0,c=Et(c^d,7),s=s+u|0,b=Et(b^s,16),f=f+b|0,u=Et(u^f,12),s=s+u|0,b=Et(b^s,8),f=f+b|0,u=Et(u^f,7),o=o+l|0,w=Et(w^o,16),p=p+w|0,l=Et(l^p,12),o=o+l|0,w=Et(w^o,8),p=p+w|0,l=Et(l^p,7),a=a+h|0,m=Et(m^a,16),g=g+m|0,h=Et(h^g,12),a=a+h|0,m=Et(m^a,8),g=g+m|0,h=Et(h^g,7),i=i+u|0,m=Et(m^i,16),p=p+m|0,u=Et(u^p,12),i=i+u|0,m=Et(m^i,8),p=p+m|0,u=Et(u^p,7),s=s+l|0,y=Et(y^s,16),g=g+y|0,l=Et(l^g,12),s=s+l|0,y=Et(y^s,8),g=g+y|0,l=Et(l^g,7),o=o+h|0,b=Et(b^o,16),d=d+b|0,h=Et(h^d,12),o=o+h|0,b=Et(b^o,8),d=d+b|0,h=Et(h^d,7),a=a+c|0,w=Et(w^a,16),f=f+w|0,c=Et(c^f,12),a=a+c|0,w=Et(w^a,8),f=f+w|0,c=Et(c^f,7);let v=0;r[v++]=i,r[v++]=s,r[v++]=o,r[v++]=a,r[v++]=y,r[v++]=b,r[v++]=w,r[v++]=m}const Tt=Ct(kt,{counterRight:!1,counterLength:4,allowShortKeys:!1}),Bt=Ct(kt,{counterRight:!1,counterLength:8,extendNonceFn:Lt,allowShortKeys:!1}),Ot=new Uint8Array(16),Nt=(t,e)=>{t.update(e);const n=e.length%16;n&&t.update(Ot.subarray(n))},Dt=new Uint8Array(32);function Ut(t,e,n,r,i){const s=t(e,n,Dt),o=yt.create(s);i&&Nt(o,i),Nt(o,r);const a=new Uint8Array(16),c=Y(a);ot(c,0,BigInt(i?i.length:0),!0),ot(c,8,BigInt(r.length),!0),o.update(a);const u=o.digest();return s.fill(0),u}const Pt=t=>(e,n,r)=>{const i=16;return rt(e,32),rt(n),{encrypt:(s,o)=>{const a=s.length,c=a+i;o?rt(o,c):o=new Uint8Array(c),t(e,n,s,o,1);const u=Ut(t,e,n,o.subarray(0,-i),r);return o.set(u,a),o},decrypt:(s,o)=>{const a=s.length,c=a-i;if(a<i)throw new Error(`encrypted data must be at least ${i} bytes`);o?rt(o,c):o=new Uint8Array(c);const u=s.subarray(0,-i),l=s.subarray(-i),h=Ut(t,e,n,u,r);if(!it(l,h))throw new Error("invalid tag");return t(e,n,u,o,1),o}}},Mt=st({blockSize:64,nonceLength:12,tagLength:16},Pt(Tt));Pt(Bt);function Zt(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function Ft(t){if("boolean"!==typeof t)throw new Error(`Expected boolean, not ${t}`)}function Vt(t,...e){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function Ht(t){if("function"!==typeof t||"function"!==typeof t.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");Zt(t.outputLen),Zt(t.blockLen)}function $t(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function jt(t,e){Vt(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const Kt={number:Zt,bool:Ft,bytes:Vt,hash:Ht,exists:$t,output:jt};var zt=Kt;const qt="object"===typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,Gt=t=>t instanceof Uint8Array,Wt=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),Jt=(t,e)=>t<<32-e|t>>>e,Yt=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0];if(!Yt)throw new Error("Non little-endian hardware is not supported");Array.from({length:256},((t,e)=>e.toString(16).padStart(2,"0")));function Qt(t){if("string"!==typeof t)throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array((new TextEncoder).encode(t))}function Xt(t){if("string"===typeof t&&(t=Qt(t)),!Gt(t))throw new Error("expected Uint8Array, got "+typeof t);return t}function te(...t){const e=new Uint8Array(t.reduce(((t,e)=>t+e.length),0));let n=0;return t.forEach((t=>{if(!Gt(t))throw new Error("Uint8Array expected");e.set(t,n),n+=t.length})),e}class ee{clone(){return this._cloneInto()}}function ne(t){const e=e=>t().update(Xt(e)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function re(t=32){if(qt&&"function"===typeof qt.getRandomValues)return qt.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}function ie(t,e,n,r){if("function"===typeof t.setBigUint64)return t.setBigUint64(e,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),a=Number(n&s),c=r?4:0,u=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+u,a,r)}class se extends ee{constructor(t,e,n,r){super(),this.blockLen=t,this.outputLen=e,this.padOffset=n,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=Wt(this.buffer)}update(t){zt.exists(this);const{view:e,buffer:n,blockLen:r}=this;t=Xt(t);const i=t.length;for(let s=0;s<i;){const o=Math.min(r-this.pos,i-s);if(o!==r)n.set(t.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===r&&(this.process(e,0),this.pos=0);else{const e=Wt(t);for(;r<=i-s;s+=r)this.process(e,s)}}return this.length+=t.length,this.roundClean(),this}digestInto(t){zt.exists(this),zt.output(t,this),this.finished=!0;const{buffer:e,view:n,blockLen:r,isLE:i}=this;let{pos:s}=this;e[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>r-s&&(this.process(n,0),s=0);for(let l=s;l<r;l++)e[l]=0;ie(n,r-8,BigInt(8*this.length),i),this.process(n,0);const o=Wt(t),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=a/4,u=this.get();if(c>u.length)throw new Error("_sha2: outputLen bigger than state");for(let l=0;l<c;l++)o.setUint32(4*l,u[l],i)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const n=t.slice(0,e);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:n,length:r,finished:i,destroyed:s,pos:o}=this;return t.length=r,t.pos=o,t.finished=i,t.destroyed=s,r%e&&t.buffer.set(n),t}}const oe=BigInt(2**32-1),ae=BigInt(32);function ce(t,e=!1){return e?{h:Number(t&oe),l:Number(t>>ae&oe)}:{h:0|Number(t>>ae&oe),l:0|Number(t&oe)}}function ue(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:s,l:o}=ce(t[i],e);[n[i],r[i]]=[s,o]}return[n,r]}const le=(t,e)=>BigInt(t>>>0)<<ae|BigInt(e>>>0),he=(t,e,n)=>t>>>n,de=(t,e,n)=>t<<32-n|e>>>n,fe=(t,e,n)=>t>>>n|e<<32-n,pe=(t,e,n)=>t<<32-n|e>>>n,ge=(t,e,n)=>t<<64-n|e>>>n-32,ye=(t,e,n)=>t>>>n-32|e<<64-n,be=(t,e)=>e,we=(t,e)=>t,me=(t,e,n)=>t<<n|e>>>32-n,ve=(t,e,n)=>e<<n|t>>>32-n,Ee=(t,e,n)=>e<<n-32|t>>>64-n,Ae=(t,e,n)=>t<<n-32|e>>>64-n;function xe(t,e,n,r){const i=(e>>>0)+(r>>>0);return{h:t+n+(i/2**32|0)|0,l:0|i}}const Se=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),_e=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,Ie=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),Re=(t,e,n,r,i)=>e+n+r+i+(t/2**32|0)|0,Ce=(t,e,n,r,i)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(i>>>0),ke=(t,e,n,r,i,s)=>e+n+r+i+s+(t/2**32|0)|0,Le={fromBig:ce,split:ue,toBig:le,shrSH:he,shrSL:de,rotrSH:fe,rotrSL:pe,rotrBH:ge,rotrBL:ye,rotr32H:be,rotr32L:we,rotlSH:me,rotlSL:ve,rotlBH:Ee,rotlBL:Ae,add:xe,add3L:Se,add3H:_e,add4L:Ie,add4H:Re,add5H:ke,add5L:Ce};var Te=Le;const[Be,Oe]=Te.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map((t=>BigInt(t)))),Ne=new Uint32Array(80),De=new Uint32Array(80);class Ue extends se{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:t,Al:e,Bh:n,Bl:r,Ch:i,Cl:s,Dh:o,Dl:a,Eh:c,El:u,Fh:l,Fl:h,Gh:d,Gl:f,Hh:p,Hl:g}=this;return[t,e,n,r,i,s,o,a,c,u,l,h,d,f,p,g]}set(t,e,n,r,i,s,o,a,c,u,l,h,d,f,p,g){this.Ah=0|t,this.Al=0|e,this.Bh=0|n,this.Bl=0|r,this.Ch=0|i,this.Cl=0|s,this.Dh=0|o,this.Dl=0|a,this.Eh=0|c,this.El=0|u,this.Fh=0|l,this.Fl=0|h,this.Gh=0|d,this.Gl=0|f,this.Hh=0|p,this.Hl=0|g}process(t,e){for(let w=0;w<16;w++,e+=4)Ne[w]=t.getUint32(e),De[w]=t.getUint32(e+=4);for(let w=16;w<80;w++){const t=0|Ne[w-15],e=0|De[w-15],n=Te.rotrSH(t,e,1)^Te.rotrSH(t,e,8)^Te.shrSH(t,e,7),r=Te.rotrSL(t,e,1)^Te.rotrSL(t,e,8)^Te.shrSL(t,e,7),i=0|Ne[w-2],s=0|De[w-2],o=Te.rotrSH(i,s,19)^Te.rotrBH(i,s,61)^Te.shrSH(i,s,6),a=Te.rotrSL(i,s,19)^Te.rotrBL(i,s,61)^Te.shrSL(i,s,6),c=Te.add4L(r,a,De[w-7],De[w-16]),u=Te.add4H(c,n,o,Ne[w-7],Ne[w-16]);Ne[w]=0|u,De[w]=0|c}let{Ah:n,Al:r,Bh:i,Bl:s,Ch:o,Cl:a,Dh:c,Dl:u,Eh:l,El:h,Fh:d,Fl:f,Gh:p,Gl:g,Hh:y,Hl:b}=this;for(let w=0;w<80;w++){const t=Te.rotrSH(l,h,14)^Te.rotrSH(l,h,18)^Te.rotrBH(l,h,41),e=Te.rotrSL(l,h,14)^Te.rotrSL(l,h,18)^Te.rotrBL(l,h,41),m=l&d^~l&p,v=h&f^~h&g,E=Te.add5L(b,e,v,Oe[w],De[w]),A=Te.add5H(E,y,t,m,Be[w],Ne[w]),x=0|E,S=Te.rotrSH(n,r,28)^Te.rotrBH(n,r,34)^Te.rotrBH(n,r,39),_=Te.rotrSL(n,r,28)^Te.rotrBL(n,r,34)^Te.rotrBL(n,r,39),I=n&i^n&o^i&o,R=r&s^r&a^s&a;y=0|p,b=0|g,p=0|d,g=0|f,d=0|l,f=0|h,({h:l,l:h}=Te.add(0|c,0|u,0|A,0|x)),c=0|o,u=0|a,o=0|i,a=0|s,i=0|n,s=0|r;const C=Te.add3L(x,_,R);n=Te.add3H(C,A,S,I),r=0|C}({h:n,l:r}=Te.add(0|this.Ah,0|this.Al,0|n,0|r)),({h:i,l:s}=Te.add(0|this.Bh,0|this.Bl,0|i,0|s)),({h:o,l:a}=Te.add(0|this.Ch,0|this.Cl,0|o,0|a)),({h:c,l:u}=Te.add(0|this.Dh,0|this.Dl,0|c,0|u)),({h:l,l:h}=Te.add(0|this.Eh,0|this.El,0|l,0|h)),({h:d,l:f}=Te.add(0|this.Fh,0|this.Fl,0|d,0|f)),({h:p,l:g}=Te.add(0|this.Gh,0|this.Gl,0|p,0|g)),({h:y,l:b}=Te.add(0|this.Hh,0|this.Hl,0|y,0|b)),this.set(n,r,i,s,o,a,c,u,l,h,d,f,p,g,y,b)}roundClean(){Ne.fill(0),De.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}class Pe extends Ue{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}}class Me extends Ue{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}}class Ze extends Ue{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}}const Fe=ne((()=>new Ue)),Ve=(ne((()=>new Pe)),ne((()=>new Me)),ne((()=>new Ze)),BigInt(0),BigInt(1)),He=BigInt(2),$e=t=>t instanceof Uint8Array,je=Array.from({length:256},((t,e)=>e.toString(16).padStart(2,"0")));function Ke(t){if(!$e(t))throw new Error("Uint8Array expected");let e="";for(let n=0;n<t.length;n++)e+=je[t[n]];return e}function ze(t){if("string"!==typeof t)throw new Error("hex string expected, got "+typeof t);return BigInt(""===t?"0":`0x${t}`)}function qe(t){if("string"!==typeof t)throw new Error("hex string expected, got "+typeof t);const e=t.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(e/2);for(let r=0;r<n.length;r++){const e=2*r,i=t.slice(e,e+2),s=Number.parseInt(i,16);if(Number.isNaN(s)||s<0)throw new Error("Invalid byte sequence");n[r]=s}return n}function Ge(t){return ze(Ke(t))}function We(t){if(!$e(t))throw new Error("Uint8Array expected");return ze(Ke(Uint8Array.from(t).reverse()))}function Je(t,e){return qe(t.toString(16).padStart(2*e,"0"))}function Ye(t,e){return Je(t,e).reverse()}function Qe(t,e,n){let r;if("string"===typeof e)try{r=qe(e)}catch(s){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${s}`)}else{if(!$e(e))throw new Error(`${t} must be hex string or Uint8Array`);r=Uint8Array.from(e)}const i=r.length;if("number"===typeof n&&i!==n)throw new Error(`${t} expected ${n} bytes, got ${i}`);return r}function Xe(...t){const e=new Uint8Array(t.reduce(((t,e)=>t+e.length),0));let n=0;return t.forEach((t=>{if(!$e(t))throw new Error("Uint8Array expected");e.set(t,n),n+=t.length})),e}const tn=t=>(He<<BigInt(t-1))-Ve;const en={bigint:t=>"bigint"===typeof t,function:t=>"function"===typeof t,boolean:t=>"boolean"===typeof t,string:t=>"string"===typeof t,isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>"function"===typeof t&&Number.isSafeInteger(t.outputLen)};function nn(t,e,n={}){const r=(e,n,r)=>{const i=en[n];if("function"!==typeof i)throw new Error(`Invalid validator "${n}", expected function`);const s=t[e];if((!r||void 0!==s)&&!i(s,t))throw new Error(`Invalid param ${String(e)}=${s} (${typeof s}), expected ${n}`)};for(const[i,s]of Object.entries(e))r(i,s,!1);for(const[i,s]of Object.entries(n))r(i,s,!0);return t}
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const rn=BigInt(0),sn=BigInt(1),on=BigInt(2),an=BigInt(3),cn=BigInt(4),un=BigInt(5),ln=BigInt(8);BigInt(9),BigInt(16);function hn(t,e){const n=t%e;return n>=rn?n:e+n}function dn(t,e,n){if(n<=rn||e<rn)throw new Error("Expected power/modulo > 0");if(n===sn)return rn;let r=sn;while(e>rn)e&sn&&(r=r*t%n),t=t*t%n,e>>=sn;return r}function fn(t,e,n){let r=t;while(e-- >rn)r*=r,r%=n;return r}function pn(t,e){if(t===rn||e<=rn)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let n=hn(t,e),r=e,i=rn,s=sn,o=sn,a=rn;while(n!==rn){const t=r/n,e=r%n,c=i-o*t,u=s-a*t;r=n,n=e,i=o,s=a,o=c,a=u}const c=r;if(c!==sn)throw new Error("invert: does not exist");return hn(i,e)}function gn(t){const e=(t-sn)/on;let n,r,i;for(n=t-sn,r=0;n%on===rn;n/=on,r++);for(i=on;i<t&&dn(i,e,t)!==t-sn;i++);if(1===r){const e=(t+sn)/cn;return function(t,n){const r=t.pow(n,e);if(!t.eql(t.sqr(r),n))throw new Error("Cannot find square root");return r}}const s=(n+sn)/on;return function(t,o){if(t.pow(o,e)===t.neg(t.ONE))throw new Error("Cannot find square root");let a=r,c=t.pow(t.mul(t.ONE,i),n),u=t.pow(o,s),l=t.pow(o,n);while(!t.eql(l,t.ONE)){if(t.eql(l,t.ZERO))return t.ZERO;let e=1;for(let r=t.sqr(l);e<a;e++){if(t.eql(r,t.ONE))break;r=t.sqr(r)}const n=t.pow(c,sn<<BigInt(a-e-1));c=t.sqr(n),u=t.mul(u,n),l=t.mul(l,c),a=e}return u}}function yn(t){if(t%cn===an){const e=(t+sn)/cn;return function(t,n){const r=t.pow(n,e);if(!t.eql(t.sqr(r),n))throw new Error("Cannot find square root");return r}}if(t%ln===un){const e=(t-un)/ln;return function(t,n){const r=t.mul(n,on),i=t.pow(r,e),s=t.mul(n,i),o=t.mul(t.mul(s,on),i),a=t.mul(s,t.sub(o,t.ONE));if(!t.eql(t.sqr(a),n))throw new Error("Cannot find square root");return a}}return gn(t)}const bn=(t,e)=>(hn(t,e)&sn)===sn,wn=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function mn(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=wn.reduce(((t,e)=>(t[e]="function",t)),e);return nn(t,n)}function vn(t,e,n){if(n<rn)throw new Error("Expected power > 0");if(n===rn)return t.ONE;if(n===sn)return e;let r=t.ONE,i=e;while(n>rn)n&sn&&(r=t.mul(r,i)),i=t.sqr(i),n>>=sn;return r}function En(t,e){const n=new Array(e.length),r=e.reduce(((e,r,i)=>t.is0(r)?e:(n[i]=e,t.mul(e,r))),t.ONE),i=t.inv(r);return e.reduceRight(((e,r,i)=>t.is0(r)?e:(n[i]=t.mul(e,n[i]),t.mul(e,r))),i),n}function An(t,e){const n=void 0!==e?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function xn(t,e,n=!1,r={}){if(t<=rn)throw new Error(`Expected Fp ORDER > 0, got ${t}`);const{nBitLength:i,nByteLength:s}=An(t,e);if(s>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=yn(t),a=Object.freeze({ORDER:t,BITS:i,BYTES:s,MASK:tn(i),ZERO:rn,ONE:sn,create:e=>hn(e,t),isValid:e=>{if("bigint"!==typeof e)throw new Error("Invalid field element: expected bigint, got "+typeof e);return rn<=e&&e<t},is0:t=>t===rn,isOdd:t=>(t&sn)===sn,neg:e=>hn(-e,t),eql:(t,e)=>t===e,sqr:e=>hn(e*e,t),add:(e,n)=>hn(e+n,t),sub:(e,n)=>hn(e-n,t),mul:(e,n)=>hn(e*n,t),pow:(t,e)=>vn(a,t,e),div:(e,n)=>hn(e*pn(n,t),t),sqrN:t=>t*t,addN:(t,e)=>t+e,subN:(t,e)=>t-e,mulN:(t,e)=>t*e,inv:e=>pn(e,t),sqrt:r.sqrt||(t=>o(a,t)),invertBatch:t=>En(a,t),cmov:(t,e,n)=>n?e:t,toBytes:t=>n?Ye(t,s):Je(t,s),fromBytes:t=>{if(t.length!==s)throw new Error(`Fp.fromBytes: expected ${s}, got ${t.length}`);return n?We(t):Ge(t)}});return Object.freeze(a)}function Sn(t,e){if(!t.isOdd)throw new Error("Field doesn't have isOdd");const n=t.sqrt(e);return t.isOdd(n)?t.neg(n):n}
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const _n=BigInt(0),In=BigInt(1);function Rn(t,e){const n=(t,e)=>{const n=e.negate();return t?n:e},r=t=>{const n=Math.ceil(e/t)+1,r=2**(t-1);return{windows:n,windowSize:r}};return{constTimeNegate:n,unsafeLadder(e,n){let r=t.ZERO,i=e;while(n>_n)n&In&&(r=r.add(i)),i=i.double(),n>>=In;return r},precomputeWindow(t,e){const{windows:n,windowSize:i}=r(e),s=[];let o=t,a=o;for(let r=0;r<n;r++){a=o,s.push(a);for(let t=1;t<i;t++)a=a.add(o),s.push(a);o=a.double()}return s},wNAF(e,i,s){const{windows:o,windowSize:a}=r(e);let c=t.ZERO,u=t.BASE;const l=BigInt(2**e-1),h=2**e,d=BigInt(e);for(let t=0;t<o;t++){const e=t*a;let r=Number(s&l);s>>=d,r>a&&(r-=h,s+=In);const o=e,f=e+Math.abs(r)-1,p=t%2!==0,g=r<0;0===r?u=u.add(n(p,i[o])):c=c.add(n(g,i[f]))}return{p:c,f:u}},wNAFCached(t,e,n,r){const i=t._WINDOW_SIZE||1;let s=e.get(t);return s||(s=this.precomputeWindow(t,i),1!==i&&e.set(t,r(s))),this.wNAF(i,s,n)}}}function Cn(t){return mn(t.Fp),nn(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...An(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const kn=BigInt(0),Ln=BigInt(1),Tn=BigInt(2),Bn=BigInt(8),On={zip215:!0};function Nn(t){const e=Cn(t);return nn(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function Dn(t){const e=Nn(t),{Fp:n,n:r,prehash:i,hash:s,randomBytes:o,nByteLength:a,h:c}=e,u=Tn<<BigInt(8*a)-Ln,l=n.create,h=e.uvRatio||((t,e)=>{try{return{isValid:!0,value:n.sqrt(t*n.inv(e))}}catch(r){return{isValid:!1,value:kn}}}),d=e.adjustScalarBytes||(t=>t),f=e.domain||((t,e,n)=>{if(e.length||n)throw new Error("Contexts/pre-hash are not supported");return t}),p=t=>"bigint"===typeof t&&kn<t,g=(t,e)=>p(t)&&p(e)&&t<e,y=t=>t===kn||g(t,u);function b(t,e){if(g(t,e))return t;throw new Error(`Expected valid scalar < ${e}, got ${typeof t} ${t}`)}function w(t){return t===kn?t:b(t,r)}const m=new Map;function v(t){if(!(t instanceof E))throw new Error("ExtendedPoint expected")}class E{constructor(t,e,n,r){if(this.ex=t,this.ey=e,this.ez=n,this.et=r,!y(t))throw new Error("x required");if(!y(e))throw new Error("y required");if(!y(n))throw new Error("z required");if(!y(r))throw new Error("t required")}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(t){if(t instanceof E)throw new Error("extended point not allowed");const{x:e,y:n}=t||{};if(!y(e)||!y(n))throw new Error("invalid affine point");return new E(e,n,Ln,l(e*n))}static normalizeZ(t){const e=n.invertBatch(t.map((t=>t.ez)));return t.map(((t,n)=>t.toAffine(e[n]))).map(E.fromAffine)}_setWindowSize(t){this._WINDOW_SIZE=t,m.delete(this)}assertValidity(){const{a:t,d:n}=e;if(this.is0())throw new Error("bad point: ZERO");const{ex:r,ey:i,ez:s,et:o}=this,a=l(r*r),c=l(i*i),u=l(s*s),h=l(u*u),d=l(a*t),f=l(u*l(d+c)),p=l(h+l(n*l(a*c)));if(f!==p)throw new Error("bad point: equation left != right (1)");const g=l(r*i),y=l(s*o);if(g!==y)throw new Error("bad point: equation left != right (2)")}equals(t){v(t);const{ex:e,ey:n,ez:r}=this,{ex:i,ey:s,ez:o}=t,a=l(e*o),c=l(i*r),u=l(n*o),h=l(s*r);return a===c&&u===h}is0(){return this.equals(E.ZERO)}negate(){return new E(l(-this.ex),this.ey,this.ez,l(-this.et))}double(){const{a:t}=e,{ex:n,ey:r,ez:i}=this,s=l(n*n),o=l(r*r),a=l(Tn*l(i*i)),c=l(t*s),u=n+r,h=l(l(u*u)-s-o),d=c+o,f=d-a,p=c-o,g=l(h*f),y=l(d*p),b=l(h*p),w=l(f*d);return new E(g,y,w,b)}add(t){v(t);const{a:n,d:r}=e,{ex:i,ey:s,ez:o,et:a}=this,{ex:c,ey:u,ez:h,et:d}=t;if(n===BigInt(-1)){const t=l((s-i)*(u+c)),e=l((s+i)*(u-c)),n=l(e-t);if(n===kn)return this.double();const r=l(o*Tn*d),f=l(a*Tn*h),p=f+r,g=e+t,y=f-r,b=l(p*n),w=l(g*y),m=l(p*y),v=l(n*g);return new E(b,w,v,m)}const f=l(i*c),p=l(s*u),g=l(a*r*d),y=l(o*h),b=l((i+s)*(c+u)-f-p),w=y-g,m=y+g,A=l(p-n*f),x=l(b*w),S=l(m*A),_=l(b*A),I=l(w*m);return new E(x,S,I,_)}subtract(t){return this.add(t.negate())}wNAF(t){return S.wNAFCached(this,m,t,E.normalizeZ)}multiply(t){const{p:e,f:n}=this.wNAF(b(t,r));return E.normalizeZ([e,n])[0]}multiplyUnsafe(t){let e=w(t);return e===kn?x:this.equals(x)||e===Ln?this:this.equals(A)?this.wNAF(e).p:S.unsafeLadder(this,e)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return S.unsafeLadder(this,r).is0()}toAffine(t){const{ex:e,ey:r,ez:i}=this,s=this.is0();null==t&&(t=s?Bn:n.inv(i));const o=l(e*t),a=l(r*t),c=l(i*t);if(s)return{x:kn,y:Ln};if(c!==Ln)throw new Error("invZ was invalid");return{x:o,y:a}}clearCofactor(){const{h:t}=e;return t===Ln?this:this.multiplyUnsafe(t)}static fromHex(t,r=!1){const{d:i,a:s}=e,o=n.BYTES;t=Qe("pointHex",t,o);const a=t.slice(),c=t[o-1];a[o-1]=-129&c;const d=We(a);d===kn||b(d,r?u:n.ORDER);const f=l(d*d),p=l(f-Ln),g=l(i*f-s);let{isValid:y,value:w}=h(p,g);if(!y)throw new Error("Point.fromHex: invalid y coordinate");const m=(w&Ln)===Ln,v=0!==(128&c);if(!r&&w===kn&&v)throw new Error("Point.fromHex: x=0 and x_0=1");return v!==m&&(w=l(-w)),E.fromAffine({x:w,y:d})}static fromPrivateKey(t){return R(t).point}toRawBytes(){const{x:t,y:e}=this.toAffine(),r=Ye(e,n.BYTES);return r[r.length-1]|=t&Ln?128:0,r}toHex(){return Ke(this.toRawBytes())}}E.BASE=new E(e.Gx,e.Gy,Ln,l(e.Gx*e.Gy)),E.ZERO=new E(kn,Ln,Ln,kn);const{BASE:A,ZERO:x}=E,S=Rn(E,8*a);function _(t){return hn(t,r)}function I(t){return _(We(t))}function R(t){const e=a;t=Qe("private key",t,e);const n=Qe("hashed private key",s(t),2*e),r=d(n.slice(0,e)),i=n.slice(e,2*e),o=I(r),c=A.multiply(o),u=c.toRawBytes();return{head:r,prefix:i,scalar:o,point:c,pointBytes:u}}function C(t){return R(t).pointBytes}function k(t=new Uint8Array,...e){const n=Xe(...e);return I(s(f(n,Qe("context",t),!!i)))}function L(t,e,r={}){t=Qe("message",t),i&&(t=i(t));const{prefix:s,scalar:o,pointBytes:c}=R(e),u=k(r.context,s,t),l=A.multiply(u).toRawBytes(),h=k(r.context,l,c,t),d=_(u+h*o);w(d);const f=Xe(l,Ye(d,n.BYTES));return Qe("result",f,2*a)}const T=On;function B(t,e,r,s=T){const{context:o,zip215:a}=s,c=n.BYTES;t=Qe("signature",t,2*c),e=Qe("message",e),i&&(e=i(e));const u=We(t.slice(c,2*c));let l,h,d;try{l=E.fromHex(r,a),h=E.fromHex(t.slice(0,c),a),d=A.multiplyUnsafe(u)}catch(g){return!1}if(!a&&l.isSmallOrder())return!1;const f=k(o,h.toRawBytes(),l.toRawBytes(),e),p=h.add(l.multiplyUnsafe(f));return p.subtract(d).clearCofactor().equals(E.ZERO)}A._setWindowSize(8);const O={getExtendedPublicKey:R,randomPrivateKey:()=>o(n.BYTES),precompute(t=8,e=E.BASE){return e._setWindowSize(t),e.multiply(BigInt(3)),e}};return{CURVE:e,getPublicKey:C,sign:L,verify:B,ExtendedPoint:E,utils:O}}
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const Un=BigInt(0),Pn=BigInt(1);function Mn(t){return nn(t,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...t})}function Zn(t){const e=Mn(t),{P:n}=e,r=t=>hn(t,n),i=e.montgomeryBits,s=Math.ceil(i/8),o=e.nByteLength,a=e.adjustScalarBytes||(t=>t),c=e.powPminus2||(t=>dn(t,n-BigInt(2),n));function u(t,e,n){const i=r(t*(e-n));return e=r(e-i),n=r(n+i),[e,n]}function l(t){if("bigint"===typeof t&&Un<=t&&t<n)return t;throw new Error("Expected valid scalar 0 < scalar < CURVE.P")}const h=(e.a-BigInt(2))/BigInt(4);function d(t,e){const n=l(t),s=l(e),o=n;let a,d=Pn,f=Un,p=n,g=Pn,y=Un;for(let c=BigInt(i-1);c>=Un;c--){const t=s>>c&Pn;y^=t,a=u(y,d,p),d=a[0],p=a[1],a=u(y,f,g),f=a[0],g=a[1],y=t;const e=d+f,n=r(e*e),i=d-f,l=r(i*i),b=n-l,w=p+g,m=p-g,v=r(m*e),E=r(w*i),A=v+E,x=v-E;p=r(A*A),g=r(o*r(x*x)),d=r(n*l),f=r(b*(n+r(h*b)))}a=u(y,d,p),d=a[0],p=a[1],a=u(y,f,g),f=a[0],g=a[1];const b=c(f);return r(d*b)}function f(t){return Ye(r(t),s)}function p(t){const e=Qe("u coordinate",t,s);return o===s&&(e[o-1]&=127),We(e)}function g(t){const e=Qe("scalar",t);if(e.length!==s&&e.length!==o)throw new Error(`Expected ${s} or ${o} bytes, got ${e.length}`);return We(a(e))}function y(t,e){const n=p(e),r=g(t),i=d(n,r);if(i===Un)throw new Error("Invalid private or public key received");return f(i)}const b=f(e.Gu);function w(t){return y(t,b)}return{scalarMult:y,scalarMultBase:w,getSharedSecret:(t,e)=>y(t,e),getPublicKey:t=>w(t),utils:{randomPrivateKey:()=>e.randomBytes(e.nByteLength)},GuBytes:b}}
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const Fn=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),Vn=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),Hn=(BigInt(0),BigInt(1)),$n=BigInt(2),jn=BigInt(5),Kn=BigInt(10),zn=BigInt(20),qn=BigInt(40),Gn=BigInt(80);function Wn(t){const e=Fn,n=t*t%e,r=n*t%e,i=fn(r,$n,e)*r%e,s=fn(i,Hn,e)*t%e,o=fn(s,jn,e)*s%e,a=fn(o,Kn,e)*o%e,c=fn(a,zn,e)*a%e,u=fn(c,qn,e)*c%e,l=fn(u,Gn,e)*u%e,h=fn(l,Gn,e)*u%e,d=fn(h,Kn,e)*o%e,f=fn(d,$n,e)*t%e;return{pow_p_5_8:f,b2:r}}function Jn(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function Yn(t,e){const n=Fn,r=hn(e*e*e,n),i=hn(r*r*e,n),s=Wn(t*i).pow_p_5_8;let o=hn(t*r*s,n);const a=hn(e*o*o,n),c=o,u=hn(o*Vn,n),l=a===t,h=a===hn(-t,n),d=a===hn(-t*Vn,n);return l&&(o=c),(h||d)&&(o=u),bn(o,n)&&(o=hn(-o,n)),{isValid:l||h,value:o}}const Qn=xn(Fn,void 0,!0),Xn={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:Qn,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:Fe,randomBytes:re,adjustScalarBytes:Jn,uvRatio:Yn};Dn(Xn);function tr(t,e,n){if(e.length>255)throw new Error("Context is too big");return te(Qt("SigEd25519 no Ed25519 collisions"),new Uint8Array([n?1:0,e.length]),e,t)}Dn({...Xn,domain:tr}),Dn({...Xn,domain:tr,prehash:Fe});const er=(()=>Zn({P:Fn,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:t=>{const e=Fn,{pow_p_5_8:n,b2:r}=Wn(t);return hn(fn(n,BigInt(3),e)*r,e)},adjustScalarBytes:Jn,randomBytes:re}))();const nr=(Qn.ORDER+BigInt(3))/BigInt(8);Qn.pow($n,nr),Qn.sqrt(Qn.neg(Qn.ONE)),Qn.ORDER,BigInt(5),BigInt(8),BigInt(486662);Sn(Qn,Qn.neg(BigInt(486664)));BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952"),BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class rr extends ee{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,zt.hash(t);const n=Xt(e);if(this.iHash=t.create(),"function"!==typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const r=this.blockLen,i=new Uint8Array(r);i.set(n.length>r?t.create().update(n).digest():n);for(let s=0;s<i.length;s++)i[s]^=54;this.iHash.update(i),this.oHash=t.create();for(let s=0;s<i.length;s++)i[s]^=106;this.oHash.update(i),i.fill(0)}update(t){return zt.exists(this),this.iHash.update(t),this}digestInto(t){zt.exists(this),zt.bytes(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:n,finished:r,destroyed:i,blockLen:s,outputLen:o}=this;return t.finished=r,t.destroyed=i,t.blockLen=s,t.outputLen=o,t.oHash=e._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const ir=(t,e,n)=>new rr(t,e).update(n).digest();function sr(t,e,n){return zt.hash(t),void 0===n&&(n=new Uint8Array(t.outputLen)),ir(t,Xt(n),Xt(e))}ir.create=(t,e)=>new rr(t,e);const or=new Uint8Array([0]),ar=new Uint8Array;function cr(t,e,n,r=32){if(zt.hash(t),zt.number(r),r>255*t.outputLen)throw new Error("Length should be <= 255*HashLen");const i=Math.ceil(r/t.outputLen);void 0===n&&(n=ar);const s=new Uint8Array(i*t.outputLen),o=ir.create(t,e),a=o._cloneInto(),c=new Uint8Array(o.outputLen);for(let u=0;u<i;u++)or[0]=u+1,a.update(0===u?ar:c).update(n).update(or).digestInto(c),s.set(c,t.outputLen*u),o._cloneInto(a);return o.destroy(),a.destroy(),c.fill(0),or.fill(0),s.slice(0,r)}const ur=(t,e,n)=>t&e^~t&n,lr=(t,e,n)=>t&e^t&n^e&n,hr=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),dr=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),fr=new Uint32Array(64);class pr extends se{constructor(){super(64,32,8,!1),this.A=0|dr[0],this.B=0|dr[1],this.C=0|dr[2],this.D=0|dr[3],this.E=0|dr[4],this.F=0|dr[5],this.G=0|dr[6],this.H=0|dr[7]}get(){const{A:t,B:e,C:n,D:r,E:i,F:s,G:o,H:a}=this;return[t,e,n,r,i,s,o,a]}set(t,e,n,r,i,s,o,a){this.A=0|t,this.B=0|e,this.C=0|n,this.D=0|r,this.E=0|i,this.F=0|s,this.G=0|o,this.H=0|a}process(t,e){for(let l=0;l<16;l++,e+=4)fr[l]=t.getUint32(e,!1);for(let l=16;l<64;l++){const t=fr[l-15],e=fr[l-2],n=Jt(t,7)^Jt(t,18)^t>>>3,r=Jt(e,17)^Jt(e,19)^e>>>10;fr[l]=r+fr[l-7]+n+fr[l-16]|0}let{A:n,B:r,C:i,D:s,E:o,F:a,G:c,H:u}=this;for(let l=0;l<64;l++){const t=Jt(o,6)^Jt(o,11)^Jt(o,25),e=u+t+ur(o,a,c)+hr[l]+fr[l]|0,h=Jt(n,2)^Jt(n,13)^Jt(n,22),d=h+lr(n,r,i)|0;u=c,c=a,a=o,o=s+e|0,s=i,i=r,r=n,n=e+d|0}n=n+this.A|0,r=r+this.B|0,i=i+this.C|0,s=s+this.D|0,o=o+this.E|0,a=a+this.F|0,c=c+this.G|0,u=u+this.H|0,this.set(n,r,i,s,o,a,c,u)}roundClean(){fr.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class gr extends pr{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}const yr=ne((()=>new pr)),br=(ne((()=>new gr)),{hashSHA256(t){return yr(t.subarray())},getHKDF(t,e){const n=sr(yr,e,t),r=cr(yr,n,void 0,96),i=r,s=i.subarray(0,32),o=i.subarray(32,64),a=i.subarray(64,96);return[s,o,a]},generateX25519KeyPair(){const t=er.utils.randomPrivateKey(),e=er.getPublicKey(t);return{publicKey:e,privateKey:t}},generateX25519KeyPairFromSeed(t){const e=er.getPublicKey(t);return{publicKey:e,privateKey:t}},generateX25519SharedKey(t,e){return er.getSharedSecret(t.subarray(),e.subarray())},chaCha20Poly1305Encrypt(t,e,n,r){return Mt(r,e,n).encrypt(t.subarray())},chaCha20Poly1305Decrypt(t,e,n,r,i){return Mt(r,e,n).decrypt(t.subarray(),i)}}),wr=br;function mr(t){return{generateKeypair:t.generateX25519KeyPair,dh:(e,n)=>t.generateX25519SharedKey(e.privateKey,n).subarray(0,32),encrypt:t.chaCha20Poly1305Encrypt,decrypt:t.chaCha20Poly1305Decrypt,hash:t.hashSHA256,hkdf:t.getHKDF}}const vr=t=>{const e=(0,K.E)(2);return e[0]=t>>8,e[1]=t,e};vr.bytes=2;const Er=t=>{if(t.length<2)throw RangeError("Could not decode int16BE");if(t instanceof Uint8Array){let e=0;return e+=t[0]<<8,e+=t[1],e}return t.getUint16(0)};function Ar(t){return{xxHandshakeSuccesses:t.registerCounter("libp2p_noise_xxhandshake_successes_total",{help:"Total count of noise xxHandshakes successes_"}),xxHandshakeErrors:t.registerCounter("libp2p_noise_xxhandshake_error_total",{help:"Total count of noise xxHandshakes errors"}),encryptedPackets:t.registerCounter("libp2p_noise_encrypted_packets_total",{help:"Total count of noise encrypted packets successfully"}),decryptedPackets:t.registerCounter("libp2p_noise_decrypted_packets_total",{help:"Total count of noise decrypted packets"}),decryptErrors:t.registerCounter("libp2p_noise_decrypt_errors_total",{help:"Total count of noise decrypt errors"})}}Er.bytes=2;var xr=n(7010);function Sr(t,e){e.enabled&&G&&(t?(e(`LOCAL_STATIC_PUBLIC_KEY ${(0,xr.B)(t.publicKey,"hex")}`),e(`LOCAL_STATIC_PRIVATE_KEY ${(0,xr.B)(t.privateKey,"hex")}`)):e("Missing local static keys."))}function _r(t,e){e.enabled&&G&&(t?(e(`LOCAL_PUBLIC_EPHEMERAL_KEY ${(0,xr.B)(t.publicKey,"hex")}`),e(`LOCAL_PRIVATE_EPHEMERAL_KEY ${(0,xr.B)(t.privateKey,"hex")}`)):e("Missing local ephemeral keys."))}function Ir(t,e){e.enabled&&G&&e(t?`REMOTE_STATIC_PUBLIC_KEY ${(0,xr.B)(t.subarray(),"hex")}`:"Missing remote static public key.")}function Rr(t,e){e.enabled&&G&&e(t?`REMOTE_EPHEMERAL_PUBLIC_KEY ${(0,xr.B)(t.subarray(),"hex")}`:"Missing remote ephemeral keys.")}function Cr(t,e,n){n.enabled&&G&&(n(`CIPHER_STATE_1 ${t.n.getUint64()} ${t.k&&(0,xr.B)(t.k,"hex")}`),n(`CIPHER_STATE_2 ${e.n.getUint64()} ${e.k&&(0,xr.B)(e.k,"hex")}`))}var kr=n(7998);class Lr extends Error{constructor(t="Unexpected Peer"){super(t),(0,r.Z)(this,"code",void 0),this.code=Lr.code}}(0,r.Z)(Lr,"code","ERR_UNEXPECTED_PEER");class Tr extends Error{constructor(t="Invalid crypto exchange"){super(t),(0,r.Z)(this,"code",void 0),this.code=Tr.code}}(0,r.Z)(Tr,"code","ERR_INVALID_CRYPTO_EXCHANGE");const Br=0,Or=4294967295,Nr="Cipherstate has reached maximum n, a new handshake must be performed";class Dr{constructor(t=Br){(0,r.Z)(this,"n",void 0),(0,r.Z)(this,"bytes",void 0),(0,r.Z)(this,"view",void 0),this.n=t,this.bytes=(0,K.u)(12),this.view=new DataView(this.bytes.buffer,this.bytes.byteOffset,this.bytes.byteLength),this.view.setUint32(4,t,!0)}increment(){this.n++,this.view.setUint32(4,this.n,!0)}getBytes(){return this.bytes}getUint64(){return this.n}assertValue(){if(this.n>Or)throw new Error(Nr)}}const Ur=(0,K.u)(0);class Pr{constructor(t,e=void 0,n=0){(0,r.Z)(this,"k",void 0),(0,r.Z)(this,"n",void 0),(0,r.Z)(this,"crypto",void 0),this.crypto=t,this.k=e,this.n=new Dr(n)}hasKey(){return Boolean(this.k)}encryptWithAd(t,e){if(!this.hasKey())return e;this.n.assertValue();const n=this.crypto.encrypt(e,this.n.getBytes(),t,this.k);return this.n.increment(),n}decryptWithAd(t,e,n){if(!this.hasKey())return e;this.n.assertValue();const r=this.crypto.decrypt(e,this.n.getBytes(),t,this.k,n);return this.n.increment(),r}}class Mr{constructor(t,e){(0,r.Z)(this,"cs",void 0),(0,r.Z)(this,"ck",void 0),(0,r.Z)(this,"h",void 0),(0,r.Z)(this,"crypto",void 0),this.crypto=t;const n=(0,kr.mL)(e,"utf-8");this.h=Vr(t,n),this.ck=this.h,this.cs=new Pr(t)}mixKey(t){const[e,n]=this.crypto.hkdf(this.ck,t);this.ck=e,this.cs=new Pr(this.crypto,n)}mixHash(t){this.h=this.crypto.hash(new g(this.h,t))}encryptAndHash(t){const e=this.cs.encryptWithAd(this.h,t);return this.mixHash(e),e}decryptAndHash(t){const e=this.cs.decryptWithAd(this.h,t);return this.mixHash(t),e}split(){const[t,e]=this.crypto.hkdf(this.ck,Ur);return[new Pr(this.crypto,t),new Pr(this.crypto,e)]}}class Zr{constructor(t){(0,r.Z)(this,"ss",void 0),(0,r.Z)(this,"s",void 0),(0,r.Z)(this,"e",void 0),(0,r.Z)(this,"rs",void 0),(0,r.Z)(this,"re",void 0),(0,r.Z)(this,"initiator",void 0),(0,r.Z)(this,"crypto",void 0);const{crypto:e,protocolName:n,prologue:i,initiator:s,s:o,e:a,rs:c,re:u}=t;this.crypto=e,this.ss=new Mr(e,n),this.ss.mixHash(i),this.initiator=s,this.s=o,this.e=a,this.rs=c,this.re=u}writeE(){if(this.e)throw new Error("ephemeral keypair is already set");const t=this.crypto.generateKeypair();return this.ss.mixHash(t.publicKey),this.e=t,t.publicKey}writeS(){if(!this.s)throw new Error("static keypair is not set");return this.ss.encryptAndHash(this.s.publicKey)}writeEE(){if(!this.e)throw new Error("ephemeral keypair is not set");if(!this.re)throw new Error("remote ephemeral public key is not set");this.ss.mixKey(this.crypto.dh(this.e,this.re))}writeES(){if(this.initiator){if(!this.e)throw new Error("ephemeral keypair is not set");if(!this.rs)throw new Error("remote static public key is not set");this.ss.mixKey(this.crypto.dh(this.e,this.rs))}else{if(!this.s)throw new Error("static keypair is not set");if(!this.re)throw new Error("remote ephemeral public key is not set");this.ss.mixKey(this.crypto.dh(this.s,this.re))}}writeSE(){if(this.initiator){if(!this.s)throw new Error("static keypair is not set");if(!this.re)throw new Error("remote ephemeral public key is not set");this.ss.mixKey(this.crypto.dh(this.s,this.re))}else{if(!this.e)throw new Error("ephemeral keypair is not set");if(!this.rs)throw new Error("remote static public key is not set");this.ss.mixKey(this.crypto.dh(this.e,this.rs))}}readE(t,e=0){if(this.re)throw new Error("remote ephemeral public key is already set");if(t.byteLength<e+32)throw new Error("message is not long enough");this.re=t.sublist(e,e+32),this.ss.mixHash(this.re)}readS(t,e=0){if(this.rs)throw new Error("remote static public key is already set");const n=32+(this.ss.cs.hasKey()?16:0);if(t.byteLength<e+n)throw new Error("message is not long enough");const r=t.sublist(e,e+n);return this.rs=this.ss.decryptAndHash(r),n}readEE(){this.writeEE()}readES(){this.writeES()}readSE(){this.writeSE()}}class Fr extends Zr{writeMessageA(t){return new g(this.writeE(),this.ss.encryptAndHash(t))}writeMessageB(t){const e=this.writeE();this.writeEE();const n=this.writeS();return this.writeES(),new g(e,n,this.ss.encryptAndHash(t))}writeMessageC(t){const e=this.writeS();return this.writeSE(),new g(e,this.ss.encryptAndHash(t))}readMessageA(t){try{return this.readE(t),this.ss.decryptAndHash(t.sublist(32))}catch(e){throw new Tr(`handshake stage 0 validation fail: ${e.message}`)}}readMessageB(t){try{this.readE(t),this.readEE();const e=this.readS(t,32);return this.readES(),this.ss.decryptAndHash(t.sublist(32+e))}catch(e){throw new Tr(`handshake stage 1 validation fail: ${e.message}`)}}readMessageC(t){try{const e=this.readS(t);return this.readSE(),this.ss.decryptAndHash(t.sublist(e))}catch(e){throw new Tr(`handshake stage 2 validation fail: ${e.message}`)}}}function Vr(t,e){if(e.length<=32){const t=(0,K.u)(32);return t.set(e),t}return t.hash(e)}var Hr=n(6997),$r=n(2543),jr=n(9799),Kr=n(8894),zr=n(7102),qr=n(7156),Gr=n(8252);function Wr(){zr._configure(),jr._configure(Kr),qr._configure(Gr)}Wr();const Jr=["uint64","int64","sint64","fixed64","sfixed64"];function Yr(t){for(const e of Jr){if(null==t[e])continue;const n=t[e];t[e]=function(){return BigInt(n.call(this).toString())}}return t}function Qr(t){return Yr(new jr(t))}function Xr(t){for(const e of Jr){if(null==t[e])continue;const n=t[e];t[e]=function(t){return n.call(this,t.toString())}}return t}function ti(){return Xr(qr.create())}function ei(t,e){const n=Qr(t instanceof Uint8Array?t:t.subarray());return e.decode(n)}function ni(t,e){const n=ti();return e.encode(t,n,{lengthDelimited:!1}),n.finish()}var ri,ii,si;function oi(t,e,n,r){return{name:t,type:e,encode:n,decode:r}}function ai(t,e){return oi("message",ri.LENGTH_DELIMITED,t,e)}async function ci(t,e,n){const r=await t.sign(li(e));return si.encode({identityKey:t.public.bytes,identitySig:r,extensions:n})}async function ui(t,e,n){try{const r=si.decode(t);if(n){const t=n.subarray();if(!(0,kr.fS)(t,r.identityKey))throw new Error(`Payload identity key ${(0,kr.BB)(r.identityKey,"hex")} does not match expected remote identity key ${(0,kr.BB)(t,"hex")}`)}if(!e)throw new Error("Remote static does not exist");const s=li(e),o=(0,i.lR)(r.identityKey);if(!await o.verify(s,r.identitySig))throw new Error("Invalid payload signature");return r}catch(r){throw new Lr(r.message)}}function li(t){const e=(0,$r.m)("noise-libp2p-static-key:");return t instanceof Uint8Array?(0,Hr.z)([e,t],e.length+t.length):(t.prepend(e),t)}async function hi(t){const{log:e,connection:n,crypto:r,privateKey:i,prologue:s,s:o,remoteIdentityKey:a,extensions:c}=t,u=await ci(i,o.publicKey,c),l=new Fr({crypto:r,protocolName:"Noise_XX_25519_ChaChaPoly_SHA256",initiator:!0,prologue:s,s:o});Sr(l.s,e),e.trace("Stage 0 - Initiator starting to send first message."),await n.write(l.writeMessageA(Ur)),e.trace("Stage 0 - Initiator finished sending first message."),_r(l.e,e),e.trace("Stage 1 - Initiator waiting to receive first message from responder...");const h=l.readMessageB(await n.read());e.trace("Stage 1 - Initiator received the message."),Rr(l.re,e),Ir(l.rs,e),e.trace("Initiator going to check remote's signature...");const d=await ui(h,l.rs,a);e.trace("All good with the signature!"),e.trace("Stage 2 - Initiator sending third handshake message."),await n.write(l.writeMessageC(u)),e.trace("Stage 2 - Initiator sent message with signed payload.");const[f,p]=l.ss.split();return Cr(f,p,e),{payload:d,encrypt:t=>f.encryptWithAd(Ur,t),decrypt:(t,e)=>p.decryptWithAd(Ur,t,e)}}async function di(t){const{log:e,connection:n,crypto:r,privateKey:i,prologue:s,s:o,remoteIdentityKey:a,extensions:c}=t,u=await ci(i,o.publicKey,c),l=new Fr({crypto:r,protocolName:"Noise_XX_25519_ChaChaPoly_SHA256",initiator:!1,prologue:s,s:o});Sr(l.s,e),e.trace("Stage 0 - Responder waiting to receive first message."),l.readMessageA(await n.read()),e.trace("Stage 0 - Responder received first message."),Rr(l.re,e),e.trace("Stage 1 - Responder sending out first message with signed payload and static key."),await n.write(l.writeMessageB(u)),e.trace("Stage 1 - Responder sent the second handshake message with signed payload."),_r(l.e,e),e.trace("Stage 2 - Responder waiting for third handshake message...");const h=l.readMessageC(await n.read());e.trace("Stage 2 - Responder received the message, finished handshake.");const d=await ui(h,l.rs,a),[f,p]=l.ss.split();return Cr(f,p,e),{payload:d,encrypt:t=>p.encryptWithAd(Ur,t),decrypt:(t,e)=>f.decryptWithAd(Ur,t,e)}}(function(t){t[t["VARINT"]=0]="VARINT",t[t["BIT64"]=1]="BIT64",t[t["LENGTH_DELIMITED"]=2]="LENGTH_DELIMITED",t[t["START_GROUP"]=3]="START_GROUP",t[t["END_GROUP"]=4]="END_GROUP",t[t["BIT32"]=5]="BIT32"})(ri||(ri={})),function(t){let e;t.codec=()=>(null==e&&(e=ai(((t,e,n={})=>{if(!1!==n.lengthDelimited&&e.fork(),null!=t.webtransportCerthashes)for(const r of t.webtransportCerthashes)e.uint32(10),e.bytes(r);!1!==n.lengthDelimited&&e.ldelim()}),((t,e)=>{const n={webtransportCerthashes:[]},r=null==e?t.len:t.pos+e;while(t.pos<r){const e=t.uint32();switch(e>>>3){case 1:n.webtransportCerthashes.push(t.bytes());break;default:t.skipType(7&e);break}}return n}))),e),t.encode=e=>ni(e,t.codec()),t.decode=e=>ei(e,t.codec())}(ii||(ii={})),function(t){let e;t.codec=()=>(null==e&&(e=ai(((t,e,n={})=>{!1!==n.lengthDelimited&&e.fork(),null!=t.identityKey&&t.identityKey.byteLength>0&&(e.uint32(10),e.bytes(t.identityKey)),null!=t.identitySig&&t.identitySig.byteLength>0&&(e.uint32(18),e.bytes(t.identitySig)),null!=t.extensions&&(e.uint32(34),ii.codec().encode(t.extensions,e)),!1!==n.lengthDelimited&&e.ldelim()}),((t,e)=>{const n={identityKey:(0,K.u)(0),identitySig:(0,K.u)(0)},r=null==e?t.len:t.pos+e;while(t.pos<r){const e=t.uint32();switch(e>>>3){case 1:n.identityKey=t.bytes();break;case 2:n.identitySig=t.bytes();break;case 4:n.extensions=ii.codec().decode(t,t.uint32());break;default:t.skipType(7&e);break}}return n}))),e),t.encode=e=>ni(e,t.codec()),t.decode=e=>ei(e,t.codec())}(si||(si={}));const fi=16;function pi(t,e){return async function*(n){for await(const r of n)for(let n=0;n<r.length;n+=q){let i,s=n+q;s>r.length&&(s=r.length),i=r instanceof Uint8Array?t.encrypt(r.subarray(n,s)):t.encrypt(r.sublist(n,s)),e?.encryptedPackets.increment(),yield new g(vr(i.byteLength),i)}}}function gi(t,e){return async function*(n){for await(const i of n)for(let n=0;n<i.length;n+=z){let s=n+z;if(s>i.length&&(s=i.length),s-fi<n)throw new Error("Invalid chunk");const o=i.sublist(n,s),a=i.subarray(n,s-fi);try{const n=t.decrypt(o,a);e?.decryptedPackets.increment(),yield n}catch(r){throw e?.decryptErrors.increment(),r}}}}class yi{constructor(t,e={}){(0,r.Z)(this,"protocol","/noise"),(0,r.Z)(this,"crypto",void 0),(0,r.Z)(this,"prologue",void 0),(0,r.Z)(this,"staticKey",void 0),(0,r.Z)(this,"extensions",void 0),(0,r.Z)(this,"metrics",void 0),(0,r.Z)(this,"components",void 0);const{staticNoiseKey:n,extensions:i,crypto:s,prologueBytes:o}=e,{metrics:a}=t;this.components=t;const c=s??wr;this.crypto=mr(c),this.extensions=i,this.metrics=a?Ar(a):void 0,this.staticKey=n?c.generateX25519KeyPairFromSeed(n):c.generateX25519KeyPair(),this.prologue=o??(0,K.u)(0)}async secureOutbound(t,e,n){const r=(0,F.p)(e,{lengthEncoder:vr,lengthDecoder:Er,maxDataLength:z});if(!t.privateKey)throw new s.sv("local peerId does not contain private key","ERR_NO_PRIVATE_KEY");const a=await(0,i.r3)(t.privateKey),c=n?.publicKey,u=await this.performHandshakeInitiator(r,a,c),l=await this.createSecureConnection(r,u);return e.source=l.source,e.sink=l.sink,{conn:e,remoteExtensions:u.payload.extensions,remotePeer:await(0,o.y5)(u.payload.identityKey)}}async secureInbound(t,e,n){const r=(0,F.p)(e,{lengthEncoder:vr,lengthDecoder:Er,maxDataLength:z});if(!t.privateKey)throw new s.sv("local peerId does not contain private key","ERR_NO_PRIVATE_KEY");const a=await(0,i.r3)(t.privateKey),c=n?.publicKey,u=await this.performHandshakeResponder(r,a,c),l=await this.createSecureConnection(r,u);return e.source=l.source,e.sink=l.sink,{conn:e,remoteExtensions:u.payload.extensions,remotePeer:await(0,o.y5)(u.payload.identityKey)}}async performHandshakeInitiator(t,e,n){let r;try{r=await hi({connection:t,privateKey:e,remoteIdentityKey:n,log:this.components.logger.forComponent("libp2p:noise:xxhandshake"),crypto:this.crypto,prologue:this.prologue,s:this.staticKey,extensions:this.extensions}),this.metrics?.xxHandshakeSuccesses.increment()}catch(i){throw this.metrics?.xxHandshakeErrors.increment(),i}return r}async performHandshakeResponder(t,e,n){let r;try{r=await di({connection:t,privateKey:e,remoteIdentityKey:n,log:this.components.logger.forComponent("libp2p:noise:xxhandshake"),crypto:this.crypto,prologue:this.prologue,s:this.staticKey,extensions:this.extensions}),this.metrics?.xxHandshakeSuccesses.increment()}catch(i){throw this.metrics?.xxHandshakeErrors.increment(),i}return r}async createSecureConnection(t,e){const[n,r]=$(),i=t.unwrap();return await(0,j.z)(n,pi(e,this.metrics),i,(t=>Z(t,{lengthDecoder:Er})),gi(e,this.metrics),n),r}}function bi(t={}){return e=>new yi(e,t)}},314:function(t,e,n){"use strict";n(1043),n(1439),n(7585),n(5315),n(7658);parseInt("0xFFFF",16),new Uint8Array([0,0,0,0,0,0,0,0,0,0,255,255])},5905:function(t,e,n){"use strict";n.d(e,{f:function(){return nt}});var r=n(7327),i=n(4856),s=n(1508),o=n(1869);n(1439),n(7585),n(5315);function a(t){const{stream:e,remoteAddr:n,logger:r}=t,i=r.forComponent("libp2p:stream:converter");let s=!1,o=!1;const a=e.close.bind(e);e.close=async t=>{await a(t),h(!0)};const c=e.abort.bind(e);e.abort=t=>{c(t),h(!0)};const u=e.sink.bind(e);e.sink=async t=>{try{await u(t)}catch(e){"aborted"!==e.type&&i.error("%s error in sink",n,e)}finally{o=!0,h()}};const l={log:i,sink:e.sink,source:async function*(){try{for await(const t of e.source)t instanceof Uint8Array?yield t:yield*t}finally{s=!0,h()}}(),remoteAddr:n,timeline:{open:Date.now(),close:void 0},close:e.close,abort:e.abort};function h(t){!0===t&&(s=!0,o=!0),s&&o&&null==l.timeline.close&&(l.timeline.close=Date.now())}return l}var c=n(1e3),u=n(783),l=n(9174);const h=290,d="/libp2p/relay",f=1,p="circuit-relay-relay",g=(BigInt(1<<17),"/libp2p/circuit/relay/0.2.0/hop"),y="/libp2p/circuit/relay/0.2.0/stop",b=300,w="ERR_RELAYED_DIAL",m="ERR_HOP_REQUEST_FAILED";n(7658);var v,E,A,x,S,_,I,R,C=n(5065);(function(t){let e,n,r;(function(t){t["RESERVE"]="RESERVE",t["CONNECT"]="CONNECT",t["STATUS"]="STATUS"})(e=t.Type||(t.Type={})),function(t){t[t["RESERVE"]=0]="RESERVE",t[t["CONNECT"]=1]="CONNECT",t[t["STATUS"]=2]="STATUS"}(n||(n={})),function(t){t.codec=()=>(0,C.Ji)(n)}(e=t.Type||(t.Type={})),t.codec=()=>(null==r&&(r=(0,C.yw)(((e,n,r={})=>{!1!==r.lengthDelimited&&n.fork(),null!=e.type&&(n.uint32(8),t.Type.codec().encode(e.type,n)),null!=e.peer&&(n.uint32(18),A.codec().encode(e.peer,n)),null!=e.reservation&&(n.uint32(26),x.codec().encode(e.reservation,n)),null!=e.limit&&(n.uint32(34),S.codec().encode(e.limit,n)),null!=e.status&&(n.uint32(40),_.codec().encode(e.status,n)),!1!==r.lengthDelimited&&n.ldelim()}),((e,n)=>{const r={},i=null==n?e.len:e.pos+n;while(e.pos<i){const n=e.uint32();switch(n>>>3){case 1:r.type=t.Type.codec().decode(e);break;case 2:r.peer=A.codec().decode(e,e.uint32());break;case 3:r.reservation=x.codec().decode(e,e.uint32());break;case 4:r.limit=S.codec().decode(e,e.uint32());break;case 5:r.status=_.codec().decode(e);break;default:e.skipType(7&n);break}}return r}))),r),t.encode=e=>(0,C.LE)(e,t.codec()),t.decode=e=>(0,C.C6)(e,t.codec())})(v||(v={})),function(t){let e,n,r;(function(t){t["CONNECT"]="CONNECT",t["STATUS"]="STATUS"})(e=t.Type||(t.Type={})),function(t){t[t["CONNECT"]=0]="CONNECT",t[t["STATUS"]=1]="STATUS"}(n||(n={})),function(t){t.codec=()=>(0,C.Ji)(n)}(e=t.Type||(t.Type={})),t.codec=()=>(null==r&&(r=(0,C.yw)(((e,n,r={})=>{!1!==r.lengthDelimited&&n.fork(),null!=e.type&&(n.uint32(8),t.Type.codec().encode(e.type,n)),null!=e.peer&&(n.uint32(18),A.codec().encode(e.peer,n)),null!=e.limit&&(n.uint32(26),S.codec().encode(e.limit,n)),null!=e.status&&(n.uint32(32),_.codec().encode(e.status,n)),!1!==r.lengthDelimited&&n.ldelim()}),((e,n)=>{const r={},i=null==n?e.len:e.pos+n;while(e.pos<i){const n=e.uint32();switch(n>>>3){case 1:r.type=t.Type.codec().decode(e);break;case 2:r.peer=A.codec().decode(e,e.uint32());break;case 3:r.limit=S.codec().decode(e,e.uint32());break;case 4:r.status=_.codec().decode(e);break;default:e.skipType(7&n);break}}return r}))),r),t.encode=e=>(0,C.LE)(e,t.codec()),t.decode=e=>(0,C.C6)(e,t.codec())}(E||(E={})),function(t){let e;t.codec=()=>(null==e&&(e=(0,C.yw)(((t,e,n={})=>{if(!1!==n.lengthDelimited&&e.fork(),null!=t.id&&t.id.byteLength>0&&(e.uint32(10),e.bytes(t.id)),null!=t.addrs)for(const r of t.addrs)e.uint32(18),e.bytes(r);!1!==n.lengthDelimited&&e.ldelim()}),((t,e)=>{const n={id:new Uint8Array(0),addrs:[]},r=null==e?t.len:t.pos+e;while(t.pos<r){const e=t.uint32();switch(e>>>3){case 1:n.id=t.bytes();break;case 2:n.addrs.push(t.bytes());break;default:t.skipType(7&e);break}}return n}))),e),t.encode=e=>(0,C.LE)(e,t.codec()),t.decode=e=>(0,C.C6)(e,t.codec())}(A||(A={})),function(t){let e;t.codec=()=>(null==e&&(e=(0,C.yw)(((t,e,n={})=>{if(!1!==n.lengthDelimited&&e.fork(),null!=t.expire&&0n!==t.expire&&(e.uint32(8),e.uint64(t.expire)),null!=t.addrs)for(const r of t.addrs)e.uint32(18),e.bytes(r);null!=t.voucher&&(e.uint32(26),e.bytes(t.voucher)),!1!==n.lengthDelimited&&e.ldelim()}),((t,e)=>{const n={expire:0n,addrs:[]},r=null==e?t.len:t.pos+e;while(t.pos<r){const e=t.uint32();switch(e>>>3){case 1:n.expire=t.uint64();break;case 2:n.addrs.push(t.bytes());break;case 3:n.voucher=t.bytes();break;default:t.skipType(7&e);break}}return n}))),e),t.encode=e=>(0,C.LE)(e,t.codec()),t.decode=e=>(0,C.C6)(e,t.codec())}(x||(x={})),function(t){let e;t.codec=()=>(null==e&&(e=(0,C.yw)(((t,e,n={})=>{!1!==n.lengthDelimited&&e.fork(),null!=t.duration&&(e.uint32(8),e.uint32(t.duration)),null!=t.data&&(e.uint32(16),e.uint64(t.data)),!1!==n.lengthDelimited&&e.ldelim()}),((t,e)=>{const n={},r=null==e?t.len:t.pos+e;while(t.pos<r){const e=t.uint32();switch(e>>>3){case 1:n.duration=t.uint32();break;case 2:n.data=t.uint64();break;default:t.skipType(7&e);break}}return n}))),e),t.encode=e=>(0,C.LE)(e,t.codec()),t.decode=e=>(0,C.C6)(e,t.codec())}(S||(S={})),function(t){t["UNUSED"]="UNUSED",t["OK"]="OK",t["RESERVATION_REFUSED"]="RESERVATION_REFUSED",t["RESOURCE_LIMIT_EXCEEDED"]="RESOURCE_LIMIT_EXCEEDED",t["PERMISSION_DENIED"]="PERMISSION_DENIED",t["CONNECTION_FAILED"]="CONNECTION_FAILED",t["NO_RESERVATION"]="NO_RESERVATION",t["MALFORMED_MESSAGE"]="MALFORMED_MESSAGE",t["UNEXPECTED_MESSAGE"]="UNEXPECTED_MESSAGE"}(_||(_={})),function(t){t[t["UNUSED"]=0]="UNUSED",t[t["OK"]=100]="OK",t[t["RESERVATION_REFUSED"]=200]="RESERVATION_REFUSED",t[t["RESOURCE_LIMIT_EXCEEDED"]=201]="RESOURCE_LIMIT_EXCEEDED",t[t["PERMISSION_DENIED"]=202]="PERMISSION_DENIED",t[t["CONNECTION_FAILED"]=203]="CONNECTION_FAILED",t[t["NO_RESERVATION"]=204]="NO_RESERVATION",t[t["MALFORMED_MESSAGE"]=400]="MALFORMED_MESSAGE",t[t["UNEXPECTED_MESSAGE"]=401]="UNEXPECTED_MESSAGE"}(I||(I={})),function(t){t.codec=()=>(0,C.Ji)(I)}(_||(_={})),function(t){let e;t.codec=()=>(null==e&&(e=(0,C.yw)(((t,e,n={})=>{!1!==n.lengthDelimited&&e.fork(),null!=t.relay&&t.relay.byteLength>0&&(e.uint32(10),e.bytes(t.relay)),null!=t.peer&&t.peer.byteLength>0&&(e.uint32(18),e.bytes(t.peer)),null!=t.expiration&&0n!==t.expiration&&(e.uint32(24),e.uint64(t.expiration)),!1!==n.lengthDelimited&&e.ldelim()}),((t,e)=>{const n={relay:new Uint8Array(0),peer:new Uint8Array(0),expiration:0n},r=null==e?t.len:t.pos+e;while(t.pos<r){const e=t.uint32();switch(e>>>3){case 1:n.relay=t.bytes();break;case 2:n.peer=t.bytes();break;case 3:n.expiration=t.uint64();break;default:t.skipType(7&e);break}}return n}))),e),t.encode=e=>(0,C.LE)(e,t.codec()),t.decode=e=>(0,C.C6)(e,t.codec())}(R||(R={}));var k=n(3844),L=n(3406),T=n(441);async function B(t){const e=(new TextEncoder).encode(t),n=await T.sha256.digest(e);return L.k0.createV0(n)}function O(t){const e=t*BigInt(1e3),n=(new Date).getTime();return Number(e-BigInt(n))}class N extends k.L{constructor(t){super(),(0,r.Z)(this,"peerId",void 0),(0,r.Z)(this,"peerStore",void 0),(0,r.Z)(this,"contentRouting",void 0),(0,r.Z)(this,"registrar",void 0),(0,r.Z)(this,"started",void 0),(0,r.Z)(this,"topologyId",void 0),(0,r.Z)(this,"log",void 0),this.log=t.logger.forComponent("libp2p:circuit-relay:discover-relays"),this.started=!1,this.peerId=t.peerId,this.peerStore=t.peerStore,this.contentRouting=t.contentRouting,this.registrar=t.registrar}isStarted(){return this.started}async start(){this.topologyId=await this.registrar.register(g,{notifyOnTransient:!0,onConnect:t=>{this.safeDispatchEvent("relay:discover",{detail:t})}}),this.started=!0}afterStart(){this.discover().catch((t=>{this.log.error("error discovering relays",t)}))}stop(){null!=this.topologyId&&this.registrar.unregister(this.topologyId),this.started=!1}async discover(){this.log("searching peer store for relays");const t=await this.peerStore.all({filters:[t=>t.protocols.includes(g)],orders:[()=>Math.random()<.5?1:-1]});for(const n of t)this.log("found relay peer %p in content peer store",n.id),this.safeDispatchEvent("relay:discover",{detail:n.id});this.log("found %d relay peers in peer store",t.length);try{this.log("searching content routing for relays");const t=await B(d);let e=0;for await(const n of this.contentRouting.findProviders(t))if(n.multiaddrs.length>0&&!n.id.equals(this.peerId)){const t=n.id;e++,await this.peerStore.merge(t,{multiaddrs:n.multiaddrs}),this.log("found relay peer %p in content routing",t),this.safeDispatchEvent("relay:discover",{detail:t})}this.log("found %d relay peers in content routing",e)}catch(e){this.log.error("failed when finding relays on the network",e)}}}var D=n(3781),U=n(9614),P=n(7686),M=new WeakSet;class Z extends k.L{constructor(t){super(),(0,D.Z)(this,M),(0,r.Z)(this,"connectionManager",void 0),(0,r.Z)(this,"relayStore",void 0),(0,r.Z)(this,"listeningAddrs",void 0),(0,r.Z)(this,"log",void 0),(0,r.Z)(this,"_onRemoveRelayPeer",(t=>{(0,U.Z)(this,M,F).call(this,t.detail)})),this.log=t.logger.forComponent("libp2p:circuit-relay:transport:listener"),this.connectionManager=t.connectionManager,this.relayStore=t.relayStore,this.listeningAddrs=new P.j,this.relayStore.addEventListener("relay:removed",this._onRemoveRelayPeer)}async listen(t){this.log("listen on %a",t);const e=t.decapsulate("/p2p-circuit"),n=await this.connectionManager.openConnection(e);if(!this.relayStore.hasReservation(n.remotePeer))return this.log("making reservation on peer %p",n.remotePeer),void await this.relayStore.addRelay(n.remotePeer,"configured");const r=this.relayStore.getReservation(n.remotePeer);if(null==r)throw new i.sv("Did not have reservation after making reservation","ERR_NO_RESERVATION");this.listeningAddrs.has(n.remotePeer)?this.log("already listening on relay %p",n.remotePeer):(this.listeningAddrs.set(n.remotePeer,r.addrs.map((t=>(0,u.HM)(t).encapsulate("/p2p-circuit")))),this.safeDispatchEvent("listening",{}))}getAddrs(){return[...this.listeningAddrs.values()].flat()}async close(){}}function F(t){const e=this.listeningAddrs.has(t);this.log("relay peer removed %p - had reservation",t,e),this.listeningAddrs.delete(t),e&&(this.log.trace("removing relay event listener for peer %p",t),this.relayStore.removeEventListener("relay:removed",this._onRemoveRelayPeer),this.safeDispatchEvent("close",{}))}function V(t){return new Z(t)}var H=n(9578),$=n(7708);const j=6e5,K=3e5,z=3e4;var q=new WeakSet,G=new WeakSet;class W extends k.L{constructor(t,e){super(),(0,D.Z)(this,G),(0,D.Z)(this,q),(0,r.Z)(this,"peerId",void 0),(0,r.Z)(this,"connectionManager",void 0),(0,r.Z)(this,"transportManager",void 0),(0,r.Z)(this,"peerStore",void 0),(0,r.Z)(this,"events",void 0),(0,r.Z)(this,"reserveQueue",void 0),(0,r.Z)(this,"reservations",void 0),(0,r.Z)(this,"maxDiscoveredRelays",void 0),(0,r.Z)(this,"maxReservationQueueLength",void 0),(0,r.Z)(this,"reservationCompletionTimeout",void 0),(0,r.Z)(this,"started",void 0),(0,r.Z)(this,"log",void 0),this.log=t.logger.forComponent("libp2p:circuit-relay:transport:reservation-store"),this.peerId=t.peerId,this.connectionManager=t.connectionManager,this.transportManager=t.transportManager,this.peerStore=t.peerStore,this.events=t.events,this.reservations=new P.j,this.maxDiscoveredRelays=e?.discoverRelays??0,this.maxReservationQueueLength=e?.maxReservationQueueLength??100,this.reservationCompletionTimeout=e?.reservationCompletionTimeout??1e4,this.started=!1,this.reserveQueue=new H.i({concurrency:e?.reservationConcurrency??f,metricName:"libp2p_relay_reservation_queue",metrics:t.metrics}),this.events.addEventListener("peer:disconnect",(t=>{(0,U.Z)(this,G,Y).call(this,t.detail)}))}isStarted(){return this.started}start(){this.started=!0}stop(){this.reserveQueue.clear(),this.reservations.forEach((({timeout:t})=>{clearTimeout(t)})),this.reservations.clear(),this.started=!1}async addRelay(t,e){this.peerId.equals(t)?this.log("not trying to use self as relay"):this.reserveQueue.size>this.maxReservationQueueLength?this.log("not adding relay as the queue is full"):this.reserveQueue.has(t)?this.log("relay peer is already in the reservation queue"):(this.log("add relay %p",t),await this.reserveQueue.add((async()=>{try{const n=this.reservations.get(t);if(null!=n){if(O(n.reservation.expire)>j)return void this.log("already have reservation on relay peer %p and it expires in more than 10 minutes",t);clearTimeout(n.timeout),this.reservations.delete(t)}if("discovered"===e&&[...this.reservations.values()].reduce(((t,e)=>("discovered"===e.type&&t++,t)),0)>=this.maxDiscoveredRelays)return void this.log("already have enough discovered relays");const r=AbortSignal.timeout(this.reservationCompletionTimeout),i=await this.connectionManager.openConnection(t,{signal:r});if(i.remoteAddr.protoNames().includes("p2p-circuit"))return void this.log("not creating reservation over relayed connection");const s=await(0,U.Z)(this,q,J).call(this,i,{signal:r});this.log("created reservation on relay peer %p",t);const o=O(s.expire),a=Math.min(Math.max(o-K,z),Math.pow(2,31)-1),c=setTimeout((()=>{this.addRelay(t,e).catch((e=>{this.log.error("could not refresh reservation to relay %p",t,e)}))}),a);this.reservations.set(t,{timeout:c,reservation:s,type:e}),await this.peerStore.merge(t,{tags:{[p]:{value:1,ttl:o}}}),await this.transportManager.listen([(0,u.HM)(`/p2p/${t.toString()}/p2p-circuit`)])}catch(n){this.log.error("could not reserve slot on %p",t,n);const e=this.reservations.get(t);null!=e&&clearTimeout(e.timeout),this.reservations.delete(t)}}),{peerId:t}))}hasReservation(t){return this.reservations.has(t)}getReservation(t){return this.reservations.get(t)?.reservation}}async function J(t,e){e.signal?.throwIfAborted(),this.log("requesting reservation from %p",t.remotePeer);const n=await t.newStream(g,e),r=(0,l.z)(n),i=r.pb(v);let s;await i.write({type:v.Type.RESERVE},e);try{s=await i.read(e)}catch(a){throw this.log.error("error parsing reserve message response from %p because",t.remotePeer,a),n.abort(a),a}finally{await n.close()}if(s.status===_.OK&&null!=s.reservation){let e=!1;const n=t.remoteAddr.bytes;for(const t of s.reservation.addrs)if((0,$.f)(n,t)){e=!0;break}return e||s.reservation.addrs.push(n),s.reservation}const o=`reservation failed with status ${s.status??"undefined"}`;throw this.log.error(o),new Error(o)}function Y(t){const e=this.reservations.get(t);null!=e&&(this.log("connection to relay %p closed, removing reservation from local store",t),clearTimeout(e.timeout),this.reservations.delete(t),this.safeDispatchEvent("relay:removed",{detail:t}),this.reservations.size<this.maxDiscoveredRelays&&(this.log("not enough relays %d/%d",this.reservations.size,this.maxDiscoveredRelays),this.safeDispatchEvent("relay:not-enough-relays",{})))}let Q;const X=t=>{if(null==t.peer)return!1;try{t.peer.addrs.forEach(u.HM)}catch{return!1}return!0},tt={maxInboundStopStreams:b,maxOutboundStopStreams:b,stopTimeout:3e4};Q=Symbol.toStringTag;class et{constructor(t,e){(0,r.Z)(this,"discovery",void 0),(0,r.Z)(this,"registrar",void 0),(0,r.Z)(this,"peerStore",void 0),(0,r.Z)(this,"connectionManager",void 0),(0,r.Z)(this,"transportManager",void 0),(0,r.Z)(this,"peerId",void 0),(0,r.Z)(this,"upgrader",void 0),(0,r.Z)(this,"addressManager",void 0),(0,r.Z)(this,"connectionGater",void 0),(0,r.Z)(this,"reservationStore",void 0),(0,r.Z)(this,"logger",void 0),(0,r.Z)(this,"maxInboundStopStreams",void 0),(0,r.Z)(this,"maxOutboundStopStreams",void 0),(0,r.Z)(this,"stopTimeout",void 0),(0,r.Z)(this,"started",void 0),(0,r.Z)(this,"log",void 0),(0,r.Z)(this,s.SF,!0),(0,r.Z)(this,Q,"libp2p/circuit-relay-v2"),this.log=t.logger.forComponent("libp2p:circuit-relay:transport"),this.registrar=t.registrar,this.peerStore=t.peerStore,this.connectionManager=t.connectionManager,this.transportManager=t.transportManager,this.logger=t.logger,this.peerId=t.peerId,this.upgrader=t.upgrader,this.addressManager=t.addressManager,this.connectionGater=t.connectionGater,this.maxInboundStopStreams=e.maxInboundStopStreams??tt.maxInboundStopStreams,this.maxOutboundStopStreams=e.maxOutboundStopStreams??tt.maxOutboundStopStreams,this.stopTimeout=e.stopTimeout??tt.stopTimeout,null!=e.discoverRelays&&e.discoverRelays>0&&(this.discovery=new N(t),this.discovery.addEventListener("relay:discover",(t=>{this.reservationStore.addRelay(t.detail,"discovered").catch((e=>{this.log.error("could not add discovered relay %p",t.detail,e)}))}))),this.reservationStore=new W(t,e),this.reservationStore.addEventListener("relay:not-enough-relays",(()=>{this.discovery?.discover().catch((t=>{this.log.error("could not discover relays",t)}))})),this.started=!1}isStarted(){return this.started}async start(){this.reservationStore.start(),await this.registrar.handle(y,(t=>{this.onStop(t).catch((e=>{this.log.error("error while handling STOP protocol",e),t.stream.abort(e)}))}),{maxInboundStreams:this.maxInboundStopStreams,maxOutboundStreams:this.maxOutboundStopStreams,runOnTransientConnection:!0}),await(this.discovery?.start()),this.started=!0}afterStart(){this.discovery?.afterStart()}async stop(){this.discovery?.stop(),this.reservationStore.stop(),await this.registrar.unhandle(y),this.started=!1}async dial(t,e={}){if(1!==t.protoCodes().filter((t=>t===h)).length){const e="Invalid circuit relay address";throw this.log.error(e,t),new i.sv(e,w)}const n=t.toString().split("/p2p-circuit"),r=(0,u.HM)(n[0]),s=(0,u.HM)(n[n.length-1]),a=r.getPeerId(),c=s.getPeerId();if(null==a||null==c){const e=`Circuit relay dial to ${t.toString()} failed as address did not have peer ids`;throw this.log.error(e),new i.sv(e,w)}const l=(0,o.jE)(a),d=(0,o.jE)(c);let f=!1;const p=this.connectionManager.getConnections(l);let y,b=p[0];null==b&&(await this.peerStore.merge(l,{multiaddrs:[r]}),b=await this.connectionManager.openConnection(l,e),f=!0);try{return y=await b.newStream(g),await this.connectV2({stream:y,connection:b,destinationPeer:d,destinationAddr:s,relayAddr:r,ma:t,disconnectOnFailure:f})}catch(m){throw this.log.error("circuit relay dial to destination %p via relay %p failed",d,l,m),null!=y&&y.abort(m),f&&await b.close(),m}}async connectV2({stream:t,connection:e,destinationPeer:n,destinationAddr:r,relayAddr:s,ma:o,disconnectOnFailure:c}){try{const e=(0,l.z)(t),c=e.pb(v);await c.write({type:v.Type.CONNECT,peer:{id:n.toBytes(),addrs:[(0,u.HM)(r).bytes]}});const h=await c.read();if(h.status!==_.OK)throw new i.sv(`failed to connect via relay with status ${h?.status?.toString()??"undefined"}`,m);const d=a({stream:e.unwrap(),remoteAddr:o,localAddr:s.encapsulate(`/p2p-circuit/p2p/${this.peerId.toString()}`),logger:this.logger});return this.log("new outbound transient connection %a",d.remoteAddr),await this.upgrader.upgradeOutbound(d,{transient:!0})}catch(h){throw this.log.error(`Circuit relay dial to destination ${n.toString()} via relay ${e.remotePeer.toString()} failed`,h),c&&await e.close(),h}}createListener(t){return V({connectionManager:this.connectionManager,relayStore:this.reservationStore,logger:this.logger})}filter(t){return t=Array.isArray(t)?t:[t],t.filter((t=>c.dx.matches(t)))}async onStop({connection:t,stream:e}){if(!this.reservationStore.hasReservation(t.remotePeer))try{this.log("dialed via relay we did not have a reservation on, start listening on that relay address"),await this.transportManager.listen([t.remoteAddr.encapsulate("/p2p-circuit")])}catch(d){this.log.error("failed to listen on a relay peer we were dialed via but did not have a reservation on",d)}const n=AbortSignal.timeout(this.stopTimeout),r=(0,l.z)(e).pb(E),i=await r.read({signal:n});if(this.log("new circuit relay v2 stop stream from %p with type %s",t.remotePeer,i.type),void 0===i?.type)return this.log.error("type was missing from circuit v2 stop protocol request from %s",t.remotePeer),await r.write({type:E.Type.STATUS,status:_.MALFORMED_MESSAGE},{signal:n}),void await e.close();if(i.type!==E.Type.CONNECT)return this.log.error("invalid stop connect request via peer %p",t.remotePeer),await r.write({type:E.Type.STATUS,status:_.UNEXPECTED_MESSAGE},{signal:n}),void await e.close();if(!X(i))return this.log.error("invalid stop connect request via peer %p",t.remotePeer),await r.write({type:E.Type.STATUS,status:_.MALFORMED_MESSAGE},{signal:n}),void await e.close();const s=(0,o.cv)(i.peer.id);if(!0===await(this.connectionGater.denyInboundRelayedConnection?.(t.remotePeer,s)))return this.log.error("connection gater denied inbound relayed connection from %p",t.remotePeer),await r.write({type:E.Type.STATUS,status:_.PERMISSION_DENIED},{signal:n}),void await e.close();this.log.trace("sending success response to %p",t.remotePeer),await r.write({type:E.Type.STATUS,status:_.OK},{signal:n});const c=t.remoteAddr.encapsulate(`/p2p-circuit/p2p/${s.toString()}`),u=this.addressManager.getAddresses()[0],h=a({stream:r.unwrap().unwrap(),remoteAddr:c,localAddr:u,logger:this.logger});this.log("new inbound transient connection %a",h.remoteAddr),await this.upgrader.upgradeInbound(h,{transient:!0}),this.log("%s connection %a upgraded","inbound",h.remoteAddr)}}function nt(t={}){return e=>new et(e,t)}},5326:function(t,e,n){"use strict";n.d(e,{Au:function(){return Us},m2:function(){return Fs},Re:function(){return Ms},r3:function(){return Zs},lR:function(){return Ps}});var r={};n.r(r),n.d(r,{gk:function(){return vt},dQ:function(){return Ot},ci:function(){return At},bytesToNumberBE:function(){return Rt},ty:function(){return Ct},eV:function(){return Bt},n$:function(){return Ut},ql:function(){return Tt},hexToBytes:function(){return It},_t:function(){return mt},tL:function(){return kt},S5:function(){return Lt},FF:function(){return Mt}});var i={};n.r(i),n.d(i,{Ed25519PrivateKey:function(){return nn},Ed25519PublicKey:function(){return en},generateKeyPair:function(){return on},generateKeyPairFromSeed:function(){return an},unmarshalEd25519PrivateKey:function(){return rn},unmarshalEd25519PublicKey:function(){return sn}});var s={};n.r(s),n.d(s,{MAX_RSA_KEY_SIZE:function(){return $i},RsaPrivateKey:function(){return Ki},RsaPublicKey:function(){return ji},fromJwk:function(){return Gi},generateKeyPair:function(){return Wi},unmarshalRsaPrivateKey:function(){return zi},unmarshalRsaPublicKey:function(){return qi}});var o={};n.r(o),n.d(o,{Secp256k1PrivateKey:function(){return ks},Secp256k1PublicKey:function(){return Cs},generateKeyPair:function(){return Bs},unmarshalSecp256k1PrivateKey:function(){return Ls},unmarshalSecp256k1PublicKey:function(){return Ts}});n(1439),n(7585),n(5315);var a=n(4856),c=n(7327),u=n(4722),l=n(5968),h=n(441),d=n(7708),f=n(6997),p=n(2543);function g(t){return null!=t&&("function"===typeof t.then&&"function"===typeof t.catch&&"function"===typeof t.finally)}function y(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`positive integer expected, not ${t}`)}function b(t){return t instanceof Uint8Array||null!=t&&"object"===typeof t&&"Uint8Array"===t.constructor.name}function w(t,...e){if(!b(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error(`Uint8Array expected of length ${e}, not of length=${t.length}`)}function m(t){if("function"!==typeof t||"function"!==typeof t.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");y(t.outputLen),y(t.blockLen)}function v(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function E(t,e){w(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const A="object"===typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0;const x=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),S=(t,e)=>t<<32-e|t>>>e;new Uint8Array(new Uint32Array([287454020]).buffer)[0];const _=async()=>{};async function I(t,e,n){let r=Date.now();for(let i=0;i<t;i++){n(i);const t=Date.now()-r;t>=0&&t<e||(await _(),r+=t)}}function R(t){if("string"!==typeof t)throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array((new TextEncoder).encode(t))}function C(t){return"string"===typeof t&&(t=R(t)),w(t),t}function k(...t){let e=0;for(let r=0;r<t.length;r++){const n=t[r];w(n),e+=n.length}const n=new Uint8Array(e);for(let r=0,i=0;r<t.length;r++){const e=t[r];n.set(e,i),i+=e.length}return n}class L{clone(){return this._cloneInto()}}const T={}.toString;function B(t,e){if(void 0!==e&&"[object Object]"!==T.call(e))throw new Error("Options should be object or undefined");const n=Object.assign(t,e);return n}function O(t){const e=e=>t().update(C(e)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function N(t=32){if(A&&"function"===typeof A.getRandomValues)return A.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}function D(t,e,n,r){if("function"===typeof t.setBigUint64)return t.setBigUint64(e,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),a=Number(n&s),c=r?4:0,u=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+u,a,r)}const U=(t,e,n)=>t&e^~t&n,P=(t,e,n)=>t&e^t&n^e&n;class M extends L{constructor(t,e,n,r){super(),this.blockLen=t,this.outputLen=e,this.padOffset=n,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=x(this.buffer)}update(t){v(this);const{view:e,buffer:n,blockLen:r}=this;t=C(t);const i=t.length;for(let s=0;s<i;){const o=Math.min(r-this.pos,i-s);if(o!==r)n.set(t.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===r&&(this.process(e,0),this.pos=0);else{const e=x(t);for(;r<=i-s;s+=r)this.process(e,s)}}return this.length+=t.length,this.roundClean(),this}digestInto(t){v(this),E(t,this),this.finished=!0;const{buffer:e,view:n,blockLen:r,isLE:i}=this;let{pos:s}=this;e[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>r-s&&(this.process(n,0),s=0);for(let l=s;l<r;l++)e[l]=0;D(n,r-8,BigInt(8*this.length),i),this.process(n,0);const o=x(t),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=a/4,u=this.get();if(c>u.length)throw new Error("_sha2: outputLen bigger than state");for(let l=0;l<c;l++)o.setUint32(4*l,u[l],i)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const n=t.slice(0,e);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:n,length:r,finished:i,destroyed:s,pos:o}=this;return t.length=r,t.pos=o,t.finished=i,t.destroyed=s,r%e&&t.buffer.set(n),t}}const Z=BigInt(2**32-1),F=BigInt(32);function V(t,e=!1){return e?{h:Number(t&Z),l:Number(t>>F&Z)}:{h:0|Number(t>>F&Z),l:0|Number(t&Z)}}function H(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:s,l:o}=V(t[i],e);[n[i],r[i]]=[s,o]}return[n,r]}const $=(t,e)=>BigInt(t>>>0)<<F|BigInt(e>>>0),j=(t,e,n)=>t>>>n,K=(t,e,n)=>t<<32-n|e>>>n,z=(t,e,n)=>t>>>n|e<<32-n,q=(t,e,n)=>t<<32-n|e>>>n,G=(t,e,n)=>t<<64-n|e>>>n-32,W=(t,e,n)=>t>>>n-32|e<<64-n,J=(t,e)=>e,Y=(t,e)=>t,Q=(t,e,n)=>t<<n|e>>>32-n,X=(t,e,n)=>e<<n|t>>>32-n,tt=(t,e,n)=>e<<n-32|t>>>64-n,et=(t,e,n)=>t<<n-32|e>>>64-n;function nt(t,e,n,r){const i=(e>>>0)+(r>>>0);return{h:t+n+(i/2**32|0)|0,l:0|i}}const rt=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),it=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,st=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),ot=(t,e,n,r,i)=>e+n+r+i+(t/2**32|0)|0,at=(t,e,n,r,i)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(i>>>0),ct=(t,e,n,r,i,s)=>e+n+r+i+s+(t/2**32|0)|0,ut={fromBig:V,split:H,toBig:$,shrSH:j,shrSL:K,rotrSH:z,rotrSL:q,rotrBH:G,rotrBL:W,rotr32H:J,rotr32L:Y,rotlSH:Q,rotlSL:X,rotlBH:tt,rotlBL:et,add:nt,add3L:rt,add3H:it,add4L:st,add4H:ot,add5H:ct,add5L:at};var lt=ut;const[ht,dt]=(()=>lt.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map((t=>BigInt(t)))))(),ft=new Uint32Array(80),pt=new Uint32Array(80);class gt extends M{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:t,Al:e,Bh:n,Bl:r,Ch:i,Cl:s,Dh:o,Dl:a,Eh:c,El:u,Fh:l,Fl:h,Gh:d,Gl:f,Hh:p,Hl:g}=this;return[t,e,n,r,i,s,o,a,c,u,l,h,d,f,p,g]}set(t,e,n,r,i,s,o,a,c,u,l,h,d,f,p,g){this.Ah=0|t,this.Al=0|e,this.Bh=0|n,this.Bl=0|r,this.Ch=0|i,this.Cl=0|s,this.Dh=0|o,this.Dl=0|a,this.Eh=0|c,this.El=0|u,this.Fh=0|l,this.Fl=0|h,this.Gh=0|d,this.Gl=0|f,this.Hh=0|p,this.Hl=0|g}process(t,e){for(let w=0;w<16;w++,e+=4)ft[w]=t.getUint32(e),pt[w]=t.getUint32(e+=4);for(let w=16;w<80;w++){const t=0|ft[w-15],e=0|pt[w-15],n=lt.rotrSH(t,e,1)^lt.rotrSH(t,e,8)^lt.shrSH(t,e,7),r=lt.rotrSL(t,e,1)^lt.rotrSL(t,e,8)^lt.shrSL(t,e,7),i=0|ft[w-2],s=0|pt[w-2],o=lt.rotrSH(i,s,19)^lt.rotrBH(i,s,61)^lt.shrSH(i,s,6),a=lt.rotrSL(i,s,19)^lt.rotrBL(i,s,61)^lt.shrSL(i,s,6),c=lt.add4L(r,a,pt[w-7],pt[w-16]),u=lt.add4H(c,n,o,ft[w-7],ft[w-16]);ft[w]=0|u,pt[w]=0|c}let{Ah:n,Al:r,Bh:i,Bl:s,Ch:o,Cl:a,Dh:c,Dl:u,Eh:l,El:h,Fh:d,Fl:f,Gh:p,Gl:g,Hh:y,Hl:b}=this;for(let w=0;w<80;w++){const t=lt.rotrSH(l,h,14)^lt.rotrSH(l,h,18)^lt.rotrBH(l,h,41),e=lt.rotrSL(l,h,14)^lt.rotrSL(l,h,18)^lt.rotrBL(l,h,41),m=l&d^~l&p,v=h&f^~h&g,E=lt.add5L(b,e,v,dt[w],pt[w]),A=lt.add5H(E,y,t,m,ht[w],ft[w]),x=0|E,S=lt.rotrSH(n,r,28)^lt.rotrBH(n,r,34)^lt.rotrBH(n,r,39),_=lt.rotrSL(n,r,28)^lt.rotrBL(n,r,34)^lt.rotrBL(n,r,39),I=n&i^n&o^i&o,R=r&s^r&a^s&a;y=0|p,b=0|g,p=0|d,g=0|f,d=0|l,f=0|h,({h:l,l:h}=lt.add(0|c,0|u,0|A,0|x)),c=0|o,u=0|a,o=0|i,a=0|s,i=0|n,s=0|r;const C=lt.add3L(x,_,R);n=lt.add3H(C,A,S,I),r=0|C}({h:n,l:r}=lt.add(0|this.Ah,0|this.Al,0|n,0|r)),({h:i,l:s}=lt.add(0|this.Bh,0|this.Bl,0|i,0|s)),({h:o,l:a}=lt.add(0|this.Ch,0|this.Cl,0|o,0|a)),({h:c,l:u}=lt.add(0|this.Dh,0|this.Dl,0|c,0|u)),({h:l,l:h}=lt.add(0|this.Eh,0|this.El,0|l,0|h)),({h:d,l:f}=lt.add(0|this.Fh,0|this.Fl,0|d,0|f)),({h:p,l:g}=lt.add(0|this.Gh,0|this.Gl,0|p,0|g)),({h:y,l:b}=lt.add(0|this.Hh,0|this.Hl,0|y,0|b)),this.set(n,r,i,s,o,a,c,u,l,h,d,f,p,g,y,b)}roundClean(){ft.fill(0),pt.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const yt=O((()=>new gt));n(7658);
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
BigInt(0);const bt=BigInt(1),wt=BigInt(2);function mt(t){return t instanceof Uint8Array||null!=t&&"object"===typeof t&&"Uint8Array"===t.constructor.name}function vt(t){if(!mt(t))throw new Error("Uint8Array expected")}const Et=Array.from({length:256},((t,e)=>e.toString(16).padStart(2,"0")));function At(t){vt(t);let e="";for(let n=0;n<t.length;n++)e+=Et[t[n]];return e}function xt(t){if("string"!==typeof t)throw new Error("hex string expected, got "+typeof t);return BigInt(""===t?"0":`0x${t}`)}const St={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function _t(t){return t>=St._0&&t<=St._9?t-St._0:t>=St._A&&t<=St._F?t-(St._A-10):t>=St._a&&t<=St._f?t-(St._a-10):void 0}function It(t){if("string"!==typeof t)throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let i=0,s=0;i<n;i++,s+=2){const e=_t(t.charCodeAt(s)),n=_t(t.charCodeAt(s+1));if(void 0===e||void 0===n){const e=t[s]+t[s+1];throw new Error('hex string expected, got non-hex character "'+e+'" at index '+s)}r[i]=16*e+n}return r}function Rt(t){return xt(At(t))}function Ct(t){return vt(t),xt(At(Uint8Array.from(t).reverse()))}function kt(t,e){return It(t.toString(16).padStart(2*e,"0"))}function Lt(t,e){return kt(t,e).reverse()}function Tt(t,e,n){let r;if("string"===typeof e)try{r=It(e)}catch(s){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${s}`)}else{if(!mt(e))throw new Error(`${t} must be hex string or Uint8Array`);r=Uint8Array.from(e)}const i=r.length;if("number"===typeof n&&i!==n)throw new Error(`${t} expected ${n} bytes, got ${i}`);return r}function Bt(...t){let e=0;for(let r=0;r<t.length;r++){const n=t[r];vt(n),e+=n.length}const n=new Uint8Array(e);for(let r=0,i=0;r<t.length;r++){const e=t[r];n.set(e,i),i+=e.length}return n}const Ot=t=>(wt<<BigInt(t-1))-bt,Nt=t=>new Uint8Array(t),Dt=t=>Uint8Array.from(t);function Ut(t,e,n){if("number"!==typeof t||t<2)throw new Error("hashLen must be a number");if("number"!==typeof e||e<2)throw new Error("qByteLen must be a number");if("function"!==typeof n)throw new Error("hmacFn must be a function");let r=Nt(t),i=Nt(t),s=0;const o=()=>{r.fill(1),i.fill(0),s=0},a=(...t)=>n(i,r,...t),c=(t=Nt())=>{i=a(Dt([0]),t),r=a(),0!==t.length&&(i=a(Dt([1]),t),r=a())},u=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let t=0;const n=[];while(t<e){r=a();const e=r.slice();n.push(e),t+=r.length}return Bt(...n)},l=(t,e)=>{let n;o(),c(t);while(!(n=e(u())))c();return o(),n};return l}const Pt={bigint:t=>"bigint"===typeof t,function:t=>"function"===typeof t,boolean:t=>"boolean"===typeof t,string:t=>"string"===typeof t,stringOrUint8Array:t=>"string"===typeof t||mt(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>"function"===typeof t&&Number.isSafeInteger(t.outputLen)};function Mt(t,e,n={}){const r=(e,n,r)=>{const i=Pt[n];if("function"!==typeof i)throw new Error(`Invalid validator "${n}", expected function`);const s=t[e];if((!r||void 0!==s)&&!i(s,t))throw new Error(`Invalid param ${String(e)}=${s} (${typeof s}), expected ${n}`)};for(const[i,s]of Object.entries(e))r(i,s,!1);for(const[i,s]of Object.entries(n))r(i,s,!0);return t}
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const Zt=BigInt(0),Ft=BigInt(1),Vt=BigInt(2),Ht=BigInt(3),$t=BigInt(4),jt=BigInt(5),Kt=BigInt(8);BigInt(9),BigInt(16);function zt(t,e){const n=t%e;return n>=Zt?n:e+n}function qt(t,e,n){if(n<=Zt||e<Zt)throw new Error("Expected power/modulo > 0");if(n===Ft)return Zt;let r=Ft;while(e>Zt)e&Ft&&(r=r*t%n),t=t*t%n,e>>=Ft;return r}function Gt(t,e,n){let r=t;while(e-- >Zt)r*=r,r%=n;return r}function Wt(t,e){if(t===Zt||e<=Zt)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let n=zt(t,e),r=e,i=Zt,s=Ft,o=Ft,a=Zt;while(n!==Zt){const t=r/n,e=r%n,c=i-o*t,u=s-a*t;r=n,n=e,i=o,s=a,o=c,a=u}const c=r;if(c!==Ft)throw new Error("invert: does not exist");return zt(i,e)}function Jt(t){const e=(t-Ft)/Vt;let n,r,i;for(n=t-Ft,r=0;n%Vt===Zt;n/=Vt,r++);for(i=Vt;i<t&&qt(i,e,t)!==t-Ft;i++);if(1===r){const e=(t+Ft)/$t;return function(t,n){const r=t.pow(n,e);if(!t.eql(t.sqr(r),n))throw new Error("Cannot find square root");return r}}const s=(n+Ft)/Vt;return function(t,o){if(t.pow(o,e)===t.neg(t.ONE))throw new Error("Cannot find square root");let a=r,c=t.pow(t.mul(t.ONE,i),n),u=t.pow(o,s),l=t.pow(o,n);while(!t.eql(l,t.ONE)){if(t.eql(l,t.ZERO))return t.ZERO;let e=1;for(let r=t.sqr(l);e<a;e++){if(t.eql(r,t.ONE))break;r=t.sqr(r)}const n=t.pow(c,Ft<<BigInt(a-e-1));c=t.sqr(n),u=t.mul(u,n),l=t.mul(l,c),a=e}return u}}function Yt(t){if(t%$t===Ht){const e=(t+Ft)/$t;return function(t,n){const r=t.pow(n,e);if(!t.eql(t.sqr(r),n))throw new Error("Cannot find square root");return r}}if(t%Kt===jt){const e=(t-jt)/Kt;return function(t,n){const r=t.mul(n,Vt),i=t.pow(r,e),s=t.mul(n,i),o=t.mul(t.mul(s,Vt),i),a=t.mul(s,t.sub(o,t.ONE));if(!t.eql(t.sqr(a),n))throw new Error("Cannot find square root");return a}}return Jt(t)}const Qt=(t,e)=>(zt(t,e)&Ft)===Ft,Xt=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function te(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=Xt.reduce(((t,e)=>(t[e]="function",t)),e);return Mt(t,n)}function ee(t,e,n){if(n<Zt)throw new Error("Expected power > 0");if(n===Zt)return t.ONE;if(n===Ft)return e;let r=t.ONE,i=e;while(n>Zt)n&Ft&&(r=t.mul(r,i)),i=t.sqr(i),n>>=Ft;return r}function ne(t,e){const n=new Array(e.length),r=e.reduce(((e,r,i)=>t.is0(r)?e:(n[i]=e,t.mul(e,r))),t.ONE),i=t.inv(r);return e.reduceRight(((e,r,i)=>t.is0(r)?e:(n[i]=t.mul(e,n[i]),t.mul(e,r))),i),n}function re(t,e){const n=void 0!==e?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function ie(t,e,n=!1,r={}){if(t<=Zt)throw new Error(`Expected Field ORDER > 0, got ${t}`);const{nBitLength:i,nByteLength:s}=re(t,e);if(s>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=Yt(t),a=Object.freeze({ORDER:t,BITS:i,BYTES:s,MASK:Ot(i),ZERO:Zt,ONE:Ft,create:e=>zt(e,t),isValid:e=>{if("bigint"!==typeof e)throw new Error("Invalid field element: expected bigint, got "+typeof e);return Zt<=e&&e<t},is0:t=>t===Zt,isOdd:t=>(t&Ft)===Ft,neg:e=>zt(-e,t),eql:(t,e)=>t===e,sqr:e=>zt(e*e,t),add:(e,n)=>zt(e+n,t),sub:(e,n)=>zt(e-n,t),mul:(e,n)=>zt(e*n,t),pow:(t,e)=>ee(a,t,e),div:(e,n)=>zt(e*Wt(n,t),t),sqrN:t=>t*t,addN:(t,e)=>t+e,subN:(t,e)=>t-e,mulN:(t,e)=>t*e,inv:e=>Wt(e,t),sqrt:r.sqrt||(t=>o(a,t)),invertBatch:t=>ne(a,t),cmov:(t,e,n)=>n?e:t,toBytes:t=>n?Lt(t,s):kt(t,s),fromBytes:t=>{if(t.length!==s)throw new Error(`Fp.fromBytes: expected ${s}, got ${t.length}`);return n?Ct(t):Rt(t)}});return Object.freeze(a)}function se(t,e){if(!t.isOdd)throw new Error("Field doesn't have isOdd");const n=t.sqrt(e);return t.isOdd(n)?t.neg(n):n}function oe(t){if("bigint"!==typeof t)throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function ae(t){const e=oe(t);return e+Math.ceil(e/2)}function ce(t,e,n=!1){const r=t.length,i=oe(e),s=ae(e);if(r<16||r<s||r>1024)throw new Error(`expected ${s}-1024 bytes of input, got ${r}`);const o=n?Rt(t):Ct(t),a=zt(o,e-Ft)+Ft;return n?Lt(a,i):kt(a,i)}
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const ue=BigInt(0),le=BigInt(1);function he(t,e){const n=(t,e)=>{const n=e.negate();return t?n:e},r=t=>{const n=Math.ceil(e/t)+1,r=2**(t-1);return{windows:n,windowSize:r}};return{constTimeNegate:n,unsafeLadder(e,n){let r=t.ZERO,i=e;while(n>ue)n&le&&(r=r.add(i)),i=i.double(),n>>=le;return r},precomputeWindow(t,e){const{windows:n,windowSize:i}=r(e),s=[];let o=t,a=o;for(let r=0;r<n;r++){a=o,s.push(a);for(let t=1;t<i;t++)a=a.add(o),s.push(a);o=a.double()}return s},wNAF(e,i,s){const{windows:o,windowSize:a}=r(e);let c=t.ZERO,u=t.BASE;const l=BigInt(2**e-1),h=2**e,d=BigInt(e);for(let t=0;t<o;t++){const e=t*a;let r=Number(s&l);s>>=d,r>a&&(r-=h,s+=le);const o=e,f=e+Math.abs(r)-1,p=t%2!==0,g=r<0;0===r?u=u.add(n(p,i[o])):c=c.add(n(g,i[f]))}return{p:c,f:u}},wNAFCached(t,e,n,r){const i=t._WINDOW_SIZE||1;let s=e.get(t);return s||(s=this.precomputeWindow(t,i),1!==i&&e.set(t,r(s))),this.wNAF(i,s,n)}}}function de(t){return te(t.Fp),Mt(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...re(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const fe=BigInt(0),pe=BigInt(1),ge=BigInt(2),ye=BigInt(8),be={zip215:!0};function we(t){const e=de(t);return Mt(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function me(t){const e=we(t),{Fp:n,n:r,prehash:i,hash:s,randomBytes:o,nByteLength:a,h:c}=e,u=ge<<BigInt(8*a)-pe,l=n.create,h=e.uvRatio||((t,e)=>{try{return{isValid:!0,value:n.sqrt(t*n.inv(e))}}catch(r){return{isValid:!1,value:fe}}}),d=e.adjustScalarBytes||(t=>t),f=e.domain||((t,e,n)=>{if(e.length||n)throw new Error("Contexts/pre-hash are not supported");return t}),p=t=>"bigint"===typeof t&&fe<t,g=(t,e)=>p(t)&&p(e)&&t<e,y=t=>t===fe||g(t,u);function b(t,e){if(g(t,e))return t;throw new Error(`Expected valid scalar < ${e}, got ${typeof t} ${t}`)}function w(t){return t===fe?t:b(t,r)}const m=new Map;function v(t){if(!(t instanceof E))throw new Error("ExtendedPoint expected")}class E{constructor(t,e,n,r){if(this.ex=t,this.ey=e,this.ez=n,this.et=r,!y(t))throw new Error("x required");if(!y(e))throw new Error("y required");if(!y(n))throw new Error("z required");if(!y(r))throw new Error("t required")}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(t){if(t instanceof E)throw new Error("extended point not allowed");const{x:e,y:n}=t||{};if(!y(e)||!y(n))throw new Error("invalid affine point");return new E(e,n,pe,l(e*n))}static normalizeZ(t){const e=n.invertBatch(t.map((t=>t.ez)));return t.map(((t,n)=>t.toAffine(e[n]))).map(E.fromAffine)}_setWindowSize(t){this._WINDOW_SIZE=t,m.delete(this)}assertValidity(){const{a:t,d:n}=e;if(this.is0())throw new Error("bad point: ZERO");const{ex:r,ey:i,ez:s,et:o}=this,a=l(r*r),c=l(i*i),u=l(s*s),h=l(u*u),d=l(a*t),f=l(u*l(d+c)),p=l(h+l(n*l(a*c)));if(f!==p)throw new Error("bad point: equation left != right (1)");const g=l(r*i),y=l(s*o);if(g!==y)throw new Error("bad point: equation left != right (2)")}equals(t){v(t);const{ex:e,ey:n,ez:r}=this,{ex:i,ey:s,ez:o}=t,a=l(e*o),c=l(i*r),u=l(n*o),h=l(s*r);return a===c&&u===h}is0(){return this.equals(E.ZERO)}negate(){return new E(l(-this.ex),this.ey,this.ez,l(-this.et))}double(){const{a:t}=e,{ex:n,ey:r,ez:i}=this,s=l(n*n),o=l(r*r),a=l(ge*l(i*i)),c=l(t*s),u=n+r,h=l(l(u*u)-s-o),d=c+o,f=d-a,p=c-o,g=l(h*f),y=l(d*p),b=l(h*p),w=l(f*d);return new E(g,y,w,b)}add(t){v(t);const{a:n,d:r}=e,{ex:i,ey:s,ez:o,et:a}=this,{ex:c,ey:u,ez:h,et:d}=t;if(n===BigInt(-1)){const t=l((s-i)*(u+c)),e=l((s+i)*(u-c)),n=l(e-t);if(n===fe)return this.double();const r=l(o*ge*d),f=l(a*ge*h),p=f+r,g=e+t,y=f-r,b=l(p*n),w=l(g*y),m=l(p*y),v=l(n*g);return new E(b,w,v,m)}const f=l(i*c),p=l(s*u),g=l(a*r*d),y=l(o*h),b=l((i+s)*(c+u)-f-p),w=y-g,m=y+g,A=l(p-n*f),x=l(b*w),S=l(m*A),_=l(b*A),I=l(w*m);return new E(x,S,I,_)}subtract(t){return this.add(t.negate())}wNAF(t){return S.wNAFCached(this,m,t,E.normalizeZ)}multiply(t){const{p:e,f:n}=this.wNAF(b(t,r));return E.normalizeZ([e,n])[0]}multiplyUnsafe(t){let e=w(t);return e===fe?x:this.equals(x)||e===pe?this:this.equals(A)?this.wNAF(e).p:S.unsafeLadder(this,e)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return S.unsafeLadder(this,r).is0()}toAffine(t){const{ex:e,ey:r,ez:i}=this,s=this.is0();null==t&&(t=s?ye:n.inv(i));const o=l(e*t),a=l(r*t),c=l(i*t);if(s)return{x:fe,y:pe};if(c!==pe)throw new Error("invZ was invalid");return{x:o,y:a}}clearCofactor(){const{h:t}=e;return t===pe?this:this.multiplyUnsafe(t)}static fromHex(t,r=!1){const{d:i,a:s}=e,o=n.BYTES;t=Tt("pointHex",t,o);const a=t.slice(),c=t[o-1];a[o-1]=-129&c;const d=Ct(a);d===fe||b(d,r?u:n.ORDER);const f=l(d*d),p=l(f-pe),g=l(i*f-s);let{isValid:y,value:w}=h(p,g);if(!y)throw new Error("Point.fromHex: invalid y coordinate");const m=(w&pe)===pe,v=0!==(128&c);if(!r&&w===fe&&v)throw new Error("Point.fromHex: x=0 and x_0=1");return v!==m&&(w=l(-w)),E.fromAffine({x:w,y:d})}static fromPrivateKey(t){return R(t).point}toRawBytes(){const{x:t,y:e}=this.toAffine(),r=Lt(e,n.BYTES);return r[r.length-1]|=t&pe?128:0,r}toHex(){return At(this.toRawBytes())}}E.BASE=new E(e.Gx,e.Gy,pe,l(e.Gx*e.Gy)),E.ZERO=new E(fe,pe,pe,fe);const{BASE:A,ZERO:x}=E,S=he(E,8*a);function _(t){return zt(t,r)}function I(t){return _(Ct(t))}function R(t){const e=a;t=Tt("private key",t,e);const n=Tt("hashed private key",s(t),2*e),r=d(n.slice(0,e)),i=n.slice(e,2*e),o=I(r),c=A.multiply(o),u=c.toRawBytes();return{head:r,prefix:i,scalar:o,point:c,pointBytes:u}}function C(t){return R(t).pointBytes}function k(t=new Uint8Array,...e){const n=Bt(...e);return I(s(f(n,Tt("context",t),!!i)))}function L(t,e,r={}){t=Tt("message",t),i&&(t=i(t));const{prefix:s,scalar:o,pointBytes:c}=R(e),u=k(r.context,s,t),l=A.multiply(u).toRawBytes(),h=k(r.context,l,c,t),d=_(u+h*o);w(d);const f=Bt(l,Lt(d,n.BYTES));return Tt("result",f,2*a)}const T=be;function B(t,e,r,s=T){const{context:o,zip215:a}=s,c=n.BYTES;t=Tt("signature",t,2*c),e=Tt("message",e),i&&(e=i(e));const u=Ct(t.slice(c,2*c));let l,h,d;try{l=E.fromHex(r,a),h=E.fromHex(t.slice(0,c),a),d=A.multiplyUnsafe(u)}catch(g){return!1}if(!a&&l.isSmallOrder())return!1;const f=k(o,h.toRawBytes(),l.toRawBytes(),e),p=h.add(l.multiplyUnsafe(f));return p.subtract(d).clearCofactor().equals(E.ZERO)}A._setWindowSize(8);const O={getExtendedPublicKey:R,randomPrivateKey:()=>o(n.BYTES),precompute(t=8,e=E.BASE){return e._setWindowSize(t),e.multiply(BigInt(3)),e}};return{CURVE:e,getPublicKey:C,sign:L,verify:B,ExtendedPoint:E,utils:O}}
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const ve=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),Ee=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),Ae=(BigInt(0),BigInt(1)),xe=BigInt(2),Se=BigInt(5),_e=BigInt(10),Ie=BigInt(20),Re=BigInt(40),Ce=BigInt(80);function ke(t){const e=ve,n=t*t%e,r=n*t%e,i=Gt(r,xe,e)*r%e,s=Gt(i,Ae,e)*t%e,o=Gt(s,Se,e)*s%e,a=Gt(o,_e,e)*o%e,c=Gt(a,Ie,e)*a%e,u=Gt(c,Re,e)*c%e,l=Gt(u,Ce,e)*u%e,h=Gt(l,Ce,e)*u%e,d=Gt(h,_e,e)*o%e,f=Gt(d,xe,e)*t%e;return{pow_p_5_8:f,b2:r}}function Le(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function Te(t,e){const n=ve,r=zt(e*e*e,n),i=zt(r*r*e,n),s=ke(t*i).pow_p_5_8;let o=zt(t*r*s,n);const a=zt(e*o*o,n),c=o,u=zt(o*Ee,n),l=a===t,h=a===zt(-t,n),d=a===zt(-t*Ee,n);return l&&(o=c),(h||d)&&(o=u),Qt(o,n)&&(o=zt(-o,n)),{isValid:l||h,value:o}}const Be=ie(ve,void 0,!0),Oe={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:Be,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:yt,randomBytes:N,adjustScalarBytes:Le,uvRatio:Te},Ne=me(Oe);function De(t,e,n){if(e.length>255)throw new Error("Context is too big");return k(R("SigEd25519 no Ed25519 collisions"),new Uint8Array([n?1:0,e.length]),e,t)}const Ue=(Be.ORDER+BigInt(3))/BigInt(8);Be.pow(xe,Ue),Be.sqrt(Be.neg(Be.ONE)),Be.ORDER,BigInt(5),BigInt(8),BigInt(486662);se(Be,Be.neg(BigInt(486664)));BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952"),BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");const Pe=32,Me=64,Ze=32;function Fe(){const t=Ne.utils.randomPrivateKey(),e=Ne.getPublicKey(t),n=je(t,e);return{privateKey:n,publicKey:e}}function Ve(t){if(t.length!==Ze)throw new TypeError('"seed" must be 32 bytes in length.');if(!(t instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, or Uint8Array.');const e=t,n=Ne.getPublicKey(e),r=je(e,n);return{privateKey:r,publicKey:n}}function He(t,e){const n=t.subarray(0,Ze);return Ne.sign(e instanceof Uint8Array?e:e.subarray(),n)}function $e(t,e,n){return Ne.verify(e,n instanceof Uint8Array?n:n.subarray(),t)}function je(t,e){const n=new Uint8Array(Me);for(let r=0;r<Ze;r++)n[r]=t[r],n[Ze+r]=e[r];return n}var Ke=n(5864),ze={get(t=globalThis){const e=t.crypto;if(null==e||null==e.subtle)throw Object.assign(new Error("Missing Web Crypto API. The most likely cause of this error is that this page is being accessed from an insecure context (i.e. not HTTPS). For more information and possible resolutions see https://github.com/libp2p/js-libp2p/blob/main/packages/crypto/README.md#web-crypto-api"),{code:"ERR_MISSING_WEB_CRYPTO"});return e}};const qe={alg:"A128GCM",ext:!0,k:"scm9jmO_4BJAgdwWGVulLg",key_ops:["encrypt","decrypt"],kty:"oct"};function Ge(t){const e=t?.algorithm??"AES-GCM";let n=t?.keyLength??16;const r=t?.nonceLength??12,i=t?.digest??"SHA-256",s=t?.saltLength??16,o=t?.iterations??32767,a=ze.get();async function c(t,c){const u=a.getRandomValues(new Uint8Array(s)),l=a.getRandomValues(new Uint8Array(r)),h={name:e,iv:l};let d;if("string"===typeof c&&(c=(0,p.m)(c)),0===c.length){d=await a.subtle.importKey("jwk",qe,{name:"AES-GCM"},!0,["encrypt"]);try{const t={name:"PBKDF2",salt:u,iterations:o,hash:{name:i}},r=await a.subtle.importKey("raw",c,{name:"PBKDF2"},!1,["deriveKey"]);d=await a.subtle.deriveKey(t,r,{name:e,length:n},!0,["encrypt"])}catch{d=await a.subtle.importKey("jwk",qe,{name:"AES-GCM"},!0,["encrypt"])}}else{const t={name:"PBKDF2",salt:u,iterations:o,hash:{name:i}},r=await a.subtle.importKey("raw",c,{name:"PBKDF2"},!1,["deriveKey"]);d=await a.subtle.deriveKey(t,r,{name:e,length:n},!0,["encrypt"])}const g=await a.subtle.encrypt(h,d,t);return(0,f.z)([u,h.iv,new Uint8Array(g)])}async function u(t,c){const u=t.subarray(0,s),l=t.subarray(s,s+r),h=t.subarray(s+r),d={name:e,iv:l};let f;if("string"===typeof c&&(c=(0,p.m)(c)),0===c.length)try{const t={name:"PBKDF2",salt:u,iterations:o,hash:{name:i}},r=await a.subtle.importKey("raw",c,{name:"PBKDF2"},!1,["deriveKey"]);f=await a.subtle.deriveKey(t,r,{name:e,length:n},!0,["decrypt"])}catch{f=await a.subtle.importKey("jwk",qe,{name:"AES-GCM"},!0,["decrypt"])}else{const t={name:"PBKDF2",salt:u,iterations:o,hash:{name:i}},r=await a.subtle.importKey("raw",c,{name:"PBKDF2"},!1,["deriveKey"]);f=await a.subtle.deriveKey(t,r,{name:e,length:n},!0,["decrypt"])}const g=await a.subtle.decrypt(d,f,h);return new Uint8Array(g)}n*=8;const l={encrypt:c,decrypt:u};return l}async function We(t,e){const n=Ge(),r=await n.encrypt(t,e);return Ke.base64.encode(r)}var Je,Ye,Qe,Xe,tn=n(5065);(function(t){t["RSA"]="RSA",t["Ed25519"]="Ed25519",t["Secp256k1"]="Secp256k1"})(Je||(Je={})),function(t){t[t["RSA"]=0]="RSA",t[t["Ed25519"]=1]="Ed25519",t[t["Secp256k1"]=2]="Secp256k1"}(Ye||(Ye={})),function(t){t.codec=()=>(0,tn.Ji)(Ye)}(Je||(Je={})),function(t){let e;t.codec=()=>(null==e&&(e=(0,tn.yw)(((t,e,n={})=>{!1!==n.lengthDelimited&&e.fork(),null!=t.Type&&(e.uint32(8),Je.codec().encode(t.Type,e)),null!=t.Data&&(e.uint32(18),e.bytes(t.Data)),!1!==n.lengthDelimited&&e.ldelim()}),((t,e)=>{const n={},r=null==e?t.len:t.pos+e;while(t.pos<r){const e=t.uint32();switch(e>>>3){case 1:n.Type=Je.codec().decode(t);break;case 2:n.Data=t.bytes();break;default:t.skipType(7&e);break}}return n}))),e),t.encode=e=>(0,tn.LE)(e,t.codec()),t.decode=e=>(0,tn.C6)(e,t.codec())}(Qe||(Qe={})),function(t){let e;t.codec=()=>(null==e&&(e=(0,tn.yw)(((t,e,n={})=>{!1!==n.lengthDelimited&&e.fork(),null!=t.Type&&(e.uint32(8),Je.codec().encode(t.Type,e)),null!=t.Data&&(e.uint32(18),e.bytes(t.Data)),!1!==n.lengthDelimited&&e.ldelim()}),((t,e)=>{const n={},r=null==e?t.len:t.pos+e;while(t.pos<r){const e=t.uint32();switch(e>>>3){case 1:n.Type=Je.codec().decode(t);break;case 2:n.Data=t.bytes();break;default:t.skipType(7&e);break}}return n}))),e),t.encode=e=>(0,tn.LE)(e,t.codec()),t.decode=e=>(0,tn.C6)(e,t.codec())}(Xe||(Xe={}));class en{constructor(t){(0,c.Z)(this,"_key",void 0),this._key=cn(t,Pe)}verify(t,e){return $e(this._key,e,t)}marshal(){return this._key}get bytes(){return Qe.encode({Type:Je.Ed25519,Data:this.marshal()}).subarray()}equals(t){return(0,d.f)(this.bytes,t.bytes)}hash(){const t=h.sha256.digest(this.bytes);return g(t)?t.then((({bytes:t})=>t)):t.bytes}}class nn{constructor(t,e){(0,c.Z)(this,"_key",void 0),(0,c.Z)(this,"_publicKey",void 0),this._key=cn(t,Me),this._publicKey=cn(e,Pe)}sign(t){return He(this._key,t)}get public(){return new en(this._publicKey)}marshal(){return this._key}get bytes(){return Xe.encode({Type:Je.Ed25519,Data:this.marshal()}).subarray()}equals(t){return(0,d.f)(this.bytes,t.bytes)}async hash(){const t=h.sha256.digest(this.bytes);let e;return g(t)?({bytes:e}=await t):e=t.bytes,e}async id(){const t=l.identity.digest(this.public.bytes);return u.base58btc.encode(t.bytes).substring(1)}async export(t,e="libp2p-key"){if("libp2p-key"===e)return We(this.bytes,t);throw new a.sv(`export format '${e}' is not supported`,"ERR_INVALID_EXPORT_FORMAT")}}function rn(t){if(t.length>Me){t=cn(t,Me+Pe);const e=t.subarray(0,Me),n=t.subarray(Me,t.length);return new nn(e,n)}t=cn(t,Me);const e=t.subarray(0,Me),n=t.subarray(Pe);return new nn(e,n)}function sn(t){return t=cn(t,Pe),new en(t)}async function on(){const{privateKey:t,publicKey:e}=Fe();return new nn(t,e)}async function an(t){const{privateKey:e,publicKey:n}=Ve(t);return new nn(e,n)}function cn(t,e){if(t=Uint8Array.from(t??[]),t.length!==e)throw new a.sv(`Key must be a Uint8Array of length ${e}, got ${t.length}`,"ERR_INVALID_KEY_TYPE");return t}var un=n(7010);async function ln(t){const e=await ze.get().subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign","verify"]),n=await pn(e);return{privateKey:n[0],publicKey:n[1]}}async function hn(t){const e=await ze.get().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["sign"]),n=[e,await gn(t)],r=await pn({privateKey:n[0],publicKey:n[1]});return{privateKey:r[0],publicKey:r[1]}}async function dn(t,e){const n=await ze.get().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["sign"]),r=await ze.get().subtle.sign({name:"RSASSA-PKCS1-v1_5"},n,e instanceof Uint8Array?e:e.subarray());return new Uint8Array(r,0,r.byteLength)}async function fn(t,e,n){const r=await ze.get().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["verify"]);return ze.get().subtle.verify({name:"RSASSA-PKCS1-v1_5"},r,e,n instanceof Uint8Array?n:n.subarray())}async function pn(t){if(null==t.privateKey||null==t.publicKey)throw new a.sv("Private and public key are required","ERR_INVALID_PARAMETERS");return Promise.all([ze.get().subtle.exportKey("jwk",t.privateKey),ze.get().subtle.exportKey("jwk",t.publicKey)])}async function gn(t){return ze.get().subtle.importKey("jwk",{kty:t.kty,n:t.n,e:t.e},{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["verify"])}function yn(t){if("RSA"!==t.kty)throw new a.sv("invalid key type","ERR_INVALID_KEY_TYPE");if(null==t.n)throw new a.sv("invalid key modulus","ERR_INVALID_KEY_MODULUS");const e=(0,p.m)(t.n,"base64url");return 8*e.length}class bn extends L{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,m(t);const n=C(e);if(this.iHash=t.create(),"function"!==typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const r=this.blockLen,i=new Uint8Array(r);i.set(n.length>r?t.create().update(n).digest():n);for(let s=0;s<i.length;s++)i[s]^=54;this.iHash.update(i),this.oHash=t.create();for(let s=0;s<i.length;s++)i[s]^=106;this.oHash.update(i),i.fill(0)}update(t){return v(this),this.iHash.update(t),this}digestInto(t){v(this),w(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:n,finished:r,destroyed:i,blockLen:s,outputLen:o}=this;return t.finished=r,t.destroyed=i,t.blockLen=s,t.outputLen=o,t.oHash=e._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const wn=(t,e,n)=>new bn(t,e).update(n).digest();function mn(t,e,n,r){m(t);const i=B({dkLen:32,asyncTick:10},r),{c:s,dkLen:o,asyncTick:a}=i;if(y(s),y(o),y(a),s<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const c=C(e),u=C(n),l=new Uint8Array(o),h=wn.create(t,c),d=h._cloneInto().update(u);return{c:s,dkLen:o,asyncTick:a,DK:l,PRF:h,PRFSalt:d}}function vn(t,e,n,r,i){return t.destroy(),e.destroy(),r&&r.destroy(),i.fill(0),n}async function En(t,e,n,r){const{c:i,dkLen:s,asyncTick:o,DK:a,PRF:c,PRFSalt:u}=mn(t,e,n,r);let l;const h=new Uint8Array(4),d=x(h),f=new Uint8Array(c.outputLen);for(let p=1,g=0;g<s;p++,g+=c.outputLen){const t=a.subarray(g,g+c.outputLen);d.setInt32(0,p,!1),(l=u._cloneInto(l)).update(h).digestInto(f),t.set(f.subarray(0,t.length)),await I(i-1,o,(()=>{c._cloneInto(l).update(f).digestInto(f);for(let e=0;e<t.length;e++)t[e]^=f[e]}))}return vn(c,u,a,l,f)}wn.create=(t,e)=>new bn(t,e);var An=n(5698);function xn(t,e){let n=0;if(1===t.length)return t[0];for(let r=t.length-1;r>=0;r--)n+=t[t.length-1-r]*Math.pow(2,e*r);return n}function Sn(t,e,n=-1){const r=n;let i=t,s=0,o=Math.pow(2,e);for(let a=1;a<8;a++){if(t<o){let t;if(r<0)t=new ArrayBuffer(a),s=a;else{if(r<a)return new ArrayBuffer(0);t=new ArrayBuffer(r),s=r}const n=new Uint8Array(t);for(let r=a-1;r>=0;r--){const t=Math.pow(2,r*e);n[s-r-1]=Math.floor(i/t),i-=n[s-r-1]*t}return t}o*=Math.pow(2,e)}return new ArrayBuffer(0)}function _n(...t){let e=0,n=0;for(const s of t)e+=s.length;const r=new ArrayBuffer(e),i=new Uint8Array(r);for(const s of t)i.set(s,n),n+=s.length;return i}function In(){const t=new Uint8Array(this.valueHex);if(this.valueHex.byteLength>=2){const e=255===t[0]&&128&t[1],n=0===t[0]&&0===(128&t[1]);(e||n)&&this.warnings.push("Needlessly long format")}const e=new ArrayBuffer(this.valueHex.byteLength),n=new Uint8Array(e);for(let a=0;a<this.valueHex.byteLength;a++)n[a]=0;n[0]=128&t[0];const r=xn(n,8),i=new ArrayBuffer(this.valueHex.byteLength),s=new Uint8Array(i);for(let a=0;a<this.valueHex.byteLength;a++)s[a]=t[a];s[0]&=127;const o=xn(s,8);return o-r}function Rn(t){const e=t<0?-1*t:t;let n=128;for(let r=1;r<8;r++){if(e<=n){if(t<0){const t=n-e,i=Sn(t,8,r),s=new Uint8Array(i);return s[0]|=128,i}let i=Sn(e,8,r),s=new Uint8Array(i);if(128&s[0]){const t=i.slice(0),e=new Uint8Array(t);i=new ArrayBuffer(i.byteLength+1),s=new Uint8Array(i);for(let n=0;n<t.byteLength;n++)s[n+1]=e[n];s[0]=0}return i}n*=Math.pow(2,8)}return new ArrayBuffer(0)}function Cn(t,e){if(t.byteLength!==e.byteLength)return!1;const n=new Uint8Array(t),r=new Uint8Array(e);for(let i=0;i<n.length;i++)if(n[i]!==r[i])return!1;return!0}function kn(t,e){const n=t.toString(10);if(e<n.length)return"";const r=e-n.length,i=new Array(r);for(let o=0;o<r;o++)i[o]="0";const s=i.join("");return s.concat(n)}Math.log(2);
/*!
 * Copyright (c) 2014, GMO GlobalSign
 * Copyright (c) 2015-2022, Peculiar Ventures
 * All rights reserved.
 * 
 * Author 2014-2019, Yury Strozhevsky
 * 
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 * 
 * * Redistributions of source code must retain the above copyright notice, this
 *   list of conditions and the following disclaimer.
 * 
 * * Redistributions in binary form must reproduce the above copyright notice, this
 *   list of conditions and the following disclaimer in the documentation and/or
 *   other materials provided with the distribution.
 * 
 * * Neither the name of the copyright holder nor the names of its
 *   contributors may be used to endorse or promote products derived from
 *   this software without specific prior written permission.
 * 
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR
 * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
 * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 * 
 */
function Ln(){if("undefined"===typeof BigInt)throw new Error("BigInt is not defined. Your environment doesn't implement BigInt.")}function Tn(t){let e=0,n=0;for(let i=0;i<t.length;i++){const n=t[i];e+=n.byteLength}const r=new Uint8Array(e);for(let i=0;i<t.length;i++){const e=t[i];r.set(new Uint8Array(e),n),n+=e.byteLength}return r.buffer}function Bn(t,e,n,r){return e instanceof Uint8Array?e.byteLength?n<0?(t.error="Wrong parameter: inputOffset less than zero",!1):r<0?(t.error="Wrong parameter: inputLength less than zero",!1):!(e.byteLength-n-r<0)||(t.error="End of input reached before message was fully decoded (inconsistent offset and length values)",!1):(t.error="Wrong parameter: inputBuffer has zero length",!1):(t.error="Wrong parameter: inputBuffer must be 'Uint8Array'",!1)}class On{constructor(){this.items=[]}write(t){this.items.push(t)}final(){return Tn(this.items)}}const Nn=[new Uint8Array([1])],Dn="0123456789",Un="",Pn=new ArrayBuffer(0),Mn=new Uint8Array(0),Zn="EndOfContent",Fn="OCTET STRING",Vn="BIT STRING";function Hn(t){var e;return e=class extends t{constructor(...t){var e;super(...t);const n=t[0]||{};this.isHexOnly=null!==(e=n.isHexOnly)&&void 0!==e&&e,this.valueHexView=n.valueHex?An.vJ.toUint8Array(n.valueHex):Mn}get valueHex(){return this.valueHexView.slice().buffer}set valueHex(t){this.valueHexView=new Uint8Array(t)}fromBER(t,e,n){const r=t instanceof ArrayBuffer?new Uint8Array(t):t;if(!Bn(this,r,e,n))return-1;const i=e+n;return this.valueHexView=r.subarray(e,i),this.valueHexView.length?(this.blockLength=n,i):(this.warnings.push("Zero buffer length"),e)}toBER(t=!1){return this.isHexOnly?t?new ArrayBuffer(this.valueHexView.byteLength):this.valueHexView.byteLength===this.valueHexView.buffer.byteLength?this.valueHexView.buffer:this.valueHexView.slice().buffer:(this.error="Flag 'isHexOnly' is not set, abort",Pn)}toJSON(){return{...super.toJSON(),isHexOnly:this.isHexOnly,valueHex:An.ep.ToHex(this.valueHexView)}}},e.NAME="hexBlock",e}class $n{constructor({blockLength:t=0,error:e=Un,warnings:n=[],valueBeforeDecode:r=Mn}={}){this.blockLength=t,this.error=e,this.warnings=n,this.valueBeforeDecodeView=An.vJ.toUint8Array(r)}static blockName(){return this.NAME}get valueBeforeDecode(){return this.valueBeforeDecodeView.slice().buffer}set valueBeforeDecode(t){this.valueBeforeDecodeView=new Uint8Array(t)}toJSON(){return{blockName:this.constructor.NAME,blockLength:this.blockLength,error:this.error,warnings:this.warnings,valueBeforeDecode:An.ep.ToHex(this.valueBeforeDecodeView)}}}$n.NAME="baseBlock";class jn extends $n{fromBER(t,e,n){throw TypeError("User need to make a specific function in a class which extends 'ValueBlock'")}toBER(t,e){throw TypeError("User need to make a specific function in a class which extends 'ValueBlock'")}}jn.NAME="valueBlock";class Kn extends(Hn($n)){constructor({idBlock:t={}}={}){var e,n,r,i;super(),t?(this.isHexOnly=null!==(e=t.isHexOnly)&&void 0!==e&&e,this.valueHexView=t.valueHex?An.vJ.toUint8Array(t.valueHex):Mn,this.tagClass=null!==(n=t.tagClass)&&void 0!==n?n:-1,this.tagNumber=null!==(r=t.tagNumber)&&void 0!==r?r:-1,this.isConstructed=null!==(i=t.isConstructed)&&void 0!==i&&i):(this.tagClass=-1,this.tagNumber=-1,this.isConstructed=!1)}toBER(t=!1){let e=0;switch(this.tagClass){case 1:e|=0;break;case 2:e|=64;break;case 3:e|=128;break;case 4:e|=192;break;default:return this.error="Unknown tag class",Pn}if(this.isConstructed&&(e|=32),this.tagNumber<31&&!this.isHexOnly){const n=new Uint8Array(1);if(!t){let t=this.tagNumber;t&=31,e|=t,n[0]=e}return n.buffer}if(!this.isHexOnly){const n=Sn(this.tagNumber,7),r=new Uint8Array(n),i=n.byteLength,s=new Uint8Array(i+1);if(s[0]=31|e,!t){for(let t=0;t<i-1;t++)s[t+1]=128|r[t];s[i]=r[i-1]}return s.buffer}const n=new Uint8Array(this.valueHexView.byteLength+1);if(n[0]=31|e,!t){const t=this.valueHexView;for(let e=0;e<t.length-1;e++)n[e+1]=128|t[e];n[this.valueHexView.byteLength]=t[t.length-1]}return n.buffer}fromBER(t,e,n){const r=An.vJ.toUint8Array(t);if(!Bn(this,r,e,n))return-1;const i=r.subarray(e,e+n);if(0===i.length)return this.error="Zero buffer length",-1;const s=192&i[0];switch(s){case 0:this.tagClass=1;break;case 64:this.tagClass=2;break;case 128:this.tagClass=3;break;case 192:this.tagClass=4;break;default:return this.error="Unknown tag class",-1}this.isConstructed=32===(32&i[0]),this.isHexOnly=!1;const o=31&i[0];if(31!==o)this.tagNumber=o,this.blockLength=1;else{let t=1,e=this.valueHexView=new Uint8Array(255),n=255;while(128&i[t]){if(e[t-1]=127&i[t],t++,t>=i.length)return this.error="End of input reached before message was fully decoded",-1;if(t===n){n+=255;const t=new Uint8Array(n);for(let n=0;n<e.length;n++)t[n]=e[n];e=this.valueHexView=new Uint8Array(n)}}this.blockLength=t+1,e[t-1]=127&i[t];const r=new Uint8Array(t);for(let i=0;i<t;i++)r[i]=e[i];e=this.valueHexView=new Uint8Array(t),e.set(r),this.blockLength<=9?this.tagNumber=xn(e,7):(this.isHexOnly=!0,this.warnings.push("Tag too long, represented as hex-coded"))}if(1===this.tagClass&&this.isConstructed)switch(this.tagNumber){case 1:case 2:case 5:case 6:case 9:case 13:case 14:case 23:case 24:case 31:case 32:case 33:case 34:return this.error="Constructed encoding used for primitive type",-1}return e+this.blockLength}toJSON(){return{...super.toJSON(),tagClass:this.tagClass,tagNumber:this.tagNumber,isConstructed:this.isConstructed}}}Kn.NAME="identificationBlock";class zn extends $n{constructor({lenBlock:t={}}={}){var e,n,r;super(),this.isIndefiniteForm=null!==(e=t.isIndefiniteForm)&&void 0!==e&&e,this.longFormUsed=null!==(n=t.longFormUsed)&&void 0!==n&&n,this.length=null!==(r=t.length)&&void 0!==r?r:0}fromBER(t,e,n){const r=An.vJ.toUint8Array(t);if(!Bn(this,r,e,n))return-1;const i=r.subarray(e,e+n);if(0===i.length)return this.error="Zero buffer length",-1;if(255===i[0])return this.error="Length block 0xFF is reserved by standard",-1;if(this.isIndefiniteForm=128===i[0],this.isIndefiniteForm)return this.blockLength=1,e+this.blockLength;if(this.longFormUsed=!!(128&i[0]),!1===this.longFormUsed)return this.length=i[0],this.blockLength=1,e+this.blockLength;const s=127&i[0];if(s>8)return this.error="Too big integer",-1;if(s+1>i.length)return this.error="End of input reached before message was fully decoded",-1;const o=e+1,a=r.subarray(o,o+s);return 0===a[s-1]&&this.warnings.push("Needlessly long encoded length"),this.length=xn(a,8),this.longFormUsed&&this.length<=127&&this.warnings.push("Unnecessary usage of long length form"),this.blockLength=s+1,e+this.blockLength}toBER(t=!1){let e,n;if(this.length>127&&(this.longFormUsed=!0),this.isIndefiniteForm)return e=new ArrayBuffer(1),!1===t&&(n=new Uint8Array(e),n[0]=128),e;if(this.longFormUsed){const r=Sn(this.length,8);if(r.byteLength>127)return this.error="Too big length",Pn;if(e=new ArrayBuffer(r.byteLength+1),t)return e;const i=new Uint8Array(r);n=new Uint8Array(e),n[0]=128|r.byteLength;for(let t=0;t<r.byteLength;t++)n[t+1]=i[t];return e}return e=new ArrayBuffer(1),!1===t&&(n=new Uint8Array(e),n[0]=this.length),e}toJSON(){return{...super.toJSON(),isIndefiniteForm:this.isIndefiniteForm,longFormUsed:this.longFormUsed,length:this.length}}}zn.NAME="lengthBlock";const qn={};class Gn extends $n{constructor({name:t=Un,optional:e=!1,primitiveSchema:n,...r}={},i){super(r),this.name=t,this.optional=e,n&&(this.primitiveSchema=n),this.idBlock=new Kn(r),this.lenBlock=new zn(r),this.valueBlock=i?new i(r):new jn(r)}fromBER(t,e,n){const r=this.valueBlock.fromBER(t,e,this.lenBlock.isIndefiniteForm?n:this.lenBlock.length);return-1===r?(this.error=this.valueBlock.error,r):(this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength),r)}toBER(t,e){const n=e||new On;e||Wn(this);const r=this.idBlock.toBER(t);if(n.write(r),this.lenBlock.isIndefiniteForm)n.write(new Uint8Array([128]).buffer),this.valueBlock.toBER(t,n),n.write(new ArrayBuffer(2));else{const e=this.valueBlock.toBER(t);this.lenBlock.length=e.byteLength;const r=this.lenBlock.toBER(t);n.write(r),n.write(e)}return e?Pn:n.final()}toJSON(){const t={...super.toJSON(),idBlock:this.idBlock.toJSON(),lenBlock:this.lenBlock.toJSON(),valueBlock:this.valueBlock.toJSON(),name:this.name,optional:this.optional};return this.primitiveSchema&&(t.primitiveSchema=this.primitiveSchema.toJSON()),t}toString(t="ascii"){return"ascii"===t?this.onAsciiEncoding():An.ep.ToHex(this.toBER())}onAsciiEncoding(){return`${this.constructor.NAME} : ${An.ep.ToHex(this.valueBlock.valueBeforeDecodeView)}`}isEqual(t){if(this===t)return!0;if(!(t instanceof this.constructor))return!1;const e=this.toBER(),n=t.toBER();return Cn(e,n)}}function Wn(t){if(t instanceof qn.Constructed)for(const e of t.valueBlock.value)Wn(e)&&(t.lenBlock.isIndefiniteForm=!0);return!!t.lenBlock.isIndefiniteForm}Gn.NAME="BaseBlock";class Jn extends Gn{constructor({value:t=Un,...e}={},n){super(e,n),t&&this.fromString(t)}getValue(){return this.valueBlock.value}setValue(t){this.valueBlock.value=t}fromBER(t,e,n){const r=this.valueBlock.fromBER(t,e,this.lenBlock.isIndefiniteForm?n:this.lenBlock.length);return-1===r?(this.error=this.valueBlock.error,r):(this.fromBuffer(this.valueBlock.valueHexView),this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength),r)}onAsciiEncoding(){return`${this.constructor.NAME} : '${this.valueBlock.value}'`}}Jn.NAME="BaseStringBlock";class Yn extends(Hn(jn)){constructor({isHexOnly:t=!0,...e}={}){super(e),this.isHexOnly=t}}var Qn,Xn,tr,er,nr,rr,ir,sr,or,ar,cr,ur,lr,hr,dr,fr,pr,gr,yr,br,wr,mr,vr,Er,Ar,xr,Sr,_r,Ir,Rr,Cr,kr,Lr;Yn.NAME="PrimitiveValueBlock";class Tr extends Gn{constructor(t={}){super(t,Yn),this.idBlock.isConstructed=!1}}function Br(t,e){if(t instanceof e)return t;const n=new e;return n.idBlock=t.idBlock,n.lenBlock=t.lenBlock,n.warnings=t.warnings,n.valueBeforeDecodeView=t.valueBeforeDecodeView,n}function Or(t,e=0,n=t.length){const r=e;let i=new Gn({},jn);const s=new $n;if(!Bn(s,t,e,n))return i.error=s.error,{offset:-1,result:i};const o=t.subarray(e,e+n);if(!o.length)return i.error="Zero buffer length",{offset:-1,result:i};let a=i.idBlock.fromBER(t,e,n);if(i.idBlock.warnings.length&&i.warnings.concat(i.idBlock.warnings),-1===a)return i.error=i.idBlock.error,{offset:-1,result:i};if(e=a,n-=i.idBlock.blockLength,a=i.lenBlock.fromBER(t,e,n),i.lenBlock.warnings.length&&i.warnings.concat(i.lenBlock.warnings),-1===a)return i.error=i.lenBlock.error,{offset:-1,result:i};if(e=a,n-=i.lenBlock.blockLength,!i.idBlock.isConstructed&&i.lenBlock.isIndefiniteForm)return i.error="Indefinite length form used for primitive encoding form",{offset:-1,result:i};let c=Gn;switch(i.idBlock.tagClass){case 1:if(i.idBlock.tagNumber>=37&&!1===i.idBlock.isHexOnly)return i.error="UNIVERSAL 37 and upper tags are reserved by ASN.1 standard",{offset:-1,result:i};switch(i.idBlock.tagNumber){case 0:if(i.idBlock.isConstructed&&i.lenBlock.length>0)return i.error="Type [UNIVERSAL 0] is reserved",{offset:-1,result:i};c=qn.EndOfContent;break;case 1:c=qn.Boolean;break;case 2:c=qn.Integer;break;case 3:c=qn.BitString;break;case 4:c=qn.OctetString;break;case 5:c=qn.Null;break;case 6:c=qn.ObjectIdentifier;break;case 10:c=qn.Enumerated;break;case 12:c=qn.Utf8String;break;case 13:c=qn.RelativeObjectIdentifier;break;case 14:c=qn.TIME;break;case 15:return i.error="[UNIVERSAL 15] is reserved by ASN.1 standard",{offset:-1,result:i};case 16:c=qn.Sequence;break;case 17:c=qn.Set;break;case 18:c=qn.NumericString;break;case 19:c=qn.PrintableString;break;case 20:c=qn.TeletexString;break;case 21:c=qn.VideotexString;break;case 22:c=qn.IA5String;break;case 23:c=qn.UTCTime;break;case 24:c=qn.GeneralizedTime;break;case 25:c=qn.GraphicString;break;case 26:c=qn.VisibleString;break;case 27:c=qn.GeneralString;break;case 28:c=qn.UniversalString;break;case 29:c=qn.CharacterString;break;case 30:c=qn.BmpString;break;case 31:c=qn.DATE;break;case 32:c=qn.TimeOfDay;break;case 33:c=qn.DateTime;break;case 34:c=qn.Duration;break;default:{const t=i.idBlock.isConstructed?new qn.Constructed:new qn.Primitive;t.idBlock=i.idBlock,t.lenBlock=i.lenBlock,t.warnings=i.warnings,i=t}}break;case 2:case 3:case 4:default:c=i.idBlock.isConstructed?qn.Constructed:qn.Primitive}return i=Br(i,c),a=i.fromBER(t,e,i.lenBlock.isIndefiniteForm?n:i.lenBlock.length),i.valueBeforeDecodeView=t.subarray(r,r+i.blockLength),{offset:a,result:i}}function Nr(t){if(!t.byteLength){const t=new Gn({},jn);return t.error="Input buffer has zero length",{offset:-1,result:t}}return Or(An.vJ.toUint8Array(t).slice(),0,t.byteLength)}function Dr(t,e){return t?1:e}Qn=Tr,(()=>{qn.Primitive=Qn})(),Tr.NAME="PRIMITIVE";class Ur extends jn{constructor({value:t=[],isIndefiniteForm:e=!1,...n}={}){super(n),this.value=t,this.isIndefiniteForm=e}fromBER(t,e,n){const r=An.vJ.toUint8Array(t);if(!Bn(this,r,e,n))return-1;if(this.valueBeforeDecodeView=r.subarray(e,e+n),0===this.valueBeforeDecodeView.length)return this.warnings.push("Zero buffer length"),e;let i=e;while(Dr(this.isIndefiniteForm,n)>0){const t=Or(r,i,n);if(-1===t.offset)return this.error=t.result.error,this.warnings.concat(t.result.warnings),-1;if(i=t.offset,this.blockLength+=t.result.blockLength,n-=t.result.blockLength,this.value.push(t.result),this.isIndefiniteForm&&t.result.constructor.NAME===Zn)break}return this.isIndefiniteForm&&(this.value[this.value.length-1].constructor.NAME===Zn?this.value.pop():this.warnings.push("No EndOfContent block encoded")),i}toBER(t,e){const n=e||new On;for(let r=0;r<this.value.length;r++)this.value[r].toBER(t,n);return e?Pn:n.final()}toJSON(){const t={...super.toJSON(),isIndefiniteForm:this.isIndefiniteForm,value:[]};for(const e of this.value)t.value.push(e.toJSON());return t}}Ur.NAME="ConstructedValueBlock";class Pr extends Gn{constructor(t={}){super(t,Ur),this.idBlock.isConstructed=!0}fromBER(t,e,n){this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm;const r=this.valueBlock.fromBER(t,e,this.lenBlock.isIndefiniteForm?n:this.lenBlock.length);return-1===r?(this.error=this.valueBlock.error,r):(this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength),r)}onAsciiEncoding(){const t=[];for(const n of this.valueBlock.value)t.push(n.toString("ascii").split("\n").map((t=>`  ${t}`)).join("\n"));const e=3===this.idBlock.tagClass?`[${this.idBlock.tagNumber}]`:this.constructor.NAME;return t.length?`${e} :\n${t.join("\n")}`:`${e} :`}}Xn=Pr,(()=>{qn.Constructed=Xn})(),Pr.NAME="CONSTRUCTED";class Mr extends jn{fromBER(t,e,n){return e}toBER(t){return Pn}}Mr.override="EndOfContentValueBlock";class Zr extends Gn{constructor(t={}){super(t,Mr),this.idBlock.tagClass=1,this.idBlock.tagNumber=0}}tr=Zr,(()=>{qn.EndOfContent=tr})(),Zr.NAME=Zn;class Fr extends Gn{constructor(t={}){super(t,jn),this.idBlock.tagClass=1,this.idBlock.tagNumber=5}fromBER(t,e,n){return this.lenBlock.length>0&&this.warnings.push("Non-zero length of value block for Null type"),this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.blockLength+=n,e+n>t.byteLength?(this.error="End of input reached before message was fully decoded (inconsistent offset and length values)",-1):e+n}toBER(t,e){const n=new ArrayBuffer(2);if(!t){const t=new Uint8Array(n);t[0]=5,t[1]=0}return e&&e.write(n),n}onAsciiEncoding(){return`${this.constructor.NAME}`}}er=Fr,(()=>{qn.Null=er})(),Fr.NAME="NULL";class Vr extends(Hn(jn)){constructor({value:t,...e}={}){super(e),e.valueHex?this.valueHexView=An.vJ.toUint8Array(e.valueHex):this.valueHexView=new Uint8Array(1),t&&(this.value=t)}get value(){for(const t of this.valueHexView)if(t>0)return!0;return!1}set value(t){this.valueHexView[0]=t?255:0}fromBER(t,e,n){const r=An.vJ.toUint8Array(t);return Bn(this,r,e,n)?(this.valueHexView=r.subarray(e,e+n),n>1&&this.warnings.push("Boolean value encoded in more then 1 octet"),this.isHexOnly=!0,In.call(this),this.blockLength=n,e+n):-1}toBER(){return this.valueHexView.slice()}toJSON(){return{...super.toJSON(),value:this.value}}}Vr.NAME="BooleanValueBlock";class Hr extends Gn{constructor(t={}){super(t,Vr),this.idBlock.tagClass=1,this.idBlock.tagNumber=1}getValue(){return this.valueBlock.value}setValue(t){this.valueBlock.value=t}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.getValue}`}}nr=Hr,(()=>{qn.Boolean=nr})(),Hr.NAME="BOOLEAN";class $r extends(Hn(Ur)){constructor({isConstructed:t=!1,...e}={}){super(e),this.isConstructed=t}fromBER(t,e,n){let r=0;if(this.isConstructed){if(this.isHexOnly=!1,r=Ur.prototype.fromBER.call(this,t,e,n),-1===r)return r;for(let t=0;t<this.value.length;t++){const e=this.value[t].constructor.NAME;if(e===Zn){if(this.isIndefiniteForm)break;return this.error="EndOfContent is unexpected, OCTET STRING may consists of OCTET STRINGs only",-1}if(e!==Fn)return this.error="OCTET STRING may consists of OCTET STRINGs only",-1}}else this.isHexOnly=!0,r=super.fromBER(t,e,n),this.blockLength=n;return r}toBER(t,e){return this.isConstructed?Ur.prototype.toBER.call(this,t,e):t?new ArrayBuffer(this.valueHexView.byteLength):this.valueHexView.slice().buffer}toJSON(){return{...super.toJSON(),isConstructed:this.isConstructed}}}$r.NAME="OctetStringValueBlock";class jr extends Gn{constructor({idBlock:t={},lenBlock:e={},...n}={}){var r,i;null!==(r=n.isConstructed)&&void 0!==r||(n.isConstructed=!!(null===(i=n.value)||void 0===i?void 0:i.length)),super({idBlock:{isConstructed:n.isConstructed,...t},lenBlock:{...e,isIndefiniteForm:!!n.isIndefiniteForm},...n},$r),this.idBlock.tagClass=1,this.idBlock.tagNumber=4}fromBER(t,e,n){if(this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,0===n)return 0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),e;if(!this.valueBlock.isConstructed){const i=t instanceof ArrayBuffer?new Uint8Array(t):t,s=i.subarray(e,e+n);try{if(s.byteLength){const t=Or(s,0,s.byteLength);-1!==t.offset&&t.offset===n&&(this.valueBlock.value=[t.result])}}catch(r){}}return super.fromBER(t,e,n)}onAsciiEncoding(){return this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length?Pr.prototype.onAsciiEncoding.call(this):`${this.constructor.NAME} : ${An.ep.ToHex(this.valueBlock.valueHexView)}`}getValue(){if(!this.idBlock.isConstructed)return this.valueBlock.valueHexView.slice().buffer;const t=[];for(const e of this.valueBlock.value)e instanceof jr&&t.push(e.valueBlock.valueHexView);return An.vJ.concat(t)}}rr=jr,(()=>{qn.OctetString=rr})(),jr.NAME=Fn;class Kr extends(Hn(Ur)){constructor({unusedBits:t=0,isConstructed:e=!1,...n}={}){super(n),this.unusedBits=t,this.isConstructed=e,this.blockLength=this.valueHexView.byteLength}fromBER(t,e,n){if(!n)return e;let r=-1;if(this.isConstructed){if(r=Ur.prototype.fromBER.call(this,t,e,n),-1===r)return r;for(const t of this.value){const e=t.constructor.NAME;if(e===Zn){if(this.isIndefiniteForm)break;return this.error="EndOfContent is unexpected, BIT STRING may consists of BIT STRINGs only",-1}if(e!==Vn)return this.error="BIT STRING may consists of BIT STRINGs only",-1;const n=t.valueBlock;if(this.unusedBits>0&&n.unusedBits>0)return this.error='Using of "unused bits" inside constructive BIT STRING allowed for least one only',-1;this.unusedBits=n.unusedBits}return r}const i=An.vJ.toUint8Array(t);if(!Bn(this,i,e,n))return-1;const s=i.subarray(e,e+n);if(this.unusedBits=s[0],this.unusedBits>7)return this.error="Unused bits for BitString must be in range 0-7",-1;if(!this.unusedBits){const t=s.subarray(1);try{if(t.byteLength){const e=Or(t,0,t.byteLength);-1!==e.offset&&e.offset===n-1&&(this.value=[e.result])}}catch(o){}}return this.valueHexView=s.subarray(1),this.blockLength=s.length,e+n}toBER(t,e){if(this.isConstructed)return Ur.prototype.toBER.call(this,t,e);if(t)return new ArrayBuffer(this.valueHexView.byteLength+1);if(!this.valueHexView.byteLength)return Pn;const n=new Uint8Array(this.valueHexView.length+1);return n[0]=this.unusedBits,n.set(this.valueHexView,1),n.buffer}toJSON(){return{...super.toJSON(),unusedBits:this.unusedBits,isConstructed:this.isConstructed}}}Kr.NAME="BitStringValueBlock";class zr extends Gn{constructor({idBlock:t={},lenBlock:e={},...n}={}){var r,i;null!==(r=n.isConstructed)&&void 0!==r||(n.isConstructed=!!(null===(i=n.value)||void 0===i?void 0:i.length)),super({idBlock:{isConstructed:n.isConstructed,...t},lenBlock:{...e,isIndefiniteForm:!!n.isIndefiniteForm},...n},Kr),this.idBlock.tagClass=1,this.idBlock.tagNumber=3}fromBER(t,e,n){return this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,super.fromBER(t,e,n)}onAsciiEncoding(){if(this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length)return Pr.prototype.onAsciiEncoding.call(this);{const t=[],e=this.valueBlock.valueHexView;for(const r of e)t.push(r.toString(2).padStart(8,"0"));const n=t.join("");return`${this.constructor.NAME} : ${n.substring(0,n.length-this.valueBlock.unusedBits)}`}}}function qr(t,e){const n=new Uint8Array([0]),r=new Uint8Array(t),i=new Uint8Array(e);let s=r.slice(0);const o=s.length-1,a=i.slice(0),c=a.length-1;let u=0;const l=c<o?o:c;let h=0;for(let d=l;d>=0;d--,h++){switch(!0){case h<a.length:u=s[o-h]+a[c-h]+n[0];break;default:u=s[o-h]+n[0]}switch(n[0]=u/10,!0){case h>=s.length:s=_n(new Uint8Array([u%10]),s);break;default:s[o-h]=u%10}}return n[0]>0&&(s=_n(n,s)),s}function Gr(t){if(t>=Nn.length)for(let e=Nn.length;e<=t;e++){const t=new Uint8Array([0]);let n=Nn[e-1].slice(0);for(let e=n.length-1;e>=0;e--){const r=new Uint8Array([(n[e]<<1)+t[0]]);t[0]=r[0]/10,n[e]=r[0]%10}t[0]>0&&(n=_n(t,n)),Nn.push(n)}return Nn[t]}function Wr(t,e){let n=0;const r=new Uint8Array(t),i=new Uint8Array(e),s=r.slice(0),o=s.length-1,a=i.slice(0),c=a.length-1;let u,l=0;for(let h=c;h>=0;h--,l++)switch(u=s[o-l]-a[c-l]-n,!0){case u<0:n=1,s[o-l]=u+10;break;default:n=0,s[o-l]=u}if(n>0)for(let h=o-c+1;h>=0;h--,l++){if(u=s[o-l]-n,!(u<0)){n=0,s[o-l]=u;break}n=1,s[o-l]=u+10}return s.slice()}ir=zr,(()=>{qn.BitString=ir})(),zr.NAME=Vn;class Jr extends(Hn(jn)){constructor({value:t,...e}={}){super(e),this._valueDec=0,e.valueHex&&this.setValueHex(),void 0!==t&&(this.valueDec=t)}setValueHex(){this.valueHexView.length>=4?(this.warnings.push("Too big Integer for decoding, hex only"),this.isHexOnly=!0,this._valueDec=0):(this.isHexOnly=!1,this.valueHexView.length>0&&(this._valueDec=In.call(this)))}set valueDec(t){this._valueDec=t,this.isHexOnly=!1,this.valueHexView=new Uint8Array(Rn(t))}get valueDec(){return this._valueDec}fromDER(t,e,n,r=0){const i=this.fromBER(t,e,n);if(-1===i)return i;const s=this.valueHexView;return 0===s[0]&&0!==(128&s[1])?this.valueHexView=s.subarray(1):0!==r&&s.length<r&&(r-s.length>1&&(r=s.length+1),this.valueHexView=s.subarray(r-s.length)),i}toDER(t=!1){const e=this.valueHexView;switch(!0){case 0!==(128&e[0]):{const t=new Uint8Array(this.valueHexView.length+1);t[0]=0,t.set(e,1),this.valueHexView=t}break;case 0===e[0]&&0===(128&e[1]):this.valueHexView=this.valueHexView.subarray(1);break}return this.toBER(t)}fromBER(t,e,n){const r=super.fromBER(t,e,n);return-1===r||this.setValueHex(),r}toBER(t){return t?new ArrayBuffer(this.valueHexView.length):this.valueHexView.slice().buffer}toJSON(){return{...super.toJSON(),valueDec:this.valueDec}}toString(){const t=8*this.valueHexView.length-1;let e,n=new Uint8Array(8*this.valueHexView.length/3),r=0;const i=this.valueHexView;let s="",o=!1;for(let a=i.byteLength-1;a>=0;a--){e=i[a];for(let i=0;i<8;i++){if(1===(1&e))switch(r){case t:n=Wr(Gr(r),n),s="-";break;default:n=qr(n,Gr(r))}r++,e>>=1}}for(let a=0;a<n.length;a++)n[a]&&(o=!0),o&&(s+=Dn.charAt(n[a]));return!1===o&&(s+=Dn.charAt(0)),s}}sr=Jr,Jr.NAME="IntegerValueBlock",(()=>{Object.defineProperty(sr.prototype,"valueHex",{set:function(t){this.valueHexView=new Uint8Array(t),this.setValueHex()},get:function(){return this.valueHexView.slice().buffer}})})();class Yr extends Gn{constructor(t={}){super(t,Jr),this.idBlock.tagClass=1,this.idBlock.tagNumber=2}toBigInt(){return Ln(),BigInt(this.valueBlock.toString())}static fromBigInt(t){Ln();const e=BigInt(t),n=new On,r=e.toString(16).replace(/^-/,""),i=new Uint8Array(An.ep.FromHex(r));if(e<0){const t=new Uint8Array(i.length+(128&i[0]?1:0));t[0]|=128;const r=BigInt(`0x${An.ep.ToHex(t)}`),s=r+e,o=An.vJ.toUint8Array(An.ep.FromHex(s.toString(16)));o[0]|=128,n.write(o)}else 128&i[0]&&n.write(new Uint8Array([0])),n.write(i);const s=new Yr({valueHex:n.final()});return s}convertToDER(){const t=new Yr({valueHex:this.valueBlock.valueHexView});return t.valueBlock.toDER(),t}convertFromDER(){return new Yr({valueHex:0===this.valueBlock.valueHexView[0]?this.valueBlock.valueHexView.subarray(1):this.valueBlock.valueHexView})}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()}`}}or=Yr,(()=>{qn.Integer=or})(),Yr.NAME="INTEGER";class Qr extends Yr{constructor(t={}){super(t),this.idBlock.tagClass=1,this.idBlock.tagNumber=10}}ar=Qr,(()=>{qn.Enumerated=ar})(),Qr.NAME="ENUMERATED";class Xr extends(Hn(jn)){constructor({valueDec:t=-1,isFirstSid:e=!1,...n}={}){super(n),this.valueDec=t,this.isFirstSid=e}fromBER(t,e,n){if(!n)return e;const r=An.vJ.toUint8Array(t);if(!Bn(this,r,e,n))return-1;const i=r.subarray(e,e+n);this.valueHexView=new Uint8Array(n);for(let o=0;o<n;o++)if(this.valueHexView[o]=127&i[o],this.blockLength++,0===(128&i[o]))break;const s=new Uint8Array(this.blockLength);for(let o=0;o<this.blockLength;o++)s[o]=this.valueHexView[o];return this.valueHexView=s,0!==(128&i[this.blockLength-1])?(this.error="End of input reached before message was fully decoded",-1):(0===this.valueHexView[0]&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=xn(this.valueHexView,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),e+this.blockLength)}set valueBigInt(t){Ln();let e=BigInt(t).toString(2);while(e.length%7)e="0"+e;const n=new Uint8Array(e.length/7);for(let r=0;r<n.length;r++)n[r]=parseInt(e.slice(7*r,7*r+7),2)+(r+1<n.length?128:0);this.fromBER(n.buffer,0,n.length)}toBER(t){if(this.isHexOnly){if(t)return new ArrayBuffer(this.valueHexView.byteLength);const e=this.valueHexView,n=new Uint8Array(this.blockLength);for(let t=0;t<this.blockLength-1;t++)n[t]=128|e[t];return n[this.blockLength-1]=e[this.blockLength-1],n.buffer}const e=Sn(this.valueDec,7);if(0===e.byteLength)return this.error="Error during encoding SID value",Pn;const n=new Uint8Array(e.byteLength);if(!t){const t=new Uint8Array(e),r=e.byteLength-1;for(let e=0;e<r;e++)n[e]=128|t[e];n[r]=t[r]}return n}toString(){let t="";if(this.isHexOnly)t=An.ep.ToHex(this.valueHexView);else if(this.isFirstSid){let e=this.valueDec;this.valueDec<=39?t="0.":this.valueDec<=79?(t="1.",e-=40):(t="2.",e-=80),t+=e.toString()}else t=this.valueDec.toString();return t}toJSON(){return{...super.toJSON(),valueDec:this.valueDec,isFirstSid:this.isFirstSid}}}Xr.NAME="sidBlock";class ti extends jn{constructor({value:t=Un,...e}={}){super(e),this.value=[],t&&this.fromString(t)}fromBER(t,e,n){let r=e;while(n>0){const e=new Xr;if(r=e.fromBER(t,r,n),-1===r)return this.blockLength=0,this.error=e.error,r;0===this.value.length&&(e.isFirstSid=!0),this.blockLength+=e.blockLength,n-=e.blockLength,this.value.push(e)}return r}toBER(t){const e=[];for(let n=0;n<this.value.length;n++){const r=this.value[n].toBER(t);if(0===r.byteLength)return this.error=this.value[n].error,Pn;e.push(r)}return Tn(e)}fromString(t){this.value=[];let e=0,n=0,r="",i=!1;do{if(n=t.indexOf(".",e),r=-1===n?t.substring(e):t.substring(e,n),e=n+1,i){const t=this.value[0];let e=0;switch(t.valueDec){case 0:break;case 1:e=40;break;case 2:e=80;break;default:return void(this.value=[])}const n=parseInt(r,10);if(isNaN(n))return;t.valueDec=n+e,i=!1}else{const t=new Xr;if(r>Number.MAX_SAFE_INTEGER){Ln();const e=BigInt(r);t.valueBigInt=e}else if(t.valueDec=parseInt(r,10),isNaN(t.valueDec))return;this.value.length||(t.isFirstSid=!0,i=!0),this.value.push(t)}}while(-1!==n)}toString(){let t="",e=!1;for(let n=0;n<this.value.length;n++){e=this.value[n].isHexOnly;let r=this.value[n].toString();0!==n&&(t=`${t}.`),e?(r=`{${r}}`,this.value[n].isFirstSid?t=`2.{${r} - 80}`:t+=r):t+=r}return t}toJSON(){const t={...super.toJSON(),value:this.toString(),sidArray:[]};for(let e=0;e<this.value.length;e++)t.sidArray.push(this.value[e].toJSON());return t}}ti.NAME="ObjectIdentifierValueBlock";class ei extends Gn{constructor(t={}){super(t,ti),this.idBlock.tagClass=1,this.idBlock.tagNumber=6}getValue(){return this.valueBlock.toString()}setValue(t){this.valueBlock.fromString(t)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()||"empty"}`}toJSON(){return{...super.toJSON(),value:this.getValue()}}}cr=ei,(()=>{qn.ObjectIdentifier=cr})(),ei.NAME="OBJECT IDENTIFIER";class ni extends(Hn($n)){constructor({valueDec:t=0,...e}={}){super(e),this.valueDec=t}fromBER(t,e,n){if(0===n)return e;const r=An.vJ.toUint8Array(t);if(!Bn(this,r,e,n))return-1;const i=r.subarray(e,e+n);this.valueHexView=new Uint8Array(n);for(let o=0;o<n;o++)if(this.valueHexView[o]=127&i[o],this.blockLength++,0===(128&i[o]))break;const s=new Uint8Array(this.blockLength);for(let o=0;o<this.blockLength;o++)s[o]=this.valueHexView[o];return this.valueHexView=s,0!==(128&i[this.blockLength-1])?(this.error="End of input reached before message was fully decoded",-1):(0===this.valueHexView[0]&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=xn(this.valueHexView,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),e+this.blockLength)}toBER(t){if(this.isHexOnly){if(t)return new ArrayBuffer(this.valueHexView.byteLength);const e=this.valueHexView,n=new Uint8Array(this.blockLength);for(let t=0;t<this.blockLength-1;t++)n[t]=128|e[t];return n[this.blockLength-1]=e[this.blockLength-1],n.buffer}const e=Sn(this.valueDec,7);if(0===e.byteLength)return this.error="Error during encoding SID value",Pn;const n=new Uint8Array(e.byteLength);if(!t){const t=new Uint8Array(e),r=e.byteLength-1;for(let e=0;e<r;e++)n[e]=128|t[e];n[r]=t[r]}return n.buffer}toString(){let t="";return t=this.isHexOnly?An.ep.ToHex(this.valueHexView):this.valueDec.toString(),t}toJSON(){return{...super.toJSON(),valueDec:this.valueDec}}}ni.NAME="relativeSidBlock";class ri extends jn{constructor({value:t=Un,...e}={}){super(e),this.value=[],t&&this.fromString(t)}fromBER(t,e,n){let r=e;while(n>0){const e=new ni;if(r=e.fromBER(t,r,n),-1===r)return this.blockLength=0,this.error=e.error,r;this.blockLength+=e.blockLength,n-=e.blockLength,this.value.push(e)}return r}toBER(t,e){const n=[];for(let r=0;r<this.value.length;r++){const e=this.value[r].toBER(t);if(0===e.byteLength)return this.error=this.value[r].error,Pn;n.push(e)}return Tn(n)}fromString(t){this.value=[];let e=0,n=0,r="";do{n=t.indexOf(".",e),r=-1===n?t.substring(e):t.substring(e,n),e=n+1;const i=new ni;if(i.valueDec=parseInt(r,10),isNaN(i.valueDec))return!0;this.value.push(i)}while(-1!==n);return!0}toString(){let t="",e=!1;for(let n=0;n<this.value.length;n++){e=this.value[n].isHexOnly;let r=this.value[n].toString();0!==n&&(t=`${t}.`),e?(r=`{${r}}`,t+=r):t+=r}return t}toJSON(){const t={...super.toJSON(),value:this.toString(),sidArray:[]};for(let e=0;e<this.value.length;e++)t.sidArray.push(this.value[e].toJSON());return t}}ri.NAME="RelativeObjectIdentifierValueBlock";class ii extends Gn{constructor(t={}){super(t,ri),this.idBlock.tagClass=1,this.idBlock.tagNumber=13}getValue(){return this.valueBlock.toString()}setValue(t){this.valueBlock.fromString(t)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()||"empty"}`}toJSON(){return{...super.toJSON(),value:this.getValue()}}}ur=ii,(()=>{qn.RelativeObjectIdentifier=ur})(),ii.NAME="RelativeObjectIdentifier";class si extends Pr{constructor(t={}){super(t),this.idBlock.tagClass=1,this.idBlock.tagNumber=16}}lr=si,(()=>{qn.Sequence=lr})(),si.NAME="SEQUENCE";class oi extends Pr{constructor(t={}){super(t),this.idBlock.tagClass=1,this.idBlock.tagNumber=17}}hr=oi,(()=>{qn.Set=hr})(),oi.NAME="SET";class ai extends(Hn(jn)){constructor({...t}={}){super(t),this.isHexOnly=!0,this.value=Un}toJSON(){return{...super.toJSON(),value:this.value}}}ai.NAME="StringValueBlock";class ci extends ai{}ci.NAME="SimpleStringValueBlock";class ui extends Jn{constructor({...t}={}){super(t,ci)}fromBuffer(t){this.valueBlock.value=String.fromCharCode.apply(null,An.vJ.toUint8Array(t))}fromString(t){const e=t.length,n=this.valueBlock.valueHexView=new Uint8Array(e);for(let r=0;r<e;r++)n[r]=t.charCodeAt(r);this.valueBlock.value=t}}ui.NAME="SIMPLE STRING";class li extends ui{fromBuffer(t){this.valueBlock.valueHexView=An.vJ.toUint8Array(t);try{this.valueBlock.value=An.ep.ToUtf8String(t)}catch(e){this.warnings.push(`Error during "decodeURIComponent": ${e}, using raw string`),this.valueBlock.value=An.ep.ToBinary(t)}}fromString(t){this.valueBlock.valueHexView=new Uint8Array(An.ep.FromUtf8String(t)),this.valueBlock.value=t}}li.NAME="Utf8StringValueBlock";class hi extends li{constructor(t={}){super(t),this.idBlock.tagClass=1,this.idBlock.tagNumber=12}}dr=hi,(()=>{qn.Utf8String=dr})(),hi.NAME="UTF8String";class di extends ui{fromBuffer(t){this.valueBlock.value=An.ep.ToUtf16String(t),this.valueBlock.valueHexView=An.vJ.toUint8Array(t)}fromString(t){this.valueBlock.value=t,this.valueBlock.valueHexView=new Uint8Array(An.ep.FromUtf16String(t))}}di.NAME="BmpStringValueBlock";class fi extends di{constructor({...t}={}){super(t),this.idBlock.tagClass=1,this.idBlock.tagNumber=30}}fr=fi,(()=>{qn.BmpString=fr})(),fi.NAME="BMPString";class pi extends ui{fromBuffer(t){const e=ArrayBuffer.isView(t)?t.slice().buffer:t.slice(0),n=new Uint8Array(e);for(let r=0;r<n.length;r+=4)n[r]=n[r+3],n[r+1]=n[r+2],n[r+2]=0,n[r+3]=0;this.valueBlock.value=String.fromCharCode.apply(null,new Uint32Array(e))}fromString(t){const e=t.length,n=this.valueBlock.valueHexView=new Uint8Array(4*e);for(let r=0;r<e;r++){const e=Sn(t.charCodeAt(r),8),i=new Uint8Array(e);if(i.length>4)continue;const s=4-i.length;for(let t=i.length-1;t>=0;t--)n[4*r+t+s]=i[t]}this.valueBlock.value=t}}pi.NAME="UniversalStringValueBlock";class gi extends pi{constructor({...t}={}){super(t),this.idBlock.tagClass=1,this.idBlock.tagNumber=28}}pr=gi,(()=>{qn.UniversalString=pr})(),gi.NAME="UniversalString";class yi extends ui{constructor(t={}){super(t),this.idBlock.tagClass=1,this.idBlock.tagNumber=18}}gr=yi,(()=>{qn.NumericString=gr})(),yi.NAME="NumericString";class bi extends ui{constructor(t={}){super(t),this.idBlock.tagClass=1,this.idBlock.tagNumber=19}}yr=bi,(()=>{qn.PrintableString=yr})(),bi.NAME="PrintableString";class wi extends ui{constructor(t={}){super(t),this.idBlock.tagClass=1,this.idBlock.tagNumber=20}}br=wi,(()=>{qn.TeletexString=br})(),wi.NAME="TeletexString";class mi extends ui{constructor(t={}){super(t),this.idBlock.tagClass=1,this.idBlock.tagNumber=21}}wr=mi,(()=>{qn.VideotexString=wr})(),mi.NAME="VideotexString";class vi extends ui{constructor(t={}){super(t),this.idBlock.tagClass=1,this.idBlock.tagNumber=22}}mr=vi,(()=>{qn.IA5String=mr})(),vi.NAME="IA5String";class Ei extends ui{constructor(t={}){super(t),this.idBlock.tagClass=1,this.idBlock.tagNumber=25}}vr=Ei,(()=>{qn.GraphicString=vr})(),Ei.NAME="GraphicString";class Ai extends ui{constructor(t={}){super(t),this.idBlock.tagClass=1,this.idBlock.tagNumber=26}}Er=Ai,(()=>{qn.VisibleString=Er})(),Ai.NAME="VisibleString";class xi extends ui{constructor(t={}){super(t),this.idBlock.tagClass=1,this.idBlock.tagNumber=27}}Ar=xi,(()=>{qn.GeneralString=Ar})(),xi.NAME="GeneralString";class Si extends ui{constructor(t={}){super(t),this.idBlock.tagClass=1,this.idBlock.tagNumber=29}}xr=Si,(()=>{qn.CharacterString=xr})(),Si.NAME="CharacterString";class _i extends Ai{constructor({value:t,valueDate:e,...n}={}){if(super(n),this.year=0,this.month=0,this.day=0,this.hour=0,this.minute=0,this.second=0,t){this.fromString(t),this.valueBlock.valueHexView=new Uint8Array(t.length);for(let e=0;e<t.length;e++)this.valueBlock.valueHexView[e]=t.charCodeAt(e)}e&&(this.fromDate(e),this.valueBlock.valueHexView=new Uint8Array(this.toBuffer())),this.idBlock.tagClass=1,this.idBlock.tagNumber=23}fromBuffer(t){this.fromString(String.fromCharCode.apply(null,An.vJ.toUint8Array(t)))}toBuffer(){const t=this.toString(),e=new ArrayBuffer(t.length),n=new Uint8Array(e);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return e}fromDate(t){this.year=t.getUTCFullYear(),this.month=t.getUTCMonth()+1,this.day=t.getUTCDate(),this.hour=t.getUTCHours(),this.minute=t.getUTCMinutes(),this.second=t.getUTCSeconds()}toDate(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second))}fromString(t){const e=/(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})Z/gi,n=e.exec(t);if(null===n)return void(this.error="Wrong input string for conversion");const r=parseInt(n[1],10);this.year=r>=50?1900+r:2e3+r,this.month=parseInt(n[2],10),this.day=parseInt(n[3],10),this.hour=parseInt(n[4],10),this.minute=parseInt(n[5],10),this.second=parseInt(n[6],10)}toString(t="iso"){if("iso"===t){const t=new Array(7);return t[0]=kn(this.year<2e3?this.year-1900:this.year-2e3,2),t[1]=kn(this.month,2),t[2]=kn(this.day,2),t[3]=kn(this.hour,2),t[4]=kn(this.minute,2),t[5]=kn(this.second,2),t[6]="Z",t.join("")}return super.toString(t)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.toDate().toISOString()}`}toJSON(){return{...super.toJSON(),year:this.year,month:this.month,day:this.day,hour:this.hour,minute:this.minute,second:this.second}}}Sr=_i,(()=>{qn.UTCTime=Sr})(),_i.NAME="UTCTime";class Ii extends _i{constructor(t={}){var e;super(t),null!==(e=this.millisecond)&&void 0!==e||(this.millisecond=0),this.idBlock.tagClass=1,this.idBlock.tagNumber=24}fromDate(t){super.fromDate(t),this.millisecond=t.getUTCMilliseconds()}toDate(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond))}fromString(t){let e,n=!1,r="",i="",s=0,o=0,a=0;if("Z"===t[t.length-1])r=t.substring(0,t.length-1),n=!0;else{const e=new Number(t[t.length-1]);if(isNaN(e.valueOf()))throw new Error("Wrong input string for conversion");r=t}if(n){if(-1!==r.indexOf("+"))throw new Error("Wrong input string for conversion");if(-1!==r.indexOf("-"))throw new Error("Wrong input string for conversion")}else{let t=1,e=r.indexOf("+"),n="";if(-1===e&&(e=r.indexOf("-"),t=-1),-1!==e){if(n=r.substring(e+1),r=r.substring(0,e),2!==n.length&&4!==n.length)throw new Error("Wrong input string for conversion");let i=parseInt(n.substring(0,2),10);if(isNaN(i.valueOf()))throw new Error("Wrong input string for conversion");if(o=t*i,4===n.length){if(i=parseInt(n.substring(2,4),10),isNaN(i.valueOf()))throw new Error("Wrong input string for conversion");a=t*i}}}let c=r.indexOf(".");if(-1===c&&(c=r.indexOf(",")),-1!==c){const t=new Number(`0${r.substring(c)}`);if(isNaN(t.valueOf()))throw new Error("Wrong input string for conversion");s=t.valueOf(),i=r.substring(0,c)}else i=r;switch(!0){case 8===i.length:if(e=/(\d{4})(\d{2})(\d{2})/gi,-1!==c)throw new Error("Wrong input string for conversion");break;case 10===i.length:if(e=/(\d{4})(\d{2})(\d{2})(\d{2})/gi,-1!==c){let t=60*s;this.minute=Math.floor(t),t=60*(t-this.minute),this.second=Math.floor(t),t=1e3*(t-this.second),this.millisecond=Math.floor(t)}break;case 12===i.length:if(e=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})/gi,-1!==c){let t=60*s;this.second=Math.floor(t),t=1e3*(t-this.second),this.millisecond=Math.floor(t)}break;case 14===i.length:if(e=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})/gi,-1!==c){const t=1e3*s;this.millisecond=Math.floor(t)}break;default:throw new Error("Wrong input string for conversion")}const u=e.exec(i);if(null===u)throw new Error("Wrong input string for conversion");for(let l=1;l<u.length;l++)switch(l){case 1:this.year=parseInt(u[l],10);break;case 2:this.month=parseInt(u[l],10);break;case 3:this.day=parseInt(u[l],10);break;case 4:this.hour=parseInt(u[l],10)+o;break;case 5:this.minute=parseInt(u[l],10)+a;break;case 6:this.second=parseInt(u[l],10);break;default:throw new Error("Wrong input string for conversion")}if(!1===n){const t=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second,this.millisecond);this.year=t.getUTCFullYear(),this.month=t.getUTCMonth(),this.day=t.getUTCDay(),this.hour=t.getUTCHours(),this.minute=t.getUTCMinutes(),this.second=t.getUTCSeconds(),this.millisecond=t.getUTCMilliseconds()}}toString(t="iso"){if("iso"===t){const t=[];return t.push(kn(this.year,4)),t.push(kn(this.month,2)),t.push(kn(this.day,2)),t.push(kn(this.hour,2)),t.push(kn(this.minute,2)),t.push(kn(this.second,2)),0!==this.millisecond&&(t.push("."),t.push(kn(this.millisecond,3))),t.push("Z"),t.join("")}return super.toString(t)}toJSON(){return{...super.toJSON(),millisecond:this.millisecond}}}_r=Ii,(()=>{qn.GeneralizedTime=_r})(),Ii.NAME="GeneralizedTime";class Ri extends hi{constructor(t={}){super(t),this.idBlock.tagClass=1,this.idBlock.tagNumber=31}}Ir=Ri,(()=>{qn.DATE=Ir})(),Ri.NAME="DATE";class Ci extends hi{constructor(t={}){super(t),this.idBlock.tagClass=1,this.idBlock.tagNumber=32}}Rr=Ci,(()=>{qn.TimeOfDay=Rr})(),Ci.NAME="TimeOfDay";class ki extends hi{constructor(t={}){super(t),this.idBlock.tagClass=1,this.idBlock.tagNumber=33}}Cr=ki,(()=>{qn.DateTime=Cr})(),ki.NAME="DateTime";class Li extends hi{constructor(t={}){super(t),this.idBlock.tagClass=1,this.idBlock.tagNumber=34}}kr=Li,(()=>{qn.Duration=kr})(),Li.NAME="Duration";class Ti extends hi{constructor(t={}){super(t),this.idBlock.tagClass=1,this.idBlock.tagNumber=14}}Lr=Ti,(()=>{qn.TIME=Lr})(),Ti.NAME="TIME";function Bi(t){if(isNaN(t)||t<=0)throw new a.sv("random bytes length must be a Number bigger than 0","ERR_INVALID_LENGTH");return N(t)}function Oi(t){const{result:e}=Nr(t),n=e.valueBlock.value,r={n:(0,un.B)(Pi(n[1].toBigInt()),"base64url"),e:(0,un.B)(Pi(n[2].toBigInt()),"base64url"),d:(0,un.B)(Pi(n[3].toBigInt()),"base64url"),p:(0,un.B)(Pi(n[4].toBigInt()),"base64url"),q:(0,un.B)(Pi(n[5].toBigInt()),"base64url"),dp:(0,un.B)(Pi(n[6].toBigInt()),"base64url"),dq:(0,un.B)(Pi(n[7].toBigInt()),"base64url"),qi:(0,un.B)(Pi(n[8].toBigInt()),"base64url"),kty:"RSA",alg:"RS256"};return r}function Ni(t){if(null==t.n||null==t.e||null==t.d||null==t.p||null==t.q||null==t.dp||null==t.dq||null==t.qi)throw new a.sv("JWK was missing components","ERR_INVALID_PARAMETERS");const e=new si({value:[new Yr({value:0}),Yr.fromBigInt(Mi((0,p.m)(t.n,"base64url"))),Yr.fromBigInt(Mi((0,p.m)(t.e,"base64url"))),Yr.fromBigInt(Mi((0,p.m)(t.d,"base64url"))),Yr.fromBigInt(Mi((0,p.m)(t.p,"base64url"))),Yr.fromBigInt(Mi((0,p.m)(t.q,"base64url"))),Yr.fromBigInt(Mi((0,p.m)(t.dp,"base64url"))),Yr.fromBigInt(Mi((0,p.m)(t.dq,"base64url"))),Yr.fromBigInt(Mi((0,p.m)(t.qi,"base64url")))]}),n=e.toBER();return new Uint8Array(n,0,n.byteLength)}function Di(t){const{result:e}=Nr(t),n=e.valueBlock.value[1].valueBlock.value[0].valueBlock.value;return{kty:"RSA",n:(0,un.B)(Pi(n[0].toBigInt()),"base64url"),e:(0,un.B)(Pi(n[1].toBigInt()),"base64url")}}function Ui(t){if(null==t.n||null==t.e)throw new a.sv("JWK was missing components","ERR_INVALID_PARAMETERS");const e=new si({value:[new si({value:[new ei({value:"1.2.840.113549.1.1.1"}),new Fr]}),new zr({valueHex:new si({value:[Yr.fromBigInt(Mi((0,p.m)(t.n,"base64url"))),Yr.fromBigInt(Mi((0,p.m)(t.e,"base64url")))]}).toBER()})]}),n=e.toBER();return new Uint8Array(n,0,n.byteLength)}function Pi(t){let e=t.toString(16);e.length%2>0&&(e=`0${e}`);const n=e.length/2,r=new Uint8Array(n);let i=0,s=0;while(i<n)r[i]=parseInt(e.slice(s,s+2),16),i+=1,s+=2;return r}function Mi(t){const e=[];return t.forEach((function(t){let n=t.toString(16);n.length%2>0&&(n=`0${n}`),e.push(n)})),BigInt("0x"+e.join(""))}const Zi=16,Fi=32,Vi=1e4;async function Hi(t,e){const n=ze.get(),r=new si({value:[new Yr({value:0}),new si({value:[new ei({value:"1.2.840.113549.1.1.1"}),new Fr]}),new jr({valueHex:t.marshal()})]}),i=r.toBER(),s=new Uint8Array(i,0,i.byteLength),o=Bi(Zi),a=await En(yt,e,o,{c:Vi,dkLen:Fi}),c=Bi(16),u=await n.subtle.importKey("raw",a,"AES-CBC",!1,["encrypt"]),l=await n.subtle.encrypt({name:"AES-CBC",iv:c},u,s),h=new si({value:[new jr({valueHex:o}),new Yr({value:Vi}),new Yr({value:Fi}),new si({value:[new ei({value:"1.2.840.113549.2.11"}),new Fr]})]}),d=new si({value:[new ei({value:"1.2.840.113549.1.5.13"}),new si({value:[new si({value:[new ei({value:"1.2.840.113549.1.5.12"}),h]}),new si({value:[new ei({value:"2.16.840.1.101.3.4.1.42"}),new jr({valueHex:c})]})]})]}),f=new si({value:[d,new jr({valueHex:l})]}),p=f.toBER(),g=new Uint8Array(p,0,p.byteLength);return["-----BEGIN ENCRYPTED PRIVATE KEY-----",...(0,un.B)(g,"base64pad").split(/(.{64})/).filter(Boolean),"-----END ENCRYPTED PRIVATE KEY-----"].join("\n")}const $i=8192;class ji{constructor(t){(0,c.Z)(this,"_key",void 0),this._key=t}verify(t,e){return fn(this._key,e,t)}marshal(){return Ui(this._key)}get bytes(){return Qe.encode({Type:Je.RSA,Data:this.marshal()}).subarray()}equals(t){return(0,d.f)(this.bytes,t.bytes)}hash(){const t=h.sha256.digest(this.bytes);return g(t)?t.then((({bytes:t})=>t)):t.bytes}}class Ki{constructor(t,e){(0,c.Z)(this,"_key",void 0),(0,c.Z)(this,"_publicKey",void 0),this._key=t,this._publicKey=e}genSecret(){return Bi(16)}sign(t){return dn(this._key,t)}get public(){if(null==this._publicKey)throw new a.sv("public key not provided","ERR_PUBKEY_NOT_PROVIDED");return new ji(this._publicKey)}marshal(){return Ni(this._key)}get bytes(){return Xe.encode({Type:Je.RSA,Data:this.marshal()}).subarray()}equals(t){return(0,d.f)(this.bytes,t.bytes)}hash(){const t=h.sha256.digest(this.bytes);return g(t)?t.then((({bytes:t})=>t)):t.bytes}async id(){const t=await this.public.hash();return(0,un.B)(t,"base58btc")}async export(t,e="pkcs-8"){if("pkcs-8"===e)return Hi(this,t);if("libp2p-key"===e)return We(this.bytes,t);throw new a.sv(`export format '${e}' is not supported`,"ERR_INVALID_EXPORT_FORMAT")}}async function zi(t){const e=Oi(t);if(yn(e)>$i)throw new a.sv("key size is too large","ERR_KEY_SIZE_TOO_LARGE");const n=await hn(e);return new Ki(n.privateKey,n.publicKey)}function qi(t){const e=Di(t);if(yn(e)>$i)throw new a.sv("key size is too large","ERR_KEY_SIZE_TOO_LARGE");return new ji(e)}async function Gi(t){if(yn(t)>$i)throw new a.sv("key size is too large","ERR_KEY_SIZE_TOO_LARGE");const e=await hn(t);return new Ki(e.privateKey,e.publicKey)}async function Wi(t){if(t>$i)throw new a.sv("key size is too large","ERR_KEY_SIZE_TOO_LARGE");const e=await ln(t);return new Ki(e.privateKey,e.publicKey)}const Ji=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Yi=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Qi=new Uint32Array(64);class Xi extends M{constructor(){super(64,32,8,!1),this.A=0|Yi[0],this.B=0|Yi[1],this.C=0|Yi[2],this.D=0|Yi[3],this.E=0|Yi[4],this.F=0|Yi[5],this.G=0|Yi[6],this.H=0|Yi[7]}get(){const{A:t,B:e,C:n,D:r,E:i,F:s,G:o,H:a}=this;return[t,e,n,r,i,s,o,a]}set(t,e,n,r,i,s,o,a){this.A=0|t,this.B=0|e,this.C=0|n,this.D=0|r,this.E=0|i,this.F=0|s,this.G=0|o,this.H=0|a}process(t,e){for(let l=0;l<16;l++,e+=4)Qi[l]=t.getUint32(e,!1);for(let l=16;l<64;l++){const t=Qi[l-15],e=Qi[l-2],n=S(t,7)^S(t,18)^t>>>3,r=S(e,17)^S(e,19)^e>>>10;Qi[l]=r+Qi[l-7]+n+Qi[l-16]|0}let{A:n,B:r,C:i,D:s,E:o,F:a,G:c,H:u}=this;for(let l=0;l<64;l++){const t=S(o,6)^S(o,11)^S(o,25),e=u+t+U(o,a,c)+Ji[l]+Qi[l]|0,h=S(n,2)^S(n,13)^S(n,22),d=h+P(n,r,i)|0;u=c,c=a,a=o,o=s+e|0,s=i,i=r,r=n,n=e+d|0}n=n+this.A|0,r=r+this.B|0,i=i+this.C|0,s=s+this.D|0,o=o+this.E|0,a=a+this.F|0,c=c+this.G|0,u=u+this.H|0,this.set(n,r,i,s,o,a,c,u)}roundClean(){Qi.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const ts=O((()=>new Xi));
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
function es(t){const e=de(t);Mt(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:i}=e;if(n){if(!r.eql(i,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!==typeof n||"bigint"!==typeof n.beta||"function"!==typeof n.splitScalar)throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:ns,hexToBytes:rs}=r,is={Err:class extends Error{constructor(t=""){super(t)}},_parseInt(t){const{Err:e}=is;if(t.length<2||2!==t[0])throw new e("Invalid signature integer tag");const n=t[1],r=t.subarray(2,n+2);if(!n||r.length!==n)throw new e("Invalid signature integer: wrong length");if(128&r[0])throw new e("Invalid signature integer: negative");if(0===r[0]&&!(128&r[1]))throw new e("Invalid signature integer: unnecessary leading zero");return{d:ns(r),l:t.subarray(n+2)}},toSig(t){const{Err:e}=is,n="string"===typeof t?rs(t):t;vt(n);let r=n.length;if(r<2||48!=n[0])throw new e("Invalid signature tag");if(n[1]!==r-2)throw new e("Invalid signature: incorrect length");const{d:i,l:s}=is._parseInt(n.subarray(2)),{d:o,l:a}=is._parseInt(s);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r:i,s:o}},hexFromSig(t){const e=t=>8&Number.parseInt(t[0],16)?"00"+t:t,n=t=>{const e=t.toString(16);return 1&e.length?`0${e}`:e},r=e(n(t.s)),i=e(n(t.r)),s=r.length/2,o=i.length/2,a=n(s),c=n(o);return`30${n(o+s+4)}02${c}${i}02${a}${r}`}},ss=BigInt(0),os=BigInt(1),as=(BigInt(2),BigInt(3));BigInt(4);function cs(t){const e=es(t),{Fp:n}=e,r=e.toBytes||((t,e,r)=>{const i=e.toAffine();return Bt(Uint8Array.from([4]),n.toBytes(i.x),n.toBytes(i.y))}),i=e.fromBytes||(t=>{const e=t.subarray(1),r=n.fromBytes(e.subarray(0,n.BYTES)),i=n.fromBytes(e.subarray(n.BYTES,2*n.BYTES));return{x:r,y:i}});function s(t){const{a:r,b:i}=e,s=n.sqr(t),o=n.mul(s,t);return n.add(n.add(o,n.mul(t,r)),i)}if(!n.eql(n.sqr(e.Gy),s(e.Gx)))throw new Error("bad generator point: equation left != right");function o(t){return"bigint"===typeof t&&ss<t&&t<e.n}function a(t){if(!o(t))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(t){const{allowedPrivateKeyLengths:n,nByteLength:r,wrapPrivateKey:i,n:s}=e;if(n&&"bigint"!==typeof t){if(mt(t)&&(t=At(t)),"string"!==typeof t||!n.includes(t.length))throw new Error("Invalid key");t=t.padStart(2*r,"0")}let o;try{o="bigint"===typeof t?t:Rt(Tt("private key",t,r))}catch(c){throw new Error(`private key must be ${r} bytes, hex or bigint, not ${typeof t}`)}return i&&(o=zt(o,s)),a(o),o}const u=new Map;function l(t){if(!(t instanceof h))throw new Error("ProjectivePoint expected")}class h{constructor(t,e,r){if(this.px=t,this.py=e,this.pz=r,null==t||!n.isValid(t))throw new Error("x required");if(null==e||!n.isValid(e))throw new Error("y required");if(null==r||!n.isValid(r))throw new Error("z required")}static fromAffine(t){const{x:e,y:r}=t||{};if(!t||!n.isValid(e)||!n.isValid(r))throw new Error("invalid affine point");if(t instanceof h)throw new Error("projective point not allowed");const i=t=>n.eql(t,n.ZERO);return i(e)&&i(r)?h.ZERO:new h(e,r,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(t){const e=n.invertBatch(t.map((t=>t.pz)));return t.map(((t,n)=>t.toAffine(e[n]))).map(h.fromAffine)}static fromHex(t){const e=h.fromAffine(i(Tt("pointHex",t)));return e.assertValidity(),e}static fromPrivateKey(t){return h.BASE.multiply(c(t))}_setWindowSize(t){this._WINDOW_SIZE=t,u.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!n.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:t,y:r}=this.toAffine();if(!n.isValid(t)||!n.isValid(r))throw new Error("bad point: x or y not FE");const i=n.sqr(r),o=s(t);if(!n.eql(i,o))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:t}=this.toAffine();if(n.isOdd)return!n.isOdd(t);throw new Error("Field doesn't support isOdd")}equals(t){l(t);const{px:e,py:r,pz:i}=this,{px:s,py:o,pz:a}=t,c=n.eql(n.mul(e,a),n.mul(s,i)),u=n.eql(n.mul(r,a),n.mul(o,i));return c&&u}negate(){return new h(this.px,n.neg(this.py),this.pz)}double(){const{a:t,b:r}=e,i=n.mul(r,as),{px:s,py:o,pz:a}=this;let c=n.ZERO,u=n.ZERO,l=n.ZERO,d=n.mul(s,s),f=n.mul(o,o),p=n.mul(a,a),g=n.mul(s,o);return g=n.add(g,g),l=n.mul(s,a),l=n.add(l,l),c=n.mul(t,l),u=n.mul(i,p),u=n.add(c,u),c=n.sub(f,u),u=n.add(f,u),u=n.mul(c,u),c=n.mul(g,c),l=n.mul(i,l),p=n.mul(t,p),g=n.sub(d,p),g=n.mul(t,g),g=n.add(g,l),l=n.add(d,d),d=n.add(l,d),d=n.add(d,p),d=n.mul(d,g),u=n.add(u,d),p=n.mul(o,a),p=n.add(p,p),d=n.mul(p,g),c=n.sub(c,d),l=n.mul(p,f),l=n.add(l,l),l=n.add(l,l),new h(c,u,l)}add(t){l(t);const{px:r,py:i,pz:s}=this,{px:o,py:a,pz:c}=t;let u=n.ZERO,d=n.ZERO,f=n.ZERO;const p=e.a,g=n.mul(e.b,as);let y=n.mul(r,o),b=n.mul(i,a),w=n.mul(s,c),m=n.add(r,i),v=n.add(o,a);m=n.mul(m,v),v=n.add(y,b),m=n.sub(m,v),v=n.add(r,s);let E=n.add(o,c);return v=n.mul(v,E),E=n.add(y,w),v=n.sub(v,E),E=n.add(i,s),u=n.add(a,c),E=n.mul(E,u),u=n.add(b,w),E=n.sub(E,u),f=n.mul(p,v),u=n.mul(g,w),f=n.add(u,f),u=n.sub(b,f),f=n.add(b,f),d=n.mul(u,f),b=n.add(y,y),b=n.add(b,y),w=n.mul(p,w),v=n.mul(g,v),b=n.add(b,w),w=n.sub(y,w),w=n.mul(p,w),v=n.add(v,w),y=n.mul(b,v),d=n.add(d,y),y=n.mul(E,v),u=n.mul(m,u),u=n.sub(u,y),y=n.mul(m,b),f=n.mul(E,f),f=n.add(f,y),new h(u,d,f)}subtract(t){return this.add(t.negate())}is0(){return this.equals(h.ZERO)}wNAF(t){return f.wNAFCached(this,u,t,(t=>{const e=n.invertBatch(t.map((t=>t.pz)));return t.map(((t,n)=>t.toAffine(e[n]))).map(h.fromAffine)}))}multiplyUnsafe(t){const r=h.ZERO;if(t===ss)return r;if(a(t),t===os)return this;const{endo:i}=e;if(!i)return f.unsafeLadder(this,t);let{k1neg:s,k1:o,k2neg:c,k2:u}=i.splitScalar(t),l=r,d=r,p=this;while(o>ss||u>ss)o&os&&(l=l.add(p)),u&os&&(d=d.add(p)),p=p.double(),o>>=os,u>>=os;return s&&(l=l.negate()),c&&(d=d.negate()),d=new h(n.mul(d.px,i.beta),d.py,d.pz),l.add(d)}multiply(t){a(t);let r,i,s=t;const{endo:o}=e;if(o){const{k1neg:t,k1:e,k2neg:a,k2:c}=o.splitScalar(s);let{p:u,f:l}=this.wNAF(e),{p:d,f:p}=this.wNAF(c);u=f.constTimeNegate(t,u),d=f.constTimeNegate(a,d),d=new h(n.mul(d.px,o.beta),d.py,d.pz),r=u.add(d),i=l.add(p)}else{const{p:t,f:e}=this.wNAF(s);r=t,i=e}return h.normalizeZ([r,i])[0]}multiplyAndAddUnsafe(t,e,n){const r=h.BASE,i=(t,e)=>e!==ss&&e!==os&&t.equals(r)?t.multiply(e):t.multiplyUnsafe(e),s=i(this,e).add(i(t,n));return s.is0()?void 0:s}toAffine(t){const{px:e,py:r,pz:i}=this,s=this.is0();null==t&&(t=s?n.ONE:n.inv(i));const o=n.mul(e,t),a=n.mul(r,t),c=n.mul(i,t);if(s)return{x:n.ZERO,y:n.ZERO};if(!n.eql(c,n.ONE))throw new Error("invZ was invalid");return{x:o,y:a}}isTorsionFree(){const{h:t,isTorsionFree:n}=e;if(t===os)return!0;if(n)return n(h,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:t,clearCofactor:n}=e;return t===os?this:n?n(h,this):this.multiplyUnsafe(e.h)}toRawBytes(t=!0){return this.assertValidity(),r(h,this,t)}toHex(t=!0){return At(this.toRawBytes(t))}}h.BASE=new h(e.Gx,e.Gy,n.ONE),h.ZERO=new h(n.ZERO,n.ONE,n.ZERO);const d=e.nBitLength,f=he(h,e.endo?Math.ceil(d/2):d);return{CURVE:e,ProjectivePoint:h,normPrivateKeyToScalar:c,weierstrassEquation:s,isWithinCurveOrder:o}}function us(t){const e=de(t);return Mt(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function ls(t){const e=us(t),{Fp:n,n:r}=e,i=n.BYTES+1,s=2*n.BYTES+1;function o(t){return ss<t&&t<n.ORDER}function a(t){return zt(t,r)}function c(t){return Wt(t,r)}const{ProjectivePoint:u,normPrivateKeyToScalar:l,weierstrassEquation:h,isWithinCurveOrder:d}=cs({...e,toBytes(t,e,r){const i=e.toAffine(),s=n.toBytes(i.x),o=Bt;return r?o(Uint8Array.from([e.hasEvenY()?2:3]),s):o(Uint8Array.from([4]),s,n.toBytes(i.y))},fromBytes(t){const e=t.length,r=t[0],a=t.subarray(1);if(e!==i||2!==r&&3!==r){if(e===s&&4===r){const t=n.fromBytes(a.subarray(0,n.BYTES)),e=n.fromBytes(a.subarray(n.BYTES,2*n.BYTES));return{x:t,y:e}}throw new Error(`Point of length ${e} was invalid. Expected ${i} compressed bytes or ${s} uncompressed bytes`)}{const t=Rt(a);if(!o(t))throw new Error("Point is not on curve");const e=h(t);let i;try{i=n.sqrt(e)}catch(c){const t=c instanceof Error?": "+c.message:"";throw new Error("Point is not on curve"+t)}const s=(i&os)===os,u=1===(1&r);return u!==s&&(i=n.neg(i)),{x:t,y:i}}}}),f=t=>At(kt(t,e.nByteLength));function p(t){const e=r>>os;return t>e}function g(t){return p(t)?a(-t):t}const y=(t,e,n)=>Rt(t.slice(e,n));class b{constructor(t,e,n){this.r=t,this.s=e,this.recovery=n,this.assertValidity()}static fromCompact(t){const n=e.nByteLength;return t=Tt("compactSignature",t,2*n),new b(y(t,0,n),y(t,n,2*n))}static fromDER(t){const{r:e,s:n}=is.toSig(Tt("DER",t));return new b(e,n)}assertValidity(){if(!d(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!d(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(t){return new b(this.r,this.s,t)}recoverPublicKey(t){const{r:r,s:i,recovery:s}=this,o=x(Tt("msgHash",t));if(null==s||![0,1,2,3].includes(s))throw new Error("recovery id invalid");const l=2===s||3===s?r+e.n:r;if(l>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const h=0===(1&s)?"02":"03",d=u.fromHex(h+f(l)),p=c(l),g=a(-o*p),y=a(i*p),b=u.BASE.multiplyAndAddUnsafe(d,g,y);if(!b)throw new Error("point at infinify");return b.assertValidity(),b}hasHighS(){return p(this.s)}normalizeS(){return this.hasHighS()?new b(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return It(this.toDERHex())}toDERHex(){return is.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return It(this.toCompactHex())}toCompactHex(){return f(this.r)+f(this.s)}}const w={isValidPrivateKey(t){try{return l(t),!0}catch(e){return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{const t=ae(e.n);return ce(e.randomBytes(t),e.n)},precompute(t=8,e=u.BASE){return e._setWindowSize(t),e.multiply(BigInt(3)),e}};function m(t,e=!0){return u.fromPrivateKey(t).toRawBytes(e)}function v(t){const e=mt(t),n="string"===typeof t,r=(e||n)&&t.length;return e?r===i||r===s:n?r===2*i||r===2*s:t instanceof u}function E(t,e,n=!0){if(v(t))throw new Error("first arg must be private key");if(!v(e))throw new Error("second arg must be public key");const r=u.fromHex(e);return r.multiply(l(t)).toRawBytes(n)}const A=e.bits2int||function(t){const n=Rt(t),r=8*t.length-e.nBitLength;return r>0?n>>BigInt(r):n},x=e.bits2int_modN||function(t){return a(A(t))},S=Ot(e.nBitLength);function _(t){if("bigint"!==typeof t)throw new Error("bigint expected");if(!(ss<=t&&t<S))throw new Error(`bigint expected < 2^${e.nBitLength}`);return kt(t,e.nByteLength)}function I(t,r,i=R){if(["recovered","canonical"].some((t=>t in i)))throw new Error("sign() legacy options not supported");const{hash:s,randomBytes:o}=e;let{lowS:h,prehash:f,extraEntropy:y}=i;null==h&&(h=!0),t=Tt("msgHash",t),f&&(t=Tt("prehashed msgHash",s(t)));const w=x(t),m=l(r),v=[_(m),_(w)];if(null!=y&&!1!==y){const t=!0===y?o(n.BYTES):y;v.push(Tt("extraEntropy",t))}const E=Bt(...v),S=w;function I(t){const e=A(t);if(!d(e))return;const n=c(e),r=u.BASE.multiply(e).toAffine(),i=a(r.x);if(i===ss)return;const s=a(n*a(S+i*m));if(s===ss)return;let o=(r.x===i?0:2)|Number(r.y&os),l=s;return h&&p(s)&&(l=g(s),o^=1),new b(i,l,o)}return{seed:E,k2sig:I}}const R={lowS:e.lowS,prehash:!1},C={lowS:e.lowS,prehash:!1};function k(t,n,r=R){const{seed:i,k2sig:s}=I(t,n,r),o=e,a=Ut(o.hash.outputLen,o.nByteLength,o.hmac);return a(i,s)}function L(t,n,r,i=C){const s=t;if(n=Tt("msgHash",n),r=Tt("publicKey",r),"strict"in i)throw new Error("options.strict was renamed to lowS");const{lowS:o,prehash:l}=i;let h,d;try{if("string"===typeof s||mt(s))try{h=b.fromDER(s)}catch(A){if(!(A instanceof is.Err))throw A;h=b.fromCompact(s)}else{if("object"!==typeof s||"bigint"!==typeof s.r||"bigint"!==typeof s.s)throw new Error("PARSE");{const{r:t,s:e}=s;h=new b(t,e)}}d=u.fromHex(r)}catch(S){if("PARSE"===S.message)throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(o&&h.hasHighS())return!1;l&&(n=e.hash(n));const{r:f,s:p}=h,g=x(n),y=c(p),w=a(g*y),m=a(f*y),v=u.BASE.multiplyAndAddUnsafe(d,w,m)?.toAffine();if(!v)return!1;const E=a(v.x);return E===f}return u.BASE._setWindowSize(8),{CURVE:e,getPublicKey:m,getSharedSecret:E,sign:k,verify:L,ProjectivePoint:u,Signature:b,utils:w}}
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
function hs(t){return{hash:t,hmac:(e,...n)=>wn(t,e,k(...n)),randomBytes:N}}function ds(t,e){const n=e=>ls({...t,...hs(e)});return Object.freeze({...n(e),create:n})}
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const fs=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),ps=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),gs=BigInt(1),ys=BigInt(2),bs=(t,e)=>(t+e/ys)/e;function ws(t){const e=fs,n=BigInt(3),r=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),u=t*t*t%e,l=u*u*t%e,h=Gt(l,n,e)*l%e,d=Gt(h,n,e)*l%e,f=Gt(d,ys,e)*u%e,p=Gt(f,i,e)*f%e,g=Gt(p,s,e)*p%e,y=Gt(g,a,e)*g%e,b=Gt(y,c,e)*y%e,w=Gt(b,a,e)*g%e,m=Gt(w,n,e)*l%e,v=Gt(m,o,e)*p%e,E=Gt(v,r,e)*u%e,A=Gt(E,ys,e);if(!ms.eql(ms.sqr(A),t))throw new Error("Cannot find square root");return A}const ms=ie(fs,void 0,void 0,{sqrt:ws}),vs=ds({a:BigInt(0),b:BigInt(7),Fp:ms,n:ps,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=ps,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-gs*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=n,o=BigInt("0x100000000000000000000000000000000"),a=bs(s*t,e),c=bs(-r*t,e);let u=zt(t-a*n-c*i,e),l=zt(-a*r-c*s,e);const h=u>o,d=l>o;if(h&&(u=e-u),d&&(l=e-l),u>o||l>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:h,k1:u,k2neg:d,k2:l}}}},ts);BigInt(0);vs.ProjectivePoint;function Es(){return vs.utils.randomPrivateKey()}function As(t,e){const n=h.sha256.digest(e instanceof Uint8Array?e:e.subarray());if(g(n))return n.then((({digest:e})=>vs.sign(e,t).toDERRawBytes())).catch((t=>{throw new a.sv(String(t),"ERR_INVALID_INPUT")}));try{return vs.sign(n.digest,t).toDERRawBytes()}catch(r){throw new a.sv(String(r),"ERR_INVALID_INPUT")}}function xs(t,e,n){const r=h.sha256.digest(n instanceof Uint8Array?n:n.subarray());if(g(r))return r.then((({digest:n})=>vs.verify(e,n,t))).catch((t=>{throw new a.sv(String(t),"ERR_INVALID_INPUT")}));try{return vs.verify(e,r.digest,t)}catch(i){throw new a.sv(String(i),"ERR_INVALID_INPUT")}}function Ss(t){const e=vs.ProjectivePoint.fromHex(t).toRawBytes(!0);return e}function _s(t){try{vs.getPublicKey(t,!0)}catch(e){throw new a.sv(String(e),"ERR_INVALID_PRIVATE_KEY")}}function Is(t){try{vs.ProjectivePoint.fromHex(t)}catch(e){throw new a.sv(String(e),"ERR_INVALID_PUBLIC_KEY")}}function Rs(t){try{return vs.getPublicKey(t,!0)}catch(e){throw new a.sv(String(e),"ERR_INVALID_PRIVATE_KEY")}}class Cs{constructor(t){(0,c.Z)(this,"_key",void 0),Is(t),this._key=t}verify(t,e){return xs(this._key,e,t)}marshal(){return Ss(this._key)}get bytes(){return Qe.encode({Type:Je.Secp256k1,Data:this.marshal()}).subarray()}equals(t){return(0,d.f)(this.bytes,t.bytes)}async hash(){const t=h.sha256.digest(this.bytes);let e;return g(t)?({bytes:e}=await t):e=t.bytes,e}}class ks{constructor(t,e){(0,c.Z)(this,"_key",void 0),(0,c.Z)(this,"_publicKey",void 0),this._key=t,this._publicKey=e??Rs(t),_s(this._key),Is(this._publicKey)}sign(t){return As(this._key,t)}get public(){return new Cs(this._publicKey)}marshal(){return this._key}get bytes(){return Xe.encode({Type:Je.Secp256k1,Data:this.marshal()}).subarray()}equals(t){return(0,d.f)(this.bytes,t.bytes)}hash(){const t=h.sha256.digest(this.bytes);return g(t)?t.then((({bytes:t})=>t)):t.bytes}async id(){const t=await this.public.hash();return(0,un.B)(t,"base58btc")}async export(t,e="libp2p-key"){if("libp2p-key"===e)return We(this.bytes,t);throw new a.sv(`export format '${e}' is not supported`,"ERR_INVALID_EXPORT_FORMAT")}}function Ls(t){return new ks(t)}function Ts(t){return new Cs(t)}async function Bs(){const t=Es();return new ks(t)}const Os={rsa:s,ed25519:i,secp256k1:o};function Ns(t){const e=Object.keys(Os).join(" / ");return new a.sv(`invalid or unsupported key type ${t}. Must be ${e}`,"ERR_UNSUPPORTED_KEY_TYPE")}function Ds(t){if(t=t.toLowerCase(),"rsa"===t||"ed25519"===t||"secp256k1"===t)return Os[t];throw Ns(t)}async function Us(t,e){return Ds(t).generateKeyPair(e??2048)}function Ps(t){const e=Qe.decode(t),n=e.Data??new Uint8Array;switch(e.Type){case Je.RSA:return Os.rsa.unmarshalRsaPublicKey(n);case Je.Ed25519:return Os.ed25519.unmarshalEd25519PublicKey(n);case Je.Secp256k1:return Os.secp256k1.unmarshalSecp256k1PublicKey(n);default:throw Ns(e.Type??"unknown")}}function Ms(t,e){return e=(e??"rsa").toLowerCase(),Ds(e),t.bytes}async function Zs(t){const e=Xe.decode(t),n=e.Data??new Uint8Array;switch(e.Type){case Je.RSA:return Os.rsa.unmarshalRsaPrivateKey(n);case Je.Ed25519:return Os.ed25519.unmarshalEd25519PrivateKey(n);case Je.Secp256k1:return Os.secp256k1.unmarshalSecp256k1PrivateKey(n);default:throw Ns(e.Type??"RSA")}}function Fs(t,e){return e=(e??"rsa").toLowerCase(),Ds(e),t.bytes}},2158:function(t,e,n){"use strict";n.d(e,{y:function(){return L}});const r="0.1.0",i="id",s="id/push",o="1.0.0",a="1.0.0";var c,u=n(3781),l=n(7327),h=n(9614),d=(n(7658),n(1439),n(7585),n(5315),n(951)),f=n(4856),p=n(1869),g=n(7275),y=n(1267),b=n(783),w=n(3305),m=n(9174),v=n(2543),E=n(7010),A=n(8631),x=n(5065);(function(t){let e;t.codec=()=>(null==e&&(e=(0,x.yw)(((t,e,n={})=>{if(!1!==n.lengthDelimited&&e.fork(),null!=t.protocolVersion&&(e.uint32(42),e.string(t.protocolVersion)),null!=t.agentVersion&&(e.uint32(50),e.string(t.agentVersion)),null!=t.publicKey&&(e.uint32(10),e.bytes(t.publicKey)),null!=t.listenAddrs)for(const r of t.listenAddrs)e.uint32(18),e.bytes(r);if(null!=t.observedAddr&&(e.uint32(34),e.bytes(t.observedAddr)),null!=t.protocols)for(const r of t.protocols)e.uint32(26),e.string(r);null!=t.signedPeerRecord&&(e.uint32(66),e.bytes(t.signedPeerRecord)),!1!==n.lengthDelimited&&e.ldelim()}),((t,e)=>{const n={listenAddrs:[],protocols:[]},r=null==e?t.len:t.pos+e;while(t.pos<r){const e=t.uint32();switch(e>>>3){case 5:n.protocolVersion=t.string();break;case 6:n.agentVersion=t.string();break;case 1:n.publicKey=t.bytes();break;case 2:n.listenAddrs.push(t.bytes());break;case 4:n.observedAddr=t.bytes();break;case 3:n.protocols.push(t.string());break;case 8:n.signedPeerRecord=t.bytes();break;default:t.skipType(7&e);break}}return n}))),e),t.encode=e=>(0,x.LE)(e,t.codec()),t.decode=e=>(0,x.C6)(e,t.codec())})(c||(c={}));const S=8192,_={protocolPrefix:"ipfs",timeout:6e4,maxInboundStreams:1,maxOutboundStreams:1,maxPushIncomingStreams:1,maxPushOutgoingStreams:1,maxObservedAddresses:10,maxIdentifyMessageSize:8192,runOnConnectionOpen:!0,runOnTransientConnection:!0};var I=new WeakSet;class R{constructor(t,e={}){(0,u.Z)(this,I),(0,l.Z)(this,"identifyProtocolStr",void 0),(0,l.Z)(this,"identifyPushProtocolStr",void 0),(0,l.Z)(this,"host",void 0),(0,l.Z)(this,"started",void 0),(0,l.Z)(this,"timeout",void 0),(0,l.Z)(this,"peerId",void 0),(0,l.Z)(this,"peerStore",void 0),(0,l.Z)(this,"registrar",void 0),(0,l.Z)(this,"connectionManager",void 0),(0,l.Z)(this,"addressManager",void 0),(0,l.Z)(this,"maxInboundStreams",void 0),(0,l.Z)(this,"maxOutboundStreams",void 0),(0,l.Z)(this,"maxPushIncomingStreams",void 0),(0,l.Z)(this,"maxPushOutgoingStreams",void 0),(0,l.Z)(this,"maxIdentifyMessageSize",void 0),(0,l.Z)(this,"maxObservedAddresses",void 0),(0,l.Z)(this,"events",void 0),(0,l.Z)(this,"runOnTransientConnection",void 0),(0,l.Z)(this,"log",void 0),this.started=!1,this.peerId=t.peerId,this.peerStore=t.peerStore,this.registrar=t.registrar,this.addressManager=t.addressManager,this.connectionManager=t.connectionManager,this.events=t.events,this.log=t.logger.forComponent("libp2p:identify"),this.identifyProtocolStr=`/${e.protocolPrefix??_.protocolPrefix}/${i}/${o}`,this.identifyPushProtocolStr=`/${e.protocolPrefix??_.protocolPrefix}/${s}/${a}`,this.timeout=e.timeout??_.timeout,this.maxInboundStreams=e.maxInboundStreams??_.maxInboundStreams,this.maxOutboundStreams=e.maxOutboundStreams??_.maxOutboundStreams,this.maxPushIncomingStreams=e.maxPushIncomingStreams??_.maxPushIncomingStreams,this.maxPushOutgoingStreams=e.maxPushOutgoingStreams??_.maxPushOutgoingStreams,this.maxIdentifyMessageSize=e.maxIdentifyMessageSize??_.maxIdentifyMessageSize,this.maxObservedAddresses=e.maxObservedAddresses??_.maxObservedAddresses,this.runOnTransientConnection=e.runOnTransientConnection??_.runOnTransientConnection,this.host={protocolVersion:`${e.protocolPrefix??_.protocolPrefix}/${r}`,agentVersion:e.agentVersion??`${t.nodeInfo.name}/${t.nodeInfo.version}`},(e.runOnConnectionOpen??_.runOnConnectionOpen)&&t.events.addEventListener("connection:open",(t=>{const e=t.detail;this.identify(e).catch((t=>{this.log.error("error during identify trigged by connection:open",t)}))})),t.events.addEventListener("self:peer:update",(t=>{this.push().catch((t=>{this.log.error(t)}))})),this.host.agentVersion===`${t.nodeInfo.name}/${t.nodeInfo.version}`&&(A.UG||A.$l?this.host.agentVersion+=` UserAgent=${globalThis.process.version}`:(A.jU||A.n2||A.iP||A.b$)&&(this.host.agentVersion+=` UserAgent=${globalThis.navigator.userAgent}`))}isStarted(){return this.started}async start(){this.started||(await this.peerStore.merge(this.peerId,{metadata:{AgentVersion:(0,v.m)(this.host.agentVersion),ProtocolVersion:(0,v.m)(this.host.protocolVersion)}}),await this.registrar.handle(this.identifyProtocolStr,(t=>{this._handleIdentify(t).catch((t=>{this.log.error(t)}))}),{maxInboundStreams:this.maxInboundStreams,maxOutboundStreams:this.maxOutboundStreams,runOnTransientConnection:this.runOnTransientConnection}),await this.registrar.handle(this.identifyPushProtocolStr,(t=>{this._handlePush(t).catch((t=>{this.log.error(t)}))}),{maxInboundStreams:this.maxPushIncomingStreams,maxOutboundStreams:this.maxPushOutgoingStreams,runOnTransientConnection:this.runOnTransientConnection}),this.started=!0)}async stop(){await this.registrar.unhandle(this.identifyProtocolStr),await this.registrar.unhandle(this.identifyPushProtocolStr),this.started=!1}async pushToConnections(t){const e=this.addressManager.getAddresses().map((t=>t.decapsulateCode((0,b.a_)("p2p").code))),n=new g.K({peerId:this.peerId,multiaddrs:e}),r=await y.X.seal(n,this.peerId),i=this.registrar.getProtocols(),s=await this.peerStore.get(this.peerId),o=(0,E.B)(s.metadata.get("AgentVersion")??(0,v.m)(this.host.agentVersion)),a=(0,E.B)(s.metadata.get("ProtocolVersion")??(0,v.m)(this.host.protocolVersion)),u=t.map((async t=>{let n;const s=AbortSignal.timeout(this.timeout);(0,d.W)(1/0,s);try{n=await t.newStream(this.identifyPushProtocolStr,{signal:s,runOnTransientConnection:this.runOnTransientConnection});const u=(0,m.z)(n,{maxDataLength:this.maxIdentifyMessageSize??S}).pb(c);await u.write({listenAddrs:e.map((t=>t.bytes)),signedPeerRecord:r.marshal(),protocols:i,agentVersion:o,protocolVersion:a},{signal:s}),await n.close({signal:s})}catch(u){this.log.error("could not push identify update to peer",u),n?.abort(u)}}));await Promise.all(u)}async push(){if(!this.isStarted())return;const t=[];await Promise.all(this.connectionManager.getConnections().map((async e=>{try{const n=await this.peerStore.get(e.remotePeer);if(!n.protocols.includes(this.identifyPushProtocolStr))return;t.push(e)}catch(n){if(n.code!==f.Vc)throw n}}))),await this.pushToConnections(t)}async _identify(t,e={}){let n;if(null==e.signal){const t=AbortSignal.timeout(this.timeout);(0,d.W)(1/0,t),e={...e,signal:t}}try{n=await t.newStream(this.identifyProtocolStr,{...e,runOnTransientConnection:this.runOnTransientConnection});const r=(0,m.z)(n,{maxDataLength:this.maxIdentifyMessageSize??S}).pb(c),i=await r.read(e);return await n.close(e),i}catch(r){throw this.log.error("error while reading identify message",r),n?.abort(r),r}}async identify(t,e={}){const n=await this._identify(t,e),{publicKey:r,protocols:i,observedAddr:s}=n;if(null==r)throw new f.sv("public key was missing from identify message","ERR_MISSING_PUBLIC_KEY");const o=await(0,p.y5)(r);if(!t.remotePeer.equals(o))throw new f.sv("identified peer does not match the expected peer","ERR_INVALID_PEER");if(this.peerId.equals(o))throw new f.sv("identified peer is our own peer id?","ERR_INVALID_PEER");const a=k(s);return this.log("identify completed for peer %p and protocols %o",o,i),this.log("our observed address is %a",a),null!=a&&this.addressManager.getObservedAddrs().length<(this.maxObservedAddresses??1/0)&&(this.log("storing our observed address %a",a),this.addressManager.addObservedAddr(a)),(0,h.Z)(this,I,C).call(this,t,n)}async _handleIdentify(t){const{connection:e,stream:n}=t,r=AbortSignal.timeout(this.timeout);(0,d.W)(1/0,r);try{const t=this.peerId.publicKey??new Uint8Array(0),i=await this.peerStore.get(this.peerId),s=this.addressManager.getAddresses().map((t=>t.decapsulateCode((0,b.a_)("p2p").code)));let o=i.peerRecordEnvelope;if(s.length>0&&null==o){const t=new g.K({peerId:this.peerId,multiaddrs:s}),e=await y.X.seal(t,this.peerId);o=e.marshal().subarray()}let a=e.remoteAddr.bytes;w.Iq.matches(e.remoteAddr)||(a=void 0);const u=(0,m.z)(n).pb(c);await u.write({protocolVersion:this.host.protocolVersion,agentVersion:this.host.agentVersion,publicKey:t,listenAddrs:s.map((t=>t.bytes)),signedPeerRecord:o,observedAddr:a,protocols:i.protocols},{signal:r}),await n.close({signal:r})}catch(i){this.log.error("could not respond to identify request",i),n.abort(i)}}async _handlePush(t){const{connection:e,stream:n}=t;try{if(this.peerId.equals(e.remotePeer))throw new Error("received push from ourselves?");const t={signal:AbortSignal.timeout(this.timeout)},r=(0,m.z)(n,{maxDataLength:this.maxIdentifyMessageSize??S}).pb(c),i=await r.read(t);await n.close(t),await(0,h.Z)(this,I,C).call(this,e,i)}catch(r){return this.log.error("received invalid message",r),void n.abort(r)}this.log("handled push from %p",e.remotePeer)}}async function C(t,e){if(this.log("received identify from %p",t.remotePeer),null==e)throw new f.sv("message was null or undefined","ERR_INVALID_MESSAGE");const n={};if(e.listenAddrs.length>0&&(n.addresses=e.listenAddrs.map((t=>({isCertified:!1,multiaddr:(0,b.HM)(t)})))),e.protocols.length>0&&(n.protocols=e.protocols),null!=e.publicKey){n.publicKey=e.publicKey;const r=await(0,p.y5)(e.publicKey);if(!r.equals(t.remotePeer))throw new f.sv("public key did not match remote PeerId","ERR_INVALID_PUBLIC_KEY")}let r;if(null!=e.signedPeerRecord){this.log("received signedPeerRecord from %p",t.remotePeer);let i=e.signedPeerRecord;const o=await y.X.openAndCertify(i,g.K.DOMAIN);let a,c=g.K.createFromProtobuf(o.payload);if(!c.peerId.equals(o.peerId))throw new f.sv("signing key does not match PeerId in the PeerRecord","ERR_INVALID_SIGNING_KEY");if(!t.remotePeer.equals(c.peerId))throw new f.sv("signing key does not match remote PeerId","ERR_INVALID_PEER_RECORD_KEY");try{a=await this.peerStore.get(c.peerId)}catch(s){if("ERR_NOT_FOUND"!==s.code)throw s}if(null!=a&&(n.metadata=a.metadata,null!=a.peerRecordEnvelope)){const t=await y.X.createFromProtobuf(a.peerRecordEnvelope),e=g.K.createFromProtobuf(t.payload);e.seqNumber>=c.seqNumber&&(this.log("sequence number was lower or equal to existing sequence number - stored: %d received: %d",e.seqNumber,c.seqNumber),c=e,i=a.peerRecordEnvelope)}n.peerRecordEnvelope=i,n.addresses=c.multiaddrs.map((t=>({isCertified:!0,multiaddr:t}))),r={seq:c.seqNumber,addresses:c.multiaddrs}}else this.log("%p did not send a signed peer record",t.remotePeer);if(this.log("patching %p with",t.remotePeer,n),await this.peerStore.patch(t.remotePeer,n),null!=e.agentVersion||null!=e.protocolVersion){const n={};null!=e.agentVersion&&(n.AgentVersion=(0,v.m)(e.agentVersion)),null!=e.protocolVersion&&(n.ProtocolVersion=(0,v.m)(e.protocolVersion)),this.log("merging %p metadata",t.remotePeer,n),await this.peerStore.merge(t.remotePeer,{metadata:n})}const i={peerId:t.remotePeer,protocolVersion:e.protocolVersion,agentVersion:e.agentVersion,publicKey:e.publicKey,listenAddrs:e.listenAddrs.map((t=>(0,b.HM)(t))),observedAddr:null==e.observedAddr?void 0:(0,b.HM)(e.observedAddr),protocols:e.protocols,signedPeerRecord:r,connection:t};return this.events.safeDispatchEvent("peer:identify",{detail:i}),i}function k(t){if(null!=t&&t.length>0)try{return(0,b.HM)(t)}catch{}}function L(t={}){return e=>new R(e,t)}},4856:function(t,e,n){"use strict";n.d(e,{J5:function(){return o},Vc:function(){return h},_L:function(){return i},l9:function(){return l},sv:function(){return s}});var r=n(7327);class i extends Error{constructor(t="The operation was aborted"){super(t),(0,r.Z)(this,"code",void 0),(0,r.Z)(this,"type",void 0),this.name="AbortError",this.code=i.code,this.type=i.type}}(0,r.Z)(i,"code","ABORT_ERR"),(0,r.Z)(i,"type","aborted");class s extends Error{constructor(t,e,n){super(t),(0,r.Z)(this,"code",void 0),(0,r.Z)(this,"props",void 0),this.code=e,this.name=n?.name??"CodeError",this.props=n??{}}}class o extends AggregateError{constructor(t,e,n,i){super(t,e),(0,r.Z)(this,"code",void 0),(0,r.Z)(this,"props",void 0),this.code=n,this.name=i?.name??"AggregateCodeError",this.props=i??{}}}class a extends Error{constructor(t="Unexpected Peer"){super(t),(0,r.Z)(this,"code",void 0),this.name="UnexpectedPeerError",this.code=a.code}}(0,r.Z)(a,"code","ERR_UNEXPECTED_PEER");class c extends Error{constructor(t="Invalid crypto exchange"){super(t),(0,r.Z)(this,"code",void 0),this.name="InvalidCryptoExchangeError",this.code=c.code}}(0,r.Z)(c,"code","ERR_INVALID_CRYPTO_EXCHANGE");class u extends Error{constructor(t="Invalid crypto transmission"){super(t),(0,r.Z)(this,"code",void 0),this.name="InvalidCryptoTransmissionError",this.code=u.code}}(0,r.Z)(u,"code","ERR_INVALID_CRYPTO_TRANSMISSION");const l="ERR_TIMEOUT",h="ERR_NOT_FOUND"},3844:function(t,e,n){"use strict";n.d(e,{A:function(){return l},L:function(){return c}});var r=n(7327),i=n(714),s=n(8829),o=(n(7658),n(951)),a=new WeakMap;class c extends EventTarget{constructor(){super(),(0,i.Z)(this,a,{writable:!0,value:new Map}),(0,o.W)(1/0,this)}listenerCount(t){const e=(0,s.Z)(this,a).get(t);return null==e?0:e.length}addEventListener(t,e,n){super.addEventListener(t,e,n);let r=(0,s.Z)(this,a).get(t);null==r&&(r=[],(0,s.Z)(this,a).set(t,r)),r.push({callback:e,once:(!0!==n&&!1!==n&&n?.once)??!1})}removeEventListener(t,e,n){super.removeEventListener(t.toString(),e??null,n);let r=(0,s.Z)(this,a).get(t);null!=r&&(r=r.filter((({callback:t})=>t!==e)),(0,s.Z)(this,a).set(t,r))}dispatchEvent(t){const e=super.dispatchEvent(t);let n=(0,s.Z)(this,a).get(t.type);return null==n||(n=n.filter((({once:t})=>!t)),(0,s.Z)(this,a).set(t.type,n)),e}safeDispatchEvent(t,e={}){return this.dispatchEvent(new l(t,e))}}class u extends Event{constructor(t,e){super(t,e),(0,r.Z)(this,"detail",void 0),this.detail=e?.detail}}const l=globalThis.CustomEvent??u},951:function(t,e,n){"use strict";function r(){}n.d(e,{W:function(){return i}});const i=(t,...e)=>{try{r(t,...e)}catch{}}},3117:function(t,e,n){"use strict";n.d(e,{C:function(){return r},I:function(){return i}});const r=Symbol.for("@libp2p/peer-id");function i(t){return null!=t&&Boolean(t[r])}},1508:function(t,e,n){"use strict";n.d(e,{P7:function(){return i},SF:function(){return r}});const r=Symbol.for("@libp2p/transport");var i;(function(t){t[t["FATAL_ALL"]=0]="FATAL_ALL",t[t["NO_FATAL"]=1]="NO_FATAL"})(i||(i={}))},9239:function(t,e,n){"use strict";n.d(e,{s:function(){return s}});var r=n(7327);class i extends Error{constructor(t="The operation was aborted"){super(t),(0,r.Z)(this,"code",void 0),(0,r.Z)(this,"type",void 0),this.code=i.code,this.type=i.type}}(0,r.Z)(i,"code","ABORT_ERR"),(0,r.Z)(i,"type","aborted");class s extends Error{constructor(t,e,n){super(t),(0,r.Z)(this,"code",void 0),(0,r.Z)(this,"props",void 0),this.code=e,this.name=n?.name??"CodeError",this.props=n??{}}}},2521:function(t,e,n){"use strict";n.d(e,{R:function(){return q}});var r=n(7327),i=(n(1439),n(7585),n(5315),n(7658),n(4856));function s(t){if(null!=t){if("function"===typeof t[Symbol.iterator])return t[Symbol.iterator]();if("function"===typeof t[Symbol.asyncIterator])return t[Symbol.asyncIterator]();if("function"===typeof t.next)return t}throw new Error("argument is not an iterator or iterable")}function o(t){return null!=t&&("function"===typeof t.then&&"function"===typeof t.catch&&"function"===typeof t.finally)}function a(t,e){const n=s(t).return?.();o(n)&&n.catch((t=>{e.error("could not cause iterator to return",t)}))}var c,u=n(5232),l=n(5211),h=n(8817),d=n(7998),f=n(9109);(function(t){t[t["NEW_STREAM"]=0]="NEW_STREAM",t[t["MESSAGE_RECEIVER"]=1]="MESSAGE_RECEIVER",t[t["MESSAGE_INITIATOR"]=2]="MESSAGE_INITIATOR",t[t["CLOSE_RECEIVER"]=3]="CLOSE_RECEIVER",t[t["CLOSE_INITIATOR"]=4]="CLOSE_INITIATOR",t[t["RESET_RECEIVER"]=5]="RESET_RECEIVER",t[t["RESET_INITIATOR"]=6]="RESET_INITIATOR"})(c||(c={}));const p=Object.freeze({0:"NEW_STREAM",1:"MESSAGE_RECEIVER",2:"MESSAGE_INITIATOR",3:"CLOSE_RECEIVER",4:"CLOSE_INITIATOR",5:"RESET_RECEIVER",6:"RESET_INITIATOR"}),g=Object.freeze({NEW_STREAM:c.NEW_STREAM,MESSAGE:c.MESSAGE_INITIATOR,CLOSE:c.CLOSE_INITIATOR,RESET:c.RESET_INITIATOR}),y=Object.freeze({MESSAGE:c.MESSAGE_RECEIVER,CLOSE:c.CLOSE_RECEIVER,RESET:c.RESET_RECEIVER}),b=1<<20,w=4<<20;class m{constructor(t=b,e=w){(0,r.Z)(this,"_buffer",void 0),(0,r.Z)(this,"_headerInfo",void 0),(0,r.Z)(this,"_maxMessageSize",void 0),(0,r.Z)(this,"_maxUnprocessedMessageQueueSize",void 0),this._buffer=new f.H,this._headerInfo=null,this._maxMessageSize=t,this._maxUnprocessedMessageQueueSize=e}write(t){if(null==t||0===t.length)return[];if(this._buffer.append(t),this._buffer.byteLength>this._maxUnprocessedMessageQueueSize)throw Object.assign(new Error("unprocessed message queue size too large!"),{code:"ERR_MSG_QUEUE_TOO_BIG"});const e=[];while(0!==this._buffer.length){if(null==this._headerInfo)try{this._headerInfo=this._decodeHeader(this._buffer)}catch(n){if("ERR_MSG_TOO_BIG"===n.code)throw n;break}const{id:t,type:r,length:i,offset:s}=this._headerInfo,o=this._buffer.length-s;if(o<i)break;const a={id:t,type:r};r!==c.NEW_STREAM&&r!==c.MESSAGE_INITIATOR&&r!==c.MESSAGE_RECEIVER||(a.data=this._buffer.sublist(s,s+i)),e.push(a),this._buffer.consume(s+i),this._headerInfo=null}return e}_decodeHeader(t){const{value:e,offset:n}=A(t),{value:r,offset:i}=A(t,n),s=7&e;if(null==p[s])throw new Error(`Invalid type received: ${s}`);if(r>this._maxMessageSize)throw Object.assign(new Error("message size too large!"),{code:"ERR_MSG_TOO_BIG"});return{id:e>>3,type:s,offset:n+i,length:r}}}const v=128,E=127;function A(t,e=0){let n,r=0,i=0,s=e;const o=t.length;do{if(s>=o||i>49)throw e=0,new RangeError("Could not decode varint");n=t.get(s++),r+=i<28?(n&E)<<i:(n&E)*Math.pow(2,i),i+=7}while(n>=v);return e=s-e,{value:r,offset:e}}var x=n(645),S=n(800);const _=10240;class I{constructor(){(0,r.Z)(this,"_pool",void 0),(0,r.Z)(this,"_poolOffset",void 0),this._pool=(0,S.E)(_),this._poolOffset=0}write(t,e){const n=this._pool;let r=this._poolOffset;x.cv(t.id<<3|t.type,n,r),r+=x.P$(t.id<<3|t.type),t.type!==c.NEW_STREAM&&t.type!==c.MESSAGE_INITIATOR&&t.type!==c.MESSAGE_RECEIVER||null==t.data?(x.cv(0,n,r),r+=x.P$(0)):(x.cv(t.data.length,n,r),r+=x.P$(t.data.length));const i=n.subarray(this._poolOffset,r);_-r<100?(this._pool=(0,S.E)(_),this._poolOffset=0):this._poolOffset=r,e.append(i),t.type!==c.NEW_STREAM&&t.type!==c.MESSAGE_INITIATOR&&t.type!==c.MESSAGE_RECEIVER||null==t.data||e.append(t.data)}}const R=new I;async function*C(t){for await(const e of t){const t=new f.H;R.write(e,t),yield t}}var k=n(4622),L=n(1393);const T="ERR_STREAM_RESET",B="ERR_SINK_INVALID_STATE",O=5e3;function N(t){return null!=t&&("function"===typeof t.then&&"function"===typeof t.catch&&"function"===typeof t.finally)}class D{constructor(t){(0,r.Z)(this,"id",void 0),(0,r.Z)(this,"direction",void 0),(0,r.Z)(this,"timeline",void 0),(0,r.Z)(this,"protocol",void 0),(0,r.Z)(this,"metadata",void 0),(0,r.Z)(this,"source",void 0),(0,r.Z)(this,"status",void 0),(0,r.Z)(this,"readStatus",void 0),(0,r.Z)(this,"writeStatus",void 0),(0,r.Z)(this,"log",void 0),(0,r.Z)(this,"sinkController",void 0),(0,r.Z)(this,"sinkEnd",void 0),(0,r.Z)(this,"closed",void 0),(0,r.Z)(this,"endErr",void 0),(0,r.Z)(this,"streamSource",void 0),(0,r.Z)(this,"onEnd",void 0),(0,r.Z)(this,"onCloseRead",void 0),(0,r.Z)(this,"onCloseWrite",void 0),(0,r.Z)(this,"onReset",void 0),(0,r.Z)(this,"onAbort",void 0),(0,r.Z)(this,"sendCloseWriteTimeout",void 0),(0,r.Z)(this,"sendingData",void 0),this.sinkController=new AbortController,this.sinkEnd=(0,k.Z)(),this.closed=(0,k.Z)(),this.log=t.log,this.status="open",this.readStatus="ready",this.writeStatus="ready",this.id=t.id,this.metadata=t.metadata??{},this.direction=t.direction,this.timeline={open:Date.now()},this.sendCloseWriteTimeout=t.sendCloseWriteTimeout??O,this.onEnd=t.onEnd,this.onCloseRead=t?.onCloseRead,this.onCloseWrite=t?.onCloseWrite,this.onReset=t?.onReset,this.onAbort=t?.onAbort,this.source=this.streamSource=(0,h.dT)({onEnd:t=>{null!=t?this.log.trace("source ended with error",t):this.log.trace("source ended"),this.onSourceEnd(t)}}),this.sink=this.sink.bind(this)}async sink(t){if("ready"!==this.writeStatus)throw new i.sv(`writable end state is "${this.writeStatus}" not "ready"`,B);try{this.writeStatus="writing";const e={signal:this.sinkController.signal};if("outbound"===this.direction){const t=this.sendNewStream(e);N(t)&&await t}const n=()=>{a(t,this.log)};try{this.sinkController.signal.addEventListener("abort",n),this.log.trace("sink reading from source");for await(let n of t){n=n instanceof Uint8Array?new f.H(n):n;const t=this.sendData(n,e);N(t)&&(this.sendingData=(0,k.Z)(),await t,this.sendingData.resolve(),this.sendingData=void 0)}}finally{this.sinkController.signal.removeEventListener("abort",n)}this.log.trace('sink finished reading from source, write status is "%s"',this.writeStatus),"writing"===this.writeStatus&&(this.writeStatus="closing",this.log.trace("send close write to remote"),await this.sendCloseWrite({signal:AbortSignal.timeout(this.sendCloseWriteTimeout)}),this.writeStatus="closed"),this.onSinkEnd()}catch(e){throw this.log.trace("sink ended with error, calling abort with error",e),this.abort(e),e}finally{this.log.trace("resolve sink end"),this.sinkEnd.resolve()}}onSourceEnd(t){null==this.timeline.closeRead&&(this.timeline.closeRead=Date.now(),this.readStatus="closed",null!=t&&null==this.endErr&&(this.endErr=t),this.onCloseRead?.(),null!=this.timeline.closeWrite?(this.log.trace("source and sink ended"),this.timeline.close=Date.now(),"aborted"!==this.status&&"reset"!==this.status&&(this.status="closed"),null!=this.onEnd&&this.onEnd(this.endErr),this.closed.resolve()):this.log.trace("source ended, waiting for sink to end"))}onSinkEnd(t){null==this.timeline.closeWrite&&(this.timeline.closeWrite=Date.now(),this.writeStatus="closed",null!=t&&null==this.endErr&&(this.endErr=t),this.onCloseWrite?.(),null!=this.timeline.closeRead?(this.log.trace("sink and source ended"),this.timeline.close=Date.now(),"aborted"!==this.status&&"reset"!==this.status&&(this.status="closed"),null!=this.onEnd&&this.onEnd(this.endErr),this.closed.resolve()):this.log.trace("sink ended, waiting for source to end"))}async close(t){this.log.trace("closing gracefully"),this.status="closing",await(0,L.h)(Promise.all([this.closeWrite(t),this.closeRead(t),this.closed.promise]),t?.signal),this.status="closed",this.log.trace("closed gracefully")}async closeRead(t={}){if("closing"===this.readStatus||"closed"===this.readStatus)return;this.log.trace('closing readable end of stream with starting read status "%s"',this.readStatus);const e=this.readStatus;this.readStatus="closing","reset"!==this.status&&"aborted"!==this.status&&null==this.timeline.closeRead&&(this.log.trace("send close read to remote"),await this.sendCloseRead(t)),"ready"===e&&(this.log.trace("ending internal source queue with %d queued bytes",this.streamSource.readableLength),this.streamSource.end()),this.log.trace("closed readable end of stream")}async closeWrite(t={}){"closing"!==this.writeStatus&&"closed"!==this.writeStatus&&(this.log.trace('closing writable end of stream with starting write status "%s"',this.writeStatus),"ready"===this.writeStatus&&(this.log.trace("sink was never sunk, sink an empty array"),await(0,L.h)(this.sink([]),t.signal)),"writing"===this.writeStatus&&(null!=this.sendingData&&await(0,L.h)(this.sendingData.promise,t.signal),this.log.trace("aborting source passed to .sink"),this.sinkController.abort(),await(0,L.h)(this.sinkEnd.promise,t.signal)),this.writeStatus="closed",this.log.trace("closed writable end of stream"))}abort(t){if("closed"===this.status||"aborted"===this.status||"reset"===this.status)return;this.log("abort with error",t),this.log("try to send reset to remote");const e=this.sendReset();N(e)&&e.catch((t=>{this.log.error("error sending reset message",t)})),this.status="aborted",this.timeline.abort=Date.now(),this._closeSinkAndSource(t),this.onAbort?.(t)}reset(){if("closed"===this.status||"aborted"===this.status||"reset"===this.status)return;const t=new i.sv("stream reset",T);this.status="reset",this.timeline.reset=Date.now(),this._closeSinkAndSource(t),this.onReset?.()}_closeSinkAndSource(t){this._closeSink(t),this._closeSource(t)}_closeSink(t){"writing"===this.writeStatus&&(this.log.trace("end sink source"),this.sinkController.abort()),this.onSinkEnd(t)}_closeSource(t){"closing"!==this.readStatus&&"closed"!==this.readStatus&&(this.log.trace("ending source with %d bytes to be read by consumer",this.streamSource.readableLength),this.readStatus="closing",this.streamSource.end(t))}remoteCloseWrite(){"closing"!==this.readStatus&&"closed"!==this.readStatus?(this.log.trace("remote close write"),this._closeSource()):this.log("received remote close write but local source is already closed")}remoteCloseRead(){"closing"!==this.writeStatus&&"closed"!==this.writeStatus?(this.log.trace("remote close read"),this._closeSink()):this.log("received remote close read but local sink is already closed")}destroy(){"closed"!==this.status&&"aborted"!==this.status&&"reset"!==this.status?(this.log.trace("stream destroyed"),this._closeSinkAndSource()):this.log("received destroy but we are already closed")}sourcePush(t){this.streamSource.push(t)}sourceReadableLength(){return this.streamSource.readableLength}}var U=n(2543);class P extends D{constructor(t){super(t),(0,r.Z)(this,"name",void 0),(0,r.Z)(this,"streamId",void 0),(0,r.Z)(this,"send",void 0),(0,r.Z)(this,"types",void 0),(0,r.Z)(this,"maxDataSize",void 0),this.types="outbound"===t.direction?g:y,this.send=t.send,this.name=t.name,this.streamId=t.streamId,this.maxDataSize=t.maxDataSize}async sendNewStream(){await this.send({id:this.streamId,type:g.NEW_STREAM,data:new f.H((0,U.m)(this.name))})}async sendData(t){t=t.sublist();while(t.byteLength>0){const e=Math.min(t.byteLength,this.maxDataSize);await this.send({id:this.streamId,type:this.types.MESSAGE,data:t.sublist(0,e)}),t.consume(e)}}async sendReset(){await this.send({id:this.streamId,type:this.types.RESET})}async sendCloseWrite(){await this.send({id:this.streamId,type:this.types.CLOSE})}async sendCloseRead(){}}function M(t){const{id:e,name:n,send:r,onEnd:i,type:s="initiator",maxMsgSize:o=b}=t;return new P({id:"initiator"===s?`i${e}`:`r${e}`,streamId:e,name:`${null==n?e:n}`,direction:"initiator"===s?"outbound":"inbound",maxDataSize:o,onEnd:i,send:r,log:t.logger.forComponent(`libp2p:mplex:stream:${s}:${e}`)})}const Z=1024,F=1024,V=4194304,H=5,$=500;function j(t){const e={...t,type:`${p[t.type]} (${t.type})`};return t.type===c.NEW_STREAM&&(e.data=(0,d.BB)(t.data instanceof Uint8Array?t.data:t.data.subarray())),t.type!==c.MESSAGE_INITIATOR&&t.type!==c.MESSAGE_RECEIVER||(e.data=(0,d.BB)(t.data instanceof Uint8Array?t.data:t.data.subarray(),"base16")),e}class K{constructor(t,e){(0,r.Z)(this,"protocol","/mplex/6.7.0"),(0,r.Z)(this,"sink",void 0),(0,r.Z)(this,"source",void 0),(0,r.Z)(this,"log",void 0),(0,r.Z)(this,"_streamId",void 0),(0,r.Z)(this,"_streams",void 0),(0,r.Z)(this,"_init",void 0),(0,r.Z)(this,"_source",void 0),(0,r.Z)(this,"closeController",void 0),(0,r.Z)(this,"rateLimiter",void 0),(0,r.Z)(this,"closeTimeout",void 0),(0,r.Z)(this,"logger",void 0),e=e??{},this.log=t.logger.forComponent("libp2p:mplex"),this.logger=t.logger,this._streamId=0,this._streams={initiators:new Map,receivers:new Map},this._init=e,this.closeTimeout=e.closeTimeout??$,this.sink=this._createSink(),this._source=(0,h.dT)({objectMode:!0,onEnd:()=>{for(const t of this._streams.initiators.values())t.destroy();for(const t of this._streams.receivers.values())t.destroy()}}),this.source=(0,l.z)(this._source,(t=>C(t))),this.closeController=new AbortController,this.rateLimiter=new u.p({points:e.disconnectThreshold??H,duration:1})}get streams(){const t=[];for(const e of this._streams.initiators.values())t.push(e);for(const e of this._streams.receivers.values())t.push(e);return t}newStream(t){if(this.closeController.signal.aborted)throw new Error("Muxer already closed");const e=this._streamId++;t=null==t?e.toString():t.toString();const n=this._streams.initiators;return this._newStream({id:e,name:t,type:"initiator",registry:n})}async close(t){if(this.closeController.signal.aborted)return;const e=t?.signal??AbortSignal.timeout(this.closeTimeout);try{await Promise.all(this.streams.map((async t=>t.close({signal:e})))),this._source.end(),await this._source.onEmpty({signal:e}),this.closeController.abort()}catch(n){this.abort(n)}}abort(t){this.closeController.signal.aborted||(this.streams.forEach((e=>{e.abort(t)})),this.closeController.abort(t))}_newReceiverStream(t){const{id:e,name:n}=t,r=this._streams.receivers;return this._newStream({id:e,name:n,type:"receiver",registry:r})}_newStream(t){const{id:e,name:n,type:r,registry:s}=t;if(this.log("new %s stream %s",r,e),"initiator"===r&&this._streams.initiators.size===(this._init.maxOutboundStreams??F))throw new i.sv("Too many outbound streams open","ERR_TOO_MANY_OUTBOUND_STREAMS");if(s.has(e))throw new Error(`${r} stream ${e} already exists!`);const o=async t=>{this.log.enabled&&this.log.trace("%s stream %s send",r,e,j(t)),this._source.push(t)},a=()=>{this.log("%s stream with id %s and protocol %s ended",r,e,c.protocol),s.delete(e),null!=this._init.onStreamEnd&&this._init.onStreamEnd(c)},c=M({id:e,name:n,send:o,type:r,onEnd:a,maxMsgSize:this._init.maxMsgSize,logger:this.logger});return s.set(e,c),c}_createSink(){const t=async t=>{const e=()=>{a(t,this.log)};this.closeController.signal.addEventListener("abort",e);try{const e=new m(this._init.maxMsgSize,this._init.maxUnprocessedMessageQueueSize);for await(const n of t)for(const t of e.write(n))await this._handleIncoming(t);this._source.end()}catch(n){this.log("error in sink",n),this._source.end(n)}finally{this.closeController.signal.removeEventListener("abort",e)}};return t}async _handleIncoming(t){const{id:e,type:n}=t;if(this.log.enabled&&this.log.trace("incoming message",j(t)),t.type===c.NEW_STREAM){if(this._streams.receivers.size===(this._init.maxInboundStreams??Z)){this.log("too many inbound streams open"),this._source.push({id:e,type:c.RESET_RECEIVER});try{await this.rateLimiter.consume("new-stream",1)}catch{return this.log("rate limit hit when opening too many new streams over the inbound stream limit - closing remote connection"),void this.abort(new Error("Too many open streams"))}return}const n=this._newReceiverStream({id:e,name:(0,d.BB)(t.data instanceof Uint8Array?t.data:t.data.subarray())});return void(null!=this._init.onIncomingStream&&this._init.onIncomingStream(n))}const r=1===(1&n)?this._streams.initiators:this._streams.receivers,s=r.get(e);if(null==s){this.log("missing stream %s for message type %s",e,p[n]);try{await this.rateLimiter.consume("missing-stream",1)}catch{return this.log("rate limit hit when receiving messages for streams that do not exist - closing remote connection"),void this.abort(new Error("Too many messages for missing streams"))}return}const o=this._init.maxStreamBufferSize??V;try{switch(n){case c.MESSAGE_INITIATOR:case c.MESSAGE_RECEIVER:if(s.sourceReadableLength()>o)throw this._source.push({id:t.id,type:n===c.MESSAGE_INITIATOR?c.RESET_RECEIVER:c.RESET_INITIATOR}),new i.sv("Input buffer full - increase Mplex maxBufferSize to accommodate slow consumers","ERR_STREAM_INPUT_BUFFER_FULL");s.sourcePush(t.data);break;case c.CLOSE_INITIATOR:case c.CLOSE_RECEIVER:s.remoteCloseWrite();break;case c.RESET_INITIATOR:case c.RESET_RECEIVER:s.reset();break;default:this.log("unknown message type %s",n)}}catch(a){this.log.error("error while processing message",a),s.abort(a)}}}class z{constructor(t,e={}){(0,r.Z)(this,"protocol","/mplex/6.7.0"),(0,r.Z)(this,"_init",void 0),(0,r.Z)(this,"components",void 0),this.components=t,this._init=e}createStreamMuxer(t={}){return new K(this.components,{...t,...this._init})}}function q(t={}){return e=>new z(e,t)}},7686:function(t,e,n){"use strict";n.d(e,{j:function(){return a}});var r=n(7327),i=n(1869),s=n(2249);let o;o=Symbol.iterator;class a{constructor(t){if((0,r.Z)(this,"map",void 0),this.map=new Map,null!=t)for(const[e,n]of t.entries())this.map.set(e.toString(),n)}[o](){return this.entries()}clear(){this.map.clear()}delete(t){return this.map.delete(t.toString())}entries(){return(0,s.D)(this.map.entries(),(t=>[(0,i.jE)(t[0]),t[1]]))}forEach(t){this.map.forEach(((e,n)=>{t(e,(0,i.jE)(n),this)}))}get(t){return this.map.get(t.toString())}has(t){return this.map.has(t.toString())}set(t,e){this.map.set(t.toString(),e)}keys(){return(0,s.D)(this.map.keys(),(t=>(0,i.jE)(t)))}values(){return this.map.values()}get size(){return this.map.size}}},2249:function(t,e,n){"use strict";function r(t,e){const n={[Symbol.iterator]:()=>n,next:()=>{const n=t.next(),r=n.value;if(!0===n.done||null==r){const t={done:!0,value:void 0};return t}return{done:!1,value:e(r)}}};return n}n.d(e,{D:function(){return r}})},1869:function(t,e,n){"use strict";n.d(e,{cv:function(){return _},jE:function(){return S},vL:function(){return x},y5:function(){return R}});var r=n(7327),i=(n(1439),n(7585),n(5315),n(4856)),s=n(3117),o=n(4722),a=n(7738),c=n(3406),u=n(4320),l=n(5968),h=n(441),d=n(7708);let f;const p=Symbol.for("nodejs.util.inspect.custom"),g=Object.values(a.gh).map((t=>t.decoder)).reduce(((t,e)=>t.or(e)),a.gh.identity.decoder),y=114,b=36,w=37;f=Symbol.toStringTag;class m{constructor(t){(0,r.Z)(this,"type",void 0),(0,r.Z)(this,"multihash",void 0),(0,r.Z)(this,"privateKey",void 0),(0,r.Z)(this,"publicKey",void 0),(0,r.Z)(this,"string",void 0),(0,r.Z)(this,s.C,!0),this.type=t.type,this.multihash=t.multihash,this.privateKey=t.privateKey,Object.defineProperty(this,"string",{enumerable:!1,writable:!0})}get[f](){return`PeerId(${this.toString()})`}toString(){return null==this.string&&(this.string=o.base58btc.encode(this.multihash.bytes).slice(1)),this.string}toCID(){return c.k0.createV1(y,this.multihash)}toBytes(){return this.multihash.bytes}toJSON(){return this.toString()}equals(t){if(null==t)return!1;if(t instanceof Uint8Array)return(0,d.f)(this.multihash.bytes,t);if("string"===typeof t)return S(t).equals(this);if(null!=t?.multihash?.bytes)return(0,d.f)(this.multihash.bytes,t.multihash.bytes);throw new Error("not valid Id")}[p](){return`PeerId(${this.toString()})`}}class v extends m{constructor(t){super({...t,type:"RSA"}),(0,r.Z)(this,"type","RSA"),(0,r.Z)(this,"publicKey",void 0),this.publicKey=t.publicKey}}class E extends m{constructor(t){super({...t,type:"Ed25519"}),(0,r.Z)(this,"type","Ed25519"),(0,r.Z)(this,"publicKey",void 0),this.publicKey=t.multihash.digest}}class A extends m{constructor(t){super({...t,type:"secp256k1"}),(0,r.Z)(this,"type","secp256k1"),(0,r.Z)(this,"publicKey",void 0),this.publicKey=t.multihash.digest}}function x(t){if("RSA"===t.type)return new v(t);if("Ed25519"===t.type)return new E(t);if("secp256k1"===t.type)return new A(t);throw new i.sv("Not a PeerId","ERR_INVALID_PARAMETERS")}function S(t,e){if(e=e??g,"1"===t.charAt(0)||"Q"===t.charAt(0)){const e=u.Jx(o.base58btc.decode(`z${t}`));return t.startsWith("12D")?new E({multihash:e}):t.startsWith("16U")?new A({multihash:e}):new v({multihash:e})}return _(g.decode(t))}function _(t){try{const e=u.Jx(t);if(e.code===l.identity.code){if(e.digest.length===b)return new E({multihash:e});if(e.digest.length===w)return new A({multihash:e})}if(e.code===h.sha256.code)return new v({multihash:e})}catch{return I(c.k0.decode(t))}throw new Error("Supplied PeerID CID is invalid")}function I(t){if(null==t||null==t.multihash||null==t.version||1===t.version&&t.code!==y)throw new Error("Supplied PeerID CID is invalid");const e=t.multihash;if(e.code===h.sha256.code)return new v({multihash:t.multihash});if(e.code===l.identity.code){if(e.digest.length===b)return new E({multihash:t.multihash});if(e.digest.length===w)return new A({multihash:t.multihash})}throw new Error("Supplied PeerID CID is invalid")}async function R(t,e){return t.length===b?new E({multihash:u.Ue(l.identity.code,t),privateKey:e}):t.length===w?new A({multihash:u.Ue(l.identity.code,t),privateKey:e}):new v({multihash:await h.sha256.digest(t),publicKey:t,privateKey:e})}},1267:function(t,e,n){"use strict";n.d(e,{X:function(){return p}});var r=n(7327),i=n(5326),s=n(4856),o=n(1869),a=n(645),c=n(9109),u=n(7708),l=n(2543);const h={ERR_SIGNATURE_NOT_VALID:"ERR_SIGNATURE_NOT_VALID"};n(1439),n(7585),n(5315);var d,f=n(5065);(function(t){let e;t.codec=()=>(null==e&&(e=(0,f.yw)(((t,e,n={})=>{!1!==n.lengthDelimited&&e.fork(),null!=t.publicKey&&t.publicKey.byteLength>0&&(e.uint32(10),e.bytes(t.publicKey)),null!=t.payloadType&&t.payloadType.byteLength>0&&(e.uint32(18),e.bytes(t.payloadType)),null!=t.payload&&t.payload.byteLength>0&&(e.uint32(26),e.bytes(t.payload)),null!=t.signature&&t.signature.byteLength>0&&(e.uint32(42),e.bytes(t.signature)),!1!==n.lengthDelimited&&e.ldelim()}),((t,e)=>{const n={publicKey:new Uint8Array(0),payloadType:new Uint8Array(0),payload:new Uint8Array(0),signature:new Uint8Array(0)},r=null==e?t.len:t.pos+e;while(t.pos<r){const e=t.uint32();switch(e>>>3){case 1:n.publicKey=t.bytes();break;case 2:n.payloadType=t.bytes();break;case 3:n.payload=t.bytes();break;case 5:n.signature=t.bytes();break;default:t.skipType(7&e);break}}return n}))),e),t.encode=e=>(0,f.LE)(e,t.codec()),t.decode=e=>(0,f.C6)(e,t.codec())})(d||(d={}));class p{constructor(t){(0,r.Z)(this,"peerId",void 0),(0,r.Z)(this,"payloadType",void 0),(0,r.Z)(this,"payload",void 0),(0,r.Z)(this,"signature",void 0),(0,r.Z)(this,"marshaled",void 0);const{peerId:e,payloadType:n,payload:i,signature:s}=t;this.peerId=e,this.payloadType=n,this.payload=i,this.signature=s}marshal(){if(null==this.peerId.publicKey)throw new Error("Missing public key");return null==this.marshaled&&(this.marshaled=d.encode({publicKey:this.peerId.publicKey,payloadType:this.payloadType,payload:this.payload.subarray(),signature:this.signature})),this.marshaled}equals(t){return(0,u.f)(this.marshal(),t.marshal())}async validate(t){const e=g(t,this.payloadType,this.payload);if(null==this.peerId.publicKey)throw new Error("Missing public key");const n=(0,i.lR)(this.peerId.publicKey);return n.verify(e.subarray(),this.signature)}}(0,r.Z)(p,"createFromProtobuf",(async t=>{const e=d.decode(t),n=await(0,o.y5)(e.publicKey);return new p({peerId:n,payloadType:e.payloadType,payload:e.payload,signature:e.signature})})),(0,r.Z)(p,"seal",(async(t,e)=>{if(null==e.privateKey)throw new Error("Missing private key");const n=t.domain,r=t.codec,s=t.marshal(),o=g(n,r,s),a=await(0,i.r3)(e.privateKey),c=await a.sign(o.subarray());return new p({peerId:e,payloadType:r,payload:s,signature:c})})),(0,r.Z)(p,"openAndCertify",(async(t,e)=>{const n=await p.createFromProtobuf(t),r=await n.validate(e);if(!r)throw new s.sv("envelope signature is not valid for the given domain",h.ERR_SIGNATURE_NOT_VALID);return n}));const g=(t,e,n)=>{const r=(0,l.m)(t),i=a.cv(r.byteLength),s=a.cv(e.length),o=a.cv(n.length);return new c.H(i,r,s,e,o,n)}},7275:function(t,e,n){"use strict";n.d(e,{K:function(){return h}});var r=n(7327),i=n(1869);function s(t,e){const n=(t,e)=>t.toString().localeCompare(e.toString());return t.length===e.length&&(e.sort(n),t.sort(n).every(((t,n)=>e[n].equals(t))))}var o=n(783);n(1439),n(7585),n(5315);const a="libp2p-peer-record",c=Uint8Array.from([3,1]);n(7658);var u,l=n(5065);(function(t){let e,n;(function(t){let e;t.codec=()=>(null==e&&(e=(0,l.yw)(((t,e,n={})=>{!1!==n.lengthDelimited&&e.fork(),null!=t.multiaddr&&t.multiaddr.byteLength>0&&(e.uint32(10),e.bytes(t.multiaddr)),!1!==n.lengthDelimited&&e.ldelim()}),((t,e)=>{const n={multiaddr:new Uint8Array(0)},r=null==e?t.len:t.pos+e;while(t.pos<r){const e=t.uint32();switch(e>>>3){case 1:n.multiaddr=t.bytes();break;default:t.skipType(7&e);break}}return n}))),e),t.encode=e=>(0,l.LE)(e,t.codec()),t.decode=e=>(0,l.C6)(e,t.codec())})(e=t.AddressInfo||(t.AddressInfo={})),t.codec=()=>(null==n&&(n=(0,l.yw)(((e,n,r={})=>{if(!1!==r.lengthDelimited&&n.fork(),null!=e.peerId&&e.peerId.byteLength>0&&(n.uint32(10),n.bytes(e.peerId)),null!=e.seq&&0n!==e.seq&&(n.uint32(16),n.uint64(e.seq)),null!=e.addresses)for(const i of e.addresses)n.uint32(26),t.AddressInfo.codec().encode(i,n);!1!==r.lengthDelimited&&n.ldelim()}),((e,n)=>{const r={peerId:new Uint8Array(0),seq:0n,addresses:[]},i=null==n?e.len:e.pos+n;while(e.pos<i){const n=e.uint32();switch(n>>>3){case 1:r.peerId=e.bytes();break;case 2:r.seq=e.uint64();break;case 3:r.addresses.push(t.AddressInfo.codec().decode(e,e.uint32()));break;default:e.skipType(7&n);break}}return r}))),n),t.encode=e=>(0,l.LE)(e,t.codec()),t.decode=e=>(0,l.C6)(e,t.codec())})(u||(u={}));class h{constructor(t){(0,r.Z)(this,"peerId",void 0),(0,r.Z)(this,"multiaddrs",void 0),(0,r.Z)(this,"seqNumber",void 0),(0,r.Z)(this,"domain",h.DOMAIN),(0,r.Z)(this,"codec",h.CODEC),(0,r.Z)(this,"marshaled",void 0);const{peerId:e,multiaddrs:n,seqNumber:i}=t;this.peerId=e,this.multiaddrs=n??[],this.seqNumber=i??BigInt(Date.now())}marshal(){return null==this.marshaled&&(this.marshaled=u.encode({peerId:this.peerId.toBytes(),seq:BigInt(this.seqNumber),addresses:this.multiaddrs.map((t=>({multiaddr:t.bytes})))})),this.marshaled}equals(t){return t instanceof h&&(!!this.peerId.equals(t.peerId)&&(this.seqNumber===t.seqNumber&&!!s(this.multiaddrs,t.multiaddrs)))}}(0,r.Z)(h,"createFromProtobuf",(t=>{const e=u.decode(t),n=(0,i.cv)(e.peerId),r=(e.addresses??[]).map((t=>(0,o.HM)(t.multiaddr))),s=e.seq;return new h({peerId:n,multiaddrs:r,seqNumber:s})})),(0,r.Z)(h,"DOMAIN",a),(0,r.Z)(h,"CODEC",c)},9578:function(t,e,n){"use strict";n.d(e,{i:function(){return i}});var r=n(7959);class i extends r.c{has(t){return null!=this.find(t)}find(t){return this.queue.find((e=>t.equals(e.options.peerId)))}}},7959:function(t,e,n){"use strict";n.d(e,{c:function(){return y}});var r=n(7327),i=(n(7658),n(3844)),s=n(4856),o=n(8817);class a extends Error{constructor(t,e){super(t??"The operation was aborted"),(0,r.Z)(this,"type",void 0),(0,r.Z)(this,"code",void 0),this.type="aborted",this.name="AbortError",this.code=e??"ABORT_ERR"}}async function c(t,e,n,r){const i=new a(r?.errorMessage,r?.errorCode);return!0===n?.aborted?Promise.reject(i):new Promise(((s,o)=>{function a(){n?.removeEventListener("abort",l),t.removeEventListener(e,c),null!=r?.errorEvent&&t.removeEventListener(r.errorEvent,u)}const c=t=>{try{if(!1===r?.filter?.(t))return}catch(e){return a(),void o(e)}a(),s(t)},u=t=>{a(),o(t.detail)},l=()=>{a(),o(i)};n?.addEventListener("abort",l),t.addEventListener(e,c),null!=r?.errorEvent&&t.addEventListener(r.errorEvent,u)}))}var u=n(951),l=n(1393),h=n(4622);class d{constructor(t,e){(0,r.Z)(this,"deferred",void 0),(0,r.Z)(this,"signal",void 0),(0,r.Z)(this,"where",void 0),this.signal=e,this.deferred=(0,h.Z)(),this.where=t,this.onAbort=this.onAbort.bind(this),this.signal?.addEventListener("abort",this.onAbort)}onAbort(){this.deferred.reject(this.signal?.reason??new s._L)}cleanup(){this.signal?.removeEventListener("abort",this.onAbort)}}function f(){return`${parseInt(String(1e9*Math.random()),10).toString()}${Date.now()}`}class p{constructor(t,e,n=0){(0,r.Z)(this,"id",void 0),(0,r.Z)(this,"fn",void 0),(0,r.Z)(this,"options",void 0),(0,r.Z)(this,"priority",void 0),(0,r.Z)(this,"recipients",void 0),(0,r.Z)(this,"status",void 0),(0,r.Z)(this,"timeline",void 0),(0,r.Z)(this,"controller",void 0),this.id=f(),this.status="queued",this.fn=t,this.priority=n,this.options=e,this.recipients=[],this.timeline={created:Date.now()},this.controller=new AbortController,(0,u.W)(1/0,this.controller.signal),this.onAbort=this.onAbort.bind(this)}abort(t){this.controller.abort(t)}onAbort(){const t=this.recipients.reduce(((t,e)=>t&&!0===e.signal?.aborted),!0);t&&(this.controller.abort(new s._L),this.cleanup())}async join(t={}){const e=new d(new Error("where").stack,t.signal);return this.recipients.push(e),t.signal?.addEventListener("abort",this.onAbort),e.deferred.promise}async run(){this.status="running",this.timeline.started=Date.now();try{this.controller.signal.throwIfAborted();const t=await(0,l.h)(this.fn({...this.options??{},signal:this.controller.signal}),this.controller.signal);this.recipients.forEach((e=>{e.deferred.resolve(t)})),this.status="complete"}catch(t){this.recipients.forEach((e=>{e.deferred.reject(t)})),this.status="errored"}finally{this.timeline.finished=Date.now(),this.cleanup()}}cleanup(){this.recipients.forEach((t=>{t.cleanup(),t.signal?.removeEventListener("abort",this.onAbort)}))}}function g(t,e,n){let r=0,i=t.length;while(i>0){const s=Math.trunc(i/2);let o=r+s;n(t[o],e)<=0?(r=++o,i-=s+1):i=s}return r}class y extends i.L{constructor(t={}){super(),(0,r.Z)(this,"concurrency",void 0),(0,r.Z)(this,"queue",void 0),(0,r.Z)(this,"pending",void 0),this.concurrency=t.concurrency??Number.POSITIVE_INFINITY,this.pending=0,null!=t.metricName&&t.metrics?.registerMetricGroup(t.metricName,{calculate:()=>({size:this.queue.length,running:this.pending,queued:this.queue.length-this.pending})}),this.queue=[]}tryToStartAnother(){if(0===this.size)return queueMicrotask((()=>{this.safeDispatchEvent("empty")})),0===this.running&&queueMicrotask((()=>{this.safeDispatchEvent("idle")})),!1;if(this.pending<this.concurrency){let t;for(const e of this.queue)if("queued"===e.status){t=e;break}return null!=t&&(this.safeDispatchEvent("active"),this.pending++,t.run().finally((()=>{for(let e=0;e<this.queue.length;e++)if(this.queue[e]===t){this.queue.splice(e,1);break}this.pending--,this.tryToStartAnother(),this.safeDispatchEvent("next")})),!0)}return!1}enqueue(t){if(this.queue[this.size-1]?.priority>=t.priority)return void this.queue.push(t);const e=g(this.queue,t,((t,e)=>e.priority-t.priority));this.queue.splice(e,0,t)}async add(t,e){e?.signal?.throwIfAborted();const n=new p(t,e,e?.priority),r=n.join(e).then((t=>(this.safeDispatchEvent("completed",{detail:t}),this.safeDispatchEvent("success",{detail:{job:n,result:t}}),t))).catch((t=>{if("queued"===n.status)for(let e=0;e<this.queue.length;e++)if(this.queue[e]===n){this.queue.splice(e,1);break}throw this.safeDispatchEvent("error",{detail:t}),this.safeDispatchEvent("failure",{detail:{job:n,error:t}}),t}));return this.enqueue(n),this.safeDispatchEvent("add"),this.tryToStartAnother(),r}clear(){this.queue.splice(0,this.queue.length)}abort(){this.queue.forEach((t=>{t.abort(new s._L)})),this.clear()}async onEmpty(t){0!==this.size&&await c(this,"empty",t?.signal)}async onSizeLessThan(t,e){this.size<t||await c(this,"next",e?.signal,{filter:()=>this.size<t})}async onIdle(t){0===this.pending&&0===this.size||await c(this,"idle",t?.signal)}get size(){return this.queue.length}get queued(){return this.queue.length-this.pending}get running(){return this.pending}async*toGenerator(t){t?.signal?.throwIfAborted();const e=(0,o.dT)({objectMode:!0}),n=t=>{null!=t?this.abort():this.clear(),e.end(t)},r=t=>{null!=t.detail&&e.push(t.detail)},i=t=>{n(t.detail)},a=()=>{n()},c=()=>{n(new s.sv("Queue aborted","ERR_QUEUE_ABORTED"))};this.addEventListener("completed",r),this.addEventListener("error",i),this.addEventListener("idle",a),t?.signal?.addEventListener("abort",c);try{yield*e}finally{this.removeEventListener("completed",r),this.removeEventListener("error",i),this.removeEventListener("idle",a),t?.signal?.removeEventListener("abort",c),n()}}}},5232:function(t,e,n){"use strict";n.d(e,{p:function(){return l}});var r=n(7327),i=n(4856);const s=()=>{const t=new Error("Delay aborted");return t.name="AbortError",t},o=new WeakMap;function a({clearTimeout:t,setTimeout:e}={}){return(n,{value:r,signal:i}={})=>{if(i?.aborted)return Promise.reject(s());let a,c,u;const l=t??clearTimeout,h=()=>{l(a),u(s())},d=()=>{i&&i.removeEventListener("abort",h)},f=new Promise(((t,i)=>{c=()=>{d(),t(r)},u=i,a=(e??setTimeout)(c,n)}));return i&&i.addEventListener("abort",h,{once:!0}),o.set(f,(()=>{l(a),a=null,c()})),f}}const c=a();var u=c;class l{constructor(t={}){(0,r.Z)(this,"memoryStorage",void 0),(0,r.Z)(this,"points",void 0),(0,r.Z)(this,"duration",void 0),(0,r.Z)(this,"blockDuration",void 0),(0,r.Z)(this,"execEvenly",void 0),(0,r.Z)(this,"execEvenlyMinDelayMs",void 0),(0,r.Z)(this,"keyPrefix",void 0),this.points=t.points??4,this.duration=t.duration??1,this.blockDuration=t.blockDuration??0,this.execEvenly=t.execEvenly??!1,this.execEvenlyMinDelayMs=t.execEvenlyMinDelayMs??1e3*this.duration/this.points,this.keyPrefix=t.keyPrefix??"rlflx",this.memoryStorage=new h}async consume(t,e=1,n={}){const r=this.getKey(t),s=this._getKeySecDuration(n);let o=this.memoryStorage.incrby(r,e,s);if(o.remainingPoints=Math.max(this.points-o.consumedPoints,0),o.consumedPoints>this.points)throw this.blockDuration>0&&o.consumedPoints<=this.points+e&&(o=this.memoryStorage.set(r,o.consumedPoints,this.blockDuration)),new i.sv("Rate limit exceeded","ERR_RATE_LIMIT_EXCEEDED",o);if(this.execEvenly&&o.msBeforeNext>0&&!o.isFirstInDuration){let t=Math.ceil(o.msBeforeNext/(o.remainingPoints+2));t<this.execEvenlyMinDelayMs&&(t=o.consumedPoints*this.execEvenlyMinDelayMs),await u(t)}return o}penalty(t,e=1,n={}){const r=this.getKey(t),i=this._getKeySecDuration(n),s=this.memoryStorage.incrby(r,e,i);return s.remainingPoints=Math.max(this.points-s.consumedPoints,0),s}reward(t,e=1,n={}){const r=this.getKey(t),i=this._getKeySecDuration(n),s=this.memoryStorage.incrby(r,-e,i);return s.remainingPoints=Math.max(this.points-s.consumedPoints,0),s}block(t,e){const n=1e3*e,r=this.points+1;return this.memoryStorage.set(this.getKey(t),r,e),{remainingPoints:0,msBeforeNext:0===n?-1:n,consumedPoints:r,isFirstInDuration:!1}}set(t,e,n=0){const r=1e3*(n>=0?n:this.duration);return this.memoryStorage.set(this.getKey(t),e,n),{remainingPoints:0,msBeforeNext:0===r?-1:r,consumedPoints:e,isFirstInDuration:!1}}get(t){const e=this.memoryStorage.get(this.getKey(t));return null!=e&&(e.remainingPoints=Math.max(this.points-e.consumedPoints,0)),e}delete(t){this.memoryStorage.delete(this.getKey(t))}_getKeySecDuration(t){return null!=t?.customDuration&&t.customDuration>=0?t.customDuration:this.duration}getKey(t){return this.keyPrefix.length>0?`${this.keyPrefix}:${t}`:t}parseKey(t){return t.substring(this.keyPrefix.length)}}class h{constructor(){(0,r.Z)(this,"storage",void 0),this.storage=new Map}incrby(t,e,n){const r=this.storage.get(t);if(null!=r){const i=null!=r.expiresAt?r.expiresAt.getTime()-(new Date).getTime():-1;return null==r.expiresAt||i>0?(r.value+=e,{remainingPoints:0,msBeforeNext:i,consumedPoints:r.value,isFirstInDuration:!1}):this.set(t,e,n)}return this.set(t,e,n)}set(t,e,n){const r=1e3*n,i=this.storage.get(t);null!=i&&clearTimeout(i.timeoutId);const s={value:e,expiresAt:r>0?new Date(Date.now()+r):void 0};return this.storage.set(t,s),r>0&&(s.timeoutId=setTimeout((()=>{this.storage.delete(t)}),r),null!=s.timeoutId.unref&&s.timeoutId.unref()),{remainingPoints:0,msBeforeNext:0===r?-1:r,consumedPoints:s.value,isFirstInDuration:!0}}get(t){const e=this.storage.get(t);if(null!=e){const t=null!=e.expiresAt?e.expiresAt.getTime()-(new Date).getTime():-1;return{remainingPoints:0,msBeforeNext:t,consumedPoints:e.value,isFirstInDuration:!1}}}delete(t){const e=this.storage.get(t);return null!=e&&(null!=e.timeoutId&&clearTimeout(e.timeoutId),this.storage.delete(t),!0)}}},4418:function(t,e,n){"use strict";n.d(e,{U1:function(){return i},fJ:function(){return r},fS:function(){return s}});const r=421,i=290,s=500},9484:function(t,e,n){"use strict";n.d(e,{$6:function(){return s},xt:function(){return o}});var r=n(1e3),i=n(4418);function s(t){return t.filter((t=>{if(t.protoCodes().includes(i.U1))return!1;const e=t.decapsulateCode(i.fJ);return r.Ce.matches(e)||r.th.matches(e)}))}function o(t){return t.filter((t=>{if(t.protoCodes().includes(i.U1))return!1;const e=t.decapsulateCode(i.fJ);return r.th.matches(e)}))}},1279:function(t,e,n){"use strict";n.d(e,{E:function(){return ns}});var r={};n.r(r),n.d(r,{base58btc:function(){return nt},base58flickr:function(){return rt}});var i={};n.r(i),n.d(i,{base32:function(){return Nt},base32hex:function(){return Mt},base32hexpad:function(){return Ft},base32hexpadupper:function(){return Vt},base32hexupper:function(){return Zt},base32pad:function(){return Ut},base32padupper:function(){return Pt},base32upper:function(){return Dt},base32z:function(){return Ht}});var s={};n.r(s),n.d(s,{identity:function(){return we}});var o={};n.r(o),n.d(o,{base2:function(){return me}});var a={};n.r(a),n.d(a,{base8:function(){return ve}});var c={};n.r(c),n.d(c,{base10:function(){return Ee}});var u={};n.r(u),n.d(u,{base16:function(){return Ae},base16upper:function(){return xe}});var l={};n.r(l),n.d(l,{base32:function(){return Se},base32hex:function(){return Ce},base32hexpad:function(){return Le},base32hexpadupper:function(){return Te},base32hexupper:function(){return ke},base32pad:function(){return Ie},base32padupper:function(){return Re},base32upper:function(){return _e},base32z:function(){return Be}});var h={};n.r(h),n.d(h,{base36:function(){return Oe},base36upper:function(){return Ne}});var d={};n.r(d),n.d(d,{base58btc:function(){return De},base58flickr:function(){return Ue}});var f={};n.r(f),n.d(f,{base64:function(){return Pe},base64pad:function(){return Me},base64url:function(){return Ze},base64urlpad:function(){return Fe}});var p={};n.r(p),n.d(p,{base256emoji:function(){return ze}});var g={};n.r(g),n.d(g,{sha256:function(){return Sn},sha512:function(){return _n}});var y={};n.r(y),n.d(y,{identity:function(){return Ln}});var b={};n.r(b),n.d(b,{code:function(){return Bn},decode:function(){return Nn},encode:function(){return On},name:function(){return Tn}});var w={};n.r(w),n.d(w,{code:function(){return Mn},decode:function(){return Fn},encode:function(){return Zn},name:function(){return Pn}});var m={};n.r(m),n.d(m,{identity:function(){return Qn}});var v={};n.r(v),n.d(v,{base2:function(){return Xn}});var E={};n.r(E),n.d(E,{base8:function(){return tr}});var A={};n.r(A),n.d(A,{base10:function(){return er}});var x={};n.r(x),n.d(x,{base16:function(){return nr},base16upper:function(){return rr}});var S={};n.r(S),n.d(S,{base36:function(){return ir},base36upper:function(){return sr}});var _={};n.r(_),n.d(_,{base64:function(){return or},base64pad:function(){return ar},base64url:function(){return cr},base64urlpad:function(){return ur}});var I={};n.r(I),n.d(I,{base256emoji:function(){return gr}});var R={};n.r(R),n.d(R,{sha256:function(){return mr},sha512:function(){return vr}});var C={};n.r(C),n.d(C,{identity:function(){return _r}});var k={};n.r(k),n.d(k,{code:function(){return Rr},decode:function(){return kr},encode:function(){return Cr},name:function(){return Ir}});var L={};n.r(L),n.d(L,{code:function(){return Or},decode:function(){return Dr},encode:function(){return Nr},name:function(){return Br}});var T=n(7327),B=n(4856),O=n(1508),N=(n(6229),n(7330),n(2062),n(714)),D=n(8829),U=n(2575),P=(n(1439),n(7585),n(5315),n(7658),n(9239));function M(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(255!==n[o])throw new TypeError(s+" is ambiguous");n[o]=i}var a=t.length,c=t.charAt(0),u=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function h(e){if(e instanceof Uint8Array||(ArrayBuffer.isView(e)?e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):Array.isArray(e)&&(e=Uint8Array.from(e))),!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===e.length)return"";var n=0,r=0,i=0,s=e.length;while(i!==s&&0===e[i])i++,n++;var o=(s-i)*l+1>>>0,u=new Uint8Array(o);while(i!==s){for(var h=e[i],d=0,f=o-1;(0!==h||d<r)&&-1!==f;f--,d++)h+=256*u[f]>>>0,u[f]=h%a>>>0,h=h/a>>>0;if(0!==h)throw new Error("Non-zero carry");r=d,i++}var p=o-r;while(p!==o&&0===u[p])p++;for(var g=c.repeat(n);p<o;++p)g+=t.charAt(u[p]);return g}function d(t){if("string"!==typeof t)throw new TypeError("Expected String");if(0===t.length)return new Uint8Array;var e=0;if(" "!==t[e]){var r=0,i=0;while(t[e]===c)r++,e++;var s=(t.length-e)*u+1>>>0,o=new Uint8Array(s);while(t[e]){var l=n[t.charCodeAt(e)];if(255===l)return;for(var h=0,d=s-1;(0!==l||h<i)&&-1!==d;d--,h++)l+=a*o[d]>>>0,o[d]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");i=h,e++}if(" "!==t[e]){var f=s-i;while(f!==s&&0===o[f])f++;var p=new Uint8Array(r+(s-f)),g=r;while(f!==s)p[g++]=o[f++];return p}}}function f(t){var n=d(t);if(n)return n;throw new Error(`Non-${e} character`)}return{encode:h,decodeUnsafe:d,decode:f}}var Z=M,F=Z,V=F;new Uint8Array(0);const H=(t,e)=>{if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let n=0;n<t.byteLength;n++)if(t[n]!==e[n])return!1;return!0},$=t=>{if(t instanceof Uint8Array&&"Uint8Array"===t.constructor.name)return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},j=t=>(new TextEncoder).encode(t),K=t=>(new TextDecoder).decode(t);class z{constructor(t,e,n){this.name=t,this.prefix=e,this.baseEncode=n}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class q{constructor(t,e,n){if(this.name=t,this.prefix=e,void 0===e.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=e.codePointAt(0),this.baseDecode=n}decode(t){if("string"===typeof t){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(t){return W(this,t)}}class G{constructor(t){this.decoders=t}or(t){return W(this,t)}decode(t){const e=t[0],n=this.decoders[e];if(n)return n.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const W=(t,e)=>new G({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class J{constructor(t,e,n,r){this.name=t,this.prefix=e,this.baseEncode=n,this.baseDecode=r,this.encoder=new z(t,e,n),this.decoder=new q(t,e,r)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}const Y=({name:t,prefix:e,encode:n,decode:r})=>new J(t,e,n,r),Q=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:i}=V(n,e);return Y({prefix:t,name:e,encode:r,decode:t=>$(i(t))})},X=(t,e,n,r)=>{const i={};for(let l=0;l<e.length;++l)i[e[l]]=l;let s=t.length;while("="===t[s-1])--s;const o=new Uint8Array(s*n/8|0);let a=0,c=0,u=0;for(let l=0;l<s;++l){const e=i[t[l]];if(void 0===e)throw new SyntaxError(`Non-${r} character`);c=c<<n|e,a+=n,a>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},tt=(t,e,n)=>{const r="="===e[e.length-1],i=(1<<n)-1;let s="",o=0,a=0;for(let c=0;c<t.length;++c){a=a<<8|t[c],o+=8;while(o>n)o-=n,s+=e[i&a>>o]}if(o&&(s+=e[i&a<<n-o]),r)while(s.length*n&7)s+="=";return s},et=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>Y({prefix:e,name:t,encode(t){return tt(t,r,n)},decode(e){return X(e,r,n,t)}}),nt=Q({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),rt=Q({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var it=ut,st=128,ot=127,at=~ot,ct=Math.pow(2,31);function ut(t,e,n){e=e||[],n=n||0;var r=n;while(t>=ct)e[n++]=255&t|st,t/=128;while(t&at)e[n++]=255&t|st,t>>>=7;return e[n]=0|t,ut.bytes=n-r+1,e}var lt=ft,ht=128,dt=127;function ft(t,e){var n,r=0,i=(e=e||0,0),s=e,o=t.length;do{if(s>=o)throw ft.bytes=0,new RangeError("Could not decode varint");n=t[s++],r+=i<28?(n&dt)<<i:(n&dt)*Math.pow(2,i),i+=7}while(n>=ht);return ft.bytes=s-e,r}var pt=Math.pow(2,7),gt=Math.pow(2,14),yt=Math.pow(2,21),bt=Math.pow(2,28),wt=Math.pow(2,35),mt=Math.pow(2,42),vt=Math.pow(2,49),Et=Math.pow(2,56),At=Math.pow(2,63),xt=function(t){return t<pt?1:t<gt?2:t<yt?3:t<bt?4:t<wt?5:t<mt?6:t<vt?7:t<Et?8:t<At?9:10},St={encode:it,decode:lt,encodingLength:xt},_t=St,It=_t;const Rt=(t,e=0)=>{const n=It.decode(t,e);return[n,It.decode.bytes]},Ct=(t,e,n=0)=>(It.encode(t,e,n),e),kt=t=>It.encodingLength(t),Lt=(t,e)=>{const n=e.byteLength,r=kt(t),i=r+kt(n),s=new Uint8Array(i+n);return Ct(t,s,0),Ct(n,s,r),s.set(e,i),new Ot(t,n,e,s)},Tt=t=>{const e=$(t),[n,r]=Rt(e),[i,s]=Rt(e.subarray(r)),o=e.subarray(r+s);if(o.byteLength!==i)throw new Error("Incorrect length");return new Ot(n,i,o,e)},Bt=(t,e)=>{if(t===e)return!0;{const n=e;return t.code===n.code&&t.size===n.size&&n.bytes instanceof Uint8Array&&H(t.bytes,n.bytes)}};class Ot{constructor(t,e,n,r){this.code=t,this.size=e,this.digest=n,this.bytes=r}}const Nt=et({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Dt=et({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Ut=et({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Pt=et({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Mt=et({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Zt=et({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Ft=et({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Vt=et({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Ht=et({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),$t=(t,e)=>{const{bytes:n,version:r}=t;switch(r){case 0:return Gt(n,Kt(t),e||nt.encoder);default:return Wt(n,Kt(t),e||Nt.encoder)}},jt=new WeakMap,Kt=t=>{const e=jt.get(t);if(null==e){const e=new Map;return jt.set(t,e),e}return e};class zt{constructor(t,e,n,r){this.code=e,this.version=t,this.multihash=n,this.bytes=r,this["/"]=r}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{const{code:t,multihash:e}=this;if(t!==Jt)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(e.code!==Yt)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return zt.createV0(e)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{const{code:t,digest:e}=this.multihash,n=Lt(t,e);return zt.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(t){return zt.equals(this,t)}static equals(t,e){const n=e;return n&&t.code===n.code&&t.version===n.version&&Bt(t.multihash,n.multihash)}toString(t){return $t(this,t)}toJSON(){return{"/":$t(this)}}link(){return this}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(t){if(null==t)return null;const e=t;if(e instanceof zt)return e;if(null!=e["/"]&&e["/"]===e.bytes||e.asCID===e){const{version:t,code:n,multihash:r,bytes:i}=e;return new zt(t,n,r,i||Qt(t,n,r.bytes))}if(!0===e[Xt]){const{version:t,multihash:n,code:r}=e,i=Tt(n);return zt.create(t,r,i)}return null}static create(t,e,n){if("number"!==typeof e)throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(t){case 0:if(e!==Jt)throw new Error(`Version 0 CID must use dag-pb (code: ${Jt}) block encoding`);return new zt(t,e,n,n.bytes);case 1:{const r=Qt(t,e,n.bytes);return new zt(t,e,n,r)}default:throw new Error("Invalid version")}}static createV0(t){return zt.create(0,Jt,t)}static createV1(t,e){return zt.create(1,t,e)}static decode(t){const[e,n]=zt.decodeFirst(t);if(n.length)throw new Error("Incorrect length");return e}static decodeFirst(t){const e=zt.inspectBytes(t),n=e.size-e.multihashSize,r=$(t.subarray(n,n+e.multihashSize));if(r.byteLength!==e.multihashSize)throw new Error("Incorrect length");const i=r.subarray(e.multihashSize-e.digestSize),s=new Ot(e.multihashCode,e.digestSize,i,r),o=0===e.version?zt.createV0(s):zt.createV1(e.codec,s);return[o,t.subarray(e.size)]}static inspectBytes(t){let e=0;const n=()=>{const[n,r]=Rt(t.subarray(e));return e+=r,n};let r=n(),i=Jt;if(18===r?(r=0,e=0):i=n(),0!==r&&1!==r)throw new RangeError(`Invalid CID version ${r}`);const s=e,o=n(),a=n(),c=e+a,u=c-s;return{version:r,codec:i,multihashCode:o,digestSize:a,multihashSize:u,size:c}}static parse(t,e){const[n,r]=qt(t,e),i=zt.decode(r);if(0===i.version&&"Q"!==t[0])throw Error("Version 0 CID string must not include multibase prefix");return Kt(i).set(n,t),i}}const qt=(t,e)=>{switch(t[0]){case"Q":{const n=e||nt;return[nt.prefix,n.decode(`${nt.prefix}${t}`)]}case nt.prefix:{const n=e||nt;return[nt.prefix,n.decode(t)]}case Nt.prefix:{const n=e||Nt;return[Nt.prefix,n.decode(t)]}default:if(null==e)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}},Gt=(t,e,n)=>{const{prefix:r}=n;if(r!==nt.prefix)throw Error(`Cannot string encode V0 in ${n.name} encoding`);const i=e.get(r);if(null==i){const i=n.encode(t).slice(1);return e.set(r,i),i}return i},Wt=(t,e,n)=>{const{prefix:r}=n,i=e.get(r);if(null==i){const i=n.encode(t);return e.set(r,i),i}return i},Jt=112,Yt=18,Qt=(t,e,n)=>{const r=kt(t),i=r+kt(e),s=new Uint8Array(i+n.byteLength);return Ct(t,s,0),Ct(e,s,r),s.set(n,i),s},Xt=Symbol.for("@ipld/js-cid/CID");function te(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let n=0;n<t.byteLength;n++)if(t[n]!==e[n])return!1;return!0}function ee(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(255!==n[o])throw new TypeError(s+" is ambiguous");n[o]=i}var a=t.length,c=t.charAt(0),u=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function h(e){if(e instanceof Uint8Array||(ArrayBuffer.isView(e)?e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):Array.isArray(e)&&(e=Uint8Array.from(e))),!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===e.length)return"";var n=0,r=0,i=0,s=e.length;while(i!==s&&0===e[i])i++,n++;var o=(s-i)*l+1>>>0,u=new Uint8Array(o);while(i!==s){for(var h=e[i],d=0,f=o-1;(0!==h||d<r)&&-1!==f;f--,d++)h+=256*u[f]>>>0,u[f]=h%a>>>0,h=h/a>>>0;if(0!==h)throw new Error("Non-zero carry");r=d,i++}var p=o-r;while(p!==o&&0===u[p])p++;for(var g=c.repeat(n);p<o;++p)g+=t.charAt(u[p]);return g}function d(t){if("string"!==typeof t)throw new TypeError("Expected String");if(0===t.length)return new Uint8Array;var e=0;if(" "!==t[e]){var r=0,i=0;while(t[e]===c)r++,e++;var s=(t.length-e)*u+1>>>0,o=new Uint8Array(s);while(t[e]){var l=n[t.charCodeAt(e)];if(255===l)return;for(var h=0,d=s-1;(0!==l||h<i)&&-1!==d;d--,h++)l+=a*o[d]>>>0,o[d]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");i=h,e++}if(" "!==t[e]){var f=s-i;while(f!==s&&0===o[f])f++;var p=new Uint8Array(r+(s-f)),g=r;while(f!==s)p[g++]=o[f++];return p}}}function f(t){var n=d(t);if(n)return n;throw new Error(`Non-${e} character`)}return{encode:h,decodeUnsafe:d,decode:f}}var ne=ee,re=ne,ie=re;new Uint8Array(0);const se=t=>{if(t instanceof Uint8Array&&"Uint8Array"===t.constructor.name)return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},oe=t=>(new TextEncoder).encode(t),ae=t=>(new TextDecoder).decode(t);class ce{constructor(t,e,n){this.name=t,this.prefix=e,this.baseEncode=n}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class ue{constructor(t,e,n){if(this.name=t,this.prefix=e,void 0===e.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=e.codePointAt(0),this.baseDecode=n}decode(t){if("string"===typeof t){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(t){return he(this,t)}}class le{constructor(t){this.decoders=t}or(t){return he(this,t)}decode(t){const e=t[0],n=this.decoders[e];if(n)return n.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const he=(t,e)=>new le({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class de{constructor(t,e,n,r){this.name=t,this.prefix=e,this.baseEncode=n,this.baseDecode=r,this.encoder=new ce(t,e,n),this.decoder=new ue(t,e,r)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}const fe=({name:t,prefix:e,encode:n,decode:r})=>new de(t,e,n,r),pe=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:i}=ie(n,e);return fe({prefix:t,name:e,encode:r,decode:t=>se(i(t))})},ge=(t,e,n,r)=>{const i={};for(let l=0;l<e.length;++l)i[e[l]]=l;let s=t.length;while("="===t[s-1])--s;const o=new Uint8Array(s*n/8|0);let a=0,c=0,u=0;for(let l=0;l<s;++l){const e=i[t[l]];if(void 0===e)throw new SyntaxError(`Non-${r} character`);c=c<<n|e,a+=n,a>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},ye=(t,e,n)=>{const r="="===e[e.length-1],i=(1<<n)-1;let s="",o=0,a=0;for(let c=0;c<t.length;++c){a=a<<8|t[c],o+=8;while(o>n)o-=n,s+=e[i&a>>o]}if(o&&(s+=e[i&a<<n-o]),r)while(s.length*n&7)s+="=";return s},be=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>fe({prefix:e,name:t,encode(t){return ye(t,r,n)},decode(e){return ge(e,r,n,t)}}),we=fe({prefix:"\0",name:"identity",encode:t=>ae(t),decode:t=>oe(t)}),me=be({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),ve=be({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),Ee=pe({prefix:"9",name:"base10",alphabet:"0123456789"}),Ae=be({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),xe=be({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),Se=be({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),_e=be({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Ie=be({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Re=be({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Ce=be({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),ke=be({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Le=be({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Te=be({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Be=be({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),Oe=pe({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Ne=pe({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),De=pe({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Ue=pe({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),Pe=be({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Me=be({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Ze=be({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Fe=be({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),Ve=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),He=Ve.reduce(((t,e,n)=>(t[n]=e,t)),[]),$e=Ve.reduce(((t,e,n)=>(t[e.codePointAt(0)]=n,t)),[]);function je(t){return t.reduce(((t,e)=>(t+=He[e],t)),"")}function Ke(t){const e=[];for(const n of t){const t=$e[n.codePointAt(0)];if(void 0===t)throw new Error(`Non-base256emoji character: ${n}`);e.push(t)}return new Uint8Array(e)}const ze=fe({prefix:"🚀",name:"base256emoji",encode:je,decode:Ke});var qe=Qe,Ge=128,We=127,Je=~We,Ye=Math.pow(2,31);function Qe(t,e,n){e=e||[],n=n||0;var r=n;while(t>=Ye)e[n++]=255&t|Ge,t/=128;while(t&Je)e[n++]=255&t|Ge,t>>>=7;return e[n]=0|t,Qe.bytes=n-r+1,e}var Xe=nn,tn=128,en=127;function nn(t,e){var n,r=0,i=(e=e||0,0),s=e,o=t.length;do{if(s>=o)throw nn.bytes=0,new RangeError("Could not decode varint");n=t[s++],r+=i<28?(n&en)<<i:(n&en)*Math.pow(2,i),i+=7}while(n>=tn);return nn.bytes=s-e,r}var rn=Math.pow(2,7),sn=Math.pow(2,14),on=Math.pow(2,21),an=Math.pow(2,28),cn=Math.pow(2,35),un=Math.pow(2,42),ln=Math.pow(2,49),hn=Math.pow(2,56),dn=Math.pow(2,63),fn=function(t){return t<rn?1:t<sn?2:t<on?3:t<an?4:t<cn?5:t<un?6:t<ln?7:t<hn?8:t<dn?9:10},pn={encode:qe,decode:Xe,encodingLength:fn},gn=pn,yn=gn;const bn=(t,e,n=0)=>(yn.encode(t,e,n),e),wn=t=>yn.encodingLength(t),mn=(t,e)=>{const n=e.byteLength,r=wn(t),i=r+wn(n),s=new Uint8Array(i+n);return bn(t,s,0),bn(n,s,r),s.set(e,i),new vn(t,n,e,s)};class vn{constructor(t,e,n,r){this.code=t,this.size=e,this.digest=n,this.bytes=r}}const En=({name:t,code:e,encode:n})=>new An(t,e,n);class An{constructor(t,e,n){this.name=t,this.code=e,this.encode=n}digest(t){if(t instanceof Uint8Array){const e=this.encode(t);return e instanceof Uint8Array?mn(this.code,e):e.then((t=>mn(this.code,t)))}throw Error("Unknown type, must be binary type")}}const xn=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),Sn=En({name:"sha2-256",code:18,encode:xn("SHA-256")}),_n=En({name:"sha2-512",code:19,encode:xn("SHA-512")}),In=0,Rn="identity",Cn=se,kn=t=>mn(In,Cn(t)),Ln={code:In,name:Rn,encode:Cn,digest:kn},Tn="raw",Bn=85,On=t=>se(t),Nn=t=>se(t),Dn=new TextEncoder,Un=new TextDecoder,Pn="json",Mn=512,Zn=t=>Dn.encode(JSON.stringify(t)),Fn=t=>JSON.parse(Un.decode(t));new WeakMap;Symbol.toStringTag,Symbol.for("nodejs.util.inspect.custom");Symbol.for("@ipld/js-cid/CID");const Vn={...s,...o,...a,...c,...u,...l,...h,...d,...f,...p};function Hn(t){return null!=globalThis.Buffer?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function $n(t=0){return null!=globalThis.Buffer?.allocUnsafe?Hn(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function jn(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const Kn=jn("utf8","u",(t=>{const e=new TextDecoder("utf8");return"u"+e.decode(t)}),(t=>{const e=new TextEncoder;return e.encode(t.substring(1))})),zn=jn("ascii","a",(t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e}),(t=>{t=t.substring(1);const e=$n(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e})),qn={utf8:Kn,"utf-8":Kn,hex:Vn.base16,latin1:zn,ascii:zn,binary:zn,...Vn};var Gn=qn;function Wn(t,e="utf8"){const n=Gn[e];if(null==n)throw new Error(`Unsupported encoding "${e}"`);return"utf8"!==e&&"utf-8"!==e||null==globalThis.Buffer||null==globalThis.Buffer.from?n.encoder.encode(t).substring(1):globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8")}function Jn(t,e){null==e&&(e=t.reduce(((t,e)=>t+e.length),0));const n=$n(e);let r=0;for(const i of t)n.set(i,r),r+=i.length;return Hn(n)}var Yn=n(2982);n(314);const Qn=Y({prefix:"\0",name:"identity",encode:t=>K(t),decode:t=>j(t)}),Xn=et({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),tr=et({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),er=Q({prefix:"9",name:"base10",alphabet:"0123456789"}),nr=et({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),rr=et({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),ir=Q({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),sr=Q({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),or=et({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),ar=et({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),cr=et({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),ur=et({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),lr=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),hr=lr.reduce(((t,e,n)=>(t[n]=e,t)),[]),dr=lr.reduce(((t,e,n)=>(t[e.codePointAt(0)]=n,t)),[]);function fr(t){return t.reduce(((t,e)=>(t+=hr[e],t)),"")}function pr(t){const e=[];for(const n of t){const t=dr[n.codePointAt(0)];if(void 0===t)throw new Error(`Non-base256emoji character: ${n}`);e.push(t)}return new Uint8Array(e)}const gr=Y({prefix:"🚀",name:"base256emoji",encode:fr,decode:pr}),yr=({name:t,code:e,encode:n})=>new br(t,e,n);class br{constructor(t,e,n){this.name=t,this.code=e,this.encode=n}digest(t){if(t instanceof Uint8Array){const e=this.encode(t);return e instanceof Uint8Array?Lt(this.code,e):e.then((t=>Lt(this.code,t)))}throw Error("Unknown type, must be binary type")}}const wr=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),mr=yr({name:"sha2-256",code:18,encode:wr("SHA-256")}),vr=yr({name:"sha2-512",code:19,encode:wr("SHA-512")}),Er=0,Ar="identity",xr=$,Sr=t=>Lt(Er,xr(t)),_r={code:Er,name:Ar,encode:xr,digest:Sr},Ir="raw",Rr=85,Cr=t=>$(t),kr=t=>$(t),Lr=new TextEncoder,Tr=new TextDecoder,Br="json",Or=512,Nr=t=>Lr.encode(JSON.stringify(t)),Dr=t=>JSON.parse(Tr.decode(t)),Ur={...m,...v,...E,...A,...x,...i,...S,...r,..._,...I};function Pr(t,e="utf8"){const n=Gn[e];if(null==n)throw new Error(`Unsupported encoding "${e}"`);return"utf8"!==e&&"utf-8"!==e||null==globalThis.Buffer||null==globalThis.Buffer.from?n.decoder.decode(`${n.prefix}${t}`):Hn(globalThis.Buffer.from(t,"utf-8"))}var Mr=n(4906);const Zr=Mr.C,Fr=Mr.aY,Vr=function(t){let e=0;if(t=t.toString().trim(),Zr(t)){const n=new Uint8Array(e+4);return t.split(/\./g).forEach((t=>{n[e++]=255&parseInt(t,10)})),n}if(Fr(t)){const n=t.split(":",8);let r;for(r=0;r<n.length;r++){const t=Zr(n[r]);let e;t&&(e=Vr(n[r]),n[r]=Wn(e.slice(0,2),"base16")),null!=e&&++r<8&&n.splice(r,0,Wn(e.slice(2,4),"base16"))}if(""===n[0])while(n.length<8)n.unshift("0");else if(""===n[n.length-1])while(n.length<8)n.push("0");else if(n.length<8){for(r=0;r<n.length&&""!==n[r];r++);const t=[r,1];for(r=9-n.length;r>0;r--)t.push("0");n.splice.apply(n,t)}const i=new Uint8Array(e+16);for(r=0;r<n.length;r++){const t=parseInt(n[r],16);i[e++]=t>>8&255,i[e++]=255&t}return i}throw new Error("invalid ip address")},Hr=function(t,e=0,n){e=~~e,n=n??t.length-e;const r=new DataView(t.buffer);if(4===n){const r=[];for(let i=0;i<n;i++)r.push(t[e+i]);return r.join(".")}if(16===n){const t=[];for(let i=0;i<n;i+=2)t.push(r.getUint16(e+i).toString(16));return t.join(":").replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3").replace(/:{3,4}/,"::")}return""},$r=-1,jr={},Kr={},zr=[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,$r,"ip6zone"],[43,8,"ipcidr"],[53,$r,"dns",!0],[54,$r,"dns4",!0],[55,$r,"dns6",!0],[56,$r,"dnsaddr",!0],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[280,0,"webrtc-direct"],[281,0,"webrtc"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,$r,"unix",!1,!0],[421,$r,"ipfs"],[421,$r,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,$r,"garlic64"],[448,0,"tls"],[449,$r,"sni"],[460,0,"quic"],[461,0,"quic-v1"],[465,0,"webtransport"],[466,$r,"certhash"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[777,$r,"memory"]];function qr(t,e,n,r,i){return{code:t,size:e,name:n,resolvable:Boolean(r),path:Boolean(i)}}function Gr(t){if("number"===typeof t){if(null!=Kr[t])return Kr[t];throw new Error(`no protocol with code: ${t}`)}if("string"===typeof t){if(null!=jr[t])return jr[t];throw new Error(`no protocol with name: ${t}`)}throw new Error("invalid protocol id type: "+typeof t)}zr.forEach((t=>{const e=qr(...t);Kr[e.code]=e,jr[e.name]=e}));Gr("ip4"),Gr("ip6"),Gr("ipcidr");function Wr(t,e){const n=Gr(t);switch(n.code){case 4:case 41:return ti(e);case 42:return ii(e);case 6:case 273:case 33:case 132:return ni(e).toString();case 53:case 54:case 55:case 56:case 400:case 449:case 777:return ii(e);case 421:return ci(e);case 444:return hi(e);case 445:return hi(e);case 466:return ai(e);default:return Wn(e,"base16")}}function Jr(t,e){const n=Gr(t);switch(n.code){case 4:return Xr(e);case 41:return Xr(e);case 42:return ri(e);case 6:case 273:case 33:case 132:return ei(parseInt(e,10));case 53:case 54:case 55:case 56:case 400:case 449:case 777:return ri(e);case 421:return si(e);case 444:return ui(e);case 445:return li(e);case 466:return oi(e);default:return Pr(e,"base16")}}const Yr=Object.values(Ur).map((t=>t.decoder)),Qr=function(){let t=Yr[0].or(Yr[1]);return Yr.slice(2).forEach((e=>t=t.or(e))),t}();function Xr(t){if(!Mr.h6(t))throw new Error("invalid ip address");return Vr(t)}function ti(t){const e=Hr(t,0,t.length);if(null==e)throw new Error("ipBuff is required");if(!Mr.h6(e))throw new Error("invalid ip address");return e}function ei(t){const e=new ArrayBuffer(2),n=new DataView(e);return n.setUint16(0,t),new Uint8Array(e)}function ni(t){const e=new DataView(t.buffer);return e.getUint16(t.byteOffset)}function ri(t){const e=Pr(t),n=Uint8Array.from(Yn.encode(e.length));return Jn([n,e],n.length+e.length)}function ii(t){const e=Yn.decode(t);if(t=t.slice(Yn.decode.bytes),t.length!==e)throw new Error("inconsistent lengths");return Wn(t)}function si(t){let e;e="Q"===t[0]||"1"===t[0]?Tt(nt.decode(`z${t}`)).bytes:zt.parse(t).multihash.bytes;const n=Uint8Array.from(Yn.encode(e.length));return Jn([n,e],n.length+e.length)}function oi(t){const e=Qr.decode(t),n=Uint8Array.from(Yn.encode(e.length));return Jn([n,e],n.length+e.length)}function ai(t){const e=Yn.decode(t),n=t.slice(Yn.decode.bytes);if(n.length!==e)throw new Error("inconsistent lengths");return"u"+Wn(n,"base64url")}function ci(t){const e=Yn.decode(t),n=t.slice(Yn.decode.bytes);if(n.length!==e)throw new Error("inconsistent lengths");return Wn(n,"base58btc")}function ui(t){const e=t.split(":");if(2!==e.length)throw new Error(`failed to parse onion addr: ["'${e.join('", "')}'"]' does not contain a port number`);if(16!==e[0].length)throw new Error(`failed to parse onion addr: ${e[0]} not a Tor onion address.`);const n=Nt.decode("b"+e[0]),r=parseInt(e[1],10);if(r<1||r>65536)throw new Error("Port number is not in range(1, 65536)");const i=ei(r);return Jn([n,i],n.length+i.length)}function li(t){const e=t.split(":");if(2!==e.length)throw new Error(`failed to parse onion addr: ["'${e.join('", "')}'"]' does not contain a port number`);if(56!==e[0].length)throw new Error(`failed to parse onion addr: ${e[0]} not a Tor onion3 address.`);const n=Nt.decode(`b${e[0]}`),r=parseInt(e[1],10);if(r<1||r>65536)throw new Error("Port number is not in range(1, 65536)");const i=ei(r);return Jn([n,i],n.length+i.length)}function hi(t){const e=t.slice(0,t.length-2),n=t.slice(t.length-2),r=Wn(e,"base32"),i=ni(n);return`${r}:${i}`}function di(t){t=bi(t);const e=[],n=[];let r=null;const i=t.split("/").slice(1);if(1===i.length&&""===i[0])return{bytes:new Uint8Array,string:"/",tuples:[],stringTuples:[],path:null};for(let s=0;s<i.length;s++){const o=i[s],a=Gr(o);if(0===a.size){e.push([a.code]),n.push([a.code]);continue}if(s++,s>=i.length)throw wi("invalid address: "+t);if(!0===a.path){r=bi(i.slice(s).join("/")),e.push([a.code,Jr(a.code,r)]),n.push([a.code,r]);break}const c=Jr(a.code,i[s]);e.push([a.code,c]),n.push([a.code,Wr(a.code,c)])}return{string:pi(n),bytes:gi(e),tuples:e,stringTuples:n,path:r}}function fi(t){const e=[],n=[];let r=null,i=0;while(i<t.length){const s=Yn.decode(t,i),o=Yn.decode.bytes??0,a=Gr(s),c=yi(a,t.slice(i+o));if(0===c){e.push([s]),n.push([s]),i+=o;continue}const u=t.slice(i+o,i+o+c);if(i+=c+o,i>t.length)throw wi("Invalid address Uint8Array: "+Wn(t,"base16"));e.push([s,u]);const l=Wr(s,u);if(n.push([s,l]),!0===a.path){r=l;break}}return{bytes:Uint8Array.from(t),string:pi(n),tuples:e,stringTuples:n,path:r}}function pi(t){const e=[];return t.map((t=>{const n=Gr(t[0]);return e.push(n.name),t.length>1&&null!=t[1]&&e.push(t[1]),null})),bi(e.join("/"))}function gi(t){return Jn(t.map((t=>{const e=Gr(t[0]);let n=Uint8Array.from(Yn.encode(e.code));return t.length>1&&null!=t[1]&&(n=Jn([n,t[1]])),n})))}function yi(t,e){if(t.size>0)return t.size/8;if(0===t.size)return 0;{const t=Yn.decode(e);return t+(Yn.decode.bytes??0)}}function bi(t){return"/"+t.trim().split("/").filter((t=>t)).join("/")}function wi(t){return new Error("Error parsing address: "+t)}const mi=Symbol.for("nodejs.util.inspect.custom"),vi=[Gr("dns").code,Gr("dns4").code,Gr("dns6").code,Gr("dnsaddr").code],Ei=new Map,Ai=Symbol.for("@multiformats/js-multiaddr/multiaddr");function xi(t){return Boolean(t?.[Ai])}var Si=new WeakMap,_i=new WeakMap,Ii=new WeakMap,Ri=new WeakMap;class Ci{constructor(t){let e;if((0,T.Z)(this,"bytes",void 0),(0,N.Z)(this,Si,{writable:!0,value:void 0}),(0,N.Z)(this,_i,{writable:!0,value:void 0}),(0,N.Z)(this,Ii,{writable:!0,value:void 0}),(0,N.Z)(this,Ri,{writable:!0,value:void 0}),(0,T.Z)(this,Ai,!0),null==t&&(t=""),t instanceof Uint8Array)e=fi(t);else if("string"===typeof t){if(t.length>0&&"/"!==t.charAt(0))throw new Error(`multiaddr "${t}" must start with a "/"`);e=di(t)}else{if(!xi(t))throw new Error("addr must be a string, Buffer, or another Multiaddr");e=fi(t.bytes)}this.bytes=e.bytes,(0,U.Z)(this,Si,e.string),(0,U.Z)(this,_i,e.tuples),(0,U.Z)(this,Ii,e.stringTuples),(0,U.Z)(this,Ri,e.path)}toString(){return(0,D.Z)(this,Si)}toJSON(){return this.toString()}toOptions(){let t,e,n,r,i="";const s=Gr("tcp"),o=Gr("udp"),a=Gr("ip4"),c=Gr("ip6"),u=Gr("dns6"),l=Gr("ip6zone");for(const[d,f]of this.stringTuples())d===l.code&&(i=`%${f??""}`),vi.includes(d)&&(e=s.name,r=443,n=`${f??""}${i}`,t=d===u.code?6:4),d!==s.code&&d!==o.code||(e=Gr(d).name,r=parseInt(f??"")),d!==a.code&&d!==c.code||(e=Gr(d).name,n=`${f??""}${i}`,t=d===c.code?6:4);if(null==t||null==e||null==n||null==r)throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6, dnsaddr}/{address}/{tcp, udp}/{port}".');const h={family:t,host:n,transport:e,port:r};return h}protos(){return(0,D.Z)(this,_i).map((([t])=>Object.assign({},Gr(t))))}protoCodes(){return(0,D.Z)(this,_i).map((([t])=>t))}protoNames(){return(0,D.Z)(this,_i).map((([t])=>Gr(t).name))}tuples(){return(0,D.Z)(this,_i)}stringTuples(){return(0,D.Z)(this,Ii)}encapsulate(t){return t=new Ci(t),new Ci(this.toString()+t.toString())}decapsulate(t){const e=t.toString(),n=this.toString(),r=n.lastIndexOf(e);if(r<0)throw new Error(`Address ${this.toString()} does not contain subaddress: ${t.toString()}`);return new Ci(n.slice(0,r))}decapsulateCode(t){const e=this.tuples();for(let n=e.length-1;n>=0;n--)if(e[n][0]===t)return new Ci(gi(e.slice(0,n)));return this}getPeerId(){try{let t=[];this.stringTuples().forEach((([e,n])=>{e===jr.p2p.code&&t.push([e,n]),e===jr["p2p-circuit"].code&&(t=[])}));const e=t.pop();if(null!=e?.[1]){const t=e[1];return"Q"===t[0]||"1"===t[0]?Wn(nt.decode(`z${t}`),"base58btc"):Wn(zt.parse(t).multihash.bytes,"base58btc")}return null}catch(t){return null}}getPath(){return(0,D.Z)(this,Ri)}equals(t){return te(this.bytes,t.bytes)}async resolve(t){const e=this.protos().find((t=>t.resolvable));if(null==e)return[this];const n=Ei.get(e.name);if(null==n)throw new P.s(`no available resolver for ${e.name}`,"ERR_NO_AVAILABLE_RESOLVER");const r=await n(this,t);return r.map((t=>new Ci(t)))}nodeAddress(){const t=this.toOptions();if("tcp"!==t.transport&&"udp"!==t.transport)throw new Error(`multiaddr must have a valid format - no protocol with name: "${t.transport}". Must have a valid transport protocol: "{tcp, udp}"`);return{family:t.family,address:t.host,port:t.port}}isThinWaistAddress(t){const e=(t??this).protos();return 2===e.length&&((4===e[0].code||41===e[0].code)&&(6===e[1].code||273===e[1].code))}[mi](){return`Multiaddr(${(0,D.Z)(this,Si)})`}}function ki(t){return new Ci(t)}const Li=[Gr("tcp").code,Gr("dns").code,Gr("dnsaddr").code,Gr("dns4").code,Gr("dns6").code];function Ti(t){let e;try{e=Gr("sni").code}catch(n){return null}for(const[r,i]of t)if(r===e&&void 0!==i)return i;return null}function Bi(t){return t.some((([t,e])=>t===Gr("tls").code))}function Oi(t,e,n){const r=Ni[Gr(t).name];if(void 0===r)throw new Error(`Can't interpret protocol ${Gr(t).name}`);const i=r(e,n);return t===Gr("ip6").code?`[${i}]`:i}const Ni={ip4:(t,e)=>t,ip6:(t,e)=>0===e.length?t:`[${t}]`,tcp:(t,e)=>{const n=e.pop();if(void 0===n)throw new Error("Unexpected end of multiaddr");return`tcp://${Oi(n[0],n[1]??"",e)}:${t}`},udp:(t,e)=>{const n=e.pop();if(void 0===n)throw new Error("Unexpected end of multiaddr");return`udp://${Oi(n[0],n[1]??"",e)}:${t}`},dnsaddr:(t,e)=>t,dns4:(t,e)=>t,dns6:(t,e)=>t,dns:(t,e)=>t,ipfs:(t,e)=>{const n=e.pop();if(void 0===n)throw new Error("Unexpected end of multiaddr");return`${Oi(n[0],n[1]??"",e)}/ipfs/${t}`},p2p:(t,e)=>{const n=e.pop();if(void 0===n)throw new Error("Unexpected end of multiaddr");return`${Oi(n[0],n[1]??"",e)}/p2p/${t}`},http:(t,e)=>{const n=Bi(e),r=Ti(e);if(n&&null!==r)return`https://${r}`;const i=n?"https://":"http://",s=e.pop();if(void 0===s)throw new Error("Unexpected end of multiaddr");let o=Oi(s[0],s[1]??"",e);return o=o.replace("tcp://",""),`${i}${o}`},tls:(t,e)=>{const n=e.pop();if(void 0===n)throw new Error("Unexpected end of multiaddr");return Oi(n[0],n[1]??"",e)},sni:(t,e)=>{const n=e.pop();if(void 0===n)throw new Error("Unexpected end of multiaddr");return Oi(n[0],n[1]??"",e)},https:(t,e)=>{const n=e.pop();if(void 0===n)throw new Error("Unexpected end of multiaddr");let r=Oi(n[0],n[1]??"",e);return r=r.replace("tcp://",""),`https://${r}`},ws:(t,e)=>{const n=Bi(e),r=Ti(e);if(n&&null!==r)return`wss://${r}`;const i=n?"wss://":"ws://",s=e.pop();if(void 0===s)throw new Error("Unexpected end of multiaddr");let o=Oi(s[0],s[1]??"",e);return o=o.replace("tcp://",""),`${i}${o}`},wss:(t,e)=>{const n=e.pop();if(void 0===n)throw new Error("Unexpected end of multiaddr");let r=Oi(n[0],n[1]??"",e);return r=r.replace("tcp://",""),`wss://${r}`},"p2p-websocket-star":(t,e)=>{const n=e.pop();if(void 0===n)throw new Error("Unexpected end of multiaddr");return`${Oi(n[0],n[1]??"",e)}/p2p-websocket-star`},"p2p-webrtc-star":(t,e)=>{const n=e.pop();if(void 0===n)throw new Error("Unexpected end of multiaddr");return`${Oi(n[0],n[1]??"",e)}/p2p-webrtc-star`},"p2p-webrtc-direct":(t,e)=>{const n=e.pop();if(void 0===n)throw new Error("Unexpected end of multiaddr");return`${Oi(n[0],n[1]??"",e)}/p2p-webrtc-direct`}};function Di(t,e){const n=ki(t),r=n.stringTuples(),i=r.pop();if(void 0===i)throw new Error("Unexpected end of multiaddr");const s=Gr(i[0]),o=Ni[s.name];if(null==o)throw new Error(`No interpreter found for ${s.name}`);let a=o(i[1]??"",r);return!1!==e?.assumeHttp&&Li.includes(i[0])&&(a=a.replace(/^.*:\/\//,""),a="443"===i[1]?`https://${a}`:`http://${a}`),(a.startsWith("http://")||a.startsWith("https://"))&&(a=new URL(a).toString(),a.endsWith("/")&&(a=a.substring(0,a.length-1))),a}var Ui=async t=>{if(t.readyState>=2)throw new Error("socket closed");1!==t.readyState&&await new Promise(((e,n)=>{function r(){t.removeEventListener("open",i),t.removeEventListener("error",s)}function i(){r(),e()}function s(e){r(),n(e.error??new Error(`connect ECONNREFUSED ${t.url}`))}t.addEventListener("open",i),t.addEventListener("error",s)}))},Pi=(t,e)=>{e=e??{},e.closeOnEnd=!1!==e.closeOnEnd;const n=async n=>{for await(const e of n){try{await Ui(t)}catch(r){if("socket closed"===r.message)break;throw r}if(t.readyState===t.CLOSING||t.readyState===t.CLOSED)break;t.send(e)}null!=e.closeOnEnd&&t.readyState<=1&&await new Promise(((e,n)=>{t.addEventListener("close",(t=>{if(t.wasClean||1006===t.code)e();else{const e=Object.assign(new Error("ws error"),{event:t});n(e)}})),setTimeout((()=>{t.close()}))}))};return n},Mi=n(4772),Zi=n(2543);function Fi(t){return t instanceof ArrayBuffer||"ArrayBuffer"===t?.constructor?.name&&"number"===typeof t?.byteLength}var Vi=t=>{t.binaryType="arraybuffer";const e=async()=>{await new Promise(((e,n)=>{if(i)return void e();if(null!=r)return void n(r);const s=e=>{t.removeEventListener("open",o),t.removeEventListener("error",a),e()},o=()=>{s(e)},a=e=>{s((()=>{n(e.error??new Error(`connect ECONNREFUSED ${t.url}`))}))};t.addEventListener("open",o),t.addEventListener("error",a)}))},n=async function*(){const n=new Mi.zN((({push:e,stop:n,fail:r})=>{const i=t=>{let n=null;"string"===typeof t.data&&(n=(0,Zi.m)(t.data)),Fi(t.data)&&(n=new Uint8Array(t.data)),t.data instanceof Uint8Array&&(n=t.data),null!=n&&e(n)},s=t=>{r(t.error??new Error("Socket error"))};return t.addEventListener("message",i),t.addEventListener("error",s),t.addEventListener("close",n),()=>{t.removeEventListener("message",i),t.removeEventListener("error",s),t.removeEventListener("close",n)}}),{highWaterMark:1/0});await e();for await(const t of n)yield Fi(t)?new Uint8Array(t):t}();let r,i=1===t.readyState;return t.addEventListener("open",(()=>{i=!0,r=null})),t.addEventListener("close",(()=>{i=!1,r=null})),t.addEventListener("error",(e=>{i||(r=e.error??new Error(`connect ECONNREFUSED ${t.url}`))})),Object.assign(n,{connected:e})},Hi=(t,e)=>{e=e??{};const n=Vi(t);let r=e.remoteAddress,i=e.remotePort;if(null!=t.url)try{const e=new URL(t.url);r=e.hostname,i=parseInt(e.port,10)}catch{}if(null==r||null==i)throw new Error("Remote connection did not have address and/or port");const s={sink:Pi(t,e),source:n,connected:async()=>{await n.connected()},close:async()=>{t.readyState!==t.CONNECTING&&t.readyState!==t.OPEN||await new Promise((e=>{t.addEventListener("close",(()=>{e()})),t.close()}))},destroy:()=>{null!=t.terminate?t.terminate():t.close()},remoteAddress:r,remotePort:i,socket:t};return s},$i=WebSocket;const ji={"http:":"ws:","https:":"wss:"},Ki="ws:";var zi=(t,e)=>{if(t.startsWith("//")&&(t=`${e?.protocol??Ki}${t}`),t.startsWith("/")&&null!=e){const n=e.protocol??Ki,r=e.host,i=null!=e.port&&!0!==r?.endsWith(`:${e.port}`)?`:${e.port}`:"";t=`${n}//${r}${i}${t}`}const n=new URL(t);for(const[r,i]of Object.entries(ji))n.protocol===r&&(n.protocol=i);return n};function qi(t,e){const n="undefined"===typeof window?void 0:window.location;e=e??{};const r=zi(t,n),i=new $i(r.toString(),e.websocket);return Hi(i,e)}var Gi=n(4622),Wi=n(8631),Ji=n(9484);function Yi(){throw new Error("WebSocket Servers can not be created in the browser!")}var Qi=n(4418);function Xi(t,e,n){const r=n.logger.forComponent("libp2p:websockets:maconn"),i={log:r,async sink(e){try{await t.sink(async function*(){for await(const t of e)t instanceof Uint8Array?yield t:yield t.subarray()}())}catch(n){"aborted"!==n.type&&r.error(n)}},source:t.source,remoteAddr:e,timeline:{open:Date.now()},async close(e={}){const n=Date.now();if(null==e.signal){const t=AbortSignal.timeout(Qi.fS);e={...e,signal:t}}const s=()=>{const{host:t,port:e}=i.remoteAddr.toOptions();r("timeout closing stream to %s:%s after %dms, destroying it manually",t,e,Date.now()-n),this.abort(new B.sv("Socket close timeout","ERR_SOCKET_CLOSE_TIMEOUT"))};e.signal?.addEventListener("abort",s);try{await t.close()}catch(o){r.error("error closing WebSocket gracefully",o),this.abort(o)}finally{e.signal?.removeEventListener("abort",s),i.timeline.close=Date.now()}},abort(e){const{host:n,port:s}=i.remoteAddr.toOptions();r("timeout closing stream to %s:%s due to error",n,s,e),t.destroy(),i.timeline.close=Date.now()}};return t.socket.addEventListener("close",(()=>{null==i.timeline.close&&(i.timeline.close=Date.now())}),{once:!0}),i}let ts;ts=Symbol.toStringTag;class es{constructor(t,e){(0,T.Z)(this,"log",void 0),(0,T.Z)(this,"init",void 0),(0,T.Z)(this,"logger",void 0),(0,T.Z)(this,ts,"@libp2p/websockets"),(0,T.Z)(this,O.SF,!0),this.log=t.logger.forComponent("libp2p:websockets"),this.logger=t.logger,this.init=e}async dial(t,e){this.log("dialing %s",t),e=e??{};const n=await this._connect(t,e),r=Xi(n,t,{logger:this.logger});this.log("new outbound connection %s",r.remoteAddr);const i=await e.upgrader.upgradeOutbound(r);return this.log("outbound connection %s upgraded",r.remoteAddr),i}async _connect(t,e){if(!0===e?.signal?.aborted)throw new B._L;const n=t.toOptions();this.log("dialing %s:%s",n.host,n.port);const r=(0,Gi.Z)(),i=qi(Di(t),this.init);if(i.socket.addEventListener("error",(()=>{const e=new B.sv(`Could not connect to ${t.toString()}`,"ERR_CONNECTION_FAILED");this.log.error("connection error:",e),r.reject(e)})),null==e.signal)return await Promise.race([i.connected(),r.promise]),this.log("connected %s",t),i;let s;const o=new Promise(((t,n)=>{s=()=>{n(new B._L),i.close().catch((t=>{this.log.error("error closing raw socket",t)}))},!0!==e?.signal?.aborted?e?.signal?.addEventListener("abort",s):s()}));try{await Promise.race([o,r.promise,i.connected()])}finally{null!=s&&e?.signal?.removeEventListener("abort",s)}return this.log("connected %s",t),i}createListener(t){return Yi({logger:this.logger},{...this.init,...t})}filter(t){return t=Array.isArray(t)?t:[t],null!=this.init?.filter?this.init?.filter(t):Wi.jU||Wi.n2?Ji.xt(t):Ji.$6(t)}}function ns(t={}){return e=>new es(e,t)}},1e3:function(t,e,n){"use strict";n.d(e,{dx:function(){return ts},Ce:function(){return Zi},th:function(){return Vi}});var r={};n.r(r),n.d(r,{base58btc:function(){return tt},base58flickr:function(){return et}});var i={};n.r(i),n.d(i,{base32:function(){return Bt},base32hex:function(){return Ut},base32hexpad:function(){return Mt},base32hexpadupper:function(){return Zt},base32hexupper:function(){return Pt},base32pad:function(){return Nt},base32padupper:function(){return Dt},base32upper:function(){return Ot},base32z:function(){return Ft}});var s={};n.r(s),n.d(s,{identity:function(){return ye}});var o={};n.r(o),n.d(o,{base2:function(){return be}});var a={};n.r(a),n.d(a,{base8:function(){return we}});var c={};n.r(c),n.d(c,{base10:function(){return me}});var u={};n.r(u),n.d(u,{base16:function(){return ve},base16upper:function(){return Ee}});var l={};n.r(l),n.d(l,{base32:function(){return Ae},base32hex:function(){return Ie},base32hexpad:function(){return Ce},base32hexpadupper:function(){return ke},base32hexupper:function(){return Re},base32pad:function(){return Se},base32padupper:function(){return _e},base32upper:function(){return xe},base32z:function(){return Le}});var h={};n.r(h),n.d(h,{base36:function(){return Te},base36upper:function(){return Be}});var d={};n.r(d),n.d(d,{base58btc:function(){return Oe},base58flickr:function(){return Ne}});var f={};n.r(f),n.d(f,{base64:function(){return De},base64pad:function(){return Ue},base64url:function(){return Pe},base64urlpad:function(){return Me}});var p={};n.r(p),n.d(p,{base256emoji:function(){return je}});var g={};n.r(g),n.d(g,{sha256:function(){return An},sha512:function(){return xn}});var y={};n.r(y),n.d(y,{identity:function(){return Cn}});var b={};n.r(b),n.d(b,{code:function(){return Ln},decode:function(){return Bn},encode:function(){return Tn},name:function(){return kn}});var w={};n.r(w),n.d(w,{code:function(){return Un},decode:function(){return Mn},encode:function(){return Pn},name:function(){return Dn}});var m={};n.r(m),n.d(m,{identity:function(){return Jn}});var v={};n.r(v),n.d(v,{base2:function(){return Yn}});var E={};n.r(E),n.d(E,{base8:function(){return Qn}});var A={};n.r(A),n.d(A,{base10:function(){return Xn}});var x={};n.r(x),n.d(x,{base16:function(){return tr},base16upper:function(){return er}});var S={};n.r(S),n.d(S,{base36:function(){return nr},base36upper:function(){return rr}});var _={};n.r(_),n.d(_,{base64:function(){return ir},base64pad:function(){return sr},base64url:function(){return or},base64urlpad:function(){return ar}});var I={};n.r(I),n.d(I,{base256emoji:function(){return fr}});var R={};n.r(R),n.d(R,{sha256:function(){return br},sha512:function(){return wr}});var C={};n.r(C),n.d(C,{identity:function(){return xr}});var k={};n.r(k),n.d(k,{code:function(){return _r},decode:function(){return Rr},encode:function(){return Ir},name:function(){return Sr}});var L={};n.r(L),n.d(L,{code:function(){return Tr},decode:function(){return Or},encode:function(){return Br},name:function(){return Lr}});var T=n(714),B=n(7327),O=n(8829),N=n(2575),D=(n(1439),n(7585),n(5315),n(7658),n(9239));function U(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(255!==n[o])throw new TypeError(s+" is ambiguous");n[o]=i}var a=t.length,c=t.charAt(0),u=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function h(e){if(e instanceof Uint8Array||(ArrayBuffer.isView(e)?e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):Array.isArray(e)&&(e=Uint8Array.from(e))),!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===e.length)return"";var n=0,r=0,i=0,s=e.length;while(i!==s&&0===e[i])i++,n++;var o=(s-i)*l+1>>>0,u=new Uint8Array(o);while(i!==s){for(var h=e[i],d=0,f=o-1;(0!==h||d<r)&&-1!==f;f--,d++)h+=256*u[f]>>>0,u[f]=h%a>>>0,h=h/a>>>0;if(0!==h)throw new Error("Non-zero carry");r=d,i++}var p=o-r;while(p!==o&&0===u[p])p++;for(var g=c.repeat(n);p<o;++p)g+=t.charAt(u[p]);return g}function d(t){if("string"!==typeof t)throw new TypeError("Expected String");if(0===t.length)return new Uint8Array;var e=0;if(" "!==t[e]){var r=0,i=0;while(t[e]===c)r++,e++;var s=(t.length-e)*u+1>>>0,o=new Uint8Array(s);while(t[e]){var l=n[t.charCodeAt(e)];if(255===l)return;for(var h=0,d=s-1;(0!==l||h<i)&&-1!==d;d--,h++)l+=a*o[d]>>>0,o[d]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");i=h,e++}if(" "!==t[e]){var f=s-i;while(f!==s&&0===o[f])f++;var p=new Uint8Array(r+(s-f)),g=r;while(f!==s)p[g++]=o[f++];return p}}}function f(t){var n=d(t);if(n)return n;throw new Error(`Non-${e} character`)}return{encode:h,decodeUnsafe:d,decode:f}}var P=U,M=P,Z=M;new Uint8Array(0);const F=(t,e)=>{if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let n=0;n<t.byteLength;n++)if(t[n]!==e[n])return!1;return!0},V=t=>{if(t instanceof Uint8Array&&"Uint8Array"===t.constructor.name)return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},H=t=>(new TextEncoder).encode(t),$=t=>(new TextDecoder).decode(t);class j{constructor(t,e,n){this.name=t,this.prefix=e,this.baseEncode=n}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class K{constructor(t,e,n){if(this.name=t,this.prefix=e,void 0===e.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=e.codePointAt(0),this.baseDecode=n}decode(t){if("string"===typeof t){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(t){return q(this,t)}}class z{constructor(t){this.decoders=t}or(t){return q(this,t)}decode(t){const e=t[0],n=this.decoders[e];if(n)return n.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const q=(t,e)=>new z({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class G{constructor(t,e,n,r){this.name=t,this.prefix=e,this.baseEncode=n,this.baseDecode=r,this.encoder=new j(t,e,n),this.decoder=new K(t,e,r)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}const W=({name:t,prefix:e,encode:n,decode:r})=>new G(t,e,n,r),J=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:i}=Z(n,e);return W({prefix:t,name:e,encode:r,decode:t=>V(i(t))})},Y=(t,e,n,r)=>{const i={};for(let l=0;l<e.length;++l)i[e[l]]=l;let s=t.length;while("="===t[s-1])--s;const o=new Uint8Array(s*n/8|0);let a=0,c=0,u=0;for(let l=0;l<s;++l){const e=i[t[l]];if(void 0===e)throw new SyntaxError(`Non-${r} character`);c=c<<n|e,a+=n,a>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},Q=(t,e,n)=>{const r="="===e[e.length-1],i=(1<<n)-1;let s="",o=0,a=0;for(let c=0;c<t.length;++c){a=a<<8|t[c],o+=8;while(o>n)o-=n,s+=e[i&a>>o]}if(o&&(s+=e[i&a<<n-o]),r)while(s.length*n&7)s+="=";return s},X=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>W({prefix:e,name:t,encode(t){return Q(t,r,n)},decode(e){return Y(e,r,n,t)}}),tt=J({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),et=J({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var nt=at,rt=128,it=127,st=~it,ot=Math.pow(2,31);function at(t,e,n){e=e||[],n=n||0;var r=n;while(t>=ot)e[n++]=255&t|rt,t/=128;while(t&st)e[n++]=255&t|rt,t>>>=7;return e[n]=0|t,at.bytes=n-r+1,e}var ct=ht,ut=128,lt=127;function ht(t,e){var n,r=0,i=(e=e||0,0),s=e,o=t.length;do{if(s>=o)throw ht.bytes=0,new RangeError("Could not decode varint");n=t[s++],r+=i<28?(n&lt)<<i:(n&lt)*Math.pow(2,i),i+=7}while(n>=ut);return ht.bytes=s-e,r}var dt=Math.pow(2,7),ft=Math.pow(2,14),pt=Math.pow(2,21),gt=Math.pow(2,28),yt=Math.pow(2,35),bt=Math.pow(2,42),wt=Math.pow(2,49),mt=Math.pow(2,56),vt=Math.pow(2,63),Et=function(t){return t<dt?1:t<ft?2:t<pt?3:t<gt?4:t<yt?5:t<bt?6:t<wt?7:t<mt?8:t<vt?9:10},At={encode:nt,decode:ct,encodingLength:Et},xt=At,St=xt;const _t=(t,e=0)=>{const n=St.decode(t,e);return[n,St.decode.bytes]},It=(t,e,n=0)=>(St.encode(t,e,n),e),Rt=t=>St.encodingLength(t),Ct=(t,e)=>{const n=e.byteLength,r=Rt(t),i=r+Rt(n),s=new Uint8Array(i+n);return It(t,s,0),It(n,s,r),s.set(e,i),new Tt(t,n,e,s)},kt=t=>{const e=V(t),[n,r]=_t(e),[i,s]=_t(e.subarray(r)),o=e.subarray(r+s);if(o.byteLength!==i)throw new Error("Incorrect length");return new Tt(n,i,o,e)},Lt=(t,e)=>{if(t===e)return!0;{const n=e;return t.code===n.code&&t.size===n.size&&n.bytes instanceof Uint8Array&&F(t.bytes,n.bytes)}};class Tt{constructor(t,e,n,r){this.code=t,this.size=e,this.digest=n,this.bytes=r}}const Bt=X({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Ot=X({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Nt=X({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Dt=X({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Ut=X({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Pt=X({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Mt=X({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Zt=X({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Ft=X({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),Vt=(t,e)=>{const{bytes:n,version:r}=t;switch(r){case 0:return zt(n,$t(t),e||tt.encoder);default:return qt(n,$t(t),e||Bt.encoder)}},Ht=new WeakMap,$t=t=>{const e=Ht.get(t);if(null==e){const e=new Map;return Ht.set(t,e),e}return e};class jt{constructor(t,e,n,r){this.code=e,this.version=t,this.multihash=n,this.bytes=r,this["/"]=r}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{const{code:t,multihash:e}=this;if(t!==Gt)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(e.code!==Wt)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return jt.createV0(e)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{const{code:t,digest:e}=this.multihash,n=Ct(t,e);return jt.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(t){return jt.equals(this,t)}static equals(t,e){const n=e;return n&&t.code===n.code&&t.version===n.version&&Lt(t.multihash,n.multihash)}toString(t){return Vt(this,t)}toJSON(){return{"/":Vt(this)}}link(){return this}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(t){if(null==t)return null;const e=t;if(e instanceof jt)return e;if(null!=e["/"]&&e["/"]===e.bytes||e.asCID===e){const{version:t,code:n,multihash:r,bytes:i}=e;return new jt(t,n,r,i||Jt(t,n,r.bytes))}if(!0===e[Yt]){const{version:t,multihash:n,code:r}=e,i=kt(n);return jt.create(t,r,i)}return null}static create(t,e,n){if("number"!==typeof e)throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(t){case 0:if(e!==Gt)throw new Error(`Version 0 CID must use dag-pb (code: ${Gt}) block encoding`);return new jt(t,e,n,n.bytes);case 1:{const r=Jt(t,e,n.bytes);return new jt(t,e,n,r)}default:throw new Error("Invalid version")}}static createV0(t){return jt.create(0,Gt,t)}static createV1(t,e){return jt.create(1,t,e)}static decode(t){const[e,n]=jt.decodeFirst(t);if(n.length)throw new Error("Incorrect length");return e}static decodeFirst(t){const e=jt.inspectBytes(t),n=e.size-e.multihashSize,r=V(t.subarray(n,n+e.multihashSize));if(r.byteLength!==e.multihashSize)throw new Error("Incorrect length");const i=r.subarray(e.multihashSize-e.digestSize),s=new Tt(e.multihashCode,e.digestSize,i,r),o=0===e.version?jt.createV0(s):jt.createV1(e.codec,s);return[o,t.subarray(e.size)]}static inspectBytes(t){let e=0;const n=()=>{const[n,r]=_t(t.subarray(e));return e+=r,n};let r=n(),i=Gt;if(18===r?(r=0,e=0):i=n(),0!==r&&1!==r)throw new RangeError(`Invalid CID version ${r}`);const s=e,o=n(),a=n(),c=e+a,u=c-s;return{version:r,codec:i,multihashCode:o,digestSize:a,multihashSize:u,size:c}}static parse(t,e){const[n,r]=Kt(t,e),i=jt.decode(r);if(0===i.version&&"Q"!==t[0])throw Error("Version 0 CID string must not include multibase prefix");return $t(i).set(n,t),i}}const Kt=(t,e)=>{switch(t[0]){case"Q":{const n=e||tt;return[tt.prefix,n.decode(`${tt.prefix}${t}`)]}case tt.prefix:{const n=e||tt;return[tt.prefix,n.decode(t)]}case Bt.prefix:{const n=e||Bt;return[Bt.prefix,n.decode(t)]}default:if(null==e)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}},zt=(t,e,n)=>{const{prefix:r}=n;if(r!==tt.prefix)throw Error(`Cannot string encode V0 in ${n.name} encoding`);const i=e.get(r);if(null==i){const i=n.encode(t).slice(1);return e.set(r,i),i}return i},qt=(t,e,n)=>{const{prefix:r}=n,i=e.get(r);if(null==i){const i=n.encode(t);return e.set(r,i),i}return i},Gt=112,Wt=18,Jt=(t,e,n)=>{const r=Rt(t),i=r+Rt(e),s=new Uint8Array(i+n.byteLength);return It(t,s,0),It(e,s,r),s.set(n,i),s},Yt=Symbol.for("@ipld/js-cid/CID");function Qt(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let n=0;n<t.byteLength;n++)if(t[n]!==e[n])return!1;return!0}function Xt(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(255!==n[o])throw new TypeError(s+" is ambiguous");n[o]=i}var a=t.length,c=t.charAt(0),u=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function h(e){if(e instanceof Uint8Array||(ArrayBuffer.isView(e)?e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):Array.isArray(e)&&(e=Uint8Array.from(e))),!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===e.length)return"";var n=0,r=0,i=0,s=e.length;while(i!==s&&0===e[i])i++,n++;var o=(s-i)*l+1>>>0,u=new Uint8Array(o);while(i!==s){for(var h=e[i],d=0,f=o-1;(0!==h||d<r)&&-1!==f;f--,d++)h+=256*u[f]>>>0,u[f]=h%a>>>0,h=h/a>>>0;if(0!==h)throw new Error("Non-zero carry");r=d,i++}var p=o-r;while(p!==o&&0===u[p])p++;for(var g=c.repeat(n);p<o;++p)g+=t.charAt(u[p]);return g}function d(t){if("string"!==typeof t)throw new TypeError("Expected String");if(0===t.length)return new Uint8Array;var e=0;if(" "!==t[e]){var r=0,i=0;while(t[e]===c)r++,e++;var s=(t.length-e)*u+1>>>0,o=new Uint8Array(s);while(t[e]){var l=n[t.charCodeAt(e)];if(255===l)return;for(var h=0,d=s-1;(0!==l||h<i)&&-1!==d;d--,h++)l+=a*o[d]>>>0,o[d]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");i=h,e++}if(" "!==t[e]){var f=s-i;while(f!==s&&0===o[f])f++;var p=new Uint8Array(r+(s-f)),g=r;while(f!==s)p[g++]=o[f++];return p}}}function f(t){var n=d(t);if(n)return n;throw new Error(`Non-${e} character`)}return{encode:h,decodeUnsafe:d,decode:f}}var te=Xt,ee=te,ne=ee;new Uint8Array(0);const re=t=>{if(t instanceof Uint8Array&&"Uint8Array"===t.constructor.name)return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},ie=t=>(new TextEncoder).encode(t),se=t=>(new TextDecoder).decode(t);class oe{constructor(t,e,n){this.name=t,this.prefix=e,this.baseEncode=n}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class ae{constructor(t,e,n){if(this.name=t,this.prefix=e,void 0===e.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=e.codePointAt(0),this.baseDecode=n}decode(t){if("string"===typeof t){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(t){return ue(this,t)}}class ce{constructor(t){this.decoders=t}or(t){return ue(this,t)}decode(t){const e=t[0],n=this.decoders[e];if(n)return n.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const ue=(t,e)=>new ce({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class le{constructor(t,e,n,r){this.name=t,this.prefix=e,this.baseEncode=n,this.baseDecode=r,this.encoder=new oe(t,e,n),this.decoder=new ae(t,e,r)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}const he=({name:t,prefix:e,encode:n,decode:r})=>new le(t,e,n,r),de=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:i}=ne(n,e);return he({prefix:t,name:e,encode:r,decode:t=>re(i(t))})},fe=(t,e,n,r)=>{const i={};for(let l=0;l<e.length;++l)i[e[l]]=l;let s=t.length;while("="===t[s-1])--s;const o=new Uint8Array(s*n/8|0);let a=0,c=0,u=0;for(let l=0;l<s;++l){const e=i[t[l]];if(void 0===e)throw new SyntaxError(`Non-${r} character`);c=c<<n|e,a+=n,a>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},pe=(t,e,n)=>{const r="="===e[e.length-1],i=(1<<n)-1;let s="",o=0,a=0;for(let c=0;c<t.length;++c){a=a<<8|t[c],o+=8;while(o>n)o-=n,s+=e[i&a>>o]}if(o&&(s+=e[i&a<<n-o]),r)while(s.length*n&7)s+="=";return s},ge=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>he({prefix:e,name:t,encode(t){return pe(t,r,n)},decode(e){return fe(e,r,n,t)}}),ye=he({prefix:"\0",name:"identity",encode:t=>se(t),decode:t=>ie(t)}),be=ge({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),we=ge({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),me=de({prefix:"9",name:"base10",alphabet:"0123456789"}),ve=ge({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Ee=ge({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),Ae=ge({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),xe=ge({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Se=ge({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),_e=ge({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Ie=ge({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Re=ge({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Ce=ge({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),ke=ge({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Le=ge({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),Te=de({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Be=de({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),Oe=de({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Ne=de({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),De=ge({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Ue=ge({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Pe=ge({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Me=ge({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),Ze=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),Fe=Ze.reduce(((t,e,n)=>(t[n]=e,t)),[]),Ve=Ze.reduce(((t,e,n)=>(t[e.codePointAt(0)]=n,t)),[]);function He(t){return t.reduce(((t,e)=>(t+=Fe[e],t)),"")}function $e(t){const e=[];for(const n of t){const t=Ve[n.codePointAt(0)];if(void 0===t)throw new Error(`Non-base256emoji character: ${n}`);e.push(t)}return new Uint8Array(e)}const je=he({prefix:"🚀",name:"base256emoji",encode:He,decode:$e});var Ke=Je,ze=128,qe=127,Ge=~qe,We=Math.pow(2,31);function Je(t,e,n){e=e||[],n=n||0;var r=n;while(t>=We)e[n++]=255&t|ze,t/=128;while(t&Ge)e[n++]=255&t|ze,t>>>=7;return e[n]=0|t,Je.bytes=n-r+1,e}var Ye=tn,Qe=128,Xe=127;function tn(t,e){var n,r=0,i=(e=e||0,0),s=e,o=t.length;do{if(s>=o)throw tn.bytes=0,new RangeError("Could not decode varint");n=t[s++],r+=i<28?(n&Xe)<<i:(n&Xe)*Math.pow(2,i),i+=7}while(n>=Qe);return tn.bytes=s-e,r}var en=Math.pow(2,7),nn=Math.pow(2,14),rn=Math.pow(2,21),sn=Math.pow(2,28),on=Math.pow(2,35),an=Math.pow(2,42),cn=Math.pow(2,49),un=Math.pow(2,56),ln=Math.pow(2,63),hn=function(t){return t<en?1:t<nn?2:t<rn?3:t<sn?4:t<on?5:t<an?6:t<cn?7:t<un?8:t<ln?9:10},dn={encode:Ke,decode:Ye,encodingLength:hn},fn=dn,pn=fn;const gn=(t,e,n=0)=>(pn.encode(t,e,n),e),yn=t=>pn.encodingLength(t),bn=(t,e)=>{const n=e.byteLength,r=yn(t),i=r+yn(n),s=new Uint8Array(i+n);return gn(t,s,0),gn(n,s,r),s.set(e,i),new wn(t,n,e,s)};class wn{constructor(t,e,n,r){this.code=t,this.size=e,this.digest=n,this.bytes=r}}const mn=({name:t,code:e,encode:n})=>new vn(t,e,n);class vn{constructor(t,e,n){this.name=t,this.code=e,this.encode=n}digest(t){if(t instanceof Uint8Array){const e=this.encode(t);return e instanceof Uint8Array?bn(this.code,e):e.then((t=>bn(this.code,t)))}throw Error("Unknown type, must be binary type")}}const En=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),An=mn({name:"sha2-256",code:18,encode:En("SHA-256")}),xn=mn({name:"sha2-512",code:19,encode:En("SHA-512")}),Sn=0,_n="identity",In=re,Rn=t=>bn(Sn,In(t)),Cn={code:Sn,name:_n,encode:In,digest:Rn},kn="raw",Ln=85,Tn=t=>re(t),Bn=t=>re(t),On=new TextEncoder,Nn=new TextDecoder,Dn="json",Un=512,Pn=t=>On.encode(JSON.stringify(t)),Mn=t=>JSON.parse(Nn.decode(t));new WeakMap;Symbol.toStringTag,Symbol.for("nodejs.util.inspect.custom");Symbol.for("@ipld/js-cid/CID");const Zn={...s,...o,...a,...c,...u,...l,...h,...d,...f,...p};function Fn(t){return null!=globalThis.Buffer?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function Vn(t=0){return null!=globalThis.Buffer?.allocUnsafe?Fn(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function Hn(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const $n=Hn("utf8","u",(t=>{const e=new TextDecoder("utf8");return"u"+e.decode(t)}),(t=>{const e=new TextEncoder;return e.encode(t.substring(1))})),jn=Hn("ascii","a",(t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e}),(t=>{t=t.substring(1);const e=Vn(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e})),Kn={utf8:$n,"utf-8":$n,hex:Zn.base16,latin1:jn,ascii:jn,binary:jn,...Zn};var zn=Kn;function qn(t,e="utf8"){const n=zn[e];if(null==n)throw new Error(`Unsupported encoding "${e}"`);return"utf8"!==e&&"utf-8"!==e||null==globalThis.Buffer||null==globalThis.Buffer.from?n.encoder.encode(t).substring(1):globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8")}function Gn(t,e){null==e&&(e=t.reduce(((t,e)=>t+e.length),0));const n=Vn(e);let r=0;for(const i of t)n.set(i,r),r+=i.length;return Fn(n)}var Wn=n(3818);n(314);const Jn=W({prefix:"\0",name:"identity",encode:t=>$(t),decode:t=>H(t)}),Yn=X({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),Qn=X({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),Xn=J({prefix:"9",name:"base10",alphabet:"0123456789"}),tr=X({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),er=X({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),nr=J({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),rr=J({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),ir=X({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),sr=X({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),or=X({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),ar=X({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),cr=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),ur=cr.reduce(((t,e,n)=>(t[n]=e,t)),[]),lr=cr.reduce(((t,e,n)=>(t[e.codePointAt(0)]=n,t)),[]);function hr(t){return t.reduce(((t,e)=>(t+=ur[e],t)),"")}function dr(t){const e=[];for(const n of t){const t=lr[n.codePointAt(0)];if(void 0===t)throw new Error(`Non-base256emoji character: ${n}`);e.push(t)}return new Uint8Array(e)}const fr=W({prefix:"🚀",name:"base256emoji",encode:hr,decode:dr}),pr=({name:t,code:e,encode:n})=>new gr(t,e,n);class gr{constructor(t,e,n){this.name=t,this.code=e,this.encode=n}digest(t){if(t instanceof Uint8Array){const e=this.encode(t);return e instanceof Uint8Array?Ct(this.code,e):e.then((t=>Ct(this.code,t)))}throw Error("Unknown type, must be binary type")}}const yr=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),br=pr({name:"sha2-256",code:18,encode:yr("SHA-256")}),wr=pr({name:"sha2-512",code:19,encode:yr("SHA-512")}),mr=0,vr="identity",Er=V,Ar=t=>Ct(mr,Er(t)),xr={code:mr,name:vr,encode:Er,digest:Ar},Sr="raw",_r=85,Ir=t=>V(t),Rr=t=>V(t),Cr=new TextEncoder,kr=new TextDecoder,Lr="json",Tr=512,Br=t=>Cr.encode(JSON.stringify(t)),Or=t=>JSON.parse(kr.decode(t)),Nr={...m,...v,...E,...A,...x,...i,...S,...r,..._,...I};function Dr(t,e="utf8"){const n=zn[e];if(null==n)throw new Error(`Unsupported encoding "${e}"`);return"utf8"!==e&&"utf-8"!==e||null==globalThis.Buffer||null==globalThis.Buffer.from?n.decoder.decode(`${n.prefix}${t}`):Fn(globalThis.Buffer.from(t,"utf-8"))}var Ur=n(4906);const Pr=Ur.C,Mr=Ur.aY,Zr=function(t){let e=0;if(t=t.toString().trim(),Pr(t)){const n=new Uint8Array(e+4);return t.split(/\./g).forEach((t=>{n[e++]=255&parseInt(t,10)})),n}if(Mr(t)){const n=t.split(":",8);let r;for(r=0;r<n.length;r++){const t=Pr(n[r]);let e;t&&(e=Zr(n[r]),n[r]=qn(e.slice(0,2),"base16")),null!=e&&++r<8&&n.splice(r,0,qn(e.slice(2,4),"base16"))}if(""===n[0])while(n.length<8)n.unshift("0");else if(""===n[n.length-1])while(n.length<8)n.push("0");else if(n.length<8){for(r=0;r<n.length&&""!==n[r];r++);const t=[r,1];for(r=9-n.length;r>0;r--)t.push("0");n.splice.apply(n,t)}const i=new Uint8Array(e+16);for(r=0;r<n.length;r++){const t=parseInt(n[r],16);i[e++]=t>>8&255,i[e++]=255&t}return i}throw new Error("invalid ip address")},Fr=function(t,e=0,n){e=~~e,n=n??t.length-e;const r=new DataView(t.buffer);if(4===n){const r=[];for(let i=0;i<n;i++)r.push(t[e+i]);return r.join(".")}if(16===n){const t=[];for(let i=0;i<n;i+=2)t.push(r.getUint16(e+i).toString(16));return t.join(":").replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3").replace(/:{3,4}/,"::")}return""},Vr=-1,Hr={},$r={},jr=[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,Vr,"ip6zone"],[43,8,"ipcidr"],[53,Vr,"dns",!0],[54,Vr,"dns4",!0],[55,Vr,"dns6",!0],[56,Vr,"dnsaddr",!0],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[280,0,"webrtc-direct"],[281,0,"webrtc"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,Vr,"unix",!1,!0],[421,Vr,"ipfs"],[421,Vr,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,Vr,"garlic64"],[448,0,"tls"],[449,Vr,"sni"],[460,0,"quic"],[461,0,"quic-v1"],[465,0,"webtransport"],[466,Vr,"certhash"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[777,Vr,"memory"]];function Kr(t,e,n,r,i){return{code:t,size:e,name:n,resolvable:Boolean(r),path:Boolean(i)}}function zr(t){if("number"===typeof t){if(null!=$r[t])return $r[t];throw new Error(`no protocol with code: ${t}`)}if("string"===typeof t){if(null!=Hr[t])return Hr[t];throw new Error(`no protocol with name: ${t}`)}throw new Error("invalid protocol id type: "+typeof t)}jr.forEach((t=>{const e=Kr(...t);$r[e.code]=e,Hr[e.name]=e}));zr("ip4"),zr("ip6"),zr("ipcidr");function qr(t,e){const n=zr(t);switch(n.code){case 4:case 41:return Qr(e);case 42:return ni(e);case 6:case 273:case 33:case 132:return ti(e).toString();case 53:case 54:case 55:case 56:case 400:case 449:case 777:return ni(e);case 421:return oi(e);case 444:return ui(e);case 445:return ui(e);case 466:return si(e);default:return qn(e,"base16")}}function Gr(t,e){const n=zr(t);switch(n.code){case 4:return Yr(e);case 41:return Yr(e);case 42:return ei(e);case 6:case 273:case 33:case 132:return Xr(parseInt(e,10));case 53:case 54:case 55:case 56:case 400:case 449:case 777:return ei(e);case 421:return ri(e);case 444:return ai(e);case 445:return ci(e);case 466:return ii(e);default:return Dr(e,"base16")}}const Wr=Object.values(Nr).map((t=>t.decoder)),Jr=function(){let t=Wr[0].or(Wr[1]);return Wr.slice(2).forEach((e=>t=t.or(e))),t}();function Yr(t){if(!Ur.h6(t))throw new Error("invalid ip address");return Zr(t)}function Qr(t){const e=Fr(t,0,t.length);if(null==e)throw new Error("ipBuff is required");if(!Ur.h6(e))throw new Error("invalid ip address");return e}function Xr(t){const e=new ArrayBuffer(2),n=new DataView(e);return n.setUint16(0,t),new Uint8Array(e)}function ti(t){const e=new DataView(t.buffer);return e.getUint16(t.byteOffset)}function ei(t){const e=Dr(t),n=Uint8Array.from(Wn.encode(e.length));return Gn([n,e],n.length+e.length)}function ni(t){const e=Wn.decode(t);if(t=t.slice(Wn.decode.bytes),t.length!==e)throw new Error("inconsistent lengths");return qn(t)}function ri(t){let e;e="Q"===t[0]||"1"===t[0]?kt(tt.decode(`z${t}`)).bytes:jt.parse(t).multihash.bytes;const n=Uint8Array.from(Wn.encode(e.length));return Gn([n,e],n.length+e.length)}function ii(t){const e=Jr.decode(t),n=Uint8Array.from(Wn.encode(e.length));return Gn([n,e],n.length+e.length)}function si(t){const e=Wn.decode(t),n=t.slice(Wn.decode.bytes);if(n.length!==e)throw new Error("inconsistent lengths");return"u"+qn(n,"base64url")}function oi(t){const e=Wn.decode(t),n=t.slice(Wn.decode.bytes);if(n.length!==e)throw new Error("inconsistent lengths");return qn(n,"base58btc")}function ai(t){const e=t.split(":");if(2!==e.length)throw new Error(`failed to parse onion addr: ["'${e.join('", "')}'"]' does not contain a port number`);if(16!==e[0].length)throw new Error(`failed to parse onion addr: ${e[0]} not a Tor onion address.`);const n=Bt.decode("b"+e[0]),r=parseInt(e[1],10);if(r<1||r>65536)throw new Error("Port number is not in range(1, 65536)");const i=Xr(r);return Gn([n,i],n.length+i.length)}function ci(t){const e=t.split(":");if(2!==e.length)throw new Error(`failed to parse onion addr: ["'${e.join('", "')}'"]' does not contain a port number`);if(56!==e[0].length)throw new Error(`failed to parse onion addr: ${e[0]} not a Tor onion3 address.`);const n=Bt.decode(`b${e[0]}`),r=parseInt(e[1],10);if(r<1||r>65536)throw new Error("Port number is not in range(1, 65536)");const i=Xr(r);return Gn([n,i],n.length+i.length)}function ui(t){const e=t.slice(0,t.length-2),n=t.slice(t.length-2),r=qn(e,"base32"),i=ti(n);return`${r}:${i}`}function li(t){t=gi(t);const e=[],n=[];let r=null;const i=t.split("/").slice(1);if(1===i.length&&""===i[0])return{bytes:new Uint8Array,string:"/",tuples:[],stringTuples:[],path:null};for(let s=0;s<i.length;s++){const o=i[s],a=zr(o);if(0===a.size){e.push([a.code]),n.push([a.code]);continue}if(s++,s>=i.length)throw yi("invalid address: "+t);if(!0===a.path){r=gi(i.slice(s).join("/")),e.push([a.code,Gr(a.code,r)]),n.push([a.code,r]);break}const c=Gr(a.code,i[s]);e.push([a.code,c]),n.push([a.code,qr(a.code,c)])}return{string:di(n),bytes:fi(e),tuples:e,stringTuples:n,path:r}}function hi(t){const e=[],n=[];let r=null,i=0;while(i<t.length){const s=Wn.decode(t,i),o=Wn.decode.bytes??0,a=zr(s),c=pi(a,t.slice(i+o));if(0===c){e.push([s]),n.push([s]),i+=o;continue}const u=t.slice(i+o,i+o+c);if(i+=c+o,i>t.length)throw yi("Invalid address Uint8Array: "+qn(t,"base16"));e.push([s,u]);const l=qr(s,u);if(n.push([s,l]),!0===a.path){r=l;break}}return{bytes:Uint8Array.from(t),string:di(n),tuples:e,stringTuples:n,path:r}}function di(t){const e=[];return t.map((t=>{const n=zr(t[0]);return e.push(n.name),t.length>1&&null!=t[1]&&e.push(t[1]),null})),gi(e.join("/"))}function fi(t){return Gn(t.map((t=>{const e=zr(t[0]);let n=Uint8Array.from(Wn.encode(e.code));return t.length>1&&null!=t[1]&&(n=Gn([n,t[1]])),n})))}function pi(t,e){if(t.size>0)return t.size/8;if(0===t.size)return 0;{const t=Wn.decode(e);return t+(Wn.decode.bytes??0)}}function gi(t){return"/"+t.trim().split("/").filter((t=>t)).join("/")}function yi(t){return new Error("Error parsing address: "+t)}const bi=Symbol.for("nodejs.util.inspect.custom"),wi=[zr("dns").code,zr("dns4").code,zr("dns6").code,zr("dnsaddr").code],mi=new Map,vi=Symbol.for("@multiformats/js-multiaddr/multiaddr");function Ei(t){return Boolean(t?.[vi])}var Ai=new WeakMap,xi=new WeakMap,Si=new WeakMap,_i=new WeakMap;class Ii{constructor(t){let e;if((0,B.Z)(this,"bytes",void 0),(0,T.Z)(this,Ai,{writable:!0,value:void 0}),(0,T.Z)(this,xi,{writable:!0,value:void 0}),(0,T.Z)(this,Si,{writable:!0,value:void 0}),(0,T.Z)(this,_i,{writable:!0,value:void 0}),(0,B.Z)(this,vi,!0),null==t&&(t=""),t instanceof Uint8Array)e=hi(t);else if("string"===typeof t){if(t.length>0&&"/"!==t.charAt(0))throw new Error(`multiaddr "${t}" must start with a "/"`);e=li(t)}else{if(!Ei(t))throw new Error("addr must be a string, Buffer, or another Multiaddr");e=hi(t.bytes)}this.bytes=e.bytes,(0,N.Z)(this,Ai,e.string),(0,N.Z)(this,xi,e.tuples),(0,N.Z)(this,Si,e.stringTuples),(0,N.Z)(this,_i,e.path)}toString(){return(0,O.Z)(this,Ai)}toJSON(){return this.toString()}toOptions(){let t,e,n,r,i="";const s=zr("tcp"),o=zr("udp"),a=zr("ip4"),c=zr("ip6"),u=zr("dns6"),l=zr("ip6zone");for(const[d,f]of this.stringTuples())d===l.code&&(i=`%${f??""}`),wi.includes(d)&&(e=s.name,r=443,n=`${f??""}${i}`,t=d===u.code?6:4),d!==s.code&&d!==o.code||(e=zr(d).name,r=parseInt(f??"")),d!==a.code&&d!==c.code||(e=zr(d).name,n=`${f??""}${i}`,t=d===c.code?6:4);if(null==t||null==e||null==n||null==r)throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6, dnsaddr}/{address}/{tcp, udp}/{port}".');const h={family:t,host:n,transport:e,port:r};return h}protos(){return(0,O.Z)(this,xi).map((([t])=>Object.assign({},zr(t))))}protoCodes(){return(0,O.Z)(this,xi).map((([t])=>t))}protoNames(){return(0,O.Z)(this,xi).map((([t])=>zr(t).name))}tuples(){return(0,O.Z)(this,xi)}stringTuples(){return(0,O.Z)(this,Si)}encapsulate(t){return t=new Ii(t),new Ii(this.toString()+t.toString())}decapsulate(t){const e=t.toString(),n=this.toString(),r=n.lastIndexOf(e);if(r<0)throw new Error(`Address ${this.toString()} does not contain subaddress: ${t.toString()}`);return new Ii(n.slice(0,r))}decapsulateCode(t){const e=this.tuples();for(let n=e.length-1;n>=0;n--)if(e[n][0]===t)return new Ii(fi(e.slice(0,n)));return this}getPeerId(){try{let t=[];this.stringTuples().forEach((([e,n])=>{e===Hr.p2p.code&&t.push([e,n]),e===Hr["p2p-circuit"].code&&(t=[])}));const e=t.pop();if(null!=e?.[1]){const t=e[1];return"Q"===t[0]||"1"===t[0]?qn(tt.decode(`z${t}`),"base58btc"):qn(jt.parse(t).multihash.bytes,"base58btc")}return null}catch(t){return null}}getPath(){return(0,O.Z)(this,_i)}equals(t){return Qt(this.bytes,t.bytes)}async resolve(t){const e=this.protos().find((t=>t.resolvable));if(null==e)return[this];const n=mi.get(e.name);if(null==n)throw new D.s(`no available resolver for ${e.name}`,"ERR_NO_AVAILABLE_RESOLVER");const r=await n(this,t);return r.map((t=>new Ii(t)))}nodeAddress(){const t=this.toOptions();if("tcp"!==t.transport&&"udp"!==t.transport)throw new Error(`multiaddr must have a valid format - no protocol with name: "${t.transport}". Must have a valid transport protocol: "{tcp, udp}"`);return{family:t.family,address:t.host,port:t.port}}isThinWaistAddress(t){const e=(t??this).protos();return 2===e.length&&((4===e[0].code||41===e[0].code)&&(6===e[1].code||273===e[1].code))}[bi](){return`Multiaddr(${(0,O.Z)(this,Ai)})`}}function Ri(t){return new Ii(t)}const Ci=is("dns4"),ki=is("dns6"),Li=is("dnsaddr"),Ti=rs(is("dns"),Li,Ci,ki),Bi=rs(is("ip4"),is("ip6")),Oi=rs(ns(Bi,is("tcp")),ns(Ti,is("tcp"))),Ni=ns(Bi,is("udp")),Di=ns(Ni,is("utp")),Ui=ns(Ni,is("quic")),Pi=ns(Ni,is("quic-v1")),Mi=rs(ns(Oi,is("ws")),ns(Ti,is("ws"))),Zi=rs(ns(Mi,is("p2p")),Mi),Fi=rs(ns(Oi,is("wss")),ns(Ti,is("wss")),ns(Oi,is("tls"),is("ws")),ns(Ti,is("tls"),is("ws"))),Vi=rs(ns(Fi,is("p2p")),Fi),Hi=rs(ns(Oi,is("http")),ns(Bi,is("http")),ns(Ti,is("http"))),$i=rs(ns(Oi,is("https")),ns(Bi,is("https")),ns(Ti,is("https"))),ji=ns(Ni,is("webrtc-direct"),is("certhash")),Ki=rs(ns(ji,is("p2p")),ji),zi=ns(Pi,is("webtransport"),is("certhash"),is("certhash")),qi=rs(ns(zi,is("p2p")),zi),Gi=rs(ns(Zi,is("p2p-webrtc-star"),is("p2p")),ns(Vi,is("p2p-webrtc-star"),is("p2p")),ns(Zi,is("p2p-webrtc-star")),ns(Vi,is("p2p-webrtc-star"))),Wi=(rs(ns(Zi,is("p2p-websocket-star"),is("p2p")),ns(Vi,is("p2p-websocket-star"),is("p2p")),ns(Zi,is("p2p-websocket-star")),ns(Vi,is("p2p-websocket-star"))),rs(ns(Hi,is("p2p-webrtc-direct"),is("p2p")),ns($i,is("p2p-webrtc-direct"),is("p2p")),ns(Hi,is("p2p-webrtc-direct")),ns($i,is("p2p-webrtc-direct")))),Ji=rs(Mi,Fi,Hi,$i,Gi,Wi,Oi,Di,Ui,Ti,Ki,qi),Yi=(rs(ns(Ji,is("p2p-stardust"),is("p2p")),ns(Ji,is("p2p-stardust"))),rs(ns(Ji,is("p2p")),Gi,Wi,Ki,qi,is("p2p"))),Qi=rs(ns(Yi,is("p2p-circuit"),Yi),ns(Yi,is("p2p-circuit")),ns(is("p2p-circuit"),Yi),ns(Ji,is("p2p-circuit")),ns(is("p2p-circuit"),Ji),is("p2p-circuit")),Xi=()=>rs(ns(Qi,Xi),Qi),ts=Xi();rs(ns(ts,Yi,ts),ns(Yi,ts),ns(ts,Yi),ts,Yi),rs(ns(ts,is("webrtc"),is("p2p")),ns(ts,is("webrtc")),ns(Ji,is("webrtc"),is("p2p")),ns(Ji,is("webrtc")),is("webrtc"));function es(t){function e(e){let n;try{n=Ri(e)}catch(i){return!1}const r=t(n.protoNames());return null!==r&&(!0===r||!1===r?r:0===r.length)}return e}function ns(...t){function e(e){if(e.length<t.length)return null;let n=e;return t.some((t=>(n="function"===typeof t?t().partialMatch(e):t.partialMatch(e),Array.isArray(n)&&(e=n),null===n))),n}return{toString:function(){return"{ "+t.join(" ")+" }"},input:t,matches:es(e),partialMatch:e}}function rs(...t){function e(e){let n=null;return t.some((t=>{const r="function"===typeof t?t().partialMatch(e):t.partialMatch(e);return null!=r&&(n=r,!0)})),n}const n={toString:function(){return"{ "+t.join(" ")+" }"},input:t,matches:es(e),partialMatch:e};return n}function is(t){const e=t;function n(t){let n;try{n=Ri(t)}catch(i){return!1}const r=n.protoNames();return 1===r.length&&r[0]===e}function r(t){return 0===t.length?null:t[0]===e?t.slice(1):null}return{toString:function(){return e},matches:n,partialMatch:r}}},3305:function(t,e,n){"use strict";n.d(e,{dx:function(){return Qr},Iq:function(){return Mr}});var r={};n.r(r),n.d(r,{base58btc:function(){return W},base58flickr:function(){return J}});var i={};n.r(i),n.d(i,{base32:function(){return St},base32hex:function(){return Ct},base32hexpad:function(){return Lt},base32hexpadupper:function(){return Tt},base32hexupper:function(){return kt},base32pad:function(){return It},base32padupper:function(){return Rt},base32upper:function(){return _t},base32z:function(){return Bt}});var s={};n.r(s),n.d(s,{identity:function(){return Jt}});var o={};n.r(o),n.d(o,{base2:function(){return Yt}});var a={};n.r(a),n.d(a,{base8:function(){return Qt}});var c={};n.r(c),n.d(c,{base10:function(){return Xt}});var u={};n.r(u),n.d(u,{base16:function(){return te},base16upper:function(){return ee}});var l={};n.r(l),n.d(l,{base32:function(){return ne},base32hex:function(){return oe},base32hexpad:function(){return ce},base32hexpadupper:function(){return ue},base32hexupper:function(){return ae},base32pad:function(){return ie},base32padupper:function(){return se},base32upper:function(){return re},base32z:function(){return le}});var h={};n.r(h),n.d(h,{base36:function(){return he},base36upper:function(){return de}});var d={};n.r(d),n.d(d,{base58btc:function(){return fe},base58flickr:function(){return pe}});var f={};n.r(f),n.d(f,{base64:function(){return ge},base64pad:function(){return ye},base64url:function(){return be},base64urlpad:function(){return we}});var p={};n.r(p),n.d(p,{base256emoji:function(){return Se}});var g={};n.r(g),n.d(g,{sha256:function(){return en},sha512:function(){return nn}});var y={};n.r(y),n.d(y,{identity:function(){return cn}});var b={};n.r(b),n.d(b,{code:function(){return ln},decode:function(){return dn},encode:function(){return hn},name:function(){return un}});var w={};n.r(w),n.d(w,{code:function(){return yn},decode:function(){return wn},encode:function(){return bn},name:function(){return gn}});var m={};n.r(m),n.d(m,{identity:function(){return _n}});var v={};n.r(v),n.d(v,{base2:function(){return In}});var E={};n.r(E),n.d(E,{base8:function(){return Rn}});var A={};n.r(A),n.d(A,{base10:function(){return Cn}});var x={};n.r(x),n.d(x,{base16:function(){return kn},base16upper:function(){return Ln}});var S={};n.r(S),n.d(S,{base36:function(){return Tn},base36upper:function(){return Bn}});var _={};n.r(_),n.d(_,{base64:function(){return On},base64pad:function(){return Nn},base64url:function(){return Dn},base64urlpad:function(){return Un}});var I={};n.r(I),n.d(I,{base256emoji:function(){return Hn}});var R={};n.r(R),n.d(R,{sha256:function(){return zn},sha512:function(){return qn}});var C={};n.r(C),n.d(C,{identity:function(){return Qn}});var k={};n.r(k),n.d(k,{code:function(){return tr},decode:function(){return nr},encode:function(){return er},name:function(){return Xn}});var L={};n.r(L),n.d(L,{code:function(){return or},decode:function(){return cr},encode:function(){return ar},name:function(){return sr}});var T=n(4906);n(1439),n(7585),n(5315),n(7658),n(9239);function B(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(255!==n[o])throw new TypeError(s+" is ambiguous");n[o]=i}var a=t.length,c=t.charAt(0),u=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function h(e){if(e instanceof Uint8Array||(ArrayBuffer.isView(e)?e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):Array.isArray(e)&&(e=Uint8Array.from(e))),!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===e.length)return"";var n=0,r=0,i=0,s=e.length;while(i!==s&&0===e[i])i++,n++;var o=(s-i)*l+1>>>0,u=new Uint8Array(o);while(i!==s){for(var h=e[i],d=0,f=o-1;(0!==h||d<r)&&-1!==f;f--,d++)h+=256*u[f]>>>0,u[f]=h%a>>>0,h=h/a>>>0;if(0!==h)throw new Error("Non-zero carry");r=d,i++}var p=o-r;while(p!==o&&0===u[p])p++;for(var g=c.repeat(n);p<o;++p)g+=t.charAt(u[p]);return g}function d(t){if("string"!==typeof t)throw new TypeError("Expected String");if(0===t.length)return new Uint8Array;var e=0;if(" "!==t[e]){var r=0,i=0;while(t[e]===c)r++,e++;var s=(t.length-e)*u+1>>>0,o=new Uint8Array(s);while(t[e]){var l=n[t.charCodeAt(e)];if(255===l)return;for(var h=0,d=s-1;(0!==l||h<i)&&-1!==d;d--,h++)l+=a*o[d]>>>0,o[d]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");i=h,e++}if(" "!==t[e]){var f=s-i;while(f!==s&&0===o[f])f++;var p=new Uint8Array(r+(s-f)),g=r;while(f!==s)p[g++]=o[f++];return p}}}function f(t){var n=d(t);if(n)return n;throw new Error(`Non-${e} character`)}return{encode:h,decodeUnsafe:d,decode:f}}var O=B,N=O,D=N;new Uint8Array(0);const U=t=>{if(t instanceof Uint8Array&&"Uint8Array"===t.constructor.name)return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},P=t=>(new TextEncoder).encode(t),M=t=>(new TextDecoder).decode(t);class Z{constructor(t,e,n){this.name=t,this.prefix=e,this.baseEncode=n}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class F{constructor(t,e,n){if(this.name=t,this.prefix=e,void 0===e.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=e.codePointAt(0),this.baseDecode=n}decode(t){if("string"===typeof t){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(t){return H(this,t)}}class V{constructor(t){this.decoders=t}or(t){return H(this,t)}decode(t){const e=t[0],n=this.decoders[e];if(n)return n.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const H=(t,e)=>new V({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class ${constructor(t,e,n,r){this.name=t,this.prefix=e,this.baseEncode=n,this.baseDecode=r,this.encoder=new Z(t,e,n),this.decoder=new F(t,e,r)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}const j=({name:t,prefix:e,encode:n,decode:r})=>new $(t,e,n,r),K=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:i}=D(n,e);return j({prefix:t,name:e,encode:r,decode:t=>U(i(t))})},z=(t,e,n,r)=>{const i={};for(let l=0;l<e.length;++l)i[e[l]]=l;let s=t.length;while("="===t[s-1])--s;const o=new Uint8Array(s*n/8|0);let a=0,c=0,u=0;for(let l=0;l<s;++l){const e=i[t[l]];if(void 0===e)throw new SyntaxError(`Non-${r} character`);c=c<<n|e,a+=n,a>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},q=(t,e,n)=>{const r="="===e[e.length-1],i=(1<<n)-1;let s="",o=0,a=0;for(let c=0;c<t.length;++c){a=a<<8|t[c],o+=8;while(o>n)o-=n,s+=e[i&a>>o]}if(o&&(s+=e[i&a<<n-o]),r)while(s.length*n&7)s+="=";return s},G=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>j({prefix:e,name:t,encode(t){return q(t,r,n)},decode(e){return z(e,r,n,t)}}),W=K({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),J=K({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Y=nt,Q=128,X=127,tt=~X,et=Math.pow(2,31);function nt(t,e,n){e=e||[],n=n||0;var r=n;while(t>=et)e[n++]=255&t|Q,t/=128;while(t&tt)e[n++]=255&t|Q,t>>>=7;return e[n]=0|t,nt.bytes=n-r+1,e}var rt=ot,it=128,st=127;function ot(t,e){var n,r=0,i=(e=e||0,0),s=e,o=t.length;do{if(s>=o)throw ot.bytes=0,new RangeError("Could not decode varint");n=t[s++],r+=i<28?(n&st)<<i:(n&st)*Math.pow(2,i),i+=7}while(n>=it);return ot.bytes=s-e,r}var at=Math.pow(2,7),ct=Math.pow(2,14),ut=Math.pow(2,21),lt=Math.pow(2,28),ht=Math.pow(2,35),dt=Math.pow(2,42),ft=Math.pow(2,49),pt=Math.pow(2,56),gt=Math.pow(2,63),yt=function(t){return t<at?1:t<ct?2:t<ut?3:t<lt?4:t<ht?5:t<dt?6:t<ft?7:t<pt?8:t<gt?9:10},bt={encode:Y,decode:rt,encodingLength:yt},wt=bt,mt=wt;const vt=(t,e,n=0)=>(mt.encode(t,e,n),e),Et=t=>mt.encodingLength(t),At=(t,e)=>{const n=e.byteLength,r=Et(t),i=r+Et(n),s=new Uint8Array(i+n);return vt(t,s,0),vt(n,s,r),s.set(e,i),new xt(t,n,e,s)};class xt{constructor(t,e,n,r){this.code=t,this.size=e,this.digest=n,this.bytes=r}}const St=G({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),_t=G({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),It=G({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Rt=G({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Ct=G({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),kt=G({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Lt=G({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Tt=G({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Bt=G({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});new WeakMap;Symbol.toStringTag,Symbol.for("nodejs.util.inspect.custom");Symbol.for("@ipld/js-cid/CID");function Ot(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(255!==n[o])throw new TypeError(s+" is ambiguous");n[o]=i}var a=t.length,c=t.charAt(0),u=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function h(e){if(e instanceof Uint8Array||(ArrayBuffer.isView(e)?e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):Array.isArray(e)&&(e=Uint8Array.from(e))),!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===e.length)return"";var n=0,r=0,i=0,s=e.length;while(i!==s&&0===e[i])i++,n++;var o=(s-i)*l+1>>>0,u=new Uint8Array(o);while(i!==s){for(var h=e[i],d=0,f=o-1;(0!==h||d<r)&&-1!==f;f--,d++)h+=256*u[f]>>>0,u[f]=h%a>>>0,h=h/a>>>0;if(0!==h)throw new Error("Non-zero carry");r=d,i++}var p=o-r;while(p!==o&&0===u[p])p++;for(var g=c.repeat(n);p<o;++p)g+=t.charAt(u[p]);return g}function d(t){if("string"!==typeof t)throw new TypeError("Expected String");if(0===t.length)return new Uint8Array;var e=0;if(" "!==t[e]){var r=0,i=0;while(t[e]===c)r++,e++;var s=(t.length-e)*u+1>>>0,o=new Uint8Array(s);while(t[e]){var l=n[t.charCodeAt(e)];if(255===l)return;for(var h=0,d=s-1;(0!==l||h<i)&&-1!==d;d--,h++)l+=a*o[d]>>>0,o[d]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");i=h,e++}if(" "!==t[e]){var f=s-i;while(f!==s&&0===o[f])f++;var p=new Uint8Array(r+(s-f)),g=r;while(f!==s)p[g++]=o[f++];return p}}}function f(t){var n=d(t);if(n)return n;throw new Error(`Non-${e} character`)}return{encode:h,decodeUnsafe:d,decode:f}}var Nt=Ot,Dt=Nt,Ut=Dt;new Uint8Array(0);const Pt=t=>{if(t instanceof Uint8Array&&"Uint8Array"===t.constructor.name)return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},Mt=t=>(new TextEncoder).encode(t),Zt=t=>(new TextDecoder).decode(t);class Ft{constructor(t,e,n){this.name=t,this.prefix=e,this.baseEncode=n}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class Vt{constructor(t,e,n){if(this.name=t,this.prefix=e,void 0===e.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=e.codePointAt(0),this.baseDecode=n}decode(t){if("string"===typeof t){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(t){return $t(this,t)}}class Ht{constructor(t){this.decoders=t}or(t){return $t(this,t)}decode(t){const e=t[0],n=this.decoders[e];if(n)return n.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const $t=(t,e)=>new Ht({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class jt{constructor(t,e,n,r){this.name=t,this.prefix=e,this.baseEncode=n,this.baseDecode=r,this.encoder=new Ft(t,e,n),this.decoder=new Vt(t,e,r)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}const Kt=({name:t,prefix:e,encode:n,decode:r})=>new jt(t,e,n,r),zt=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:i}=Ut(n,e);return Kt({prefix:t,name:e,encode:r,decode:t=>Pt(i(t))})},qt=(t,e,n,r)=>{const i={};for(let l=0;l<e.length;++l)i[e[l]]=l;let s=t.length;while("="===t[s-1])--s;const o=new Uint8Array(s*n/8|0);let a=0,c=0,u=0;for(let l=0;l<s;++l){const e=i[t[l]];if(void 0===e)throw new SyntaxError(`Non-${r} character`);c=c<<n|e,a+=n,a>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},Gt=(t,e,n)=>{const r="="===e[e.length-1],i=(1<<n)-1;let s="",o=0,a=0;for(let c=0;c<t.length;++c){a=a<<8|t[c],o+=8;while(o>n)o-=n,s+=e[i&a>>o]}if(o&&(s+=e[i&a<<n-o]),r)while(s.length*n&7)s+="=";return s},Wt=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>Kt({prefix:e,name:t,encode(t){return Gt(t,r,n)},decode(e){return qt(e,r,n,t)}}),Jt=Kt({prefix:"\0",name:"identity",encode:t=>Zt(t),decode:t=>Mt(t)}),Yt=Wt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),Qt=Wt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),Xt=zt({prefix:"9",name:"base10",alphabet:"0123456789"}),te=Wt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),ee=Wt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),ne=Wt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),re=Wt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),ie=Wt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),se=Wt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),oe=Wt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),ae=Wt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),ce=Wt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),ue=Wt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),le=Wt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),he=zt({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),de=zt({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),fe=zt({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),pe=zt({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),ge=Wt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),ye=Wt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),be=Wt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),we=Wt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),me=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),ve=me.reduce(((t,e,n)=>(t[n]=e,t)),[]),Ee=me.reduce(((t,e,n)=>(t[e.codePointAt(0)]=n,t)),[]);function Ae(t){return t.reduce(((t,e)=>(t+=ve[e],t)),"")}function xe(t){const e=[];for(const n of t){const t=Ee[n.codePointAt(0)];if(void 0===t)throw new Error(`Non-base256emoji character: ${n}`);e.push(t)}return new Uint8Array(e)}const Se=Kt({prefix:"🚀",name:"base256emoji",encode:Ae,decode:xe});var _e=Le,Ie=128,Re=127,Ce=~Re,ke=Math.pow(2,31);function Le(t,e,n){e=e||[],n=n||0;var r=n;while(t>=ke)e[n++]=255&t|Ie,t/=128;while(t&Ce)e[n++]=255&t|Ie,t>>>=7;return e[n]=0|t,Le.bytes=n-r+1,e}var Te=Ne,Be=128,Oe=127;function Ne(t,e){var n,r=0,i=(e=e||0,0),s=e,o=t.length;do{if(s>=o)throw Ne.bytes=0,new RangeError("Could not decode varint");n=t[s++],r+=i<28?(n&Oe)<<i:(n&Oe)*Math.pow(2,i),i+=7}while(n>=Be);return Ne.bytes=s-e,r}var De=Math.pow(2,7),Ue=Math.pow(2,14),Pe=Math.pow(2,21),Me=Math.pow(2,28),Ze=Math.pow(2,35),Fe=Math.pow(2,42),Ve=Math.pow(2,49),He=Math.pow(2,56),$e=Math.pow(2,63),je=function(t){return t<De?1:t<Ue?2:t<Pe?3:t<Me?4:t<Ze?5:t<Fe?6:t<Ve?7:t<He?8:t<$e?9:10},Ke={encode:_e,decode:Te,encodingLength:je},ze=Ke,qe=ze;const Ge=(t,e,n=0)=>(qe.encode(t,e,n),e),We=t=>qe.encodingLength(t),Je=(t,e)=>{const n=e.byteLength,r=We(t),i=r+We(n),s=new Uint8Array(i+n);return Ge(t,s,0),Ge(n,s,r),s.set(e,i),new Ye(t,n,e,s)};class Ye{constructor(t,e,n,r){this.code=t,this.size=e,this.digest=n,this.bytes=r}}const Qe=({name:t,code:e,encode:n})=>new Xe(t,e,n);class Xe{constructor(t,e,n){this.name=t,this.code=e,this.encode=n}digest(t){if(t instanceof Uint8Array){const e=this.encode(t);return e instanceof Uint8Array?Je(this.code,e):e.then((t=>Je(this.code,t)))}throw Error("Unknown type, must be binary type")}}const tn=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),en=Qe({name:"sha2-256",code:18,encode:tn("SHA-256")}),nn=Qe({name:"sha2-512",code:19,encode:tn("SHA-512")}),rn=0,sn="identity",on=Pt,an=t=>Je(rn,on(t)),cn={code:rn,name:sn,encode:on,digest:an},un="raw",ln=85,hn=t=>Pt(t),dn=t=>Pt(t),fn=new TextEncoder,pn=new TextDecoder,gn="json",yn=512,bn=t=>fn.encode(JSON.stringify(t)),wn=t=>JSON.parse(pn.decode(t));new WeakMap;Symbol.toStringTag,Symbol.for("nodejs.util.inspect.custom");Symbol.for("@ipld/js-cid/CID");const mn={...s,...o,...a,...c,...u,...l,...h,...d,...f,...p};function vn(t){return null!=globalThis.Buffer?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function En(t=0){return null!=globalThis.Buffer?.allocUnsafe?vn(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function An(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const xn=An("utf8","u",(t=>{const e=new TextDecoder("utf8");return"u"+e.decode(t)}),(t=>{const e=new TextEncoder;return e.encode(t.substring(1))})),Sn=An("ascii","a",(t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e}),(t=>{t=t.substring(1);const e=En(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}));mn.base16;n(8032),n(314);const _n=j({prefix:"\0",name:"identity",encode:t=>M(t),decode:t=>P(t)}),In=G({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),Rn=G({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),Cn=K({prefix:"9",name:"base10",alphabet:"0123456789"}),kn=G({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Ln=G({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),Tn=K({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Bn=K({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),On=G({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Nn=G({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Dn=G({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Un=G({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),Pn=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),Mn=Pn.reduce(((t,e,n)=>(t[n]=e,t)),[]),Zn=Pn.reduce(((t,e,n)=>(t[e.codePointAt(0)]=n,t)),[]);function Fn(t){return t.reduce(((t,e)=>(t+=Mn[e],t)),"")}function Vn(t){const e=[];for(const n of t){const t=Zn[n.codePointAt(0)];if(void 0===t)throw new Error(`Non-base256emoji character: ${n}`);e.push(t)}return new Uint8Array(e)}const Hn=j({prefix:"🚀",name:"base256emoji",encode:Fn,decode:Vn}),$n=({name:t,code:e,encode:n})=>new jn(t,e,n);class jn{constructor(t,e,n){this.name=t,this.code=e,this.encode=n}digest(t){if(t instanceof Uint8Array){const e=this.encode(t);return e instanceof Uint8Array?At(this.code,e):e.then((t=>At(this.code,t)))}throw Error("Unknown type, must be binary type")}}const Kn=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),zn=$n({name:"sha2-256",code:18,encode:Kn("SHA-256")}),qn=$n({name:"sha2-512",code:19,encode:Kn("SHA-512")}),Gn=0,Wn="identity",Jn=U,Yn=t=>At(Gn,Jn(t)),Qn={code:Gn,name:Wn,encode:Jn,digest:Yn},Xn="raw",tr=85,er=t=>U(t),nr=t=>U(t),rr=new TextEncoder,ir=new TextDecoder,sr="json",or=512,ar=t=>rr.encode(JSON.stringify(t)),cr=t=>JSON.parse(ir.decode(t)),ur={...m,...v,...E,...A,...x,...i,...S,...r,..._,...I};const lr=-1,hr={},dr={},fr=[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,lr,"ip6zone"],[43,8,"ipcidr"],[53,lr,"dns",!0],[54,lr,"dns4",!0],[55,lr,"dns6",!0],[56,lr,"dnsaddr",!0],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[280,0,"webrtc-direct"],[281,0,"webrtc"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,lr,"unix",!1,!0],[421,lr,"ipfs"],[421,lr,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,lr,"garlic64"],[448,0,"tls"],[449,lr,"sni"],[460,0,"quic"],[461,0,"quic-v1"],[465,0,"webtransport"],[466,lr,"certhash"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[777,lr,"memory"]];function pr(t,e,n,r,i){return{code:t,size:e,name:n,resolvable:Boolean(r),path:Boolean(i)}}function gr(t){if("number"===typeof t){if(null!=dr[t])return dr[t];throw new Error(`no protocol with code: ${t}`)}if("string"===typeof t){if(null!=hr[t])return hr[t];throw new Error(`no protocol with name: ${t}`)}throw new Error("invalid protocol id type: "+typeof t)}fr.forEach((t=>{const e=pr(...t);dr[e.code]=e,hr[e.name]=e}));gr("ip4"),gr("ip6"),gr("ipcidr");const yr=Object.values(ur).map((t=>t.decoder));(function(){let t=yr[0].or(yr[1]);yr.slice(2).forEach((e=>t=t.or(e)))})();Symbol.for("nodejs.util.inspect.custom"),gr("dns").code,gr("dns4").code,gr("dns6").code,gr("dnsaddr").code,new Map,Symbol.for("@multiformats/js-multiaddr/multiaddr");var br=n(4722),wr=n(5864);const mr=t=>t.toString().split("/").slice(1),vr=t=>({match:e=>!(e.length<1)&&(!!t(e[0])&&e.slice(1)),pattern:"fn"}),Er=t=>({match:e=>vr((e=>e===t)).match(e),pattern:t}),Ar=()=>({match:t=>vr((t=>"string"===typeof t)).match(t),pattern:"{string}"}),xr=()=>({match:t=>vr((t=>!isNaN(parseInt(t)))).match(t),pattern:"{number}"}),Sr=()=>({match:t=>{if(t.length<2)return!1;if("p2p"!==t[0]&&"ipfs"!==t[0])return!1;if(!t[1].startsWith("Q")&&!t[1].startsWith("1"))return!1;try{br.base58btc.decode(`z${t[1]}`)}catch(e){return!1}return t.slice(2)},pattern:"/p2p/{peerid}"}),_r=()=>({match:t=>{if(t.length<2)return!1;if("certhash"!==t[0])return!1;try{wr.base64url.decode(t[1])}catch{return!1}return t.slice(2)},pattern:"/certhash/{certhash}"}),Ir=t=>({match:e=>{const n=t.match(e);return!1===n?e:n},pattern:`optional(${t.pattern})`}),Rr=(...t)=>({match:e=>{let n;for(const r of t){const t=r.match(e);!1!==t&&((null==n||t.length<n.length)&&(n=t))}return null!=n&&n},pattern:`or(${t.map((t=>t.pattern)).join(", ")})`}),Cr=(...t)=>({match:e=>{for(const n of t){const t=n.match(e);if(!1===t)return!1;e=t}return e},pattern:`and(${t.map((t=>t.pattern)).join(", ")})`});function kr(...t){function e(e){let n=mr(e);for(const r of t){const t=r.match(n);if(!1===t)return!1;n=t}return n}function n(t){const n=e(t);return!1!==n}function r(t){const n=e(t);return!1!==n&&0===n.length}return{matches:n,exactMatch:r}}const Lr=Cr(Er("dns4"),Ar()),Tr=Cr(Er("dns6"),Ar()),Br=Cr(Er("dnsaddr"),Ar()),Or=Cr(Er("dns"),Ar()),Nr=(kr(Lr),kr(Tr),kr(Br),kr(Rr(Or,Br,Lr,Tr)),Cr(Er("ip4"),vr(T.C))),Dr=Cr(Er("ip6"),vr(T.aY)),Ur=Rr(Nr,Dr),Pr=Rr(Ur,Or,Lr,Tr,Br),Mr=kr(Pr),Zr=(kr(Nr),kr(Dr),kr(Ur),Cr(Pr,Er("tcp"),xr())),Fr=Cr(Pr,Er("udp"),xr()),Vr=Rr(Zr,Fr),Hr=(kr(Zr),kr(Fr),Cr(Fr,Er("quic"))),$r=Cr(Fr,Er("quic-v1")),jr=Rr(Hr,$r),Kr=(kr(Hr),kr($r),Rr(Pr,Zr,Fr,Hr,$r)),zr=Rr(Cr(Kr,Er("ws"),Ir(Sr()))),qr=(kr(zr),Rr(Cr(Kr,Er("wss"),Ir(Sr())),Cr(Kr,Er("tls"),Er("ws"),Ir(Sr())))),Gr=(kr(qr),Cr(Vr,Er("webrtc-direct"),_r(),Ir(_r()),Ir(Sr()))),Wr=(kr(Gr),Cr($r,Er("webtransport"),_r(),_r(),Ir(Sr()))),Jr=(kr(Wr),Rr(zr,qr,Cr(Zr,Ir(Sr())),Cr(jr,Ir(Sr())),Cr(Pr,Ir(Sr())),Gr,Wr,Sr())),Yr=(kr(Jr),Cr(Jr,Er("p2p-circuit"),Sr())),Qr=kr(Yr),Xr=Rr(Cr(Jr,Er("p2p-circuit"),Er("webrtc"),Sr()),Cr(Jr,Er("webrtc"),Ir(Sr())),Er("webrtc")),ti=(kr(Xr),Rr(Cr(Pr,Er("tcp"),xr(),Er("http"),Ir(Sr())),Cr(Pr,Er("http"),Ir(Sr())))),ei=(kr(ti),Rr(Cr(Pr,Er("tcp"),Rr(Cr(Er("443"),Er("http")),Cr(xr(),Er("https"))),Ir(Sr())),Cr(Pr,Er("tls"),Er("http"),Ir(Sr())),Cr(Pr,Er("https"),Ir(Sr()))));kr(ei)},783:function(t,e,n){"use strict";n.d(e,{h2:function(){return rt},HM:function(){return it},a_:function(){return x.Ev},s_:function(){return nt}});var r=n(714),i=n(7327),s=n(8829),o=n(2575),a=(n(1439),n(7585),n(5315),n(7658),n(4856)),c=n(4722),u=n(3406),l=n(7708),h=n(7010),d=n(645),f=n(6997),p=(n(314),n(6435)),g=n(7738),y=n(4320),b=n(2543),w=n(4906);const m=w.C,v=w.aY,E=function(t){let e=0;if(t=t.toString().trim(),m(t)){const n=new Uint8Array(e+4);return t.split(/\./g).forEach((t=>{n[e++]=255&parseInt(t,10)})),n}if(v(t)){const n=t.split(":",8);let r;for(r=0;r<n.length;r++){const t=m(n[r]);let e;t&&(e=E(n[r]),n[r]=(0,h.B)(e.slice(0,2),"base16")),null!=e&&++r<8&&n.splice(r,0,(0,h.B)(e.slice(2,4),"base16"))}if(""===n[0])while(n.length<8)n.unshift("0");else if(""===n[n.length-1])while(n.length<8)n.push("0");else if(n.length<8){for(r=0;r<n.length&&""!==n[r];r++);const t=[r,1];for(r=9-n.length;r>0;r--)t.push("0");n.splice.apply(n,t)}const i=new Uint8Array(e+16);for(r=0;r<n.length;r++){const t=parseInt(n[r],16);i[e++]=t>>8&255,i[e++]=255&t}return i}throw new Error("invalid ip address")},A=function(t,e=0,n){e=~~e,n=n??t.length-e;const r=new DataView(t.buffer);if(4===n){const r=[];for(let i=0;i<n;i++)r.push(t[e+i]);return r.join(".")}if(16===n){const t=[];for(let i=0;i<n;i+=2)t.push(r.getUint16(e+i).toString(16));return t.join(":").replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3").replace(/:{3,4}/,"::")}return""};var x=n(4108);(0,x.Ev)("ip4"),(0,x.Ev)("ip6"),(0,x.Ev)("ipcidr");function S(t,e){const n=(0,x.Ev)(t);switch(n.code){case 4:case 41:return k(e);case 42:return O(e);case 6:case 273:case 33:case 132:return T(e).toString();case 53:case 54:case 55:case 56:case 400:case 449:case 777:return O(e);case 421:return P(e);case 444:return F(e);case 445:return F(e);case 466:return U(e);default:return(0,h.B)(e,"base16")}}function _(t,e){const n=(0,x.Ev)(t);switch(n.code){case 4:return C(e);case 41:return C(e);case 42:return B(e);case 6:case 273:case 33:case 132:return L(parseInt(e,10));case 53:case 54:case 55:case 56:case 400:case 449:case 777:return B(e);case 421:return N(e);case 444:return M(e);case 445:return Z(e);case 466:return D(e);default:return(0,b.m)(e,"base16")}}const I=Object.values(g.gh).map((t=>t.decoder)),R=function(){let t=I[0].or(I[1]);return I.slice(2).forEach((e=>t=t.or(e))),t}();function C(t){if(!w.h6(t))throw new Error("invalid ip address");return E(t)}function k(t){const e=A(t,0,t.length);if(null==e)throw new Error("ipBuff is required");if(!w.h6(e))throw new Error("invalid ip address");return e}function L(t){const e=new ArrayBuffer(2),n=new DataView(e);return n.setUint16(0,t),new Uint8Array(e)}function T(t){const e=new DataView(t.buffer);return e.getUint16(t.byteOffset)}function B(t){const e=(0,b.m)(t),n=Uint8Array.from(d.cv(e.length));return(0,f.z)([n,e],n.length+e.length)}function O(t){const e=d.Jx(t);if(t=t.slice(d.P$(e)),t.length!==e)throw new Error("inconsistent lengths");return(0,h.B)(t)}function N(t){let e;e="Q"===t[0]||"1"===t[0]?y.Jx(c.base58btc.decode(`z${t}`)).bytes:u.k0.parse(t).multihash.bytes;const n=Uint8Array.from(d.cv(e.length));return(0,f.z)([n,e],n.length+e.length)}function D(t){const e=R.decode(t),n=Uint8Array.from(d.cv(e.length));return(0,f.z)([n,e],n.length+e.length)}function U(t){const e=d.Jx(t),n=t.slice(d.P$(e));if(n.length!==e)throw new Error("inconsistent lengths");return"u"+(0,h.B)(n,"base64url")}function P(t){const e=d.Jx(t),n=t.slice(d.P$(e));if(n.length!==e)throw new Error("inconsistent lengths");return(0,h.B)(n,"base58btc")}function M(t){const e=t.split(":");if(2!==e.length)throw new Error(`failed to parse onion addr: ["'${e.join('", "')}'"]' does not contain a port number`);if(16!==e[0].length)throw new Error(`failed to parse onion addr: ${e[0]} not a Tor onion address.`);const n=p.base32.decode("b"+e[0]),r=parseInt(e[1],10);if(r<1||r>65536)throw new Error("Port number is not in range(1, 65536)");const i=L(r);return(0,f.z)([n,i],n.length+i.length)}function Z(t){const e=t.split(":");if(2!==e.length)throw new Error(`failed to parse onion addr: ["'${e.join('", "')}'"]' does not contain a port number`);if(56!==e[0].length)throw new Error(`failed to parse onion addr: ${e[0]} not a Tor onion3 address.`);const n=p.base32.decode(`b${e[0]}`),r=parseInt(e[1],10);if(r<1||r>65536)throw new Error("Port number is not in range(1, 65536)");const i=L(r);return(0,f.z)([n,i],n.length+i.length)}function F(t){const e=t.slice(0,t.length-2),n=t.slice(t.length-2),r=(0,h.B)(e,"base32"),i=T(n);return`${r}:${i}`}function V(t){t=z(t);const e=[],n=[];let r=null;const i=t.split("/").slice(1);if(1===i.length&&""===i[0])return{bytes:new Uint8Array,string:"/",tuples:[],stringTuples:[],path:null};for(let s=0;s<i.length;s++){const o=i[s],a=(0,x.Ev)(o);if(0===a.size){e.push([a.code]),n.push([a.code]);continue}if(s++,s>=i.length)throw q("invalid address: "+t);if(!0===a.path){r=z(i.slice(s).join("/")),e.push([a.code,_(a.code,r)]),n.push([a.code,r]);break}const c=_(a.code,i[s]);e.push([a.code,c]),n.push([a.code,S(a.code,c)])}return{string:$(n),bytes:j(e),tuples:e,stringTuples:n,path:r}}function H(t){const e=[],n=[];let r=null,i=0;while(i<t.length){const s=d.Jx(t,i),o=d.P$(s),a=(0,x.Ev)(s),c=K(a,t.slice(i+o));if(0===c){e.push([s]),n.push([s]),i+=o;continue}const u=t.slice(i+o,i+o+c);if(i+=c+o,i>t.length)throw q("Invalid address Uint8Array: "+(0,h.B)(t,"base16"));e.push([s,u]);const l=S(s,u);if(n.push([s,l]),!0===a.path){r=l;break}}return{bytes:Uint8Array.from(t),string:$(n),tuples:e,stringTuples:n,path:r}}function $(t){const e=[];return t.map((t=>{const n=(0,x.Ev)(t[0]);return e.push(n.name),t.length>1&&null!=t[1]&&e.push(t[1]),null})),z(e.join("/"))}function j(t){return(0,f.z)(t.map((t=>{const e=(0,x.Ev)(t[0]);let n=Uint8Array.from(d.cv(e.code));return t.length>1&&null!=t[1]&&(n=(0,f.z)([n,t[1]])),n})))}function K(t,e){if(t.size>0)return t.size/8;if(0===t.size)return 0;{const t=d.Jx(e instanceof Uint8Array?e:Uint8Array.from(e));return t+d.P$(t)}}function z(t){return"/"+t.trim().split("/").filter((t=>t)).join("/")}function q(t){return new Error("Error parsing address: "+t)}const G=Symbol.for("nodejs.util.inspect.custom"),W=Symbol.for("@multiformats/js-multiaddr/multiaddr"),J=[(0,x.Ev)("dns").code,(0,x.Ev)("dns4").code,(0,x.Ev)("dns6").code,(0,x.Ev)("dnsaddr").code];var Y=new WeakMap,Q=new WeakMap,X=new WeakMap,tt=new WeakMap;class et{constructor(t){let e;if((0,i.Z)(this,"bytes",void 0),(0,r.Z)(this,Y,{writable:!0,value:void 0}),(0,r.Z)(this,Q,{writable:!0,value:void 0}),(0,r.Z)(this,X,{writable:!0,value:void 0}),(0,r.Z)(this,tt,{writable:!0,value:void 0}),(0,i.Z)(this,W,!0),null==t&&(t=""),t instanceof Uint8Array)e=H(t);else if("string"===typeof t){if(t.length>0&&"/"!==t.charAt(0))throw new Error(`multiaddr "${t}" must start with a "/"`);e=V(t)}else{if(!rt(t))throw new Error("addr must be a string, Buffer, or another Multiaddr");e=H(t.bytes)}this.bytes=e.bytes,(0,o.Z)(this,Y,e.string),(0,o.Z)(this,Q,e.tuples),(0,o.Z)(this,X,e.stringTuples),(0,o.Z)(this,tt,e.path)}toString(){return(0,s.Z)(this,Y)}toJSON(){return this.toString()}toOptions(){let t,e,n,r,i="";const s=(0,x.Ev)("tcp"),o=(0,x.Ev)("udp"),a=(0,x.Ev)("ip4"),c=(0,x.Ev)("ip6"),u=(0,x.Ev)("dns6"),l=(0,x.Ev)("ip6zone");for(const[d,f]of this.stringTuples())d===l.code&&(i=`%${f??""}`),J.includes(d)&&(e=s.name,r=443,n=`${f??""}${i}`,t=d===u.code?6:4),d!==s.code&&d!==o.code||(e=(0,x.Ev)(d).name,r=parseInt(f??"")),d!==a.code&&d!==c.code||(e=(0,x.Ev)(d).name,n=`${f??""}${i}`,t=d===c.code?6:4);if(null==t||null==e||null==n||null==r)throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6, dnsaddr}/{address}/{tcp, udp}/{port}".');const h={family:t,host:n,transport:e,port:r};return h}protos(){return(0,s.Z)(this,Q).map((([t])=>Object.assign({},(0,x.Ev)(t))))}protoCodes(){return(0,s.Z)(this,Q).map((([t])=>t))}protoNames(){return(0,s.Z)(this,Q).map((([t])=>(0,x.Ev)(t).name))}tuples(){return(0,s.Z)(this,Q)}stringTuples(){return(0,s.Z)(this,X)}encapsulate(t){return t=new et(t),new et(this.toString()+t.toString())}decapsulate(t){const e=t.toString(),n=this.toString(),r=n.lastIndexOf(e);if(r<0)throw new Error(`Address ${this.toString()} does not contain subaddress: ${t.toString()}`);return new et(n.slice(0,r))}decapsulateCode(t){const e=this.tuples();for(let n=e.length-1;n>=0;n--)if(e[n][0]===t)return new et(j(e.slice(0,n)));return this}getPeerId(){try{let t=[];this.stringTuples().forEach((([e,n])=>{e===x.R5.p2p.code&&t.push([e,n]),e===x.R5["p2p-circuit"].code&&(t=[])}));const e=t.pop();if(null!=e?.[1]){const t=e[1];return"Q"===t[0]||"1"===t[0]?(0,h.B)(c.base58btc.decode(`z${t}`),"base58btc"):(0,h.B)(u.k0.parse(t).multihash.bytes,"base58btc")}return null}catch(t){return null}}getPath(){return(0,s.Z)(this,tt)}equals(t){return(0,l.f)(this.bytes,t.bytes)}async resolve(t){const e=this.protos().find((t=>t.resolvable));if(null==e)return[this];const n=nt.get(e.name);if(null==n)throw new a.sv(`no available resolver for ${e.name}`,"ERR_NO_AVAILABLE_RESOLVER");const r=await n(this,t);return r.map((t=>it(t)))}nodeAddress(){const t=this.toOptions();if("tcp"!==t.transport&&"udp"!==t.transport)throw new Error(`multiaddr must have a valid format - no protocol with name: "${t.transport}". Must have a valid transport protocol: "{tcp, udp}"`);return{family:t.family,address:t.host,port:t.port}}isThinWaistAddress(t){const e=(t??this).protos();return 2===e.length&&((4===e[0].code||41===e[0].code)&&(6===e[1].code||273===e[1].code))}[G](){return`Multiaddr(${(0,s.Z)(this,Y)})`}}const nt=new Map;function rt(t){return Boolean(t?.[W])}function it(t){return new et(t)}},4108:function(t,e,n){"use strict";n.d(e,{Ev:function(){return c},R5:function(){return i}});const r=-1,i={},s={},o=[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,r,"ip6zone"],[43,8,"ipcidr"],[53,r,"dns",!0],[54,r,"dns4",!0],[55,r,"dns6",!0],[56,r,"dnsaddr",!0],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[280,0,"webrtc-direct"],[281,0,"webrtc"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,r,"unix",!1,!0],[421,r,"ipfs"],[421,r,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,r,"garlic64"],[448,0,"tls"],[449,r,"sni"],[460,0,"quic"],[461,0,"quic-v1"],[465,0,"webtransport"],[466,r,"certhash"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[777,r,"memory"]];function a(t,e,n,r,i){return{code:t,size:e,name:n,resolvable:Boolean(r),path:Boolean(i)}}function c(t){if("number"===typeof t){if(null!=s[t])return s[t];throw new Error(`no protocol with code: ${t}`)}if("string"===typeof t){if(null!=i[t])return i[t];throw new Error(`no protocol with name: ${t}`)}throw new Error("invalid protocol id type: "+typeof t)}o.forEach((t=>{const e=a(...t);s[e.code]=e,i[e.name]=e}))},1241:function(t,e,n){"use strict";n.d(e,{ub:function(){return E}});var r=n(7327);n(7658),n(1439),n(7585),n(5315);function i(){const t={};return t.promise=new Promise(((e,n)=>{t.resolve=e,t.reject=n})),t}class s{constructor(t){if((0,r.Z)(this,"buffer",void 0),(0,r.Z)(this,"mask",void 0),(0,r.Z)(this,"top",void 0),(0,r.Z)(this,"btm",void 0),(0,r.Z)(this,"next",void 0),!(t>0)||0!==(t-1&t))throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(t),this.mask=t-1,this.top=0,this.btm=0,this.next=null}push(t){return void 0===this.buffer[this.top]&&(this.buffer[this.top]=t,this.top=this.top+1&this.mask,!0)}shift(){const t=this.buffer[this.btm];if(void 0!==t)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,t}isEmpty(){return void 0===this.buffer[this.btm]}}class o{constructor(t={}){(0,r.Z)(this,"size",void 0),(0,r.Z)(this,"hwm",void 0),(0,r.Z)(this,"head",void 0),(0,r.Z)(this,"tail",void 0),this.hwm=t.splitLimit??16,this.head=new s(this.hwm),this.tail=this.head,this.size=0}calculateSize(t){return null!=t?.byteLength?t.byteLength:1}push(t){if(null!=t?.value&&(this.size+=this.calculateSize(t.value)),!this.head.push(t)){const e=this.head;this.head=e.next=new s(2*this.head.buffer.length),this.head.push(t)}}shift(){let t=this.tail.shift();if(void 0===t&&null!=this.tail.next){const e=this.tail.next;this.tail.next=null,this.tail=e,t=this.tail.shift()}return null!=t?.value&&(this.size-=this.calculateSize(t.value)),t}isEmpty(){return this.head.isEmpty()}}class a extends Error{constructor(t,e){super(t??"The operation was aborted"),(0,r.Z)(this,"type",void 0),(0,r.Z)(this,"code",void 0),this.type="aborted",this.code=e??"ABORT_ERR"}}function c(t={}){const e=t=>{const e=t.shift();if(null==e)return{done:!0};if(null!=e.error)throw e.error;return{done:!0===e.done,value:e.value}};return u(e,t)}function u(t,e){e=e??{};let n,r,s,c=e.onEnd,u=new o,l=i();const h=async()=>{try{return u.isEmpty()?s?{done:!0}:await new Promise(((e,i)=>{r=s=>{r=null,u.push(s);try{e(t(u))}catch(o){i(o)}return n}})):t(u)}finally{u.isEmpty()&&queueMicrotask((()=>{l.resolve(),l=i()}))}},d=t=>null!=r?r(t):(u.push(t),n),f=t=>(u=new o,null!=r?r({error:t}):(u.push({error:t}),n)),p=t=>{if(s)return n;if(!0!==e?.objectMode&&null==t?.byteLength)throw new Error("objectMode was not true but tried to push non-Uint8Array value");return d({done:!1,value:t})},g=t=>s?n:(s=!0,null!=t?f(t):d({done:!0})),y=()=>(u=new o,g(),{done:!0}),b=t=>(g(t),{done:!0});if(n={[Symbol.asyncIterator](){return this},next:h,return:y,throw:b,push:p,end:g,get readableLength(){return u.size},onEmpty:async t=>{const e=t?.signal;if(e?.throwIfAborted(),u.isEmpty())return;let n,r;null!=e&&(n=new Promise(((t,n)=>{r=()=>{n(new a)},e.addEventListener("abort",r)})));try{await Promise.race([l.promise,n])}finally{null!=r&&null!=e&&e?.removeEventListener("abort",r)}}},null==c)return n;const w=n;return n={[Symbol.asyncIterator](){return this},next(){return w.next()},throw(t){return w.throw(t),null!=c&&(c(t),c=void 0),{done:!0}},return(){return w.return(),null!=c&&(c(),c=void 0),{done:!0}},push:p,end(t){return w.end(t),null!=c&&(c(t),c=void 0),n},get readableLength(){return w.readableLength}},n}function l(t){return null!=globalThis.Buffer?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function h(t=0){return null!=globalThis.Buffer?.alloc?l(globalThis.Buffer.alloc(t)):new Uint8Array(t)}function d(t=0){return null!=globalThis.Buffer?.allocUnsafe?l(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function f(t,e){null==e&&(e=t.reduce(((t,e)=>t+e.length),0));const n=d(e);let r=0;for(const i of t)n.set(i,r),r+=i.length;return l(n)}function p(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let n=0;n<t.byteLength;n++)if(t[n]!==e[n])return!1;return!0}const g=Symbol.for("@achingbrain/uint8arraylist");function y(t,e){if(null==e||e<0)throw new RangeError("index is out of bounds");let n=0;for(const r of t){const t=n+r.byteLength;if(e<t)return{buf:r,index:e-n};n=t}throw new RangeError("index is out of bounds")}function b(t){return Boolean(t?.[g])}class w{constructor(...t){Object.defineProperty(this,g,{value:!0}),this.bufs=[],this.length=0,t.length>0&&this.appendAll(t)}*[Symbol.iterator](){yield*this.bufs}get byteLength(){return this.length}append(...t){this.appendAll(t)}appendAll(t){let e=0;for(const n of t)if(n instanceof Uint8Array)e+=n.byteLength,this.bufs.push(n);else{if(!b(n))throw new Error("Could not append value, must be an Uint8Array or a Uint8ArrayList");e+=n.byteLength,this.bufs.push(...n.bufs)}this.length+=e}prepend(...t){this.prependAll(t)}prependAll(t){let e=0;for(const n of t.reverse())if(n instanceof Uint8Array)e+=n.byteLength,this.bufs.unshift(n);else{if(!b(n))throw new Error("Could not prepend value, must be an Uint8Array or a Uint8ArrayList");e+=n.byteLength,this.bufs.unshift(...n.bufs)}this.length+=e}get(t){const e=y(this.bufs,t);return e.buf[e.index]}set(t,e){const n=y(this.bufs,t);n.buf[n.index]=e}write(t,e=0){if(t instanceof Uint8Array)for(let n=0;n<t.length;n++)this.set(e+n,t[n]);else{if(!b(t))throw new Error("Could not write value, must be an Uint8Array or a Uint8ArrayList");for(let n=0;n<t.length;n++)this.set(e+n,t.get(n))}}consume(t){if(t=Math.trunc(t),!(Number.isNaN(t)||t<=0)){if(t===this.byteLength)return this.bufs=[],void(this.length=0);while(this.bufs.length>0){if(!(t>=this.bufs[0].byteLength)){this.bufs[0]=this.bufs[0].subarray(t),this.length-=t;break}t-=this.bufs[0].byteLength,this.length-=this.bufs[0].byteLength,this.bufs.shift()}}}slice(t,e){const{bufs:n,length:r}=this._subList(t,e);return f(n,r)}subarray(t,e){const{bufs:n,length:r}=this._subList(t,e);return 1===n.length?n[0]:f(n,r)}sublist(t,e){const{bufs:n,length:r}=this._subList(t,e),i=new w;return i.length=r,i.bufs=n,i}_subList(t,e){if(t=t??0,e=e??this.length,t<0&&(t=this.length+t),e<0&&(e=this.length+e),t<0||e>this.length)throw new RangeError("index is out of bounds");if(t===e)return{bufs:[],length:0};if(0===t&&e===this.length)return{bufs:[...this.bufs],length:this.length};const n=[];let r=0;for(let i=0;i<this.bufs.length;i++){const s=this.bufs[i],o=r,a=o+s.byteLength;if(r=a,t>=a)continue;const c=t>=o&&t<a,u=e>o&&e<=a;if(c&&u){if(t===o&&e===a){n.push(s);break}const r=t-o;n.push(s.subarray(r,r+(e-t)));break}if(c){if(0===t){n.push(s);continue}n.push(s.subarray(t-o))}else{if(u){if(e===a){n.push(s);break}n.push(s.subarray(0,e-o));break}n.push(s)}}return{bufs:n,length:e-t}}indexOf(t,e=0){if(!b(t)&&!(t instanceof Uint8Array))throw new TypeError('The "value" argument must be a Uint8ArrayList or Uint8Array');const n=t instanceof Uint8Array?t:t.subarray();if(e=Number(e??0),isNaN(e)&&(e=0),e<0&&(e=this.length+e),e<0&&(e=0),0===t.length)return e>this.length?this.length:e;const r=n.byteLength;if(0===r)throw new TypeError("search must be at least 1 byte long");const i=256,s=new Int32Array(i);for(let l=0;l<i;l++)s[l]=-1;for(let l=0;l<r;l++)s[n[l]]=l;const o=s,a=this.byteLength-n.byteLength,c=n.byteLength-1;let u;for(let l=e;l<=a;l+=u){u=0;for(let t=c;t>=0;t--){const e=this.get(l+t);if(n[t]!==e){u=Math.max(1,t-o[e]);break}}if(0===u)return l}return-1}getInt8(t){const e=this.subarray(t,t+1),n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.getInt8(0)}setInt8(t,e){const n=d(1),r=new DataView(n.buffer,n.byteOffset,n.byteLength);r.setInt8(0,e),this.write(n,t)}getInt16(t,e){const n=this.subarray(t,t+2),r=new DataView(n.buffer,n.byteOffset,n.byteLength);return r.getInt16(0,e)}setInt16(t,e,n){const r=h(2),i=new DataView(r.buffer,r.byteOffset,r.byteLength);i.setInt16(0,e,n),this.write(r,t)}getInt32(t,e){const n=this.subarray(t,t+4),r=new DataView(n.buffer,n.byteOffset,n.byteLength);return r.getInt32(0,e)}setInt32(t,e,n){const r=h(4),i=new DataView(r.buffer,r.byteOffset,r.byteLength);i.setInt32(0,e,n),this.write(r,t)}getBigInt64(t,e){const n=this.subarray(t,t+8),r=new DataView(n.buffer,n.byteOffset,n.byteLength);return r.getBigInt64(0,e)}setBigInt64(t,e,n){const r=h(8),i=new DataView(r.buffer,r.byteOffset,r.byteLength);i.setBigInt64(0,e,n),this.write(r,t)}getUint8(t){const e=this.subarray(t,t+1),n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.getUint8(0)}setUint8(t,e){const n=d(1),r=new DataView(n.buffer,n.byteOffset,n.byteLength);r.setUint8(0,e),this.write(n,t)}getUint16(t,e){const n=this.subarray(t,t+2),r=new DataView(n.buffer,n.byteOffset,n.byteLength);return r.getUint16(0,e)}setUint16(t,e,n){const r=h(2),i=new DataView(r.buffer,r.byteOffset,r.byteLength);i.setUint16(0,e,n),this.write(r,t)}getUint32(t,e){const n=this.subarray(t,t+4),r=new DataView(n.buffer,n.byteOffset,n.byteLength);return r.getUint32(0,e)}setUint32(t,e,n){const r=h(4),i=new DataView(r.buffer,r.byteOffset,r.byteLength);i.setUint32(0,e,n),this.write(r,t)}getBigUint64(t,e){const n=this.subarray(t,t+8),r=new DataView(n.buffer,n.byteOffset,n.byteLength);return r.getBigUint64(0,e)}setBigUint64(t,e,n){const r=h(8),i=new DataView(r.buffer,r.byteOffset,r.byteLength);i.setBigUint64(0,e,n),this.write(r,t)}getFloat32(t,e){const n=this.subarray(t,t+4),r=new DataView(n.buffer,n.byteOffset,n.byteLength);return r.getFloat32(0,e)}setFloat32(t,e,n){const r=h(4),i=new DataView(r.buffer,r.byteOffset,r.byteLength);i.setFloat32(0,e,n),this.write(r,t)}getFloat64(t,e){const n=this.subarray(t,t+8),r=new DataView(n.buffer,n.byteOffset,n.byteLength);return r.getFloat64(0,e)}setFloat64(t,e,n){const r=h(8),i=new DataView(r.buffer,r.byteOffset,r.byteLength);i.setFloat64(0,e,n),this.write(r,t)}equals(t){if(null==t)return!1;if(!(t instanceof w))return!1;if(t.bufs.length!==this.bufs.length)return!1;for(let e=0;e<this.bufs.length;e++)if(!p(this.bufs[e],t.bufs[e]))return!1;return!0}static fromUint8Arrays(t,e){const n=new w;return n.bufs=t,null==e&&(e=t.reduce(((t,e)=>t+e.byteLength),0)),n.length=e,n}}class m extends Error{constructor(t,e){super(t),(0,r.Z)(this,"code",void 0),this.code=e}}class v extends m{constructor(t){super(t,"ABORT_ERR"),(0,r.Z)(this,"type",void 0),this.type="aborted"}}function E(t){const e=c();t.sink(e).catch((t=>{e.end(t)})),t.sink=async t=>{for await(const n of t)e.push(n);e.end()};let n=t.source;null!=t.source[Symbol.iterator]?n=t.source[Symbol.iterator]():null!=t.source[Symbol.asyncIterator]&&(n=t.source[Symbol.asyncIterator]());const r=new w,i={read:async(t,e)=>{let i;e?.signal?.throwIfAborted();const s=new Promise(((t,n)=>{i=()=>{n(new v("Read aborted"))},e?.signal?.addEventListener("abort",i)}));try{if(null==t){const{done:t,value:e}=await Promise.race([n.next(),s]);return!0===t?new w:e}while(r.byteLength<t){const{value:t,done:e}=await Promise.race([n.next(),s]);if(!0===e)throw new m("unexpected end of input","ERR_UNEXPECTED_EOF");r.append(t)}const e=r.sublist(0,t);return r.consume(t),e}finally{null!=i&&e?.signal?.removeEventListener("abort",i)}},write:async(t,n)=>{n?.signal?.throwIfAborted(),t instanceof Uint8Array?e.push(t):e.push(t.subarray()),await e.onEmpty(n)},unwrap:()=>{const e=t.source;return t.source=async function*(){yield*r,yield*e}(),t}};return i}},1564:function(t,e,n){"use strict";n.d(e,{p:function(){return U}});var r=n(7327),i=n(1241);n(1439),n(7585),n(5315),n(7658);function s(t){return null!=globalThis.Buffer?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function o(t=0){return null!=globalThis.Buffer?.alloc?s(globalThis.Buffer.alloc(t)):new Uint8Array(t)}function a(t=0){return null!=globalThis.Buffer?.allocUnsafe?s(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function c(t,e){null==e&&(e=t.reduce(((t,e)=>t+e.length),0));const n=a(e);let r=0;for(const i of t)n.set(i,r),r+=i.length;return s(n)}function u(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let n=0;n<t.byteLength;n++)if(t[n]!==e[n])return!1;return!0}const l=Symbol.for("@achingbrain/uint8arraylist");function h(t,e){if(null==e||e<0)throw new RangeError("index is out of bounds");let n=0;for(const r of t){const t=n+r.byteLength;if(e<t)return{buf:r,index:e-n};n=t}throw new RangeError("index is out of bounds")}function d(t){return Boolean(t?.[l])}class f{constructor(...t){Object.defineProperty(this,l,{value:!0}),this.bufs=[],this.length=0,t.length>0&&this.appendAll(t)}*[Symbol.iterator](){yield*this.bufs}get byteLength(){return this.length}append(...t){this.appendAll(t)}appendAll(t){let e=0;for(const n of t)if(n instanceof Uint8Array)e+=n.byteLength,this.bufs.push(n);else{if(!d(n))throw new Error("Could not append value, must be an Uint8Array or a Uint8ArrayList");e+=n.byteLength,this.bufs.push(...n.bufs)}this.length+=e}prepend(...t){this.prependAll(t)}prependAll(t){let e=0;for(const n of t.reverse())if(n instanceof Uint8Array)e+=n.byteLength,this.bufs.unshift(n);else{if(!d(n))throw new Error("Could not prepend value, must be an Uint8Array or a Uint8ArrayList");e+=n.byteLength,this.bufs.unshift(...n.bufs)}this.length+=e}get(t){const e=h(this.bufs,t);return e.buf[e.index]}set(t,e){const n=h(this.bufs,t);n.buf[n.index]=e}write(t,e=0){if(t instanceof Uint8Array)for(let n=0;n<t.length;n++)this.set(e+n,t[n]);else{if(!d(t))throw new Error("Could not write value, must be an Uint8Array or a Uint8ArrayList");for(let n=0;n<t.length;n++)this.set(e+n,t.get(n))}}consume(t){if(t=Math.trunc(t),!(Number.isNaN(t)||t<=0)){if(t===this.byteLength)return this.bufs=[],void(this.length=0);while(this.bufs.length>0){if(!(t>=this.bufs[0].byteLength)){this.bufs[0]=this.bufs[0].subarray(t),this.length-=t;break}t-=this.bufs[0].byteLength,this.length-=this.bufs[0].byteLength,this.bufs.shift()}}}slice(t,e){const{bufs:n,length:r}=this._subList(t,e);return c(n,r)}subarray(t,e){const{bufs:n,length:r}=this._subList(t,e);return 1===n.length?n[0]:c(n,r)}sublist(t,e){const{bufs:n,length:r}=this._subList(t,e),i=new f;return i.length=r,i.bufs=n,i}_subList(t,e){if(t=t??0,e=e??this.length,t<0&&(t=this.length+t),e<0&&(e=this.length+e),t<0||e>this.length)throw new RangeError("index is out of bounds");if(t===e)return{bufs:[],length:0};if(0===t&&e===this.length)return{bufs:[...this.bufs],length:this.length};const n=[];let r=0;for(let i=0;i<this.bufs.length;i++){const s=this.bufs[i],o=r,a=o+s.byteLength;if(r=a,t>=a)continue;const c=t>=o&&t<a,u=e>o&&e<=a;if(c&&u){if(t===o&&e===a){n.push(s);break}const r=t-o;n.push(s.subarray(r,r+(e-t)));break}if(c){if(0===t){n.push(s);continue}n.push(s.subarray(t-o))}else{if(u){if(e===a){n.push(s);break}n.push(s.subarray(0,e-o));break}n.push(s)}}return{bufs:n,length:e-t}}indexOf(t,e=0){if(!d(t)&&!(t instanceof Uint8Array))throw new TypeError('The "value" argument must be a Uint8ArrayList or Uint8Array');const n=t instanceof Uint8Array?t:t.subarray();if(e=Number(e??0),isNaN(e)&&(e=0),e<0&&(e=this.length+e),e<0&&(e=0),0===t.length)return e>this.length?this.length:e;const r=n.byteLength;if(0===r)throw new TypeError("search must be at least 1 byte long");const i=256,s=new Int32Array(i);for(let l=0;l<i;l++)s[l]=-1;for(let l=0;l<r;l++)s[n[l]]=l;const o=s,a=this.byteLength-n.byteLength,c=n.byteLength-1;let u;for(let l=e;l<=a;l+=u){u=0;for(let t=c;t>=0;t--){const e=this.get(l+t);if(n[t]!==e){u=Math.max(1,t-o[e]);break}}if(0===u)return l}return-1}getInt8(t){const e=this.subarray(t,t+1),n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.getInt8(0)}setInt8(t,e){const n=a(1),r=new DataView(n.buffer,n.byteOffset,n.byteLength);r.setInt8(0,e),this.write(n,t)}getInt16(t,e){const n=this.subarray(t,t+2),r=new DataView(n.buffer,n.byteOffset,n.byteLength);return r.getInt16(0,e)}setInt16(t,e,n){const r=o(2),i=new DataView(r.buffer,r.byteOffset,r.byteLength);i.setInt16(0,e,n),this.write(r,t)}getInt32(t,e){const n=this.subarray(t,t+4),r=new DataView(n.buffer,n.byteOffset,n.byteLength);return r.getInt32(0,e)}setInt32(t,e,n){const r=o(4),i=new DataView(r.buffer,r.byteOffset,r.byteLength);i.setInt32(0,e,n),this.write(r,t)}getBigInt64(t,e){const n=this.subarray(t,t+8),r=new DataView(n.buffer,n.byteOffset,n.byteLength);return r.getBigInt64(0,e)}setBigInt64(t,e,n){const r=o(8),i=new DataView(r.buffer,r.byteOffset,r.byteLength);i.setBigInt64(0,e,n),this.write(r,t)}getUint8(t){const e=this.subarray(t,t+1),n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.getUint8(0)}setUint8(t,e){const n=a(1),r=new DataView(n.buffer,n.byteOffset,n.byteLength);r.setUint8(0,e),this.write(n,t)}getUint16(t,e){const n=this.subarray(t,t+2),r=new DataView(n.buffer,n.byteOffset,n.byteLength);return r.getUint16(0,e)}setUint16(t,e,n){const r=o(2),i=new DataView(r.buffer,r.byteOffset,r.byteLength);i.setUint16(0,e,n),this.write(r,t)}getUint32(t,e){const n=this.subarray(t,t+4),r=new DataView(n.buffer,n.byteOffset,n.byteLength);return r.getUint32(0,e)}setUint32(t,e,n){const r=o(4),i=new DataView(r.buffer,r.byteOffset,r.byteLength);i.setUint32(0,e,n),this.write(r,t)}getBigUint64(t,e){const n=this.subarray(t,t+8),r=new DataView(n.buffer,n.byteOffset,n.byteLength);return r.getBigUint64(0,e)}setBigUint64(t,e,n){const r=o(8),i=new DataView(r.buffer,r.byteOffset,r.byteLength);i.setBigUint64(0,e,n),this.write(r,t)}getFloat32(t,e){const n=this.subarray(t,t+4),r=new DataView(n.buffer,n.byteOffset,n.byteLength);return r.getFloat32(0,e)}setFloat32(t,e,n){const r=o(4),i=new DataView(r.buffer,r.byteOffset,r.byteLength);i.setFloat32(0,e,n),this.write(r,t)}getFloat64(t,e){const n=this.subarray(t,t+8),r=new DataView(n.buffer,n.byteOffset,n.byteLength);return r.getFloat64(0,e)}setFloat64(t,e,n){const r=o(8),i=new DataView(r.buffer,r.byteOffset,r.byteLength);i.setFloat64(0,e,n),this.write(r,t)}equals(t){if(null==t)return!1;if(!(t instanceof f))return!1;if(t.bufs.length!==this.bufs.length)return!1;for(let e=0;e<this.bufs.length;e++)if(!u(this.bufs[e],t.bufs[e]))return!1;return!0}static fromUint8Arrays(t,e){const n=new f;return n.bufs=t,null==e&&(e=t.reduce(((t,e)=>t+e.byteLength),0)),n.length=e,n}}var p=n(3154);const g=Math.pow(2,7),y=Math.pow(2,14),b=Math.pow(2,21),w=Math.pow(2,28),m=Math.pow(2,35),v=Math.pow(2,42),E=Math.pow(2,49),A=Math.pow(2,56),x=Math.pow(2,63),S={encodingLength(t){return t<g?1:t<y?2:t<b?3:t<w?4:t<m?5:t<v?6:t<E?7:t<A?8:t<x?9:10},encode(t,e,n=0){if(null!=Number.MAX_SAFE_INTEGER&&t>Number.MAX_SAFE_INTEGER)throw new RangeError("Could not encode varint");return null==e&&(e=a(S.encodingLength(t))),p.Z.fromNumber(t).toBytes(e,n),e},decode(t,e=0){return p.Z.fromBytes(t,e).toNumber(!0)}};function _(t){return null!=t[Symbol.asyncIterator]}const I=t=>{const e=S.encodingLength(t),n=a(e);return S.encode(t,n),I.bytes=e,n};function R(t,e){e=e??{};const n=e.lengthEncoder??I;function*r(t){const e=n(t.byteLength);e instanceof Uint8Array?yield e:yield*e,t instanceof Uint8Array?yield t:yield*t}return _(t)?async function*(){for await(const e of t)yield*r(e)}():function*(){for(const e of t)yield*r(e)}()}I.bytes=0,R.single=(t,e)=>{e=e??{};const n=e.lengthEncoder??I;return new f(n(t.byteLength),t)};var C=n(9998);const k=8,L=4194304;var T;(function(t){t[t["LENGTH"]=0]="LENGTH",t[t["DATA"]=1]="DATA"})(T||(T={}));const B=t=>{const e=S.decode(t);return B.bytes=S.encodingLength(e),e};function O(t,e){const n=new f;let r=T.LENGTH,i=-1;const s=e?.lengthDecoder??B,o=e?.maxLengthLength??k,a=e?.maxDataLength??L;function*c(){while(n.byteLength>0){if(r===T.LENGTH)try{if(i=s(n),i<0)throw C(new Error("invalid message length"),"ERR_INVALID_MSG_LENGTH");if(i>a)throw C(new Error("message length too long"),"ERR_MSG_DATA_TOO_LONG");const t=s.bytes;n.consume(t),null!=e?.onLength&&e.onLength(i),r=T.DATA}catch(t){if(t instanceof RangeError){if(n.byteLength>o)throw C(new Error("message length length too long"),"ERR_MSG_LENGTH_TOO_LONG");break}throw t}if(r===T.DATA){if(n.byteLength<i)break;const t=n.sublist(0,i);n.consume(i),null!=e?.onData&&e.onData(t),yield t,r=T.LENGTH}}}return _(t)?async function*(){for await(const e of t)n.append(e),yield*c();if(n.byteLength>0)throw C(new Error("unexpected end of input"),"ERR_UNEXPECTED_EOF")}():function*(){for(const e of t)n.append(e),yield*c();if(n.byteLength>0)throw C(new Error("unexpected end of input"),"ERR_UNEXPECTED_EOF")}()}B.bytes=0,O.fromReader=(t,e)=>{let n=1;const r=async function*(){while(1)try{const{done:e,value:r}=await t.next(n);if(!0===e)return;null!=r&&(yield r)}catch(e){if("ERR_UNDER_READ"===e.code)return{done:!0,value:null};throw e}finally{n=1}}(),i=t=>{n=t};return O(r,{...e??{},onLength:i})};class N extends Error{constructor(t,e){super(t),(0,r.Z)(this,"code",void 0),this.code=e}}const D=t=>S.decode(t);function U(t,e){const n=(0,i.ub)(t),r={read:async t=>{let r=-1;const i=new f,s=e?.lengthDecoder??D;while(1){i.append(await n.read(1,t));try{r=s(i)}catch(o){if(o instanceof RangeError)continue;throw o}if(r>-1)break;if(null!=e?.maxLengthLength&&i.byteLength>e.maxLengthLength)throw new N("message length length too long","ERR_MSG_LENGTH_TOO_LONG")}if(null!=e?.maxDataLength&&r>e.maxDataLength)throw new N("message length too long","ERR_MSG_DATA_TOO_LONG");return n.read(r,t)},write:async(t,r)=>{await n.write(R.single(t,e),r)},unwrap:()=>n.unwrap()};return r}D.bytes=0},5211:function(t,e,n){"use strict";n.d(e,{z:function(){return f}});var r=n(7327);n(7658);function i(){const t={};return t.promise=new Promise(((e,n)=>{t.resolve=e,t.reject=n})),t}class s{constructor(t){if((0,r.Z)(this,"buffer",void 0),(0,r.Z)(this,"mask",void 0),(0,r.Z)(this,"top",void 0),(0,r.Z)(this,"btm",void 0),(0,r.Z)(this,"next",void 0),!(t>0)||0!==(t-1&t))throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(t),this.mask=t-1,this.top=0,this.btm=0,this.next=null}push(t){return void 0===this.buffer[this.top]&&(this.buffer[this.top]=t,this.top=this.top+1&this.mask,!0)}shift(){const t=this.buffer[this.btm];if(void 0!==t)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,t}isEmpty(){return void 0===this.buffer[this.btm]}}class o{constructor(t={}){(0,r.Z)(this,"size",void 0),(0,r.Z)(this,"hwm",void 0),(0,r.Z)(this,"head",void 0),(0,r.Z)(this,"tail",void 0),this.hwm=t.splitLimit??16,this.head=new s(this.hwm),this.tail=this.head,this.size=0}calculateSize(t){return null!=t?.byteLength?t.byteLength:1}push(t){if(null!=t?.value&&(this.size+=this.calculateSize(t.value)),!this.head.push(t)){const e=this.head;this.head=e.next=new s(2*this.head.buffer.length),this.head.push(t)}}shift(){let t=this.tail.shift();if(void 0===t&&null!=this.tail.next){const e=this.tail.next;this.tail.next=null,this.tail=e,t=this.tail.shift()}return null!=t?.value&&(this.size-=this.calculateSize(t.value)),t}isEmpty(){return this.head.isEmpty()}}class a extends Error{constructor(t,e){super(t??"The operation was aborted"),(0,r.Z)(this,"type",void 0),(0,r.Z)(this,"code",void 0),this.type="aborted",this.code=e??"ABORT_ERR"}}function c(t={}){const e=t=>{const e=t.shift();if(null==e)return{done:!0};if(null!=e.error)throw e.error;return{done:!0===e.done,value:e.value}};return u(e,t)}function u(t,e){e=e??{};let n,r,s,c=e.onEnd,u=new o,l=i();const h=async()=>{try{return u.isEmpty()?s?{done:!0}:await new Promise(((e,i)=>{r=s=>{r=null,u.push(s);try{e(t(u))}catch(o){i(o)}return n}})):t(u)}finally{u.isEmpty()&&queueMicrotask((()=>{l.resolve(),l=i()}))}},d=t=>null!=r?r(t):(u.push(t),n),f=t=>(u=new o,null!=r?r({error:t}):(u.push({error:t}),n)),p=t=>{if(s)return n;if(!0!==e?.objectMode&&null==t?.byteLength)throw new Error("objectMode was not true but tried to push non-Uint8Array value");return d({done:!1,value:t})},g=t=>s?n:(s=!0,null!=t?f(t):d({done:!0})),y=()=>(u=new o,g(),{done:!0}),b=t=>(g(t),{done:!0});if(n={[Symbol.asyncIterator](){return this},next:h,return:y,throw:b,push:p,end:g,get readableLength(){return u.size},onEmpty:async t=>{const e=t?.signal;if(e?.throwIfAborted(),u.isEmpty())return;let n,r;null!=e&&(n=new Promise(((t,n)=>{r=()=>{n(new a)},e.addEventListener("abort",r)})));try{await Promise.race([l.promise,n])}finally{null!=r&&null!=e&&e?.removeEventListener("abort",r)}}},null==c)return n;const w=n;return n={[Symbol.asyncIterator](){return this},next(){return w.next()},throw(t){return w.throw(t),null!=c&&(c(t),c=void 0),{done:!0}},return(){return w.return(),null!=c&&(c(),c=void 0),{done:!0}},push:p,end(t){return w.end(t),null!=c&&(c(t),c=void 0),n},get readableLength(){return w.readableLength}},n}function l(t){return null!=t[Symbol.asyncIterator]}function h(...t){const e=[];for(const n of t)l(n)||e.push(n);return e.length===t.length?function*(){for(const t of e)yield*t}():async function*(){const e=c({objectMode:!0});Promise.resolve().then((async()=>{try{await Promise.all(t.map((async t=>{for await(const n of t)e.push(n)}))),e.end()}catch(n){e.end(n)}})),yield*e}()}var d=h;function f(t,...e){if(null==t)throw new Error("Empty pipeline");if(b(t)){const e=t;t=()=>e.source}else if(y(t)||g(t)){const e=t;t=()=>e}const n=[t,...e];if(n.length>1&&b(n[n.length-1])&&(n[n.length-1]=n[n.length-1].sink),n.length>2)for(let r=1;r<n.length-1;r++)b(n[r])&&(n[r]=w(n[r]));return p(...n)}const p=(...t)=>{let e;while(t.length>0)e=t.shift()(e);return e},g=t=>null!=t?.[Symbol.asyncIterator],y=t=>null!=t?.[Symbol.iterator],b=t=>null!=t&&(null!=t.sink&&null!=t.source),w=t=>e=>{const n=t.sink(e);if(null!=n?.then){const e=c({objectMode:!0});let r;n.then((()=>{e.end()}),(t=>{e.end(t)}));const i=t.source;if(g(i))r=async function*(){yield*i,e.end()};else{if(!y(i))throw new Error("Unknown duplex source type - must be Iterable or AsyncIterable");r=function*(){yield*i,e.end()}}return d(e,r())}return t.source}},9174:function(t,e,n){"use strict";n.d(e,{z:function(){return i}});var r=n(1564);function i(t,e){const n=(0,r.p)(t,e),i={read:async(t,e)=>{const r=await n.read(e);return t.decode(r)},write:async(t,e,r)=>{await n.write(e.encode(t),r)},writeV:async(t,e,r)=>{await n.writeV(t.map((t=>e.encode(t))),r)},pb:t=>({read:async e=>i.read(t,e),write:async(e,n)=>i.write(e,t,n),writeV:async(e,n)=>i.writeV(e,t,n),unwrap:()=>i}),unwrap:()=>n.unwrap()};return i}},8817:function(t,e,n){"use strict";n.d(e,{dT:function(){return c}});var r=n(7327);n(7658);function i(){const t={};return t.promise=new Promise(((e,n)=>{t.resolve=e,t.reject=n})),t}class s{constructor(t){if((0,r.Z)(this,"buffer",void 0),(0,r.Z)(this,"mask",void 0),(0,r.Z)(this,"top",void 0),(0,r.Z)(this,"btm",void 0),(0,r.Z)(this,"next",void 0),!(t>0)||0!==(t-1&t))throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(t),this.mask=t-1,this.top=0,this.btm=0,this.next=null}push(t){return void 0===this.buffer[this.top]&&(this.buffer[this.top]=t,this.top=this.top+1&this.mask,!0)}shift(){const t=this.buffer[this.btm];if(void 0!==t)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,t}isEmpty(){return void 0===this.buffer[this.btm]}}class o{constructor(t={}){(0,r.Z)(this,"size",void 0),(0,r.Z)(this,"hwm",void 0),(0,r.Z)(this,"head",void 0),(0,r.Z)(this,"tail",void 0),this.hwm=t.splitLimit??16,this.head=new s(this.hwm),this.tail=this.head,this.size=0}calculateSize(t){return null!=t?.byteLength?t.byteLength:1}push(t){if(null!=t?.value&&(this.size+=this.calculateSize(t.value)),!this.head.push(t)){const e=this.head;this.head=e.next=new s(2*this.head.buffer.length),this.head.push(t)}}shift(){let t=this.tail.shift();if(void 0===t&&null!=this.tail.next){const e=this.tail.next;this.tail.next=null,this.tail=e,t=this.tail.shift()}return null!=t?.value&&(this.size-=this.calculateSize(t.value)),t}isEmpty(){return this.head.isEmpty()}}class a extends Error{constructor(t,e){super(t??"The operation was aborted"),(0,r.Z)(this,"type",void 0),(0,r.Z)(this,"code",void 0),this.type="aborted",this.code=e??"ABORT_ERR"}}function c(t={}){const e=t=>{const e=t.shift();if(null==e)return{done:!0};if(null!=e.error)throw e.error;return{done:!0===e.done,value:e.value}};return u(e,t)}function u(t,e){e=e??{};let n,r,s,c=e.onEnd,u=new o,l=i();const h=async()=>{try{return u.isEmpty()?s?{done:!0}:await new Promise(((e,i)=>{r=s=>{r=null,u.push(s);try{e(t(u))}catch(o){i(o)}return n}})):t(u)}finally{u.isEmpty()&&queueMicrotask((()=>{l.resolve(),l=i()}))}},d=t=>null!=r?r(t):(u.push(t),n),f=t=>(u=new o,null!=r?r({error:t}):(u.push({error:t}),n)),p=t=>{if(s)return n;if(!0!==e?.objectMode&&null==t?.byteLength)throw new Error("objectMode was not true but tried to push non-Uint8Array value");return d({done:!1,value:t})},g=t=>s?n:(s=!0,null!=t?f(t):d({done:!0})),y=()=>(u=new o,g(),{done:!0}),b=t=>(g(t),{done:!0});if(n={[Symbol.asyncIterator](){return this},next:h,return:y,throw:b,push:p,end:g,get readableLength(){return u.size},onEmpty:async t=>{const e=t?.signal;if(e?.throwIfAborted(),u.isEmpty())return;let n,r;null!=e&&(n=new Promise(((t,n)=>{r=()=>{n(new a)},e.addEventListener("abort",r)})));try{await Promise.race([l.promise,n])}finally{null!=r&&null!=e&&e?.removeEventListener("abort",r)}}},null==c)return n;const w=n;return n={[Symbol.asyncIterator](){return this},next(){return w.next()},throw(t){return w.throw(t),null!=c&&(c(t),c=void 0),{done:!0}},return(){return w.return(),null!=c&&(c(),c=void 0),{done:!0}},push:p,end(t){return w.end(t),null!=c&&(c(t),c=void 0),n},get readableLength(){return w.readableLength},onEmpty:t=>w.onEmpty(t)},n}},8936:function(t,e,n){"use strict";n.d(e,{N:function(){return $i}});var r=n(3781),i=n(7327),s=n(9614),o=(n(7658),n(5326)),a=n(3844),c=n(951);const u=Symbol.for("@libp2p/content-routing"),l=Symbol.for("@libp2p/peer-routing"),h=Symbol.for("@libp2p/peer-discovery");var d=n(4856),f=n(5652),p=n(6435),g=n(4722),y=n(5864);function b(t){const e=()=>{};return e.enabled=!1,e.color="",e.diff=0,e.log=()=>{},e.namespace=t,e.destroy=()=>!0,e.extend=()=>e,e}function w(){return{forComponent(t){return m(t)}}}function m(t){let e=b(`${t}:trace`);return f.enabled(`${t}:trace`)&&null!=f.names.map((t=>t.toString())).find((t=>t.includes(":trace")))&&(e=f(`${t}:trace`)),Object.assign(f(t),{error:f(`${t}:error`),trace:e})}f.formatters.b=t=>null==t?"undefined":g.base58btc.baseEncode(t),f.formatters.t=t=>null==t?"undefined":p.base32.baseEncode(t),f.formatters.m=t=>null==t?"undefined":y.base64.baseEncode(t),f.formatters.p=t=>null==t?"undefined":t.toString(),f.formatters.c=t=>null==t?"undefined":t.toString(),f.formatters.k=t=>null==t?"undefined":t.toString(),f.formatters.a=t=>null==t?"undefined":t.toString();var v=n(1869),E=n(2249);let A;A=Symbol.iterator;class x{constructor(t){if((0,i.Z)(this,"set",void 0),this.set=new Set,null!=t)for(const e of t)this.set.add(e.toString())}get size(){return this.set.size}[A](){return this.values()}add(t){this.set.add(t.toString())}clear(){this.set.clear()}delete(t){this.set.delete(t.toString())}entries(){return(0,E.D)(this.set.entries(),(t=>{const e=(0,v.jE)(t[0]);return[e,e]}))}forEach(t){this.set.forEach((e=>{const n=(0,v.jE)(e);t(n,n,this)}))}has(t){return this.set.has(t.toString())}values(){return(0,E.D)(this.set.values(),(t=>(0,v.jE)(t)))}intersection(t){const e=new x;for(const n of t)this.has(n)&&e.add(n);return e}difference(t){const e=new x;for(const n of this)t.has(n)||e.add(n);return e}union(t){const e=new x;for(const n of t)e.add(n);for(const n of this)e.add(n);return e}}n(1439),n(7585),n(5315);var S=n(2543);const _=async()=>{const t=await(0,o.Au)("Ed25519"),e=await I(t);if("Ed25519"===e.type)return e;throw new Error(`Generated unexpected PeerId type "${e.type}"`)};async function I(t){return(0,v.y5)((0,o.Re)(t.public),(0,o.m2)(t))}var R=n(1267),C=n(7275);function k(t){return null!=t[Symbol.asyncIterator]}function L(t){if(k(t))return(async()=>{const e=[];for await(const n of t)e.push(n);return e})();const e=[];for(const n of t)e.push(n);return e}var T=L,B=n(7686),O=n(714),N=n(8829),D=n(2575),U=n(6856);n(2801);class P extends Error{constructor(t){super(t),this.name="TimeoutError"}}class M extends Error{constructor(t){super(),this.name="AbortError",this.message=t}}const Z=t=>void 0===globalThis.DOMException?new M(t):new DOMException(t),F=t=>{const e=void 0===t.reason?Z("This operation was aborted."):t.reason;return e instanceof Error?e:Z(e)};function V(t,e){const{milliseconds:n,fallback:r,message:i,customTimers:s={setTimeout:setTimeout,clearTimeout:clearTimeout}}=e;let o;const a=new Promise(((a,c)=>{if("number"!==typeof n||1!==Math.sign(n))throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${n}\``);if(e.signal){const{signal:t}=e;t.aborted&&c(F(t)),t.addEventListener("abort",(()=>{c(F(t))}))}if(n===Number.POSITIVE_INFINITY)return void t.then(a,c);const u=new P;o=s.setTimeout.call(void 0,(()=>{if(r)try{a(r())}catch(e){c(e)}else"function"===typeof t.cancel&&t.cancel(),!1===i?a():i instanceof Error?c(i):(u.message=i??`Promise timed out after ${n} milliseconds`,c(u))}),n),(async()=>{try{a(await t)}catch(e){c(e)}})()})),c=a.finally((()=>{c.clear()}));return c.clear=()=>{s.clearTimeout.call(void 0,o),o=void 0},c}function H(t,e,n){let r=0,i=t.length;while(i>0){const s=Math.trunc(i/2);let o=r+s;n(t[o],e)<=0?(r=++o,i-=s+1):i=s}return r}var $=new WeakMap;class j{constructor(){(0,O.Z)(this,$,{writable:!0,value:[]})}enqueue(t,e){e={priority:0,...e};const n={priority:e.priority,run:t};if(this.size&&(0,N.Z)(this,$)[this.size-1].priority>=e.priority)return void(0,N.Z)(this,$).push(n);const r=H((0,N.Z)(this,$),n,((t,e)=>e.priority-t.priority));(0,N.Z)(this,$).splice(r,0,n)}dequeue(){const t=(0,N.Z)(this,$).shift();return t?.run}filter(t){return(0,N.Z)(this,$).filter((e=>e.priority===t.priority)).map((t=>t.run))}get size(){return(0,N.Z)(this,$).length}}var K=new WeakMap,z=new WeakMap,q=new WeakMap,G=new WeakMap,W=new WeakMap,J=new WeakMap,Y=new WeakMap,Q=new WeakMap,X=new WeakMap,tt=new WeakMap,et=new WeakMap,nt=new WeakMap,rt=new WeakMap,it=new WeakMap,st=new WeakMap,ot=new WeakMap,at=new WeakSet,ct=new WeakSet,ut=new WeakMap,lt=new WeakSet,ht=new WeakSet,dt=new WeakSet,ft=new WeakSet,pt=new WeakSet,gt=new WeakSet;class yt extends U{constructor(t){if(super(),(0,r.Z)(this,gt),(0,r.Z)(this,pt),(0,r.Z)(this,ft),(0,r.Z)(this,dt),(0,r.Z)(this,ht),(0,r.Z)(this,lt),(0,O.Z)(this,ut,{get:Et,set:void 0}),(0,r.Z)(this,ct),(0,r.Z)(this,at),(0,O.Z)(this,ot,{get:wt,set:void 0}),(0,O.Z)(this,st,{get:bt,set:void 0}),(0,O.Z)(this,K,{writable:!0,value:void 0}),(0,O.Z)(this,z,{writable:!0,value:void 0}),(0,O.Z)(this,q,{writable:!0,value:0}),(0,O.Z)(this,G,{writable:!0,value:void 0}),(0,O.Z)(this,W,{writable:!0,value:void 0}),(0,O.Z)(this,J,{writable:!0,value:0}),(0,O.Z)(this,Y,{writable:!0,value:void 0}),(0,O.Z)(this,Q,{writable:!0,value:void 0}),(0,O.Z)(this,X,{writable:!0,value:void 0}),(0,O.Z)(this,tt,{writable:!0,value:void 0}),(0,O.Z)(this,et,{writable:!0,value:0}),(0,O.Z)(this,nt,{writable:!0,value:void 0}),(0,O.Z)(this,rt,{writable:!0,value:void 0}),(0,O.Z)(this,it,{writable:!0,value:void 0}),(0,i.Z)(this,"timeout",void 0),t={carryoverConcurrencyCount:!1,intervalCap:Number.POSITIVE_INFINITY,interval:0,concurrency:Number.POSITIVE_INFINITY,autoStart:!0,queueClass:j,...t},!("number"===typeof t.intervalCap&&t.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${t.intervalCap?.toString()??""}\` (${typeof t.intervalCap})`);if(void 0===t.interval||!(Number.isFinite(t.interval)&&t.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${t.interval?.toString()??""}\` (${typeof t.interval})`);(0,D.Z)(this,K,t.carryoverConcurrencyCount),(0,D.Z)(this,z,t.intervalCap===Number.POSITIVE_INFINITY||0===t.interval),(0,D.Z)(this,G,t.intervalCap),(0,D.Z)(this,W,t.interval),(0,D.Z)(this,X,new t.queueClass),(0,D.Z)(this,tt,t.queueClass),this.concurrency=t.concurrency,this.timeout=t.timeout,(0,D.Z)(this,it,!0===t.throwOnTimeout),(0,D.Z)(this,rt,!1===t.autoStart)}get concurrency(){return(0,N.Z)(this,nt)}set concurrency(t){if(!("number"===typeof t&&t>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${t}\` (${typeof t})`);(0,D.Z)(this,nt,t),(0,s.Z)(this,ft,_t).call(this)}async add(t,e={}){return e={timeout:this.timeout,throwOnTimeout:(0,N.Z)(this,it),...e},new Promise(((n,r)=>{(0,N.Z)(this,X).enqueue((async()=>{var i,o;(0,D.Z)(this,et,(i=(0,N.Z)(this,et),i++,i)),(0,D.Z)(this,q,(o=(0,N.Z)(this,q),o++,o));try{e.signal?.throwIfAborted();let r=t({signal:e.signal});e.timeout&&(r=V(Promise.resolve(r),{milliseconds:e.timeout})),e.signal&&(r=Promise.race([r,(0,s.Z)(this,pt,It).call(this,e.signal)]));const i=await r;n(i),this.emit("completed",i)}catch(a){if(a instanceof P&&!e.throwOnTimeout)return void n();r(a),this.emit("error",a)}finally{(0,s.Z)(this,at,mt).call(this)}}),e),this.emit("add"),(0,s.Z)(this,lt,At).call(this)}))}async addAll(t,e){return Promise.all(t.map((async t=>this.add(t,e))))}start(){return(0,N.Z)(this,rt)?((0,D.Z)(this,rt,!1),(0,s.Z)(this,ft,_t).call(this),this):this}pause(){(0,D.Z)(this,rt,!0)}clear(){(0,D.Z)(this,X,new((0,N.Z)(this,tt)))}async onEmpty(){0!==(0,N.Z)(this,X).size&&await(0,s.Z)(this,gt,Rt).call(this,"empty")}async onSizeLessThan(t){(0,N.Z)(this,X).size<t||await(0,s.Z)(this,gt,Rt).call(this,"next",(()=>(0,N.Z)(this,X).size<t))}async onIdle(){0===(0,N.Z)(this,et)&&0===(0,N.Z)(this,X).size||await(0,s.Z)(this,gt,Rt).call(this,"idle")}get size(){return(0,N.Z)(this,X).size}sizeBy(t){return(0,N.Z)(this,X).filter(t).length}get pending(){return(0,N.Z)(this,et)}get isPaused(){return(0,N.Z)(this,rt)}}function bt(){return(0,N.Z)(this,z)||(0,N.Z)(this,q)<(0,N.Z)(this,G)}function wt(){return(0,N.Z)(this,et)<(0,N.Z)(this,nt)}function mt(){var t;(0,D.Z)(this,et,(t=(0,N.Z)(this,et),t--,t)),(0,s.Z)(this,lt,At).call(this),this.emit("next")}function vt(){(0,s.Z)(this,dt,St).call(this),(0,s.Z)(this,ht,xt).call(this),(0,D.Z)(this,Q,void 0)}function Et(){const t=Date.now();if(void 0===(0,N.Z)(this,Y)){const e=(0,N.Z)(this,J)-t;if(!(e<0))return void 0===(0,N.Z)(this,Q)&&(0,D.Z)(this,Q,setTimeout((()=>{(0,s.Z)(this,ct,vt).call(this)}),e)),!0;(0,D.Z)(this,q,(0,N.Z)(this,K)?(0,N.Z)(this,et):0)}return!1}function At(){if(0===(0,N.Z)(this,X).size)return(0,N.Z)(this,Y)&&clearInterval((0,N.Z)(this,Y)),(0,D.Z)(this,Y,void 0),this.emit("empty"),0===(0,N.Z)(this,et)&&this.emit("idle"),!1;if(!(0,N.Z)(this,rt)){const t=!(0,N.Z)(this,ut);if((0,N.Z)(this,st)&&(0,N.Z)(this,ot)){const e=(0,N.Z)(this,X).dequeue();return!!e&&(this.emit("active"),e(),t&&(0,s.Z)(this,ht,xt).call(this),!0)}}return!1}function xt(){(0,N.Z)(this,z)||void 0!==(0,N.Z)(this,Y)||((0,D.Z)(this,Y,setInterval((()=>{(0,s.Z)(this,dt,St).call(this)}),(0,N.Z)(this,W))),(0,D.Z)(this,J,Date.now()+(0,N.Z)(this,W)))}function St(){0===(0,N.Z)(this,q)&&0===(0,N.Z)(this,et)&&(0,N.Z)(this,Y)&&(clearInterval((0,N.Z)(this,Y)),(0,D.Z)(this,Y,void 0)),(0,D.Z)(this,q,(0,N.Z)(this,K)?(0,N.Z)(this,et):0),(0,s.Z)(this,ft,_t).call(this)}function _t(){while((0,s.Z)(this,lt,At).call(this));}async function It(t){return new Promise(((e,n)=>{t.addEventListener("abort",(()=>{n(t.reason)}),{once:!0})}))}async function Rt(t,e){return new Promise((n=>{const r=()=>{e&&!e()||(this.off(t,r),n())};this.on(t,r)}))}const Ct={},kt=t=>{t.addEventListener("message",(e=>{kt.dispatchEvent("message",t,e)})),null!=t.port&&t.port.addEventListener("message",(e=>{kt.dispatchEvent("message",t,e)}))};kt.addEventListener=(t,e)=>{null==Ct[t]&&(Ct[t]=[]),Ct[t].push(e)},kt.removeEventListener=(t,e)=>{null!=Ct[t]&&(Ct[t]=Ct[t].filter((t=>t===e)))},kt.dispatchEvent=function(t,e,n){null!=Ct[t]&&Ct[t].forEach((t=>t(e,n)))};var Lt=kt;const Tt="lock:worker:request-read",Bt="lock:worker:release-read",Ot="lock:master:grant-read",Nt="lock:worker:request-write",Dt="lock:worker:release-write",Ut="lock:master:grant-write",Pt=(t=21)=>Math.random().toString().substring(2),Mt=(t,e,n,r,i)=>(s,o)=>{if(o.data.type!==n)return;const a={type:o.data.type,name:o.data.name,identifier:o.data.identifier};t.dispatchEvent(new MessageEvent(e,{data:{name:a.name,handler:async()=>{s.postMessage({type:i,name:a.name,identifier:a.identifier}),await new Promise((t=>{const e=n=>{if(null==n||null==n.data)return;const i={type:n.data.type,name:n.data.name,identifier:n.data.identifier};i.type===r&&i.identifier===a.identifier&&(s.removeEventListener("message",e),t())};s.addEventListener("message",e)}))}}}))},Zt=(t,e,n,r)=>async()=>{const i=Pt();return globalThis.postMessage({type:e,identifier:i,name:t}),new Promise((e=>{const s=o=>{if(null==o||null==o.data)return;const a={type:o.data.type,identifier:o.data.identifier};a.type===n&&a.identifier===i&&(globalThis.removeEventListener("message",s),e((()=>{globalThis.postMessage({type:r,identifier:i,name:t})})))};globalThis.addEventListener("message",s)}))},Ft={singleProcess:!1};var Vt=t=>{t=Object.assign({},Ft,t);const e=Boolean(globalThis.document)||t.singleProcess;if(e){const t=new EventTarget;return Lt.addEventListener("message",Mt(t,"requestReadLock",Tt,Bt,Ot)),Lt.addEventListener("message",Mt(t,"requestWriteLock",Nt,Dt,Ut)),t}return{isWorker:!0,readLock:t=>Zt(t,Tt,Ot,Bt),writeLock:t=>Zt(t,Nt,Ut,Dt)}};const Ht={};let $t;async function jt(t,e){let n;const r=new Promise((t=>{n=t}));return t.add((async()=>V((async()=>{await new Promise((t=>{n((()=>{t()}))}))})(),{milliseconds:e.timeout}))),r}const Kt=(t,e)=>{if(!0===$t.isWorker)return{readLock:$t.readLock(t,e),writeLock:$t.writeLock(t,e)};const n=new yt({concurrency:1});let r;return{async readLock(){if(null!=r)return jt(r,e);r=new yt({concurrency:e.concurrency,autoStart:!1});const t=r,i=jt(r,e);return n.add((async()=>{t.start(),await t.onIdle().then((()=>{r===t&&(r=null)}))})),i},async writeLock(){return r=null,jt(n,e)}}},zt={name:"lock",concurrency:1/0,timeout:846e5,singleProcess:!1};function qt(t){const e=Object.assign({},zt,t);return null==$t&&($t=Vt(e),!0!==$t.isWorker&&($t.addEventListener("requestReadLock",(t=>{null!=Ht[t.data.name]&&Ht[t.data.name].readLock().then((async e=>t.data.handler().finally((()=>{e()}))))})),$t.addEventListener("requestWriteLock",(async t=>{null!=Ht[t.data.name]&&Ht[t.data.name].writeLock().then((async e=>t.data.handler().finally((()=>{e()}))))})))),null==Ht[e.name]&&(Ht[e.name]=Kt(e.name,e)),Ht[e.name]}var Gt=n(7708);const Wt={ERR_INVALID_PARAMETERS:"ERR_INVALID_PARAMETERS"};var Jt,Yt,Qt,Xt=n(5065);(function(t){let e,n,r;(function(t){let e;t.codec=()=>(null==e&&(e=(0,Xt.yw)(((t,e,n={})=>{!1!==n.lengthDelimited&&e.fork(),null!=t.key&&""!==t.key&&(e.uint32(10),e.string(t.key)),null!=t.value&&t.value.byteLength>0&&(e.uint32(18),e.bytes(t.value)),!1!==n.lengthDelimited&&e.ldelim()}),((t,e)=>{const n={key:"",value:new Uint8Array(0)},r=null==e?t.len:t.pos+e;while(t.pos<r){const e=t.uint32();switch(e>>>3){case 1:n.key=t.string();break;case 2:n.value=t.bytes();break;default:t.skipType(7&e);break}}return n}))),e),t.encode=e=>(0,Xt.LE)(e,t.codec()),t.decode=e=>(0,Xt.C6)(e,t.codec())})(e=t.Peer$metadataEntry||(t.Peer$metadataEntry={})),function(t){let e;t.codec=()=>(null==e&&(e=(0,Xt.yw)(((t,e,n={})=>{!1!==n.lengthDelimited&&e.fork(),null!=t.key&&""!==t.key&&(e.uint32(10),e.string(t.key)),null!=t.value&&(e.uint32(18),Qt.codec().encode(t.value,e)),!1!==n.lengthDelimited&&e.ldelim()}),((t,e)=>{const n={key:""},r=null==e?t.len:t.pos+e;while(t.pos<r){const e=t.uint32();switch(e>>>3){case 1:n.key=t.string();break;case 2:n.value=Qt.codec().decode(t,t.uint32());break;default:t.skipType(7&e);break}}return n}))),e),t.encode=e=>(0,Xt.LE)(e,t.codec()),t.decode=e=>(0,Xt.C6)(e,t.codec())}(n=t.Peer$tagsEntry||(t.Peer$tagsEntry={})),t.codec=()=>(null==r&&(r=(0,Xt.yw)(((e,n,r={})=>{if(!1!==r.lengthDelimited&&n.fork(),null!=e.addresses)for(const t of e.addresses)n.uint32(10),Yt.codec().encode(t,n);if(null!=e.protocols)for(const t of e.protocols)n.uint32(18),n.string(t);if(null!=e.publicKey&&(n.uint32(34),n.bytes(e.publicKey)),null!=e.peerRecordEnvelope&&(n.uint32(42),n.bytes(e.peerRecordEnvelope)),null!=e.metadata&&0!==e.metadata.size)for(const[i,s]of e.metadata.entries())n.uint32(50),t.Peer$metadataEntry.codec().encode({key:i,value:s},n);if(null!=e.tags&&0!==e.tags.size)for(const[i,s]of e.tags.entries())n.uint32(58),t.Peer$tagsEntry.codec().encode({key:i,value:s},n);!1!==r.lengthDelimited&&n.ldelim()}),((e,n)=>{const r={addresses:[],protocols:[],metadata:new Map,tags:new Map},i=null==n?e.len:e.pos+n;while(e.pos<i){const n=e.uint32();switch(n>>>3){case 1:r.addresses.push(Yt.codec().decode(e,e.uint32()));break;case 2:r.protocols.push(e.string());break;case 4:r.publicKey=e.bytes();break;case 5:r.peerRecordEnvelope=e.bytes();break;case 6:{const n=t.Peer$metadataEntry.codec().decode(e,e.uint32());r.metadata.set(n.key,n.value);break}case 7:{const n=t.Peer$tagsEntry.codec().decode(e,e.uint32());r.tags.set(n.key,n.value);break}default:e.skipType(7&n);break}}return r}))),r),t.encode=e=>(0,Xt.LE)(e,t.codec()),t.decode=e=>(0,Xt.C6)(e,t.codec())})(Jt||(Jt={})),function(t){let e;t.codec=()=>(null==e&&(e=(0,Xt.yw)(((t,e,n={})=>{!1!==n.lengthDelimited&&e.fork(),null!=t.multiaddr&&t.multiaddr.byteLength>0&&(e.uint32(10),e.bytes(t.multiaddr)),null!=t.isCertified&&(e.uint32(16),e.bool(t.isCertified)),!1!==n.lengthDelimited&&e.ldelim()}),((t,e)=>{const n={multiaddr:new Uint8Array(0)},r=null==e?t.len:t.pos+e;while(t.pos<r){const e=t.uint32();switch(e>>>3){case 1:n.multiaddr=t.bytes();break;case 2:n.isCertified=t.bool();break;default:t.skipType(7&e);break}}return n}))),e),t.encode=e=>(0,Xt.LE)(e,t.codec()),t.decode=e=>(0,Xt.C6)(e,t.codec())}(Yt||(Yt={})),function(t){let e;t.codec=()=>(null==e&&(e=(0,Xt.yw)(((t,e,n={})=>{!1!==n.lengthDelimited&&e.fork(),null!=t.value&&0!==t.value&&(e.uint32(8),e.uint32(t.value)),null!=t.expiry&&(e.uint32(16),e.uint64(t.expiry)),!1!==n.lengthDelimited&&e.ldelim()}),((t,e)=>{const n={value:0},r=null==e?t.len:t.pos+e;while(t.pos<r){const e=t.uint32();switch(e>>>3){case 1:n.value=t.uint32();break;case 2:n.expiry=t.uint64();break;default:t.skipType(7&e);break}}return n}))),e),t.encode=e=>(0,Xt.LE)(e,t.codec()),t.decode=e=>(0,Xt.C6)(e,t.codec())}(Qt||(Qt={}));var te=n(783);function ee(t,e){const n=Jt.decode(e);null!=n.publicKey&&null==t.publicKey&&(t=(0,v.vL)({...t,publicKey:t.publicKey}));const r=new Map,i=BigInt(Date.now());for(const[s,o]of n.tags.entries())null!=o.expiry&&o.expiry<i||r.set(s,o);return{...n,id:t,addresses:n.addresses.map((({multiaddr:t,isCertified:e})=>({multiaddr:(0,te.HM)(t),isCertified:e??!1}))),metadata:n.metadata,peerRecordEnvelope:n.peerRecordEnvelope??void 0,tags:r}}var ne=n(3117),re=n(7010);let ie;const se="/",oe=(new TextEncoder).encode(se),ae=oe[0];ie=Symbol.toStringTag;class ce{constructor(t,e){if((0,i.Z)(this,"_buf",void 0),"string"===typeof t)this._buf=(0,S.m)(t);else{if(!(t instanceof Uint8Array))throw new Error("Invalid key, should be String of Uint8Array");this._buf=t}if(null==e&&(e=!0),e&&this.clean(),0===this._buf.byteLength||this._buf[0]!==ae)throw new Error("Invalid key")}toString(t="utf8"){return(0,re.B)(this._buf,t)}uint8Array(){return this._buf}get[ie](){return`Key(${this.toString()})`}static withNamespaces(t){return new ce(t.join(se))}static random(){return new ce(Math.random().toString().substring(2))}static asKey(t){return t instanceof Uint8Array||"string"===typeof t?new ce(t):"function"===typeof t.uint8Array?new ce(t.uint8Array()):null}clean(){if(null!=this._buf&&0!==this._buf.byteLength||(this._buf=oe),this._buf[0]!==ae){const t=new Uint8Array(this._buf.byteLength+1);t.fill(ae,0,1),t.set(this._buf,1),this._buf=t}while(this._buf.byteLength>1&&this._buf[this._buf.byteLength-1]===ae)this._buf=this._buf.subarray(0,-1)}less(t){const e=this.list(),n=t.list();for(let r=0;r<e.length;r++){if(n.length<r+1)return!1;const t=e[r],i=n[r];if(t<i)return!0;if(t>i)return!1}return e.length<n.length}reverse(){return ce.withNamespaces(this.list().slice().reverse())}namespaces(){return this.list()}baseNamespace(){const t=this.namespaces();return t[t.length-1]}list(){return this.toString().split(se).slice(1)}type(){return ue(this.baseNamespace())}name(){return le(this.baseNamespace())}instance(t){return new ce(this.toString()+":"+t)}path(){let t=this.parent().toString();return t.endsWith(se)||(t+=se),t+=this.type(),new ce(t)}parent(){const t=this.list();return 1===t.length?new ce(se):new ce(t.slice(0,-1).join(se))}child(t){return this.toString()===se?t:t.toString()===se?this:new ce(this.toString()+t.toString(),!1)}isAncestorOf(t){return t.toString()!==this.toString()&&t.toString().startsWith(this.toString())}isDecendantOf(t){return t.toString()!==this.toString()&&this.toString().startsWith(t.toString())}isTopLevel(){return 1===this.list().length}concat(...t){return ce.withNamespaces([...this.namespaces(),...he(t.map((t=>t.namespaces())))])}}function ue(t){const e=t.split(":");return e.length<2?"":e.slice(0,-1).join(":")}function le(t){const e=t.split(":");return e[e.length-1]}function he(t){return[].concat(...t)}const de="/peers/";function fe(t){if(!(0,ne.I)(t)||null==t.type)throw new d.sv("Invalid PeerId",Wt.ERR_INVALID_PARAMETERS);const e=t.toCID().toString();return new ce(`${de}${e}`)}async function pe(t,e,n){const r=new Map;for(const i of n){if(null==i)continue;if(i.multiaddr instanceof Uint8Array&&(i.multiaddr=(0,te.HM)(i.multiaddr)),!(0,te.h2)(i.multiaddr))throw new d.sv("Multiaddr was invalid",Wt.ERR_INVALID_PARAMETERS);if(!await e(t,i.multiaddr))continue;const n=i.isCertified??!1,s=i.multiaddr.toString(),o=r.get(s);null!=o?i.isCertified=o.isCertified||n:r.set(s,{multiaddr:i.multiaddr,isCertified:n})}return[...r.values()].sort(((t,e)=>t.multiaddr.toString().localeCompare(e.multiaddr.toString()))).map((({isCertified:t,multiaddr:e})=>({isCertified:t,multiaddr:e.bytes})))}async function ge(t,e,n,r){if(null==e)throw new d.sv("Invalid PeerData",Wt.ERR_INVALID_PARAMETERS);if(null!=e.publicKey&&null!=t.publicKey&&!(0,Gt.f)(e.publicKey,t.publicKey))throw new d.sv("publicKey bytes do not match peer id publicKey bytes",Wt.ERR_INVALID_PARAMETERS);const i=r.existingPeer;if(null!=i&&!t.equals(i.id))throw new d.sv("peer id did not match existing peer id",Wt.ERR_INVALID_PARAMETERS);let s=i?.addresses??[],o=new Set(i?.protocols??[]),a=i?.metadata??new Map,c=i?.tags??new Map,u=i?.peerRecordEnvelope;if("patch"===n){if(null==e.multiaddrs&&null==e.addresses||(s=[],null!=e.multiaddrs&&s.push(...e.multiaddrs.map((t=>({isCertified:!1,multiaddr:t})))),null!=e.addresses&&s.push(...e.addresses)),null!=e.protocols&&(o=new Set(e.protocols)),null!=e.metadata){const t=e.metadata instanceof Map?[...e.metadata.entries()]:Object.entries(e.metadata);a=ye(t,{validate:be})}if(null!=e.tags){const t=e.tags instanceof Map?[...e.tags.entries()]:Object.entries(e.tags);c=ye(t,{validate:we,map:me})}null!=e.peerRecordEnvelope&&(u=e.peerRecordEnvelope)}if("merge"===n){if(null!=e.multiaddrs&&s.push(...e.multiaddrs.map((t=>({isCertified:!1,multiaddr:t})))),null!=e.addresses&&s.push(...e.addresses),null!=e.protocols&&(o=new Set([...o,...e.protocols])),null!=e.metadata){const t=e.metadata instanceof Map?[...e.metadata.entries()]:Object.entries(e.metadata);for(const[e,n]of t)null==n?a.delete(e):a.set(e,n);a=ye([...a.entries()],{validate:be})}if(null!=e.tags){const t=e.tags instanceof Map?[...e.tags.entries()]:Object.entries(e.tags),n=new Map(c);for(const[e,r]of t)null==r?n.delete(e):n.set(e,r);c=ye([...n.entries()],{validate:we,map:me})}null!=e.peerRecordEnvelope&&(u=e.peerRecordEnvelope)}const l={addresses:await pe(t,r.addressFilter??(async()=>!0),s),protocols:[...o.values()].sort(((t,e)=>t.localeCompare(e))),metadata:a,tags:c,publicKey:i?.id.publicKey??e.publicKey??t.publicKey,peerRecordEnvelope:u};return"RSA"!==t.type&&delete l.publicKey,l}function ye(t,e){const n=new Map;for(const[r,i]of t)null!=i&&e.validate(r,i);for(const[r,i]of t.sort((([t],[e])=>t.localeCompare(e))))null!=i&&n.set(r,e.map?.(r,i)??i);return n}function be(t,e){if("string"!==typeof t)throw new d.sv("Metadata key must be a string",Wt.ERR_INVALID_PARAMETERS);if(!(e instanceof Uint8Array))throw new d.sv("Metadata value must be a Uint8Array",Wt.ERR_INVALID_PARAMETERS)}function we(t,e){if("string"!==typeof t)throw new d.sv("Tag name must be a string",Wt.ERR_INVALID_PARAMETERS);if(null!=e.value){if(parseInt(`${e.value}`,10)!==e.value)throw new d.sv("Tag value must be an integer",Wt.ERR_INVALID_PARAMETERS);if(e.value<0||e.value>100)throw new d.sv("Tag value must be between 0-100",Wt.ERR_INVALID_PARAMETERS)}if(null!=e.ttl){if(parseInt(`${e.ttl}`,10)!==e.ttl)throw new d.sv("Tag ttl must be an integer",Wt.ERR_INVALID_PARAMETERS);if(e.ttl<0)throw new d.sv("Tag ttl must be between greater than 0",Wt.ERR_INVALID_PARAMETERS)}}function me(t,e){let n;return null!=e.expiry&&(n=e.expiry),null!=e.ttl&&(n=BigInt(Date.now()+Number(e.ttl))),{value:e.value??0,expiry:n}}function ve(t,e,n){const r=t.toString().split("/")[2],i=p.base32.decode(r),s=(0,v.cv)(i),o=n.get(s);if(null!=o)return o;const a=ee(s,e);return n.set(s,a),a}function Ee(t,e){return null==t?{}:{prefix:de,filters:(t.filters??[]).map((t=>({key:n,value:r})=>t(ve(n,r,e)))),orders:(t.orders??[]).map((t=>(n,r)=>t(ve(n.key,n.value,e),ve(r.key,r.value,e))))}}var Ae=new WeakSet,xe=new WeakSet;class Se{constructor(t,e={}){(0,r.Z)(this,xe),(0,r.Z)(this,Ae),(0,i.Z)(this,"peerId",void 0),(0,i.Z)(this,"datastore",void 0),(0,i.Z)(this,"lock",void 0),(0,i.Z)(this,"addressFilter",void 0),this.peerId=t.peerId,this.datastore=t.datastore,this.addressFilter=e.addressFilter,this.lock=qt({name:"peer-store",singleProcess:!0})}async has(t){return this.datastore.has(fe(t))}async delete(t){if(this.peerId.equals(t))throw new d.sv("Cannot delete self peer",Wt.ERR_INVALID_PARAMETERS);await this.datastore.delete(fe(t))}async load(t){const e=await this.datastore.get(fe(t));return ee(t,e)}async save(t,e){const{existingBuf:n,existingPeer:r}=await(0,s.Z)(this,Ae,_e).call(this,t),i=await ge(t,e,"patch",{addressFilter:this.addressFilter});return(0,s.Z)(this,xe,Ie).call(this,t,i,n,r)}async patch(t,e){const{existingBuf:n,existingPeer:r}=await(0,s.Z)(this,Ae,_e).call(this,t),i=await ge(t,e,"patch",{addressFilter:this.addressFilter,existingPeer:r});return(0,s.Z)(this,xe,Ie).call(this,t,i,n,r)}async merge(t,e){const{existingBuf:n,existingPeer:r}=await(0,s.Z)(this,Ae,_e).call(this,t),i=await ge(t,e,"merge",{addressFilter:this.addressFilter,existingPeer:r});return(0,s.Z)(this,xe,Ie).call(this,t,i,n,r)}async*all(t){const e=new B.j;for await(const{key:n,value:r}of this.datastore.query(Ee(t??{},e))){const t=ve(n,r,e);t.id.equals(this.peerId)||(yield t)}}}async function _e(t){try{const e=await this.datastore.get(fe(t)),n=ee(t,e);return{existingBuf:e,existingPeer:n}}catch(e){if("ERR_NOT_FOUND"!==e.code)throw e}return{}}async function Ie(t,e,n,r){const i=Jt.encode(e);return null!=n&&(0,Gt.f)(i,n)?{peer:ee(t,i),previous:r,updated:!1}:(await this.datastore.put(fe(t),i),{peer:ee(t,i),previous:r,updated:!0})}var Re=new WeakSet;class Ce{constructor(t,e={}){(0,r.Z)(this,Re),(0,i.Z)(this,"store",void 0),(0,i.Z)(this,"events",void 0),(0,i.Z)(this,"peerId",void 0),(0,i.Z)(this,"log",void 0),this.log=t.logger.forComponent("libp2p:peer-store"),this.events=t.events,this.peerId=t.peerId,this.store=new Se(t,e)}async forEach(t,e){this.log.trace("forEach await read lock");const n=await this.store.lock.readLock();this.log.trace("forEach got read lock");try{for await(const n of this.store.all(e))t(n)}finally{this.log.trace("forEach release read lock"),n()}}async all(t){this.log.trace("all await read lock");const e=await this.store.lock.readLock();this.log.trace("all got read lock");try{return await T(this.store.all(t))}finally{this.log.trace("all release read lock"),e()}}async delete(t){this.log.trace("delete await write lock");const e=await this.store.lock.writeLock();this.log.trace("delete got write lock");try{await this.store.delete(t)}finally{this.log.trace("delete release write lock"),e()}}async has(t){this.log.trace("has await read lock");const e=await this.store.lock.readLock();this.log.trace("has got read lock");try{return await this.store.has(t)}finally{this.log.trace("has release read lock"),e()}}async get(t){this.log.trace("get await read lock");const e=await this.store.lock.readLock();this.log.trace("get got read lock");try{return await this.store.load(t)}finally{this.log.trace("get release read lock"),e()}}async save(t,e){this.log.trace("save await write lock");const n=await this.store.lock.writeLock();this.log.trace("save got write lock");try{const n=await this.store.save(t,e);return(0,s.Z)(this,Re,ke).call(this,t,n),n.peer}finally{this.log.trace("save release write lock"),n()}}async patch(t,e){this.log.trace("patch await write lock");const n=await this.store.lock.writeLock();this.log.trace("patch got write lock");try{const n=await this.store.patch(t,e);return(0,s.Z)(this,Re,ke).call(this,t,n),n.peer}finally{this.log.trace("patch release write lock"),n()}}async merge(t,e){this.log.trace("merge await write lock");const n=await this.store.lock.writeLock();this.log.trace("merge got write lock");try{const n=await this.store.merge(t,e);return(0,s.Z)(this,Re,ke).call(this,t,n),n.peer}finally{this.log.trace("merge release write lock"),n()}}async consumePeerRecord(t,e){const n=await R.X.openAndCertify(t,C.K.DOMAIN);if(!1===e?.equals(n.peerId))return this.log("envelope peer id was not the expected peer id - expected: %p received: %p",e,n.peerId),!1;const r=C.K.createFromProtobuf(n.payload);let i;try{i=await this.get(n.peerId)}catch(s){if("ERR_NOT_FOUND"!==s.code)throw s}if(null!=i?.peerRecordEnvelope){const t=await R.X.createFromProtobuf(i.peerRecordEnvelope),e=C.K.createFromProtobuf(t.payload);if(e.seqNumber>=r.seqNumber)return this.log("sequence number was lower or equal to existing sequence number - stored: %d received: %d",e.seqNumber,r.seqNumber),!1}return await this.patch(r.peerId,{peerRecordEnvelope:t,addresses:r.multiaddrs.map((t=>({isCertified:!0,multiaddr:t})))}),!0}}function ke(t,e){e.updated&&(this.peerId.equals(t)?this.events.safeDispatchEvent("self:peer:update",{detail:e}):this.events.safeDispatchEvent("peer:update",{detail:e}))}function Le(t){return null!=t[Symbol.asyncIterator]}function Te(t){if(Le(t))return(async()=>{for await(const e of t);})();for(const e of t);}var Be=Te;function Oe(t){const[e,n]=null!=t[Symbol.asyncIterator]?[t[Symbol.asyncIterator](),Symbol.asyncIterator]:[t[Symbol.iterator](),Symbol.iterator],r=[];return{peek:()=>e.next(),push:t=>{r.push(t)},next:()=>r.length>0?{done:!1,value:r.shift()}:e.next(),[n](){return this}}}var Ne=Oe;function De(t){return null!=t[Symbol.asyncIterator]}function Ue(t,e){let n=0;if(De(t))return async function*(){for await(const r of t)await e(r,n++)&&(yield r)}();const r=Ne(t),{value:i,done:s}=r.next();if(!0===s)return function*(){}();const o=e(i,n++);if("function"===typeof o.then)return async function*(){await o&&(yield i);for await(const t of r)await e(t,n++)&&(yield t)}();const a=e;return function*(){!0===o&&(yield i);for(const t of r)a(t,n++)&&(yield t)}()}var Pe=Ue;function Me(t){return null!=t[Symbol.asyncIterator]}function Ze(t){if(Me(t))return(async()=>{const e=[];for await(const n of t)e.push(n);return e})();const e=[];for(const n of t)e.push(n);return e}var Fe=Ze;function Ve(t){return null!=t[Symbol.asyncIterator]}function He(t,e){return Ve(t)?async function*(){const n=await Fe(t);yield*n.sort(e)}():function*(){const n=Fe(t);yield*n.sort(e)}()}var $e=He;function je(t){return null!=t[Symbol.asyncIterator]}function Ke(t,e){return je(t)?async function*(){let n=0;if(!(e<1))for await(const r of t)if(yield r,n++,n===e)return}():function*(){let n=0;if(!(e<1))for(const r of t)if(yield r,n++,n===e)return}()}var ze=Ke;class qe{put(t,e,n){return Promise.reject(new Error(".put is not implemented"))}get(t,e){return Promise.reject(new Error(".get is not implemented"))}has(t,e){return Promise.reject(new Error(".has is not implemented"))}delete(t,e){return Promise.reject(new Error(".delete is not implemented"))}async*putMany(t,e={}){for await(const{key:n,value:r}of t)await this.put(n,r,e),yield n}async*getMany(t,e={}){for await(const n of t)yield{key:n,value:await this.get(n,e)}}async*deleteMany(t,e={}){for await(const n of t)await this.delete(n,e),yield n}batch(){let t=[],e=[];return{put(e,n){t.push({key:e,value:n})},delete(t){e.push(t)},commit:async n=>{await Be(this.putMany(t,n)),t=[],await Be(this.deleteMany(e,n)),e=[]}}}async*_all(t,e){throw new Error("._all is not implemented")}async*_allKeys(t,e){throw new Error("._allKeys is not implemented")}query(t,e){let n=this._all(t,e);if(null!=t.prefix){const e=t.prefix;n=Pe(n,(t=>t.key.toString().startsWith(e)))}if(Array.isArray(t.filters)&&(n=t.filters.reduce(((t,e)=>Pe(t,e)),n)),Array.isArray(t.orders)&&(n=t.orders.reduce(((t,e)=>$e(t,e)),n)),null!=t.offset){let e=0;const r=t.offset;n=Pe(n,(()=>e++>=r))}return null!=t.limit&&(n=ze(n,t.limit)),n}queryKeys(t,e){let n=this._allKeys(t,e);if(null!=t.prefix){const e=t.prefix;n=Pe(n,(t=>t.toString().startsWith(e)))}if(Array.isArray(t.filters)&&(n=t.filters.reduce(((t,e)=>Pe(t,e)),n)),Array.isArray(t.orders)&&(n=t.orders.reduce(((t,e)=>$e(t,e)),n)),null!=t.offset){const e=t.offset;let r=0;n=Pe(n,(()=>r++>=e))}return null!=t.limit&&(n=ze(n,t.limit)),n}}var Ge=n(9998);function We(t){return t=t??new Error("Not Found"),Ge(t,"ERR_NOT_FOUND")}class Je extends qe{constructor(){super(),(0,i.Z)(this,"data",void 0),this.data=new Map}put(t,e){return this.data.set(t.toString(),e),t}get(t){const e=this.data.get(t.toString());if(null==e)throw We();return e}has(t){return this.data.has(t.toString())}delete(t){this.data.delete(t.toString())}*_all(){for(const[t,e]of this.data.entries())yield{key:new ce(t),value:e}}*_allKeys(){for(const t of this.data.keys())yield new ce(t)}}var Ye=n(6997);function Qe(t,e){let n;return function(){const r=function(){n=void 0,t()};clearTimeout(n),n=setTimeout(r,e)}}const Xe=t=>t;function tn(t,e){const n=t.getPeerId();if(null!=n){const r=(0,v.jE)(n);r.equals(e)&&(t=t.decapsulate((0,te.HM)(`/p2p/${e.toString()}`)))}return t}class en{constructor(t,e={}){(0,i.Z)(this,"log",void 0),(0,i.Z)(this,"components",void 0),(0,i.Z)(this,"listen",void 0),(0,i.Z)(this,"announce",void 0),(0,i.Z)(this,"observed",void 0),(0,i.Z)(this,"announceFilter",void 0);const{listen:n=[],announce:r=[]}=e;this.components=t,this.log=t.logger.forComponent("libp2p:address-manager"),this.listen=n.map((t=>t.toString())),this.announce=new Set(r.map((t=>t.toString()))),this.observed=new Map,this.announceFilter=e.announceFilter??Xe,this._updatePeerStoreAddresses=Qe(this._updatePeerStoreAddresses.bind(this),1e3),t.events.addEventListener("transport:listening",(()=>{this._updatePeerStoreAddresses()})),t.events.addEventListener("transport:close",(()=>{this._updatePeerStoreAddresses()}))}_updatePeerStoreAddresses(){const t=this.getAnnounceAddrs().concat(this.components.transportManager.getAddrs()).concat([...this.observed.entries()].filter((([t,e])=>e.confident)).map((([t])=>(0,te.HM)(t)))).map((t=>t.getPeerId()===this.components.peerId.toString()?t.decapsulate(`/p2p/${this.components.peerId.toString()}`):t));this.components.peerStore.patch(this.components.peerId,{multiaddrs:t}).catch((t=>{this.log.error("error updating addresses",t)}))}getListenAddrs(){return Array.from(this.listen).map((t=>(0,te.HM)(t)))}getAnnounceAddrs(){return Array.from(this.announce).map((t=>(0,te.HM)(t)))}getObservedAddrs(){return Array.from(this.observed).map((([t])=>(0,te.HM)(t)))}addObservedAddr(t){t=tn(t,this.components.peerId);const e=t.toString();this.observed.has(e)||this.observed.set(e,{confident:!1})}confirmObservedAddr(t){t=tn(t,this.components.peerId);const e=t.toString(),n=this.observed.get(e)??{confident:!1},r=n.confident;this.observed.set(e,{confident:!0}),r||this._updatePeerStoreAddresses()}removeObservedAddr(t){t=tn(t,this.components.peerId);const e=t.toString();this.observed.delete(e)}getAddresses(){let t=this.getAnnounceAddrs().map((t=>t.toString()));0===t.length&&(t=this.components.transportManager.getAddrs().map((t=>t.toString()))),t=t.concat(Array.from(this.observed).filter((([t,e])=>e.confident)).map((([t])=>t)));const e=new Set(t);return this.announceFilter(Array.from(e).map((t=>(0,te.HM)(t)))).map((t=>!0===t.protos().pop()?.path||t.getPeerId()===this.components.peerId.toString()?t:t.encapsulate(`/p2p/${this.components.peerId.toString()}`)))}}function nn(t){return null!=t&&"function"===typeof t.start&&"function"===typeof t.stop}class rn{constructor(t={}){(0,i.Z)(this,"components",{}),(0,i.Z)(this,"_started",!1),this.components={};for(const[e,n]of Object.entries(t))this.components[e]=n;null==this.components.logger&&(this.components.logger=w())}isStarted(){return this._started}async _invokeStartableMethod(t){await Promise.all(Object.values(this.components).filter((t=>nn(t))).map((async e=>{await(e[t]?.())})))}async beforeStart(){await this._invokeStartableMethod("beforeStart")}async start(){await this._invokeStartableMethod("start"),this._started=!0}async afterStart(){await this._invokeStartableMethod("afterStart")}async beforeStop(){await this._invokeStartableMethod("beforeStop")}async stop(){await this._invokeStartableMethod("stop"),this._started=!1}async afterStop(){await this._invokeStartableMethod("afterStop")}}const sn=["metrics","connectionProtector","dns"],on=["components","isStarted","beforeStart","start","afterStart","beforeStop","stop","afterStop","then","_invokeStartableMethod"];function an(t={}){const e=new rn(t),n=new Proxy(e,{get(t,n,r){if("string"===typeof n&&!on.includes(n)){const t=e.components[n];if(null==t&&!sn.includes(n))throw new d.sv(`${n} not set`,"ERR_SERVICE_MISSING");return t}return Reflect.get(t,n,r)},set(t,n,r){return"string"===typeof n?e.components[n]=r:Reflect.set(t,n,r),!0}});return n}class cn{constructor(){(0,i.Z)(this,"index",0),(0,i.Z)(this,"input","")}new(t){return this.index=0,this.input=t,this}readAtomically(t){const e=this.index,n=t();return void 0===n&&(this.index=e),n}parseWith(t){const e=t();if(this.index===this.input.length)return e}peekChar(){if(!(this.index>=this.input.length))return this.input[this.index]}readChar(){if(!(this.index>=this.input.length))return this.input[this.index++]}readGivenChar(t){return this.readAtomically((()=>{const e=this.readChar();if(e===t)return e}))}readSeparator(t,e,n){return this.readAtomically((()=>{if(!(e>0&&void 0===this.readGivenChar(t)))return n()}))}readNumber(t,e,n,r){return this.readAtomically((()=>{let i=0,s=0;const o=this.peekChar();if(void 0===o)return;const a="0"===o,c=2**(8*r)-1;while(1){const n=this.readAtomically((()=>{const e=this.readChar();if(void 0===e)return;const n=Number.parseInt(e,t);return Number.isNaN(n)?void 0:n}));if(void 0===n)break;if(i*=t,i+=n,i>c)return;if(s+=1,void 0!==e&&s>e)return}return 0===s||!n&&a&&s>1?void 0:i}))}readIPv4Addr(){return this.readAtomically((()=>{const t=new Uint8Array(4);for(let e=0;e<t.length;e++){const n=this.readSeparator(".",e,(()=>this.readNumber(10,3,!1,1)));if(void 0===n)return;t[e]=n}return t}))}readIPv6Addr(){const t=t=>{for(let e=0;e<t.length/2;e++){const n=2*e;if(e<t.length-3){const r=this.readSeparator(":",e,(()=>this.readIPv4Addr()));if(void 0!==r)return t[n]=r[0],t[n+1]=r[1],t[n+2]=r[2],t[n+3]=r[3],[n+4,!0]}const r=this.readSeparator(":",e,(()=>this.readNumber(16,4,!0,2)));if(void 0===r)return[n,!1];t[n]=r>>8,t[n+1]=255&r}return[t.length,!1]};return this.readAtomically((()=>{const e=new Uint8Array(16),[n,r]=t(e);if(16===n)return e;if(r)return;if(void 0===this.readGivenChar(":"))return;if(void 0===this.readGivenChar(":"))return;const i=new Uint8Array(14),s=16-(n+2),[o]=t(i.subarray(0,s));return e.set(i.subarray(0,o),16-o),e}))}readIPAddr(){return this.readIPv4Addr()??this.readIPv6Addr()}}const un=45,ln=15,hn=new cn;function dn(t){if(!(t.length>ln))return hn.new(t).parseWith((()=>hn.readIPv4Addr()))}function fn(t){if(t.includes("%")&&(t=t.split("%")[0]),!(t.length>un))return hn.new(t).parseWith((()=>hn.readIPv6Addr()))}function pn(t){return Boolean(dn(t))}function gn(t){return Boolean(fn(t))}var yn=n(98);const bn=["0.0.0.0/8","10.0.0.0/8","100.64.0.0/10","127.0.0.0/8","169.254.0.0/16","172.16.0.0/12","192.0.0.0/24","192.0.0.0/29","192.0.0.8/32","192.0.0.9/32","192.0.0.10/32","192.0.0.170/32","192.0.0.171/32","192.0.2.0/24","192.31.196.0/24","192.52.193.0/24","192.88.99.0/24","192.168.0.0/16","192.175.48.0/24","198.18.0.0/15","198.51.100.0/24","203.0.113.0/24","240.0.0.0/4","255.255.255.255/32"],wn=bn.map((t=>new yn.Netmask(t)));function mn(t){for(const e of wn)if(e.contains(t))return!0;return!1}function vn(t){return/^::$/.test(t)||/^::1$/.test(t)||/^::f{4}:([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/.test(t)||/^::f{4}:0.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/.test(t)||/^64:ff9b::([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/.test(t)||/^100::([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(t)||/^2001::([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(t)||/^2001:2[0-9a-fA-F]:([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(t)||/^2001:db8:([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(t)||/^2002:([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(t)||/^f[c-d]([0-9a-fA-F]{2,2}):/i.test(t)||/^fe[8-9a-bA-B][0-9a-fA-F]:/i.test(t)||/^ff([0-9a-fA-F]{2,2}):/i.test(t)}function En(t){return pn(t)?mn(t):gn(t)?vn(t):void 0}function An(t={}){return{denyDialPeer:async()=>!1,denyDialMultiaddr:async t=>{const e=t.stringTuples();return(4===e[0][0]||41===e[0][0])&&Boolean(En(`${e[0][1]}`))},denyInboundConnection:async()=>!1,denyOutboundConnection:async()=>!1,denyInboundEncryptedConnection:async()=>!1,denyOutboundEncryptedConnection:async()=>!1,denyInboundUpgradedConnection:async()=>!1,denyOutboundUpgradedConnection:async()=>!1,filterMultiaddrForPeer:async()=>!0,...t}}var xn=n(1508),Sn=n(3305);function _n(t){try{const{address:e}=t.nodeAddress();return Boolean(En(e))}catch{return!0}}function In(t,e){const n=_n(t.multiaddr),r=_n(e.multiaddr);return n&&!r?1:!n&&r?-1:0}function Rn(t,e){return t.isCertified&&!e.isCertified?-1:!t.isCertified&&e.isCertified?1:0}function Cn(t,e){const n=Sn.dx.exactMatch(t.multiaddr),r=Sn.dx.exactMatch(e.multiaddr);return n&&!r?1:!n&&r?-1:0}function kn(t,e){const n=In(t,e);if(0!==n)return n;const r=Cn(t,e);if(0!==r)return r;const i=Rn(t,e);return i}class Ln extends Event{constructor(t,e){super(t),this.detail=e}}n(6229),n(7330),n(2062);function Tn(t){const e=[Hn.A];return null==t?e:Array.isArray(t)?0===t.length?e:t:[t]}const Bn=60;function On(t){return{Status:t.Status??0,TC:t.TC??t.flag_tc??!1,RD:t.RD??t.flag_rd??!1,RA:t.RA??t.flag_ra??!1,AD:t.AD??t.flag_ad??!1,CD:t.CD??t.flag_cd??!1,Question:(t.Question??t.questions??[]).map((t=>({name:t.name,type:Hn[t.type]}))),Answer:(t.Answer??t.answers??[]).map((t=>({name:t.name,type:Hn[t.type],TTL:t.TTL??t.ttl??Bn,data:t.data instanceof Uint8Array?(0,re.B)(t.data):t.data})))}}const Nn=4;function Dn(t,e={}){const n=new yt({concurrency:e.queryConcurrency??Nn});return async(e,r={})=>{const i=new URLSearchParams;i.set("name",e),Tn(r.types).forEach((t=>{i.append("type",Hn[t])})),r.onProgress?.(new Ln("dns:query",{detail:e}));const s=await n.add((async()=>{const e=await fetch(`${t}?${i}`,{headers:{accept:"application/dns-json"},signal:r?.signal});if(200!==e.status)throw new Error(`Unexpected HTTP status: ${e.status} - ${e.statusText}`);const n=On(await e.json());return r.onProgress?.(new Ln("dns:response",{detail:n})),n}),{signal:r.signal});if(null==s)throw new Error("No DNS response received");return s}}function Un(){return[Dn("https://cloudflare-dns.com/dns-query"),Dn("https://dns.google/resolve")]}var Pn=n(8694);class Mn{constructor(t){(0,i.Z)(this,"lru",void 0),this.lru=Pn(t)}get(t,e){let n=!0;const r=[];for(const i of e){const e=this.getAnswers(t,i);if(0===e.length){n=!1;break}r.push(...e)}if(n)return On({answers:r})}getAnswers(t,e){const n=`${t.toLowerCase()}-${e}`,r=this.lru.get(n);if(null!=r){const t=r.filter((t=>t.expires>Date.now())).map((({expires:t,value:e})=>({...e,TTL:Math.round((t-Date.now())/1e3),type:Hn[e.type]})));return 0===t.length&&this.lru.remove(n),t}return[]}add(t,e){const n=`${t.toLowerCase()}-${e.type}`,r=this.lru.get(n)??[];r.push({expires:Date.now()+1e3*(e.TTL??Bn),value:e}),this.lru.set(n,r)}remove(t,e){const n=`${t.toLowerCase()}-${e}`;this.lru.remove(n)}clear(){this.lru.clear()}}function Zn(t){return new Mn(t)}const Fn=1e3;class Vn{constructor(t){(0,i.Z)(this,"resolvers",void 0),(0,i.Z)(this,"cache",void 0),this.resolvers={},this.cache=Zn(t.cacheSize??Fn),Object.entries(t.resolvers??{}).forEach((([t,e])=>{Array.isArray(e)||(e=[e]),t.endsWith(".")||(t=`${t}.`),this.resolvers[t]=e})),null==this.resolvers["."]&&(this.resolvers["."]=Un())}async query(t,e={}){const n=Tn(e.types),r=!1!==e.cached?this.cache.get(t,n):void 0;if(null!=r)return e.onProgress?.(new Ln("dns:cache",{detail:r})),r;const i=`${t.split(".").pop()}.`,s=(this.resolvers[i]??this.resolvers["."]).sort((()=>Math.random()>.5?-1:1)),o=[];for(const c of s){if(!0===e.signal?.aborted)break;try{const r=await c(t,{...e,types:n});for(const e of r.Answer)this.cache.add(t,e);return r}catch(a){o.push(a),e.onProgress?.(new Ln("dns:error",{detail:a}))}}if(1===o.length)throw o[0];throw new AggregateError(o,`DNS lookup of ${t} ${n} failed`)}}var Hn;(function(t){t[t["A"]=1]="A",t[t["CNAME"]=5]="CNAME",t[t["TXT"]=16]="TXT",t[t["AAAA"]=28]="AAAA"})(Hn||(Hn={}));function $n(t={}){return new Vn(t)}var jn=n(4108);const Kn=32,{code:zn}=(0,jn.Ev)("dnsaddr"),qn=async function(t,e={}){const n=e.maxRecursiveDepth??Kn;if(0===n)throw new d.sv("Max recursive depth reached","ERR_MAX_RECURSIVE_DEPTH_REACHED");const[,r]=t.stringTuples().find((([t])=>t===zn))??[],i=e?.dns??$n(),s=await i.query(`_dnsaddr.${r}`,{signal:e?.signal,types:[Hn.TXT]}),o=t.getPeerId(),a=[];for(const c of s.Answer){const t=c.data.split("=")[1];if(null==t)continue;if(null!=o&&!t.includes(o))continue;const r=(0,te.HM)(t);if(t.startsWith("/dnsaddr")){const t=await r.resolve({...e,maxRecursiveDepth:n-1});a.push(...t.map((t=>t.toString())))}else a.push(r.toString())}return a};var Gn,Wn,Jn=n(535),Yn=Jn;(function(t){t["NOT_STARTED_YET"]="The libp2p node is not started yet",t["ERR_PROTECTOR_REQUIRED"]="Private network is enforced, but no protector was provided",t["NOT_FOUND"]="Not found"})(Gn||(Gn={})),function(t){t["ERR_PROTECTOR_REQUIRED"]="ERR_PROTECTOR_REQUIRED",t["ERR_PEER_DIAL_INTERCEPTED"]="ERR_PEER_DIAL_INTERCEPTED",t["ERR_CONNECTION_INTERCEPTED"]="ERR_CONNECTION_INTERCEPTED",t["ERR_INVALID_PROTOCOLS_FOR_STREAM"]="ERR_INVALID_PROTOCOLS_FOR_STREAM",t["ERR_CONNECTION_ENDED"]="ERR_CONNECTION_ENDED",t["ERR_CONNECTION_FAILED"]="ERR_CONNECTION_FAILED",t["ERR_NODE_NOT_STARTED"]="ERR_NODE_NOT_STARTED",t["ERR_ALREADY_ABORTED"]="ERR_ALREADY_ABORTED",t["ERR_TOO_MANY_ADDRESSES"]="ERR_TOO_MANY_ADDRESSES",t["ERR_NO_VALID_ADDRESSES"]="ERR_NO_VALID_ADDRESSES",t["ERR_RELAYED_DIAL"]="ERR_RELAYED_DIAL",t["ERR_DIALED_SELF"]="ERR_DIALED_SELF",t["ERR_DISCOVERED_SELF"]="ERR_DISCOVERED_SELF",t["ERR_DUPLICATE_TRANSPORT"]="ERR_DUPLICATE_TRANSPORT",t["ERR_ENCRYPTION_FAILED"]="ERR_ENCRYPTION_FAILED",t["ERR_HOP_REQUEST_FAILED"]="ERR_HOP_REQUEST_FAILED",t["ERR_INVALID_KEY"]="ERR_INVALID_KEY",t["ERR_INVALID_MESSAGE"]="ERR_INVALID_MESSAGE",t["ERR_INVALID_PARAMETERS"]="ERR_INVALID_PARAMETERS",t["ERR_INVALID_PEER"]="ERR_INVALID_PEER",t["ERR_MUXER_UNAVAILABLE"]="ERR_MUXER_UNAVAILABLE",t["ERR_NOT_FOUND"]="ERR_NOT_FOUND",t["ERR_TRANSPORT_UNAVAILABLE"]="ERR_TRANSPORT_UNAVAILABLE",t["ERR_TRANSPORT_DIAL_FAILED"]="ERR_TRANSPORT_DIAL_FAILED",t["ERR_UNSUPPORTED_PROTOCOL"]="ERR_UNSUPPORTED_PROTOCOL",t["ERR_PROTOCOL_HANDLER_ALREADY_REGISTERED"]="ERR_PROTOCOL_HANDLER_ALREADY_REGISTERED",t["ERR_INVALID_MULTIADDR"]="ERR_INVALID_MULTIADDR",t["ERR_SIGNATURE_NOT_VALID"]="ERR_SIGNATURE_NOT_VALID",t["ERR_FIND_SELF"]="ERR_FIND_SELF",t["ERR_NO_ROUTERS_AVAILABLE"]="ERR_NO_ROUTERS_AVAILABLE",t["ERR_CONNECTION_NOT_MULTIPLEXED"]="ERR_CONNECTION_NOT_MULTIPLEXED",t["ERR_NO_DIAL_TOKENS"]="ERR_NO_DIAL_TOKENS",t["ERR_INVALID_CMS"]="ERR_INVALID_CMS",t["ERR_MISSING_KEYS"]="ERR_MISSING_KEYS",t["ERR_NO_KEY"]="ERR_NO_KEY",t["ERR_INVALID_KEY_NAME"]="ERR_INVALID_KEY_NAME",t["ERR_INVALID_KEY_TYPE"]="ERR_INVALID_KEY_TYPE",t["ERR_KEY_ALREADY_EXISTS"]="ERR_KEY_ALREADY_EXISTS",t["ERR_INVALID_KEY_SIZE"]="ERR_INVALID_KEY_SIZE",t["ERR_KEY_NOT_FOUND"]="ERR_KEY_NOT_FOUND",t["ERR_OLD_KEY_NAME_INVALID"]="ERR_OLD_KEY_NAME_INVALID",t["ERR_NEW_KEY_NAME_INVALID"]="ERR_NEW_KEY_NAME_INVALID",t["ERR_PASSWORD_REQUIRED"]="ERR_PASSWORD_REQUIRED",t["ERR_PEM_REQUIRED"]="ERR_PEM_REQUIRED",t["ERR_CANNOT_READ_KEY"]="ERR_CANNOT_READ_KEY",t["ERR_MISSING_PRIVATE_KEY"]="ERR_MISSING_PRIVATE_KEY",t["ERR_MISSING_PUBLIC_KEY"]="ERR_MISSING_PUBLIC_KEY",t["ERR_INVALID_OLD_PASS_TYPE"]="ERR_INVALID_OLD_PASS_TYPE",t["ERR_INVALID_NEW_PASS_TYPE"]="ERR_INVALID_NEW_PASS_TYPE",t["ERR_INVALID_PASS_LENGTH"]="ERR_INVALID_PASS_LENGTH",t["ERR_NOT_IMPLEMENTED"]="ERR_NOT_IMPLEMENTED",t["ERR_WRONG_PING_ACK"]="ERR_WRONG_PING_ACK",t["ERR_INVALID_RECORD"]="ERR_INVALID_RECORD",t["ERR_ALREADY_SUCCEEDED"]="ERR_ALREADY_SUCCEEDED",t["ERR_NO_HANDLER_FOR_PROTOCOL"]="ERR_NO_HANDLER_FOR_PROTOCOL",t["ERR_TOO_MANY_OUTBOUND_PROTOCOL_STREAMS"]="ERR_TOO_MANY_OUTBOUND_PROTOCOL_STREAMS",t["ERR_TOO_MANY_INBOUND_PROTOCOL_STREAMS"]="ERR_TOO_MANY_INBOUND_PROTOCOL_STREAMS",t["ERR_CONNECTION_DENIED"]="ERR_CONNECTION_DENIED",t["ERR_TRANSFER_LIMIT_EXCEEDED"]="ERR_TRANSFER_LIMIT_EXCEEDED"}(Wn||(Wn={}));const Qn={addresses:{listen:[],announce:[],noAnnounce:[],announceFilter:t=>t},connectionManager:{resolvers:{dnsaddr:qn},addressSorter:kn},transportManager:{faultTolerance:xn.P7.FATAL_ALL}};async function Xn(t){const e=Yn(Qn,t);if(null===e.connectionProtector&&null!=globalThis.process?.env?.LIBP2P_FORCE_PNET)throw new d.sv(Gn.ERR_PROTECTOR_REQUIRED,Wn.ERR_PROTECTOR_REQUIRED);if(!(await(0,v.y5)(e.privateKey.public.bytes,e.privateKey.bytes)).equals(e.peerId))throw new d.sv("Private key doesn't match peer id",Wn.ERR_INVALID_KEY);return e}const tr="keep-alive";var er=n(5232);function nr(t){if((0,ne.I)(t))return{peerId:t,multiaddrs:[]};let e;if(Array.isArray(t)||(t=[t]),t.length>0){const n=t[0].getPeerId();e=null==n?void 0:(0,v.jE)(n),t.forEach((t=>{if(!(0,te.h2)(t))throw new d.sv("Invalid Multiaddr",Wn.ERR_INVALID_MULTIADDR);const n=t.getPeerId();if(null==n){if(null!=e)throw new d.sv("Multiaddrs must all have the same peer id or have no peer id",Wn.ERR_INVALID_PARAMETERS)}else{const t=(0,v.jE)(n);if(null==e||!e.equals(t))throw new d.sv("Multiaddrs must all have the same peer id or have no peer id",Wn.ERR_INVALID_PARAMETERS)}}))}return{peerId:e,multiaddrs:t}}var rr=n(9578);const ir=5,sr=100,or=50,ar=42e4,cr=5e3,ur=2e3,lr=25,hr=5e3,dr=25,fr=0,pr=100,gr=10,yr=5,br=10,wr="last-dial-failure",mr=500,vr={minConnections:ir,maxQueueLength:pr,autoDialConcurrency:dr,autoDialPriority:fr,autoDialInterval:hr,autoDialPeerRetryThreshold:ar,autoDialDiscoveredPeersDebounce:gr};class Er{constructor(t,e){let n;(0,i.Z)(this,"connectionManager",void 0),(0,i.Z)(this,"peerStore",void 0),(0,i.Z)(this,"queue",void 0),(0,i.Z)(this,"minConnections",void 0),(0,i.Z)(this,"autoDialPriority",void 0),(0,i.Z)(this,"autoDialIntervalMs",void 0),(0,i.Z)(this,"autoDialMaxQueueLength",void 0),(0,i.Z)(this,"autoDialPeerRetryThresholdMs",void 0),(0,i.Z)(this,"autoDialDiscoveredPeersDebounce",void 0),(0,i.Z)(this,"autoDialInterval",void 0),(0,i.Z)(this,"started",void 0),(0,i.Z)(this,"running",void 0),(0,i.Z)(this,"log",void 0),this.connectionManager=t.connectionManager,this.peerStore=t.peerStore,this.minConnections=e.minConnections??vr.minConnections,this.autoDialPriority=e.autoDialPriority??vr.autoDialPriority,this.autoDialIntervalMs=e.autoDialInterval??vr.autoDialInterval,this.autoDialMaxQueueLength=e.maxQueueLength??vr.maxQueueLength,this.autoDialPeerRetryThresholdMs=e.autoDialPeerRetryThreshold??vr.autoDialPeerRetryThreshold,this.autoDialDiscoveredPeersDebounce=e.autoDialDiscoveredPeersDebounce??vr.autoDialDiscoveredPeersDebounce,this.log=t.logger.forComponent("libp2p:connection-manager:auto-dial"),this.started=!1,this.running=!1,this.queue=new rr.i({concurrency:e.autoDialConcurrency??vr.autoDialConcurrency,metricName:"libp2p_autodial_queue",metrics:t.metrics}),this.queue.addEventListener("error",(t=>{this.log.error("error during auto-dial",t.detail)})),t.events.addEventListener("connection:close",(()=>{this.autoDial().catch((t=>{this.log.error(t)}))})),t.events.addEventListener("peer:discovery",(()=>{clearTimeout(n),n=setTimeout((()=>{this.autoDial().catch((t=>{this.log.error(t)}))}),this.autoDialDiscoveredPeersDebounce)}))}isStarted(){return this.started}start(){this.started=!0}afterStart(){this.autoDial().catch((t=>{this.log.error("error while autodialing",t)}))}stop(){this.queue.clear(),clearTimeout(this.autoDialInterval),this.started=!1,this.running=!1}async autoDial(){if(!this.started||this.running)return;const t=this.connectionManager.getConnectionsMap(),e=t.size;if(e>=this.minConnections)return void(this.minConnections>0&&this.log.trace("have enough connections %d/%d",e,this.minConnections));if(this.queue.size>this.autoDialMaxQueueLength)return this.log("not enough connections %d/%d but auto dial queue is full",e,this.minConnections),void this.sheduleNextAutodial();this.running=!0,this.log("not enough connections %d/%d - will dial peers to increase the number of connections",e,this.minConnections);const n=new x(this.connectionManager.getDialQueue().map((t=>t.peerId)).filter(Boolean)),r=await this.peerStore.all({filters:[e=>0===e.addresses.length?(this.log.trace("not autodialing %p because they have no addresses",e.id),!1):t.has(e.id)?(this.log.trace("not autodialing %p because they are already connected",e.id),!1):n.has(e.id)?(this.log.trace("not autodialing %p because they are already being dialed",e.id),!1):!this.queue.has(e.id)||(this.log.trace("not autodialing %p because they are already being autodialed",e.id),!1)]}),i=r.sort((()=>Math.random()>.5?1:-1)),s=new B.j;for(const c of i)s.has(c.id)||s.set(c.id,[...c.tags.values()].reduce(((t,e)=>t+e.value),0));const o=i.sort(((t,e)=>{const n=s.get(t.id)??0,r=s.get(e.id)??0;return n>r?-1:n<r?1:0})),a=o.filter((t=>{const e=t.metadata.get(wr);if(null==e)return!0;const n=parseInt((0,re.B)(e));return!!isNaN(n)||Date.now()-n>this.autoDialPeerRetryThresholdMs}));this.log("selected %d/%d peers to dial",a.length,r.length);for(const c of a)this.queue.add((async()=>{const t=this.connectionManager.getConnectionsMap().size;if(t>=this.minConnections)return this.log("got enough connections now %d/%d",t,this.minConnections),void this.queue.clear();this.log("connecting to a peerStore stored peer %p",c.id),await this.connectionManager.openConnection(c.id,{priority:this.autoDialPriority})}),{peerId:c.id}).catch((t=>{this.log.error("could not connect to peerStore stored peer",t)}));this.running=!1,this.sheduleNextAutodial()}sheduleNextAutodial(){this.started&&(this.autoDialInterval=setTimeout((()=>{this.autoDial().catch((t=>{this.log.error("error while autodialing",t)}))}),this.autoDialIntervalMs))}}const Ar={maxConnections:sr,allow:[]};class xr{constructor(t,e={}){(0,i.Z)(this,"maxConnections",void 0),(0,i.Z)(this,"connectionManager",void 0),(0,i.Z)(this,"peerStore",void 0),(0,i.Z)(this,"allow",void 0),(0,i.Z)(this,"events",void 0),(0,i.Z)(this,"log",void 0),this.maxConnections=e.maxConnections??Ar.maxConnections,this.allow=e.allow??Ar.allow,this.connectionManager=t.connectionManager,this.peerStore=t.peerStore,this.events=t.events,this.log=t.logger.forComponent("libp2p:connection-manager:connection-pruner"),t.events.addEventListener("connection:open",(()=>{this.maybePruneConnections().catch((t=>{this.log.error(t)}))}))}async maybePruneConnections(){const t=this.connectionManager.getConnections(),e=t.length,n=Math.max(e-this.maxConnections,0);if(this.log("checking max connections limit %d/%d",e,this.maxConnections),e<=this.maxConnections)return;this.log("max connections limit exceeded %d/%d, pruning %d connection(s)",e,this.maxConnections,n);const r=new B.j;for(const a of t){const t=a.remotePeer;if(!r.has(t)){r.set(t,0);try{const e=await this.peerStore.get(t);r.set(t,[...e.tags.values()].reduce(((t,e)=>t+e.value),0))}catch(o){"ERR_NOT_FOUND"!==o.code&&this.log.error("error loading peer tags",o)}}}const i=t.sort(((t,e)=>{const n=r.get(t.remotePeer)??0,i=r.get(e.remotePeer)??0;if(n>i)return 1;if(n<i)return-1;const s=t.timeline.open,o=e.timeline.open;return s<o?1:s>o?-1:0})),s=[];for(const a of i){this.log("too many connections open - closing a connection to %p",a.remotePeer);const t=this.allow.some((t=>a.remoteAddr.toString().startsWith(t.toString())));if(t||s.push(a),s.length===n)break}await Promise.all(s.map((async t=>{try{await t.close()}catch(o){this.log.error(o)}}))),this.events.safeDispatchEvent("connection:prune",{detail:s})}}var Sr=n(7959);function _r(t){const e=new globalThis.AbortController;function n(){e.abort();for(const e of t)null!=e?.removeEventListener&&e.removeEventListener("abort",n)}for(const s of t){if(!0===s?.aborted){n();break}null!=s?.addEventListener&&s.addEventListener("abort",n)}function r(){for(const e of t)null!=e?.removeEventListener&&e.removeEventListener("abort",n)}const i=e.signal;return i.clear=r,i}async function Ir(t,e){let n=!1;for(const i of te.s_.keys())if(n=t.protoNames().includes(i),n)break;if(!n)return[t];const r=await t.resolve(e);return e.log("resolved %s to",t,r.map((t=>t.toString()))),r}const Rr={addressSorter:kn,maxParallelDials:or,maxDialQueueLength:mr,maxPeerAddrsToDial:lr,dialTimeout:cr,resolvers:{dnsaddr:qn}};class Cr{constructor(t,e={}){(0,i.Z)(this,"queue",void 0),(0,i.Z)(this,"components",void 0),(0,i.Z)(this,"addressSorter",void 0),(0,i.Z)(this,"maxPeerAddrsToDial",void 0),(0,i.Z)(this,"maxDialQueueLength",void 0),(0,i.Z)(this,"dialTimeout",void 0),(0,i.Z)(this,"shutDownController",void 0),(0,i.Z)(this,"connections",void 0),(0,i.Z)(this,"log",void 0),this.addressSorter=e.addressSorter??Rr.addressSorter,this.maxPeerAddrsToDial=e.maxPeerAddrsToDial??Rr.maxPeerAddrsToDial,this.maxDialQueueLength=e.maxDialQueueLength??Rr.maxDialQueueLength,this.dialTimeout=e.dialTimeout??Rr.dialTimeout,this.connections=e.connections??new B.j,this.log=t.logger.forComponent("libp2p:connection-manager:dial-queue"),this.components=t,this.shutDownController=new AbortController,(0,c.W)(1/0,this.shutDownController.signal);for(const[n,r]of Object.entries(e.resolvers??{}))te.s_.set(n,r);this.queue=new Sr.c({concurrency:e.maxParallelDials??Rr.maxParallelDials,metricName:"libp2p_dial_queue",metrics:t.metrics}),this.queue.addEventListener("error",(t=>{this.log.error("error in dial queue",t.detail)}))}start(){this.shutDownController=new AbortController,(0,c.W)(1/0,this.shutDownController.signal)}stop(){this.shutDownController.abort(),this.queue.abort()}async dial(t,e={}){const{peerId:n,multiaddrs:r}=nr(t),i=Array.from(this.connections.values()).flat().find((t=>!0!==e.force&&(!!t.remotePeer.equals(n)||r.find((e=>e.equals(t.remoteAddr))))));if(null!=i)return this.log("already connected to %a",i.remoteAddr),i;const s=this.queue.queue.find((t=>{if(!0===n?.equals(t.options.peerId))return!0;const e=t.options.multiaddrs;if(null==e)return!1;for(const n of r)if(e.has(n.toString()))return!0;return!1}));if(null!=s){this.log("joining existing dial target for %p",n);for(const t of r)s.options.multiaddrs.add(t.toString());return s.join(e)}if(this.queue.size>=this.maxDialQueueLength)throw new d.sv("Dial queue is full","ERR_DIAL_QUEUE_FULL");return this.log("creating dial target for %p",n,r.map((t=>t.toString()))),this.queue.add((async t=>{const e=this.createDialAbortController(t?.signal);let r;try{r=await this.calculateMultiaddrs(n,t?.multiaddrs,{...t,signal:e}),r.map((({multiaddr:t})=>t.toString())).forEach((e=>{t?.multiaddrs.add(e)}))}catch(i){throw e.clear(),i}try{let s=0;const o=[];for(const a of r){if(s===this.maxPeerAddrsToDial)throw this.log("dialed maxPeerAddrsToDial (%d) addresses for %p, not trying any others",s,n),new d.sv("Peer had more than maxPeerAddrsToDial",Wn.ERR_TOO_MANY_ADDRESSES);s++;try{const n=await this.components.transportManager.dial(a.multiaddr,{...t,signal:e});return this.log("dial to %a succeeded",a.multiaddr),n}catch(i){if(this.log.error("dial failed to %a",a.multiaddr,i),null!=n)try{await this.components.peerStore.patch(n,{metadata:{[wr]:(0,S.m)(Date.now().toString())}})}catch(i){this.log.error("could not update last dial failure key for %p",n,i)}if(e.aborted)throw new d.sv(i.message,d.l9);o.push(i)}}if(1===o.length)throw o[0];throw new d.J5(o,"All multiaddr dials failed",Wn.ERR_TRANSPORT_DIAL_FAILED)}finally{e.clear()}}),{peerId:n,priority:e.priority,multiaddrs:new Set(r.map((t=>t.toString()))),signal:e.signal})}createDialAbortController(t){const e=_r([AbortSignal.timeout(this.dialTimeout),this.shutDownController.signal,t]);return(0,c.W)(1/0,e),e}async calculateMultiaddrs(t,e=new Set,n={}){const r=[...e].map((t=>({multiaddr:(0,te.HM)(t),isCertified:!1})));if(null!=t){if(this.components.peerId.equals(t))throw new d.sv("Tried to dial self",Wn.ERR_DIALED_SELF);if(!0===await(this.components.connectionGater.denyDialPeer?.(t)))throw new d.sv("The dial request is blocked by gater.allowDialPeer",Wn.ERR_PEER_DIAL_INTERCEPTED);if(0===r.length){this.log("loading multiaddrs for %p",t);try{const e=await this.components.peerStore.get(t);r.push(...e.addresses),this.log("loaded multiaddrs for %p",t,r.map((({multiaddr:t})=>t.toString())))}catch(l){if(l.code!==Wn.ERR_NOT_FOUND)throw l}}if(0===r.length){this.log("looking up multiaddrs for %p in the peer routing",t);try{const e=await this.components.peerRouting.findPeer(t);this.log("found multiaddrs for %p in the peer routing",t,r.map((({multiaddr:t})=>t.toString()))),r.push(...e.multiaddrs.map((t=>({multiaddr:t,isCertified:!1}))))}catch(l){l.code!==Wn.ERR_NO_ROUTERS_AVAILABLE&&this.log.error("looking up multiaddrs for %p in the peer routing failed",t,l)}}}let i=(await Promise.all(r.map((async t=>{const e=await Ir(t.multiaddr,{dns:this.components.dns,...n,log:this.log});return 1===e.length&&e[0].equals(t.multiaddr)?t:e.map((t=>({multiaddr:t,isCertified:!1})))})))).flat();if(null!=t){const e=`/p2p/${t.toString()}`;i=i.map((t=>{const n=t.multiaddr.protos().pop();return!0===n?.path?t:null==t.multiaddr.getPeerId()?{multiaddr:t.multiaddr.encapsulate(e),isCertified:t.isCertified}:t}))}const s=i.filter((e=>{if(null==this.components.transportManager.transportForMultiaddr(e.multiaddr))return!1;const n=e.multiaddr.getPeerId();return null==t||null==n||t.equals(n)})),o=new Map;for(const h of s){const t=h.multiaddr.toString(),e=o.get(t);null==e?o.set(t,h):e.isCertified=e.isCertified||h.isCertified||!1}const a=[...o.values()];if(0===a.length)throw new d.sv("The dial request has no valid addresses",Wn.ERR_NO_VALID_ADDRESSES);const c=[];for(const h of a)null!=this.components.connectionGater.denyDialMultiaddr&&await this.components.connectionGater.denyDialMultiaddr(h.multiaddr)||c.push(h);const u=c.sort(this.addressSorter);if(0===u.length)throw new d.sv("The connection gater denied all addresses in the dial request",Wn.ERR_NO_VALID_ADDRESSES);return this.log.trace("addresses for %p before filtering",t??"unknown peer",i.map((({multiaddr:t})=>t.toString()))),this.log.trace("addresses for %p after filtering",t??"unknown peer",u.map((({multiaddr:t})=>t.toString()))),u}async isDialable(t,e={}){Array.isArray(t)||(t=[t]);try{const n=await this.calculateMultiaddrs(void 0,new Set(t.map((t=>t.toString()))),e);return!1!==e.runOnTransientConnection||null!=n.find((t=>!Sn.dx.matches(t.multiaddr)))}catch(n){this.log.trace("error calculating if multiaddr(s) were dialable",n)}return!1}}const kr=50,Lr={minConnections:ir,maxConnections:sr,inboundConnectionThreshold:yr,maxIncomingPendingConnections:br,autoDialConcurrency:dr,autoDialPriority:fr,autoDialMaxQueueLength:pr};class Tr{constructor(t,e={}){(0,i.Z)(this,"started",void 0),(0,i.Z)(this,"connections",void 0),(0,i.Z)(this,"allow",void 0),(0,i.Z)(this,"deny",void 0),(0,i.Z)(this,"maxIncomingPendingConnections",void 0),(0,i.Z)(this,"incomingPendingConnections",void 0),(0,i.Z)(this,"maxConnections",void 0),(0,i.Z)(this,"dialQueue",void 0),(0,i.Z)(this,"autoDial",void 0),(0,i.Z)(this,"connectionPruner",void 0),(0,i.Z)(this,"inboundConnectionRateLimiter",void 0),(0,i.Z)(this,"peerStore",void 0),(0,i.Z)(this,"metrics",void 0),(0,i.Z)(this,"events",void 0),(0,i.Z)(this,"log",void 0),this.maxConnections=e.maxConnections??Lr.maxConnections;const n=e.minConnections??Lr.minConnections;if(this.maxConnections<n)throw new d.sv("Connection Manager maxConnections must be greater than minConnections",Wn.ERR_INVALID_PARAMETERS);this.connections=new B.j,this.started=!1,this.peerStore=t.peerStore,this.metrics=t.metrics,this.events=t.events,this.log=t.logger.forComponent("libp2p:connection-manager"),this.onConnect=this.onConnect.bind(this),this.onDisconnect=this.onDisconnect.bind(this),this.events.addEventListener("connection:open",this.onConnect),this.events.addEventListener("connection:close",this.onDisconnect),this.allow=(e.allow??[]).map((t=>(0,te.HM)(t))),this.deny=(e.deny??[]).map((t=>(0,te.HM)(t))),this.incomingPendingConnections=0,this.maxIncomingPendingConnections=e.maxIncomingPendingConnections??Lr.maxIncomingPendingConnections,this.inboundConnectionRateLimiter=new er.p({points:e.inboundConnectionThreshold??Lr.inboundConnectionThreshold,duration:1}),this.autoDial=new Er({connectionManager:this,peerStore:t.peerStore,events:t.events,logger:t.logger},{minConnections:n,autoDialConcurrency:e.autoDialConcurrency??Lr.autoDialConcurrency,autoDialPriority:e.autoDialPriority??Lr.autoDialPriority,maxQueueLength:e.autoDialMaxQueueLength??Lr.autoDialMaxQueueLength}),this.connectionPruner=new xr({connectionManager:this,peerStore:t.peerStore,events:t.events,logger:t.logger},{maxConnections:this.maxConnections,allow:this.allow}),this.dialQueue=new Cr(t,{addressSorter:e.addressSorter??kn,maxParallelDials:e.maxParallelDials??or,maxDialQueueLength:e.maxDialQueueLength??mr,maxPeerAddrsToDial:e.maxPeerAddrsToDial??lr,dialTimeout:e.dialTimeout??cr,resolvers:e.resolvers??{dnsaddr:qn},connections:this.connections})}isStarted(){return this.started}async start(){this.metrics?.registerMetricGroup("libp2p_connection_manager_connections",{calculate:()=>{const t={inbound:0,outbound:0};for(const e of this.connections.values())for(const n of e)"inbound"===n.direction?t.inbound++:t.outbound++;return t}}),this.metrics?.registerMetricGroup("libp2p_protocol_streams_total",{label:"protocol",calculate:()=>{const t={};for(const e of this.connections.values())for(const n of e)for(const e of n.streams){const n=`${e.direction} ${e.protocol??"unnegotiated"}`;t[n]=(t[n]??0)+1}return t}}),this.metrics?.registerMetricGroup("libp2p_connection_manager_protocol_streams_per_connection_90th_percentile",{label:"protocol",calculate:()=>{const t={};for(const n of this.connections.values())for(const e of n){const n={};for(const t of e.streams){const e=`${t.direction} ${t.protocol??"unnegotiated"}`;n[e]=(n[e]??0)+1}for(const[e,r]of Object.entries(n))t[e]=t[e]??[],t[e].push(r)}const e={};for(let[n,r]of Object.entries(t)){r=r.sort(((t,e)=>t-e));const t=Math.floor(.9*r.length);e[n]=r[t]}return e}}),this.dialQueue.start(),this.autoDial.start(),this.started=!0,this.log("started")}async afterStart(){Promise.resolve().then((async()=>{const t=await this.peerStore.all({filters:[t=>t.tags.has(tr)]});await Promise.all(t.map((async t=>{await this.openConnection(t.id).catch((t=>{this.log.error(t)}))})))})).catch((t=>{this.log.error(t)})),this.autoDial.afterStart()}async stop(){this.dialQueue.stop(),this.autoDial.stop();const t=[];for(const e of this.connections.values())for(const n of e)t.push((async()=>{try{await n.close()}catch(t){this.log.error(t)}})());this.log("closing %d connections",t.length),await Promise.all(t),this.connections.clear(),this.log("stopped")}onConnect(t){this._onConnect(t).catch((t=>{this.log.error(t)}))}async _onConnect(t){const{detail:e}=t;if(!this.started)return void await e.close();const n=e.remotePeer,r=this.connections.get(n);let i=!1;null!=r?r.push(e):(i=!0,this.connections.set(n,[e])),null!=n.publicKey&&"RSA"===n.type&&await this.peerStore.patch(n,{publicKey:n.publicKey}),i&&this.events.safeDispatchEvent("peer:connect",{detail:e.remotePeer})}onDisconnect(t){const{detail:e}=t;if(!this.started)return;const n=e.remotePeer;let r=this.connections.get(n);null!=r&&r.length>1?(r=r.filter((t=>t.id!==e.id)),this.connections.set(n,r)):null!=r&&(this.connections.delete(n),this.events.safeDispatchEvent("peer:disconnect",{detail:e.remotePeer}))}getConnections(t){if(null!=t)return this.connections.get(t)??[];let e=[];for(const n of this.connections.values())e=e.concat(n);return e}getConnectionsMap(){return this.connections}async openConnection(t,e={}){if(!this.isStarted())throw new d.sv("Not started",Wn.ERR_NODE_NOT_STARTED);e.signal?.throwIfAborted();const{peerId:n}=nr(t);if(null!=n&&!0!==e.force){this.log("dial %p",n);const t=this.getConnections(n).find((t=>!t.transient));if(null!=t)return this.log("had an existing non-transient connection to %p",n),t}const r=await this.dialQueue.dial(t,{...e,priority:e.priority??kr});let i=this.connections.get(r.remotePeer);null==i&&(i=[],this.connections.set(r.remotePeer,i));let s=!1;for(const o of i)o.id===r.id&&(s=!0);return s||i.push(r),r}async closeConnections(t,e={}){const n=this.connections.get(t)??[];await Promise.all(n.map((async t=>{try{await t.close(e)}catch(n){t.abort(n)}})))}async acceptIncomingConnection(t){const e=this.deny.some((e=>t.remoteAddr.toString().startsWith(e.toString())));if(e)return this.log("connection from %a refused - connection remote address was in deny list",t.remoteAddr),!1;const n=this.allow.some((e=>t.remoteAddr.toString().startsWith(e.toString())));if(n)return this.incomingPendingConnections++,!0;if(this.incomingPendingConnections===this.maxIncomingPendingConnections)return this.log("connection from %a refused - incomingPendingConnections exceeded by host",t.remoteAddr),!1;if(t.remoteAddr.isThinWaistAddress()){const e=t.remoteAddr.nodeAddress().address;try{await this.inboundConnectionRateLimiter.consume(e,1)}catch{return this.log("connection from %a refused - inboundConnectionThreshold exceeded by host %s",t.remoteAddr,e),!1}}return this.getConnections().length<this.maxConnections?(this.incomingPendingConnections++,!0):(this.log("connection from %a refused - maxConnections exceeded",t.remoteAddr),!1)}afterUpgradeInbound(){this.incomingPendingConnections--}getDialQueue(){const t={queued:"queued",running:"active",errored:"error",complete:"success"};return this.dialQueue.queue.queue.map((e=>({id:e.id,status:t[e.status],peerId:e.options.peerId,multiaddrs:[...e.options.multiaddrs].map((t=>(0,te.HM)(t)))})))}async isDialable(t,e={}){return this.dialQueue.isDialable(t,e)}}var Br=n(8817);function Or(t){return null!=t[Symbol.asyncIterator]}function Nr(...t){const e=[];for(const n of t)Or(n)||e.push(n);return e.length===t.length?function*(){for(const t of e)yield*t}():async function*(){const e=(0,Br.dT)({objectMode:!0});Promise.resolve().then((async()=>{try{await Promise.all(t.map((async t=>{for await(const n of t)e.push(n)}))),e.end()}catch(n){e.end(n)}})),yield*e}()}var Dr=Nr;class Ur{constructor(t,e){(0,i.Z)(this,"routers",void 0),(0,i.Z)(this,"started",void 0),(0,i.Z)(this,"components",void 0),this.routers=e.routers??[],this.started=!1,this.components=t}isStarted(){return this.started}async start(){this.started=!0}async stop(){this.started=!1}async*findProviders(t,e={}){if(0===this.routers.length)throw new d.sv("No content routers available",Wn.ERR_NO_ROUTERS_AVAILABLE);const n=this,r=new x;for await(const i of Dr(...n.routers.map((n=>n.findProviders(t,e)))))null!=i&&(i.multiaddrs.length>0&&await this.components.peerStore.merge(i.id,{multiaddrs:i.multiaddrs}),r.has(i.id)||(r.add(i.id),yield i))}async provide(t,e={}){if(0===this.routers.length)throw new d.sv("No content routers available",Wn.ERR_NO_ROUTERS_AVAILABLE);await Promise.all(this.routers.map((async n=>{await n.provide(t,e)})))}async put(t,e,n){if(!this.isStarted())throw new d.sv(Gn.NOT_STARTED_YET,Wn.ERR_NODE_NOT_STARTED);await Promise.all(this.routers.map((async r=>{await r.put(t,e,n)})))}async get(t,e){if(!this.isStarted())throw new d.sv(Gn.NOT_STARTED_YET,Wn.ERR_NODE_NOT_STARTED);return Promise.any(this.routers.map((async n=>n.get(t,e))))}}var Pr=n(4622);const Mr=globalThis.CustomEvent??Event;async function*Zr(t,e={}){let n=e.concurrency??1/0;n<1&&(n=1/0);const r=null!=e.ordered&&e.ordered,i=new EventTarget,s=[];let o,a=(0,Pr.Z)(),c=(0,Pr.Z)(),u=!1,l=!1;function h(){return r?s[0]?.done:Boolean(s.find((t=>t.done)))}function*d(){while(s.length>0&&s[0].done){const t=s[0];if(s.shift(),!t.ok)throw l=!0,a.resolve(),t.err;yield t.value,a.resolve()}}function*f(){while(h())for(let t=0;t<s.length;t++)if(s[t].done){const e=s[t];if(s.splice(t,1),t--,!e.ok)throw l=!0,a.resolve(),e.err;yield e.value,a.resolve()}}i.addEventListener("task-complete",(()=>{c.resolve()})),Promise.resolve().then((async()=>{try{for await(const e of t){if(s.length===n&&(a=(0,Pr.Z)(),await a.promise),l)break;const t={done:!1};s.push(t),e().then((e=>{t.done=!0,t.ok=!0,t.value=e,i.dispatchEvent(new Mr("task-complete"))}),(e=>{t.done=!0,t.err=e,i.dispatchEvent(new Mr("task-complete"))}))}u=!0,i.dispatchEvent(new Mr("task-complete"))}catch(e){o=e,i.dispatchEvent(new Mr("task-complete"))}}));while(1){if(h()||(c=(0,Pr.Z)(),await c.promise),null!=o)throw o;if(r?yield*d():yield*f(),u&&0===s.length)break}}class Fr{constructor(t,e={}){(0,i.Z)(this,"log",void 0),(0,i.Z)(this,"peerId",void 0),(0,i.Z)(this,"peerStore",void 0),(0,i.Z)(this,"routers",void 0),this.log=t.logger.forComponent("libp2p:peer-routing"),this.peerId=t.peerId,this.peerStore=t.peerStore,this.routers=e.routers??[]}async findPeer(t,e){if(0===this.routers.length)throw new d.sv("No peer routers available",Wn.ERR_NO_ROUTERS_AVAILABLE);if(t.toString()===this.peerId.toString())throw new d.sv("Should not try to find self",Wn.ERR_FIND_SELF);const n=this,r=Dr(...this.routers.map((r=>async function*(){try{yield await r.findPeer(t,e)}catch(i){n.log.error(i)}}())));for await(const i of r)if(null!=i)return i.multiaddrs.length>0&&await this.peerStore.merge(i.id,{multiaddrs:i.multiaddrs}),i;throw new d.sv(Gn.NOT_FOUND,Wn.ERR_NOT_FOUND)}async*getClosestPeers(t,e={}){if(0===this.routers.length)throw new d.sv("No peer routers available",Wn.ERR_NO_ROUTERS_AVAILABLE);const n=this,r=new x;for await(const i of Zr(async function*(){const r=Dr(...n.routers.map((n=>n.getClosestPeers(t,e))));for await(let t of r)yield async()=>{if(0===t.multiaddrs.length)try{t=await n.findPeer(t.id,{...e,useCache:!1})}catch(r){return void n.log.error("could not find peer multiaddrs",r)}return t}}()))null!=i&&(i.multiaddrs.length>0&&await this.peerStore.merge(i.id,{multiaddrs:i.multiaddrs}),r.has(i.id)||(r.add(i.id),yield i))}}const Vr=32,Hr=64;class $r{constructor(t){(0,i.Z)(this,"log",void 0),(0,i.Z)(this,"topologies",void 0),(0,i.Z)(this,"handlers",void 0),(0,i.Z)(this,"components",void 0),this.log=t.logger.forComponent("libp2p:registrar"),this.topologies=new Map,this.handlers=new Map,this.components=t,this._onDisconnect=this._onDisconnect.bind(this),this._onPeerUpdate=this._onPeerUpdate.bind(this),this._onPeerIdentify=this._onPeerIdentify.bind(this),this.components.events.addEventListener("peer:disconnect",this._onDisconnect),this.components.events.addEventListener("peer:update",this._onPeerUpdate),this.components.events.addEventListener("peer:identify",this._onPeerIdentify)}getProtocols(){return Array.from(new Set([...this.handlers.keys()])).sort()}getHandler(t){const e=this.handlers.get(t);if(null==e)throw new d.sv(`No handler registered for protocol ${t}`,Wn.ERR_NO_HANDLER_FOR_PROTOCOL);return e}getTopologies(t){const e=this.topologies.get(t);return null==e?[]:[...e.values()]}async handle(t,e,n){if(this.handlers.has(t))throw new d.sv(`Handler already registered for protocol ${t}`,Wn.ERR_PROTOCOL_HANDLER_ALREADY_REGISTERED);const r=Yn.bind({ignoreUndefined:!0})({maxInboundStreams:Vr,maxOutboundStreams:Hr},n);this.handlers.set(t,{handler:e,options:r}),await this.components.peerStore.merge(this.components.peerId,{protocols:[t]})}async unhandle(t){const e=Array.isArray(t)?t:[t];e.forEach((t=>{this.handlers.delete(t)})),await this.components.peerStore.patch(this.components.peerId,{protocols:this.getProtocols()})}async register(t,e){if(null==e)throw new d.sv("invalid topology",Wn.ERR_INVALID_PARAMETERS);const n=`${(1e9*Math.random()).toString(36)}${Date.now()}`;let r=this.topologies.get(t);return null==r&&(r=new Map,this.topologies.set(t,r)),r.set(n,e),n}unregister(t){for(const[e,n]of this.topologies.entries())n.has(t)&&(n.delete(t),0===n.size&&this.topologies.delete(e))}_onDisconnect(t){const e=t.detail;this.components.peerStore.get(e).then((t=>{for(const n of t.protocols){const t=this.topologies.get(n);if(null!=t)for(const n of t.values())n.onDisconnect?.(e)}})).catch((t=>{t.code!==Wn.ERR_NOT_FOUND&&this.log.error("could not inform topologies of disconnecting peer %p",e,t)}))}_onPeerUpdate(t){const{peer:e,previous:n}=t.detail,r=(n?.protocols??[]).filter((t=>!e.protocols.includes(t)));for(const i of r){const t=this.topologies.get(i);if(null!=t)for(const n of t.values())n.onDisconnect?.(e.id)}}_onPeerIdentify(t){const e=t.detail.protocols,n=t.detail.connection,r=t.detail.peerId;for(const i of e){const t=this.topologies.get(i);if(null!=t)for(const e of t.values())n.transient&&!0!==e.notifyOnTransient||e.onConnect?.(r,n)}}}class jr extends Map{constructor(t){super(),(0,i.Z)(this,"metric",void 0);const{name:e,metrics:n}=t;this.metric=n.registerMetric(e),this.updateComponentMetric()}set(t,e){return super.set(t,e),this.updateComponentMetric(),this}delete(t){const e=super.delete(t);return this.updateComponentMetric(),e}clear(){super.clear(),this.updateComponentMetric()}updateComponentMetric(){this.metric.update(this.size)}}function Kr(t){const{name:e,metrics:n}=t;let r;return r=null!=n?new jr({name:e,metrics:n}):new Map,r}class zr{constructor(t,e={}){(0,i.Z)(this,"log",void 0),(0,i.Z)(this,"components",void 0),(0,i.Z)(this,"transports",void 0),(0,i.Z)(this,"listeners",void 0),(0,i.Z)(this,"faultTolerance",void 0),(0,i.Z)(this,"started",void 0),this.log=t.logger.forComponent("libp2p:transports"),this.components=t,this.started=!1,this.transports=new Map,this.listeners=Kr({name:"libp2p_transport_manager_listeners",metrics:this.components.metrics}),this.faultTolerance=e.faultTolerance??xn.P7.FATAL_ALL}add(t){const e=t[Symbol.toStringTag];if(null==e)throw new d.sv("Transport must have a valid tag",Wn.ERR_INVALID_KEY);if(this.transports.has(e))throw new d.sv(`There is already a transport with the tag ${e}`,Wn.ERR_DUPLICATE_TRANSPORT);this.log("adding transport %s",e),this.transports.set(e,t),this.listeners.has(e)||this.listeners.set(e,[])}isStarted(){return this.started}start(){this.started=!0}async afterStart(){const t=this.components.addressManager.getListenAddrs();await this.listen(t)}async stop(){const t=[];for(const[e,n]of this.listeners){this.log("closing listeners for %s",e);while(n.length>0){const e=n.pop();null!=e&&t.push(e.close())}}await Promise.all(t),this.log("all listeners closed");for(const e of this.listeners.keys())this.listeners.set(e,[]);this.started=!1}async dial(t,e){const n=this.transportForMultiaddr(t);if(null==n)throw new d.sv(`No transport available for address ${String(t)}`,Wn.ERR_TRANSPORT_UNAVAILABLE);try{return await n.dial(t,{...e,upgrader:this.components.upgrader})}catch(r){throw null==r.code&&(r.code=Wn.ERR_TRANSPORT_DIAL_FAILED),r}}getAddrs(){let t=[];for(const e of this.listeners.values())for(const n of e)t=[...t,...n.getAddrs()];return t}getTransports(){return Array.of(...this.transports.values())}getListeners(){return Array.of(...this.listeners.values()).flat()}transportForMultiaddr(t){for(const e of this.transports.values()){const n=e.filter([t]);if(n.length>0)return e}}async listen(t){if(!this.isStarted())throw new d.sv("Not started",Wn.ERR_NODE_NOT_STARTED);if(null==t||0===t.length)return void this.log("no addresses were provided for listening, this node is dial only");const e=[];for(const[n,r]of this.transports.entries()){const i=r.filter(t),s=[];for(const t of i){this.log("creating listener for %s on %a",n,t);const e=r.createListener({upgrader:this.components.upgrader});let i=this.listeners.get(n)??[];null==i&&(i=[],this.listeners.set(n,i)),i.push(e),e.addEventListener("listening",(()=>{this.components.events.safeDispatchEvent("transport:listening",{detail:e})})),e.addEventListener("close",(()=>{const t=i.findIndex((t=>t===e));i.splice(t,1),this.components.events.safeDispatchEvent("transport:close",{detail:e})})),s.push(e.listen(t))}if(0===s.length){e.push(n);continue}const o=await Promise.allSettled(s),a=o.find((t=>"fulfilled"===t.status));if(null==a&&this.faultTolerance!==xn.P7.NO_FATAL)throw new d.sv(`Transport (${n}) could not listen on any available address`,Wn.ERR_NO_VALID_ADDRESSES)}if(e.length===this.transports.size){const t=`no valid addresses were provided for transports [${e.join(", ")}]`;if(this.faultTolerance===xn.P7.FATAL_ALL)throw new d.sv(t,Wn.ERR_NO_VALID_ADDRESSES);this.log(`libp2p in dial mode only: ${t}`)}}async remove(t){const e=this.listeners.get(t)??[];this.log.trace("removing transport %s",t);const n=[];this.log.trace("closing listeners for %s",t);while(e.length>0){const t=e.pop();null!=t&&n.push(t.close())}await Promise.all(n),this.transports.delete(t),this.listeners.delete(t)}async removeAll(){const t=[];for(const e of this.transports.keys())t.push(this.remove(e));await Promise.all(t)}}var qr=n(645);function Gr(t){return null!=globalThis.Buffer?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function Wr(t=0){return null!=globalThis.Buffer?.alloc?Gr(globalThis.Buffer.alloc(t)):new Uint8Array(t)}function Jr(t=0){return null!=globalThis.Buffer?.allocUnsafe?Gr(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function Yr(t,e){null==e&&(e=t.reduce(((t,e)=>t+e.length),0));const n=Jr(e);let r=0;for(const i of t)n.set(i,r),r+=i.length;return Gr(n)}function Qr(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let n=0;n<t.byteLength;n++)if(t[n]!==e[n])return!1;return!0}const Xr=Symbol.for("@achingbrain/uint8arraylist");function ti(t,e){if(null==e||e<0)throw new RangeError("index is out of bounds");let n=0;for(const r of t){const t=n+r.byteLength;if(e<t)return{buf:r,index:e-n};n=t}throw new RangeError("index is out of bounds")}function ei(t){return Boolean(t?.[Xr])}class ni{constructor(...t){Object.defineProperty(this,Xr,{value:!0}),this.bufs=[],this.length=0,t.length>0&&this.appendAll(t)}*[Symbol.iterator](){yield*this.bufs}get byteLength(){return this.length}append(...t){this.appendAll(t)}appendAll(t){let e=0;for(const n of t)if(n instanceof Uint8Array)e+=n.byteLength,this.bufs.push(n);else{if(!ei(n))throw new Error("Could not append value, must be an Uint8Array or a Uint8ArrayList");e+=n.byteLength,this.bufs.push(...n.bufs)}this.length+=e}prepend(...t){this.prependAll(t)}prependAll(t){let e=0;for(const n of t.reverse())if(n instanceof Uint8Array)e+=n.byteLength,this.bufs.unshift(n);else{if(!ei(n))throw new Error("Could not prepend value, must be an Uint8Array or a Uint8ArrayList");e+=n.byteLength,this.bufs.unshift(...n.bufs)}this.length+=e}get(t){const e=ti(this.bufs,t);return e.buf[e.index]}set(t,e){const n=ti(this.bufs,t);n.buf[n.index]=e}write(t,e=0){if(t instanceof Uint8Array)for(let n=0;n<t.length;n++)this.set(e+n,t[n]);else{if(!ei(t))throw new Error("Could not write value, must be an Uint8Array or a Uint8ArrayList");for(let n=0;n<t.length;n++)this.set(e+n,t.get(n))}}consume(t){if(t=Math.trunc(t),!(Number.isNaN(t)||t<=0)){if(t===this.byteLength)return this.bufs=[],void(this.length=0);while(this.bufs.length>0){if(!(t>=this.bufs[0].byteLength)){this.bufs[0]=this.bufs[0].subarray(t),this.length-=t;break}t-=this.bufs[0].byteLength,this.length-=this.bufs[0].byteLength,this.bufs.shift()}}}slice(t,e){const{bufs:n,length:r}=this._subList(t,e);return Yr(n,r)}subarray(t,e){const{bufs:n,length:r}=this._subList(t,e);return 1===n.length?n[0]:Yr(n,r)}sublist(t,e){const{bufs:n,length:r}=this._subList(t,e),i=new ni;return i.length=r,i.bufs=n,i}_subList(t,e){if(t=t??0,e=e??this.length,t<0&&(t=this.length+t),e<0&&(e=this.length+e),t<0||e>this.length)throw new RangeError("index is out of bounds");if(t===e)return{bufs:[],length:0};if(0===t&&e===this.length)return{bufs:[...this.bufs],length:this.length};const n=[];let r=0;for(let i=0;i<this.bufs.length;i++){const s=this.bufs[i],o=r,a=o+s.byteLength;if(r=a,t>=a)continue;const c=t>=o&&t<a,u=e>o&&e<=a;if(c&&u){if(t===o&&e===a){n.push(s);break}const r=t-o;n.push(s.subarray(r,r+(e-t)));break}if(c){if(0===t){n.push(s);continue}n.push(s.subarray(t-o))}else{if(u){if(e===a){n.push(s);break}n.push(s.subarray(0,e-o));break}n.push(s)}}return{bufs:n,length:e-t}}indexOf(t,e=0){if(!ei(t)&&!(t instanceof Uint8Array))throw new TypeError('The "value" argument must be a Uint8ArrayList or Uint8Array');const n=t instanceof Uint8Array?t:t.subarray();if(e=Number(e??0),isNaN(e)&&(e=0),e<0&&(e=this.length+e),e<0&&(e=0),0===t.length)return e>this.length?this.length:e;const r=n.byteLength;if(0===r)throw new TypeError("search must be at least 1 byte long");const i=256,s=new Int32Array(i);for(let l=0;l<i;l++)s[l]=-1;for(let l=0;l<r;l++)s[n[l]]=l;const o=s,a=this.byteLength-n.byteLength,c=n.byteLength-1;let u;for(let l=e;l<=a;l+=u){u=0;for(let t=c;t>=0;t--){const e=this.get(l+t);if(n[t]!==e){u=Math.max(1,t-o[e]);break}}if(0===u)return l}return-1}getInt8(t){const e=this.subarray(t,t+1),n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.getInt8(0)}setInt8(t,e){const n=Jr(1),r=new DataView(n.buffer,n.byteOffset,n.byteLength);r.setInt8(0,e),this.write(n,t)}getInt16(t,e){const n=this.subarray(t,t+2),r=new DataView(n.buffer,n.byteOffset,n.byteLength);return r.getInt16(0,e)}setInt16(t,e,n){const r=Wr(2),i=new DataView(r.buffer,r.byteOffset,r.byteLength);i.setInt16(0,e,n),this.write(r,t)}getInt32(t,e){const n=this.subarray(t,t+4),r=new DataView(n.buffer,n.byteOffset,n.byteLength);return r.getInt32(0,e)}setInt32(t,e,n){const r=Wr(4),i=new DataView(r.buffer,r.byteOffset,r.byteLength);i.setInt32(0,e,n),this.write(r,t)}getBigInt64(t,e){const n=this.subarray(t,t+8),r=new DataView(n.buffer,n.byteOffset,n.byteLength);return r.getBigInt64(0,e)}setBigInt64(t,e,n){const r=Wr(8),i=new DataView(r.buffer,r.byteOffset,r.byteLength);i.setBigInt64(0,e,n),this.write(r,t)}getUint8(t){const e=this.subarray(t,t+1),n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.getUint8(0)}setUint8(t,e){const n=Jr(1),r=new DataView(n.buffer,n.byteOffset,n.byteLength);r.setUint8(0,e),this.write(n,t)}getUint16(t,e){const n=this.subarray(t,t+2),r=new DataView(n.buffer,n.byteOffset,n.byteLength);return r.getUint16(0,e)}setUint16(t,e,n){const r=Wr(2),i=new DataView(r.buffer,r.byteOffset,r.byteLength);i.setUint16(0,e,n),this.write(r,t)}getUint32(t,e){const n=this.subarray(t,t+4),r=new DataView(n.buffer,n.byteOffset,n.byteLength);return r.getUint32(0,e)}setUint32(t,e,n){const r=Wr(4),i=new DataView(r.buffer,r.byteOffset,r.byteLength);i.setUint32(0,e,n),this.write(r,t)}getBigUint64(t,e){const n=this.subarray(t,t+8),r=new DataView(n.buffer,n.byteOffset,n.byteLength);return r.getBigUint64(0,e)}setBigUint64(t,e,n){const r=Wr(8),i=new DataView(r.buffer,r.byteOffset,r.byteLength);i.setBigUint64(0,e,n),this.write(r,t)}getFloat32(t,e){const n=this.subarray(t,t+4),r=new DataView(n.buffer,n.byteOffset,n.byteLength);return r.getFloat32(0,e)}setFloat32(t,e,n){const r=Wr(4),i=new DataView(r.buffer,r.byteOffset,r.byteLength);i.setFloat32(0,e,n),this.write(r,t)}getFloat64(t,e){const n=this.subarray(t,t+8),r=new DataView(n.buffer,n.byteOffset,n.byteLength);return r.getFloat64(0,e)}setFloat64(t,e,n){const r=Wr(8),i=new DataView(r.buffer,r.byteOffset,r.byteLength);i.setFloat64(0,e,n),this.write(r,t)}equals(t){if(null==t)return!1;if(!(t instanceof ni))return!1;if(t.bufs.length!==this.bufs.length)return!1;for(let e=0;e<this.bufs.length;e++)if(!Qr(this.bufs[e],t.bufs[e]))return!1;return!0}static fromUint8Arrays(t,e){const n=new ni;return n.bufs=t,null==e&&(e=t.reduce(((t,e)=>t+e.byteLength),0)),n.length=e,n}}var ri=n(800);function ii(t){return null!=t[Symbol.asyncIterator]}const si=t=>{const e=qr.P$(t),n=(0,ri.E)(e);return qr.cv(t,n),si.bytes=e,n};function oi(t,e){e=e??{};const n=e.lengthEncoder??si;function*r(t){const e=n(t.byteLength);e instanceof Uint8Array?yield e:yield*e,t instanceof Uint8Array?yield t:yield*t}return ii(t)?async function*(){for await(const e of t)yield*r(e)}():function*(){for(const e of t)yield*r(e)}()}si.bytes=0,oi.single=(t,e)=>{e=e??{};const n=e.lengthEncoder??si;return new ni(n(t.byteLength),t)};const ai=8,ci=4194304;var ui;(function(t){t[t["LENGTH"]=0]="LENGTH",t[t["DATA"]=1]="DATA"})(ui||(ui={}));const li=t=>{const e=qr.Jx(t);return li.bytes=qr.P$(e),e};function hi(t,e){const n=new ni;let r=ui.LENGTH,i=-1;const s=e?.lengthDecoder??li,o=e?.maxLengthLength??ai,a=e?.maxDataLength??ci;function*c(){while(n.byteLength>0){if(r===ui.LENGTH)try{if(i=s(n),i<0)throw Ge(new Error("invalid message length"),"ERR_INVALID_MSG_LENGTH");if(i>a)throw Ge(new Error("message length too long"),"ERR_MSG_DATA_TOO_LONG");const t=s.bytes;n.consume(t),null!=e?.onLength&&e.onLength(i),r=ui.DATA}catch(t){if(t instanceof RangeError){if(n.byteLength>o)throw Ge(new Error("message length length too long"),"ERR_MSG_LENGTH_TOO_LONG");break}throw t}if(r===ui.DATA){if(n.byteLength<i)break;const t=n.sublist(0,i);n.consume(i),null!=e?.onData&&e.onData(t),yield t,r=ui.LENGTH}}}return ii(t)?async function*(){for await(const e of t)n.append(e),yield*c();if(n.byteLength>0)throw Ge(new Error("unexpected end of input"),"ERR_UNEXPECTED_EOF")}():function*(){for(const e of t)n.append(e),yield*c();if(n.byteLength>0)throw Ge(new Error("unexpected end of input"),"ERR_UNEXPECTED_EOF")}()}li.bytes=0,hi.fromReader=(t,e)=>{let n=1;const r=async function*(){while(1)try{const{done:e,value:r}=await t.next(n);if(!0===e)return;null!=r&&(yield r)}catch(e){if("ERR_UNDER_READ"===e.code)return{done:!0,value:null};throw e}finally{n=1}}(),i=t=>{n=t};return hi(r,{...e??{},onLength:i})};var di=n(1241),fi=n(9109);class pi extends Error{constructor(t,e){super(t),(0,i.Z)(this,"code",void 0),this.code=e}}function gi(t,e={}){const n=(0,di.ub)(t,e);null!=e.maxDataLength&&null==e.maxLengthLength&&(e.maxLengthLength=qr.P$(e.maxDataLength));const r=e?.lengthDecoder??qr.Jx,i=e?.lengthEncoder??qr.cv,s={read:async t=>{let i=-1;const s=new fi.H;while(1){s.append(await n.read(1,t));try{i=r(s)}catch(o){if(o instanceof RangeError)continue;throw o}if(null!=e?.maxLengthLength&&s.byteLength>e.maxLengthLength)throw new pi("message length length too long","ERR_MSG_LENGTH_TOO_LONG");if(i>-1)break}if(null!=e?.maxDataLength&&i>e.maxDataLength)throw new pi("message length too long","ERR_MSG_DATA_TOO_LONG");return n.read(i,t)},write:async(t,e)=>{await n.write(new fi.H(i(t.byteLength),t),e)},writeV:async(t,e)=>{const r=new fi.H(...t.flatMap((t=>[i(t.byteLength),t])));await n.write(r,e)},unwrap:()=>n.unwrap()};return s}const yi="/multistream/1.0.0",bi=1024,wi=(0,S.m)("\n");async function mi(t,e,n){await t.write(e,n)}async function vi(t,e,n){await t.writeV(e,n)}async function Ei(t,e){const n=await t.read(e);if(0===n.byteLength||n.get(n.byteLength-1)!==wi[0])throw e.log.error("Invalid mss message - missing newline",n),new d.sv("missing newline","ERR_INVALID_MULTISTREAM_SELECT_MESSAGE");return n.sublist(0,-1)}async function Ai(t,e){const n=await Ei(t,e);return(0,re.B)(n.subarray())}async function xi(t,e,n){e=Array.isArray(e)?e:[e],n.log.trace("handle: available protocols %s",e);const r=gi(t,{...n,maxDataLength:bi,maxLengthLength:2});while(1){n.log.trace("handle: reading incoming string");const t=await Ai(r,n);if(n.log.trace('handle: read "%s"',t),t!==yi){if(e.includes(t))return n.log.trace('handle: respond with "%s" for "%s"',t,t),await mi(r,(0,S.m)(`${t}\n`),n),n.log.trace('handle: responded with "%s" for "%s"',t,t),{stream:r.unwrap(),protocol:t};if("ls"!==t)n.log('handle: respond with "na" for "%s"',t),await mi(r,(0,S.m)("na\n"),n),n.log('handle: responded with "na" for "%s"',t);else{const i=new fi.H(...e.map((t=>oi.single((0,S.m)(`${t}\n`)))),(0,S.m)("\n"));n.log.trace('handle: respond with "%s" for %s',e,t),await mi(r,i,n),n.log.trace('handle: responded with "%s" for %s',e,t)}}else n.log.trace('handle: respond with "%s" for "%s"',yi,t),await mi(r,(0,S.m)(`${yi}\n`),n),n.log.trace('handle: responded with "%s" for "%s"',yi,t)}}var Si=n(1393);async function _i(t,e,n){if(e=Array.isArray(e)?[...e]:[e],1===e.length&&!1===n.negotiateFully)return Ii(t,e[0],n);const r=gi(t,{...n,maxDataLength:bi}),i=e.shift();if(null==i)throw new Error("At least one protocol must be specified");n.log.trace('select: write ["%s", "%s"]',yi,i);const s=(0,S.m)(`${yi}\n`),o=(0,S.m)(`${i}\n`);await vi(r,[s,o],n),n.log.trace("select: reading multistream-select header");let a=await Ai(r,n);if(n.log.trace('select: read "%s"',a),a===yi&&(n.log.trace("select: reading protocol response"),a=await Ai(r,n),n.log.trace('select: read "%s"',a)),a===i)return{stream:r.unwrap(),protocol:i};for(const c of e){n.log.trace('select: write "%s"',c),await mi(r,(0,S.m)(`${c}\n`),n),n.log.trace("select: reading protocol response");const t=await Ai(r,n);if(n.log.trace('select: read "%s" for "%s"',t,c),t===c)return{stream:r.unwrap(),protocol:c}}throw new d.sv("protocol selection failed","ERR_UNSUPPORTED_PROTOCOL")}function Ii(t,e,n){const r=t.sink.bind(t),i=t.source;let s=!1,o=!1;const a=(0,Pr.Z)();let c=!1,u=!1;const l=(0,Pr.Z)();let h=!1,f=!1;const p=(0,Pr.Z)(),g=gi({sink:r,source:i},{...n,maxDataLength:bi});async function y(){if(o)return n.log.trace("optimistic: already negotiating %s stream",e),void await a.promise;o=!0;try{c||(n.log.trace("optimistic: doing send protocol for %s stream",e),await b()),h||(n.log.trace("optimistic: doing read protocol for %s stream",e),await w())}finally{o=!1,s=!0,a.resolve()}}async function b(){if(u)await l.promise;else{u=!0;try{n.log.trace('optimistic: write ["%s", "%s", data] in source',yi,e),await g.writeV([(0,S.m)(`${yi}\n`),(0,S.m)(`${e}\n`)]),n.log.trace('optimistic: wrote ["%s", "%s", data] in source',yi,e)}finally{c=!0,u=!1,l.resolve()}}}async function w(){if(f)await p.promise;else{f=!0;try{n.log.trace("optimistic: reading multistream select header");let t=await Ai(g,n);if(n.log.trace('optimistic: read multistream select header "%s"',t),t===yi&&(t=await Ai(g,n)),n.log.trace('optimistic: read protocol "%s", expecting "%s"',t,e),t!==e)throw new d.sv("protocol selection failed","ERR_UNSUPPORTED_PROTOCOL")}finally{h=!0,f=!1,p.resolve()}}}if(t.sink=async t=>{const{sink:r}=g.unwrap();await r(async function*(){let r=!1;for await(const i of t){if(u&&await l.promise,c)yield i;else{u=!0,n.log.trace('optimistic: write ["%s", "%s", data(%d)] in sink',yi,e,i.byteLength);const t=`${e}\n`;yield new fi.H(Uint8Array.from([19]),(0,S.m)(`${yi}\n`),qr.cv(t.length),(0,S.m)(t),i).subarray(),n.log.trace('optimistic: wrote ["%s", "%s", data(%d)] in sink',yi,e,i.byteLength),c=!0,u=!1,l.resolve(),y().catch((t=>{n.log.error("could not finish optimistic protocol negotiation of %s",e,t)}))}r=!0}r||await y()}())},t.source=async function*(){await y(),n.log.trace('optimistic: reading data from "%s" stream',e),yield*g.unwrap().source}(),null!=t.closeRead){const e=t.closeRead.bind(t);t.closeRead=async t=>{s||await y().catch((t=>{n.log.error("could not negotiate protocol before close read",t)})),await e(t)}}if(null!=t.closeWrite){const e=t.closeWrite.bind(t);t.closeWrite=async t=>{s||await y().catch((t=>{n.log.error("could not negotiate protocol before close write",t)})),await e(t)}}if(null!=t.close){const e=t.close.bind(t);t.close=async t=>{const n=[];u&&n.push(l.promise),f&&n.push(p.promise),n.length>0?await(0,Si.h)(Promise.all(n),t?.signal):(s=!0,o=!1,a.resolve()),await e(t)}}return{stream:t,protocol:e}}const Ri=Symbol.for("@libp2p/connection");let Ci;const ki=500;Ci=Symbol.toStringTag;class Li{constructor(t){(0,i.Z)(this,"id",void 0),(0,i.Z)(this,"remoteAddr",void 0),(0,i.Z)(this,"remotePeer",void 0),(0,i.Z)(this,"direction",void 0),(0,i.Z)(this,"timeline",void 0),(0,i.Z)(this,"multiplexer",void 0),(0,i.Z)(this,"encryption",void 0),(0,i.Z)(this,"status",void 0),(0,i.Z)(this,"transient",void 0),(0,i.Z)(this,"log",void 0),(0,i.Z)(this,"tags",void 0),(0,i.Z)(this,"_newStream",void 0),(0,i.Z)(this,"_close",void 0),(0,i.Z)(this,"_abort",void 0),(0,i.Z)(this,"_getStreams",void 0),(0,i.Z)(this,Ci,"Connection"),(0,i.Z)(this,Ri,!0);const{remoteAddr:e,remotePeer:n,newStream:r,close:s,abort:o,getStreams:a}=t;this.id=`${parseInt(String(1e9*Math.random())).toString(36)}${Date.now()}`,this.remoteAddr=e,this.remotePeer=n,this.direction=t.direction,this.status="open",this.timeline=t.timeline,this.multiplexer=t.multiplexer,this.encryption=t.encryption,this.transient=t.transient??!1,this.log=t.logger.forComponent(`libp2p:connection:${this.direction}:${this.id}`),null==this.remoteAddr.getPeerId()&&(this.remoteAddr=this.remoteAddr.encapsulate(`/p2p/${this.remotePeer}`)),this._newStream=r,this._close=s,this._abort=o,this._getStreams=a,this.tags=[]}get streams(){return this._getStreams()}async newStream(t,e){if("closing"===this.status)throw new d.sv("the connection is being closed","ERR_CONNECTION_BEING_CLOSED");if("closed"===this.status)throw new d.sv("the connection is closed","ERR_CONNECTION_CLOSED");if(Array.isArray(t)||(t=[t]),this.transient&&!0!==e?.runOnTransientConnection)throw new d.sv("Cannot open protocol stream on transient connection","ERR_TRANSIENT_CONNECTION");const n=await this._newStream(t,e);return n.direction="outbound",n}async close(t={}){if("closed"!==this.status&&"closing"!==this.status){if(this.log("closing connection to %a",this.remoteAddr),this.status="closing",null==t.signal){const e=AbortSignal.timeout(ki);(0,c.W)(1/0,e),t={...t,signal:e}}try{this.log.trace("closing all streams"),await Promise.all(this.streams.map((async e=>e.close(t)))),this.log.trace("closing underlying transport"),await this._close(t),this.log.trace("updating timeline with close time"),this.status="closed",this.timeline.close=Date.now()}catch(e){this.log.error("error encountered during graceful close of connection to %a",this.remoteAddr,e),this.abort(e)}}}abort(t){this.log.error("aborting connection to %a due to error",this.remoteAddr,t),this.status="closing",this.streams.forEach((e=>{e.abort(t)})),this.log.error("all streams aborted",this.streams.length),this._abort(t),this.timeline.close=Date.now(),this.status="closed"}}function Ti(t){return new Li(t)}const Bi=3e4;function Oi(t,e){try{const{options:n}=e.getHandler(t);return n.maxInboundStreams}catch(n){if(n.code!==Wn.ERR_NO_HANDLER_FOR_PROTOCOL)throw n}return Vr}function Ni(t,e,n={}){try{const{options:n}=e.getHandler(t);if(null!=n.maxOutboundStreams)return n.maxOutboundStreams}catch(r){if(r.code!==Wn.ERR_NO_HANDLER_FOR_PROTOCOL)throw r}return n.maxOutboundStreams??Hr}function Di(t,e,n){let r=0;return n.streams.forEach((n=>{n.direction===e&&n.protocol===t&&r++})),r}class Ui{constructor(t,e){(0,i.Z)(this,"components",void 0),(0,i.Z)(this,"connectionEncryption",void 0),(0,i.Z)(this,"muxers",void 0),(0,i.Z)(this,"inboundUpgradeTimeout",void 0),(0,i.Z)(this,"events",void 0),this.components=t,this.connectionEncryption=new Map,e.connectionEncryption.forEach((t=>{this.connectionEncryption.set(t.protocol,t)})),this.muxers=new Map,e.muxers.forEach((t=>{this.muxers.set(t.protocol,t)})),this.inboundUpgradeTimeout=e.inboundUpgradeTimeout??ur,this.events=t.events}async shouldBlockConnection(t,e,n){const r=this.components.connectionGater[n];if(void 0!==r&&await r(t,e))throw new d.sv(`The multiaddr connection is blocked by gater.${n}`,Wn.ERR_CONNECTION_INTERCEPTED)}async upgradeInbound(t,e){const n=await this.components.connectionManager.acceptIncomingConnection(t);if(!n)throw new d.sv("connection denied",Wn.ERR_CONNECTION_DENIED);let r,i,s,o,a;const u=AbortSignal.timeout(this.inboundUpgradeTimeout),l=()=>{t.abort(new d.sv("inbound upgrade timeout",d.l9))};u.addEventListener("abort",l,{once:!0}),(0,c.W)(1/0,u);try{if(!0===await(this.components.connectionGater.denyInboundConnection?.(t)))throw new d.sv("The multiaddr connection is blocked by gater.acceptConnection",Wn.ERR_CONNECTION_INTERCEPTED);this.components.metrics?.trackMultiaddrConnection(t),t.log("starting the inbound connection upgrade");let n=t;if(!0!==e?.skipProtection){const e=this.components.connectionProtector;null!=e&&(t.log("protecting the inbound connection"),n=await e.protect(t))}try{if(r=n,!0!==e?.skipEncryption){({conn:r,remotePeer:i,protocol:a}=await this._encryptInbound(n));const t={...n,...r};await this.shouldBlockConnection(i,t,"denyInboundEncryptedConnection")}else{const e=t.remoteAddr.getPeerId();if(null==e)throw new d.sv("inbound connection that skipped encryption must have a peer id",Wn.ERR_INVALID_MULTIADDR);const n=(0,v.jE)(e);a="native",i=n}if(s=r,null!=e?.muxerFactory)o=e.muxerFactory;else if(this.muxers.size>0){const t=await this._multiplexInbound({...n,...r},this.muxers);o=t.muxerFactory,s=t.stream}}catch(h){throw t.log.error("failed to upgrade inbound connection",h),h}return await this.shouldBlockConnection(i,t,"denyInboundUpgradedConnection"),t.log("successfully upgraded inbound connection"),this._createConnection({cryptoProtocol:a,direction:"inbound",maConn:t,upgradedConn:s,muxerFactory:o,remotePeer:i,transient:e?.transient})}finally{u.removeEventListener("abort",l),this.components.connectionManager.afterUpgradeInbound()}}async upgradeOutbound(t,e){const n=t.remoteAddr.getPeerId();let r,i,s,o,a,c;null!=n&&(r=(0,v.jE)(n),await this.shouldBlockConnection(r,t,"denyOutboundConnection")),this.components.metrics?.trackMultiaddrConnection(t),t.log("starting the outbound connection upgrade");let u=t;if(!0!==e?.skipProtection){const e=this.components.connectionProtector;null!=e&&(u=await e.protect(t))}try{if(i=u,!0!==e?.skipEncryption){({conn:i,remotePeer:s,protocol:a}=await this._encryptOutbound(u,r));const t={...u,...i};await this.shouldBlockConnection(s,t,"denyOutboundEncryptedConnection")}else{if(null==r)throw new d.sv("Encryption was skipped but no peer id was passed",Wn.ERR_INVALID_PEER);a="native",s=r}if(o=i,null!=e?.muxerFactory)c=e.muxerFactory;else if(this.muxers.size>0){const t=await this._multiplexOutbound({...u,...i},this.muxers);c=t.muxerFactory,o=t.stream}}catch(l){throw t.log.error("failed to upgrade outbound connection",l),await t.close(l),l}return await this.shouldBlockConnection(s,t,"denyOutboundUpgradedConnection"),t.log("successfully upgraded outbound connection"),this._createConnection({cryptoProtocol:a,direction:"outbound",maConn:t,upgradedConn:o,muxerFactory:c,remotePeer:s,transient:e?.transient})}_createConnection(t){const{cryptoProtocol:e,direction:n,maConn:r,upgradedConn:i,remotePeer:s,muxerFactory:o,transient:a}=t;let u,l,h;null!=o&&(u=o.createStreamMuxer({direction:n,onIncomingStream:t=>{null!=h&&Promise.resolve().then((async()=>{const e=this.components.registrar.getProtocols(),{stream:n,protocol:r}=await xi(t,e,{log:t.log,yieldBytes:!1});if(null==h)return;h.log("incoming stream opened on %s",r);const i=Oi(r,this.components.registrar),o=Di(r,"inbound",h);if(o===i){const e=new d.sv(`Too many inbound protocol streams for protocol "${r}" - limit ${i}`,Wn.ERR_TOO_MANY_INBOUND_PROTOCOL_STREAMS);throw t.abort(e),e}t.source=n.source,t.sink=n.sink,t.protocol=r,null!=n.closeWrite&&(t.closeWrite=n.closeWrite),null!=n.closeRead&&(t.closeRead=n.closeRead),null!=n.close&&(t.close=n.close),await this.components.peerStore.merge(s,{protocols:[r]}),this.components.metrics?.trackProtocolStream(t,h),this._onStream({connection:h,stream:t,protocol:r})})).catch((async e=>{h.log.error("error handling incoming stream id %s",t.id,e.message,e.code,e.stack),null==t.timeline.close&&await t.close()}))}}),l=async(t,e={})=>{if(null==u)throw new d.sv("Stream is not multiplexed",Wn.ERR_MUXER_UNAVAILABLE);h.log("starting new stream for protocols %s",t);const n=await u.newStream();h.log.trace("started new stream %s for protocols %s",n.id,t);try{if(null==e.signal){n.log("no abort signal was passed while trying to negotiate protocols %s falling back to default timeout",t);const r=AbortSignal.timeout(Bi);(0,c.W)(1/0,r),e={...e,signal:r}}n.log.trace("selecting protocol from protocols %s",t);const{stream:r,protocol:i}=await _i(n,t,{...e,log:n.log,yieldBytes:!0});n.log("selected protocol %s",i);const o=Ni(i,this.components.registrar,e),a=Di(i,"outbound",h);if(a>=o){const t=new d.sv(`Too many outbound protocol streams for protocol "${i}" - ${a}/${o}`,Wn.ERR_TOO_MANY_OUTBOUND_PROTOCOL_STREAMS);throw n.abort(t),t}return await this.components.peerStore.merge(s,{protocols:[i]}),n.source=r.source,n.sink=r.sink,n.protocol=i,null!=r.closeWrite&&(n.closeWrite=r.closeWrite),null!=r.closeRead&&(n.closeRead=r.closeRead),null!=r.close&&(n.close=r.close),this.components.metrics?.trackProtocolStream(n,h),n}catch(r){if(h.log.error("could not create new stream for protocols %s",t,r),null==n.timeline.close&&n.abort(r),null!=r.code)throw r;throw new d.sv(String(r),Wn.ERR_UNSUPPORTED_PROTOCOL)}},Promise.all([u.sink(i.source),i.sink(u.source)]).catch((t=>{h.log.error("error piping data through muxer",t)})));const f=r.timeline;r.timeline=new Proxy(f,{set:(...t)=>(null!=h&&"close"===t[1]&&null!=t[2]&&null==f.close&&(async()=>{try{"open"===h.status&&await h.close()}catch(t){h.log.error("error closing connection after timeline close",t)}finally{this.events.safeDispatchEvent("connection:close",{detail:h})}})().catch((t=>{h.log.error("error thrown while dispatching connection:close event",t)})),Reflect.set(...t))}),r.timeline.upgraded=Date.now();const p=()=>{throw new d.sv("connection is not multiplexed",Wn.ERR_CONNECTION_NOT_MULTIPLEXED)};return h=Ti({remoteAddr:r.remoteAddr,remotePeer:s,status:"open",direction:n,timeline:r.timeline,multiplexer:u?.protocol,encryption:e,transient:a,logger:this.components.logger,newStream:l??p,getStreams:()=>null!=u?u.streams:[],close:async t=>{null!=u&&(h.log.trace("close muxer"),await u.close(t)),h.log.trace("close maconn"),await r.close(t),h.log.trace("closed maconn")},abort:t=>{r.abort(t),null!=u&&u.abort(t)}}),this.events.safeDispatchEvent("connection:open",{detail:h}),h}_onStream(t){const{connection:e,stream:n,protocol:r}=t,{handler:i,options:s}=this.components.registrar.getHandler(r);if(e.transient&&!0!==s.runOnTransientConnection)throw new d.sv("Cannot open protocol stream on transient connection","ERR_TRANSIENT_CONNECTION");i({connection:e,stream:n})}async _encryptInbound(t){const e=Array.from(this.connectionEncryption.keys());t.log("handling inbound crypto protocol selection",e);try{const{stream:n,protocol:r}=await xi(t,e,{log:t.log}),i=this.connectionEncryption.get(r);if(null==i)throw new Error(`no crypto module found for ${r}`);return t.log("encrypting inbound connection using",r),{...await i.secureInbound(this.components.peerId,n),protocol:r}}catch(n){throw t.log.error("encrypting inbound connection to %p failed",n),new d.sv(n.message,Wn.ERR_ENCRYPTION_FAILED)}}async _encryptOutbound(t,e){const n=Array.from(this.connectionEncryption.keys());t.log("selecting outbound crypto protocol",n);try{t.log.trace("selecting encrypter from %s",n);const{stream:r,protocol:i}=await _i(t,n,{log:t.log,yieldBytes:!0}),s=this.connectionEncryption.get(i);if(null==s)throw new Error(`no crypto module found for ${i}`);return t.log("encrypting outbound connection to %p using %s",e,s),{...await s.secureOutbound(this.components.peerId,r,e),protocol:i}}catch(r){throw t.log.error("encrypting outbound connection to %p failed",r),new d.sv(r.message,Wn.ERR_ENCRYPTION_FAILED)}}async _multiplexOutbound(t,e){const n=Array.from(e.keys());t.log("outbound selecting muxer %s",n);try{t.log.trace("selecting stream muxer from %s",n);const{stream:r,protocol:i}=await _i(t,n,{log:t.log,yieldBytes:!0});t.log("selected %s as muxer protocol",i);const s=e.get(i);return{stream:r,muxerFactory:s}}catch(r){throw t.log.error("error multiplexing outbound connection",r),new d.sv(String(r),Wn.ERR_MUXER_UNAVAILABLE)}}async _multiplexInbound(t,e){const n=Array.from(e.keys());t.log("inbound handling muxers %s",n);try{const{stream:r,protocol:i}=await xi(t,n,{log:t.log}),s=e.get(i);return{stream:r,muxerFactory:s}}catch(r){throw t.log.error("error multiplexing inbound connection",r),new d.sv(String(r),Wn.ERR_MUXER_UNAVAILABLE)}}}const Pi="1.4.3",Mi="libp2p";var Zi=new WeakSet;class Fi extends a.L{constructor(t){super(),(0,r.Z)(this,Zi),(0,i.Z)(this,"peerId",void 0),(0,i.Z)(this,"peerStore",void 0),(0,i.Z)(this,"contentRouting",void 0),(0,i.Z)(this,"peerRouting",void 0),(0,i.Z)(this,"metrics",void 0),(0,i.Z)(this,"services",void 0),(0,i.Z)(this,"logger",void 0),(0,i.Z)(this,"status",void 0),(0,i.Z)(this,"components",void 0),(0,i.Z)(this,"log",void 0),this.status="stopped";const e=new a.L,n=e.dispatchEvent.bind(e);e.dispatchEvent=t=>{const e=n(t),r=this.dispatchEvent(new a.A(t.type,{detail:t.detail}));return e||r},(0,c.W)(1/0,e),this.peerId=t.peerId,this.logger=t.logger??w(),this.log=this.logger.forComponent("libp2p"),this.services={};const o=this.components=an({peerId:t.peerId,privateKey:t.privateKey,nodeInfo:t.nodeInfo??{name:Mi,version:Pi},logger:this.logger,events:e,datastore:t.datastore??new Je,connectionGater:An(t.connectionGater),dns:t.dns});this.peerStore=this.configureComponent("peerStore",new Ce(o,{addressFilter:this.components.connectionGater.filterMultiaddrForPeer,...t.peerStore})),null!=t.metrics&&(this.metrics=this.configureComponent("metrics",t.metrics(this.components))),o.events.addEventListener("peer:update",(t=>{if(null==t.detail.previous){const e={id:t.detail.peer.id,multiaddrs:t.detail.peer.addresses.map((t=>t.multiaddr))};o.events.safeDispatchEvent("peer:discovery",{detail:e})}})),null!=t.connectionProtector&&this.configureComponent("connectionProtector",t.connectionProtector(o)),this.components.upgrader=new Ui(this.components,{connectionEncryption:(t.connectionEncryption??[]).map(((t,e)=>this.configureComponent(`connection-encryption-${e}`,t(this.components)))),muxers:(t.streamMuxers??[]).map(((t,e)=>this.configureComponent(`stream-muxers-${e}`,t(this.components)))),inboundUpgradeTimeout:t.connectionManager.inboundUpgradeTimeout}),this.configureComponent("transportManager",new zr(this.components,t.transportManager)),this.configureComponent("connectionManager",new Tr(this.components,t.connectionManager)),this.configureComponent("registrar",new $r(this.components)),this.configureComponent("addressManager",new en(this.components,t.addresses));const d=(t.peerRouters??[]).map(((t,e)=>this.configureComponent(`peer-router-${e}`,t(this.components))));this.peerRouting=this.components.peerRouting=this.configureComponent("peerRouting",new Fr(this.components,{routers:d}));const f=(t.contentRouters??[]).map(((t,e)=>this.configureComponent(`content-router-${e}`,t(this.components))));if(this.contentRouting=this.components.contentRouting=this.configureComponent("contentRouting",new Ur(this.components,{routers:f})),(t.peerDiscovery??[]).forEach(((t,e)=>{const n=this.configureComponent(`peer-discovery-${e}`,t(this.components));n.addEventListener("peer",(t=>{(0,s.Z)(this,Zi,Vi).call(this,t)}))})),t.transports?.forEach(((t,e)=>{this.components.transportManager.add(this.configureComponent(`transport-${e}`,t(this.components)))})),null!=t.services)for(const r of Object.keys(t.services)){const e=t.services[r],n=e(this.components);null!=n?(this.services[r]=n,this.configureComponent(r,n),null!=n[u]&&(this.log("registering service %s for content routing",r),f.push(n[u])),null!=n[l]&&(this.log("registering service %s for peer routing",r),d.push(n[l])),null!=n[h]&&(this.log("registering service %s for peer discovery",r),n[h].addEventListener?.("peer",(t=>{(0,s.Z)(this,Zi,Vi).call(this,t)})))):this.log.error("service factory %s returned null or undefined instance",r)}}configureComponent(t,e){return null==e&&this.log.error("component %s was null or undefined",t),this.components[t]=e,e}async start(){if("stopped"===this.status){this.status="starting",this.log("libp2p is starting");try{await(this.components.beforeStart?.()),await this.components.start(),await(this.components.afterStart?.()),this.status="started",this.safeDispatchEvent("start",{detail:this}),this.log("libp2p has started")}catch(t){throw this.log.error("An error occurred starting libp2p",t),this.status="started",await this.stop(),t}}}async stop(){"started"===this.status&&(this.log("libp2p is stopping"),this.status="stopping",await(this.components.beforeStop?.()),await this.components.stop(),await(this.components.afterStop?.()),this.status="stopped",this.safeDispatchEvent("stop",{detail:this}),this.log("libp2p has stopped"))}getConnections(t){return this.components.connectionManager.getConnections(t)}getDialQueue(){return this.components.connectionManager.getDialQueue()}getPeers(){const t=new x;for(const e of this.components.connectionManager.getConnections())t.add(e.remotePeer);return Array.from(t)}async dial(t,e={}){return this.components.connectionManager.openConnection(t,{priority:75,...e})}async dialProtocol(t,e,n={}){if(null==e)throw new d.sv("no protocols were provided to open a stream",Wn.ERR_INVALID_PROTOCOLS_FOR_STREAM);if(e=Array.isArray(e)?e:[e],0===e.length)throw new d.sv("no protocols were provided to open a stream",Wn.ERR_INVALID_PROTOCOLS_FOR_STREAM);const r=await this.dial(t,n);return r.newStream(e,n)}getMultiaddrs(){return this.components.addressManager.getAddresses()}getProtocols(){return this.components.registrar.getProtocols()}async hangUp(t,e={}){(0,te.h2)(t)&&(t=(0,v.jE)(t.getPeerId()??"")),await this.components.connectionManager.closeConnections(t,e)}async getPublicKey(t,e={}){if(this.log("getPublicKey %p",t),null!=t.publicKey)return t.publicKey;try{const e=await this.peerStore.get(t);if(null!=e.id.publicKey)return e.id.publicKey}catch(i){if(i.code!==Wn.ERR_NOT_FOUND)throw i}const n=(0,Ye.z)([(0,S.m)("/pk/"),t.multihash.digest]),r=await this.contentRouting.get(n,e);return(0,o.lR)(r),await this.peerStore.patch(t,{publicKey:r}),r}async handle(t,e,n){Array.isArray(t)||(t=[t]),await Promise.all(t.map((async t=>{await this.components.registrar.handle(t,e,n)})))}async unhandle(t){Array.isArray(t)||(t=[t]),await Promise.all(t.map((async t=>{await this.components.registrar.unhandle(t)})))}async register(t,e){return this.components.registrar.register(t,e)}unregister(t){this.components.registrar.unregister(t)}async isDialable(t,e={}){return this.components.connectionManager.isDialable(t,e)}}function Vi(t){const{detail:e}=t;e.id.toString()!==this.peerId.toString()?this.components.peerStore.merge(e.id,{multiaddrs:e.multiaddrs}).catch((t=>{this.log.error(t)})):this.log.error(new Error(Wn.ERR_DISCOVERED_SELF))}async function Hi(t={}){const e=t.peerId??=await _();if(null==e.privateKey)throw new d.sv("peer id was missing private key","ERR_MISSING_PRIVATE_KEY");return t.privateKey??=await(0,o.r3)(e.privateKey),new Fi(await Xn(t))}async function $i(t={}){const e=await Hi(t);return!1!==t.start&&await e.start(),e}},3154:function(t,e,n){"use strict";n.d(e,{Z:function(){return s}});n(1439),n(7585),n(5315);function r(t){return t instanceof Uint8Array?{get(e){return t[e]},set(e,n){t[e]=n}}:{get(e){return t.get(e)},set(e,n){t.set(e,n)}}}const i=4294967296;class s{constructor(t=0,e=0){this.hi=t,this.lo=e}toBigInt(t){if(!0===t)return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n);if(this.hi>>>31!==0){const t=1+~this.lo>>>0;let e=~this.hi>>>0;return 0===t&&(e=e+1>>>0),-(BigInt(t)+(BigInt(e)<<32n))}return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n)}toNumber(t){return Number(this.toBigInt(t))}zzDecode(){const t=-(1&this.lo),e=((this.lo>>>1|this.hi<<31)^t)>>>0,n=(this.hi>>>1^t)>>>0;return new s(n,e)}zzEncode(){const t=this.hi>>31,e=((this.hi<<1|this.lo>>>31)^t)>>>0,n=(this.lo<<1^t)>>>0;return new s(e,n)}toBytes(t,e=0){const n=r(t);while(this.hi>0)n.set(e++,127&this.lo|128),this.lo=(this.lo>>>7|this.hi<<25)>>>0,this.hi>>>=7;while(this.lo>127)n.set(e++,127&this.lo|128),this.lo=this.lo>>>7;n.set(e++,this.lo)}static fromBigInt(t){if(0n===t)return new s;const e=t<0;e&&(t=-t);let n=0|Number(t>>32n),r=0|Number(t-(BigInt(n)<<32n));return e&&(n=~n>>>0,r=~r>>>0,++r>i&&(r=0,++n>i&&(n=0))),new s(n,r)}static fromNumber(t){if(0===t)return new s;const e=t<0;e&&(t=-t);let n=t>>>0,r=(t-n)/4294967296>>>0;return e&&(r=~r>>>0,n=~n>>>0,++n>4294967295&&(n=0,++r>4294967295&&(r=0))),new s(r,n)}static fromBytes(t,e=0){const n=r(t),i=new s;let o=0;if(t.length-e>4){for(;o<4;++o)if(i.lo=(i.lo|(127&n.get(e))<<7*o)>>>0,n.get(e++)<128)return i;if(i.lo=(i.lo|(127&n.get(e))<<28)>>>0,i.hi=(i.hi|(127&n.get(e))>>4)>>>0,n.get(e++)<128)return i;o=0}else for(;o<4;++o){if(e>=t.length)throw RangeError(`index out of range: ${e} > ${t.length}`);if(i.lo=(i.lo|(127&n.get(e))<<7*o)>>>0,n.get(e++)<128)return i}if(t.length-e>4){for(;o<5;++o)if(i.hi=(i.hi|(127&n.get(e))<<7*o+3)>>>0,n.get(e++)<128)return i}else if(e<t.byteLength)for(;o<5;++o){if(e>=t.length)throw RangeError(`index out of range: ${e} > ${t.length}`);if(i.hi=(i.hi|(127&n.get(e))<<7*o+3)>>>0,n.get(e++)<128)return i}throw RangeError("invalid varint encoding")}}},7098:function(t,e,n){"use strict";n.d(e,{kU:function(){return g},Dp:function(){return p},ET:function(){return w}});var r=n(7327),i=(n(1439),n(7585),n(5315),n(7119));function s(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(255!==n[o])throw new TypeError(s+" is ambiguous");n[o]=i}var a=t.length,c=t.charAt(0),u=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function h(e){if(e instanceof Uint8Array||(ArrayBuffer.isView(e)?e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):Array.isArray(e)&&(e=Uint8Array.from(e))),!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===e.length)return"";var n=0,r=0,i=0,s=e.length;while(i!==s&&0===e[i])i++,n++;var o=(s-i)*l+1>>>0,u=new Uint8Array(o);while(i!==s){for(var h=e[i],d=0,f=o-1;(0!==h||d<r)&&-1!==f;f--,d++)h+=256*u[f]>>>0,u[f]=h%a>>>0,h=h/a>>>0;if(0!==h)throw new Error("Non-zero carry");r=d,i++}var p=o-r;while(p!==o&&0===u[p])p++;for(var g=c.repeat(n);p<o;++p)g+=t.charAt(u[p]);return g}function d(t){if("string"!==typeof t)throw new TypeError("Expected String");if(0===t.length)return new Uint8Array;var e=0;if(" "!==t[e]){var r=0,i=0;while(t[e]===c)r++,e++;var s=(t.length-e)*u+1>>>0,o=new Uint8Array(s);while(t[e]){var l=n[t.charCodeAt(e)];if(255===l)return;for(var h=0,d=s-1;(0!==l||h<i)&&-1!==d;d--,h++)l+=a*o[d]>>>0,o[d]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");i=h,e++}if(" "!==t[e]){var f=s-i;while(f!==s&&0===o[f])f++;var p=new Uint8Array(r+(s-f)),g=r;while(f!==s)p[g++]=o[f++];return p}}}function f(t){var n=d(t);if(n)return n;throw new Error(`Non-${e} character`)}return{encode:h,decodeUnsafe:d,decode:f}}var o=s,a=o,c=a;class u{constructor(t,e,n){(0,r.Z)(this,"name",void 0),(0,r.Z)(this,"prefix",void 0),(0,r.Z)(this,"baseEncode",void 0),this.name=t,this.prefix=e,this.baseEncode=n}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class l{constructor(t,e,n){if((0,r.Z)(this,"name",void 0),(0,r.Z)(this,"prefix",void 0),(0,r.Z)(this,"baseDecode",void 0),(0,r.Z)(this,"prefixCodePoint",void 0),this.name=t,this.prefix=e,void 0===e.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=e.codePointAt(0),this.baseDecode=n}decode(t){if("string"===typeof t){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(t){return d(this,t)}}class h{constructor(t){(0,r.Z)(this,"decoders",void 0),this.decoders=t}or(t){return d(this,t)}decode(t){const e=t[0],n=this.decoders[e];if(null!=n)return n.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}function d(t,e){return new h({...t.decoders??{[t.prefix]:t},...e.decoders??{[e.prefix]:e}})}class f{constructor(t,e,n,i){(0,r.Z)(this,"name",void 0),(0,r.Z)(this,"prefix",void 0),(0,r.Z)(this,"baseEncode",void 0),(0,r.Z)(this,"baseDecode",void 0),(0,r.Z)(this,"encoder",void 0),(0,r.Z)(this,"decoder",void 0),this.name=t,this.prefix=e,this.baseEncode=n,this.baseDecode=i,this.encoder=new u(t,e,n),this.decoder=new l(t,e,i)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}function p({name:t,prefix:e,encode:n,decode:r}){return new f(t,e,n,r)}function g({name:t,prefix:e,alphabet:n}){const{encode:r,decode:s}=c(n,t);return p({prefix:e,name:t,encode:r,decode:t=>(0,i.oQ)(s(t))})}function y(t,e,n,r){const i={};for(let l=0;l<e.length;++l)i[e[l]]=l;let s=t.length;while("="===t[s-1])--s;const o=new Uint8Array(s*n/8|0);let a=0,c=0,u=0;for(let l=0;l<s;++l){const e=i[t[l]];if(void 0===e)throw new SyntaxError(`Non-${r} character`);c=c<<n|e,a+=n,a>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=n||0!==(255&c<<8-a))throw new SyntaxError("Unexpected end of data");return o}function b(t,e,n){const r="="===e[e.length-1],i=(1<<n)-1;let s="",o=0,a=0;for(let c=0;c<t.length;++c){a=a<<8|t[c],o+=8;while(o>n)o-=n,s+=e[i&a>>o]}if(0!==o&&(s+=e[i&a<<n-o]),r)while(0!==(s.length*n&7))s+="=";return s}function w({name:t,prefix:e,bitsPerChar:n,alphabet:r}){return p({prefix:e,name:t,encode(t){return b(t,r,n)},decode(e){return y(e,r,n,t)}})}},6435:function(t,e,n){"use strict";n.r(e),n.d(e,{base32:function(){return i},base32hex:function(){return c},base32hexpad:function(){return l},base32hexpadupper:function(){return h},base32hexupper:function(){return u},base32pad:function(){return o},base32padupper:function(){return a},base32upper:function(){return s},base32z:function(){return d}});var r=n(7098);const i=(0,r.ET)({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),s=(0,r.ET)({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),o=(0,r.ET)({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),a=(0,r.ET)({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),c=(0,r.ET)({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),u=(0,r.ET)({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),l=(0,r.ET)({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),h=(0,r.ET)({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),d=(0,r.ET)({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5})},4722:function(t,e,n){"use strict";n.r(e),n.d(e,{base58btc:function(){return i},base58flickr:function(){return s}});var r=n(7098);const i=(0,r.kU)({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),s=(0,r.kU)({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"})},5864:function(t,e,n){"use strict";n.r(e),n.d(e,{base64:function(){return i},base64pad:function(){return s},base64url:function(){return o},base64urlpad:function(){return a}});var r=n(7098);const i=(0,r.ET)({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),s=(0,r.ET)({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),o=(0,r.ET)({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),a=(0,r.ET)({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6})},7738:function(t,e,n){"use strict";n.d(e,{gh:function(){return $}});var r={};n.r(r),n.d(r,{base10:function(){return f}});var i={};n.r(i),n.d(i,{base16:function(){return p},base16upper:function(){return g}});var s={};n.r(s),n.d(s,{base2:function(){return y}});var o={};n.r(o),n.d(o,{base256emoji:function(){return A}});var a={};n.r(a),n.d(a,{base36:function(){return S},base36upper:function(){return _}});var c={};n.r(c),n.d(c,{base8:function(){return C}});var u={};n.r(u),n.d(u,{identity:function(){return L}});var l={};n.r(l),n.d(l,{code:function(){return N},decode:function(){return U},encode:function(){return D},name:function(){return O}});var h={};n.r(h),n.d(h,{code:function(){return M},decode:function(){return F},encode:function(){return Z},name:function(){return P}});var d=n(7098);const f=(0,d.kU)({prefix:"9",name:"base10",alphabet:"0123456789"}),p=(0,d.ET)({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),g=(0,d.ET)({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),y=(0,d.ET)({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});n(7658),n(1439),n(7585),n(5315);const b=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),w=b.reduce(((t,e,n)=>(t[n]=e,t)),[]),m=b.reduce(((t,e,n)=>(t[e.codePointAt(0)]=n,t)),[]);function v(t){return t.reduce(((t,e)=>(t+=w[e],t)),"")}function E(t){const e=[];for(const n of t){const t=m[n.codePointAt(0)];if(void 0===t)throw new Error(`Non-base256emoji character: ${n}`);e.push(t)}return new Uint8Array(e)}const A=(0,d.Dp)({prefix:"🚀",name:"base256emoji",encode:v,decode:E});var x=n(6435);const S=(0,d.kU)({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),_=(0,d.kU)({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var I=n(4722),R=n(5864);const C=(0,d.ET)({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var k=n(7119);const L=(0,d.Dp)({prefix:"\0",name:"identity",encode:t=>(0,k.BB)(t),decode:t=>(0,k.mL)(t)}),T=new TextEncoder,B=new TextDecoder,O="json",N=512;function D(t){return T.encode(JSON.stringify(t))}function U(t){return JSON.parse(B.decode(t))}const P="raw",M=85;function Z(t){return(0,k.oQ)(t)}function F(t){return(0,k.oQ)(t)}var V=n(5968),H=n(441);n(3406),n(4320),n(3099),n(6793);const $={...u,...s,...c,...r,...i,...x,...a,...I,...R,...o}},7119:function(t,e,n){"use strict";n.d(e,{BB:function(){return o},fS:function(){return r},mL:function(){return s},oQ:function(){return i}});n(1439),n(7585),n(5315);new Uint8Array(0);function r(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let n=0;n<t.byteLength;n++)if(t[n]!==e[n])return!1;return!0}function i(t){if(t instanceof Uint8Array&&"Uint8Array"===t.constructor.name)return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")}function s(t){return(new TextEncoder).encode(t)}function o(t){return(new TextDecoder).decode(t)}},3406:function(t,e,n){"use strict";n.d(e,{k0:function(){return p}});var r=n(7327),i=(n(1439),n(7585),n(5315),n(6435)),s=n(4722),o=n(7119),a=n(4320),c=n(6793);let u,l;function h(t,e){const{bytes:n,version:r}=t;switch(r){case 0:return y(n,f(t),e??s.base58btc.encoder);default:return b(n,f(t),e??i.base32.encoder)}}const d=new WeakMap;function f(t){const e=d.get(t);if(null==e){const e=new Map;return d.set(t,e),e}return e}u=Symbol.toStringTag,l=Symbol.for("nodejs.util.inspect.custom");class p{constructor(t,e,n,i){(0,r.Z)(this,"code",void 0),(0,r.Z)(this,"version",void 0),(0,r.Z)(this,"multihash",void 0),(0,r.Z)(this,"bytes",void 0),(0,r.Z)(this,"/",void 0),(0,r.Z)(this,u,"CID"),this.code=e,this.version=t,this.multihash=n,this.bytes=i,this["/"]=i}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{const{code:t,multihash:e}=this;if(t!==w)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(e.code!==m)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return p.createV0(e)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{const{code:t,digest:e}=this.multihash,n=a.Ue(t,e);return p.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(t){return p.equals(this,t)}static equals(t,e){const n=e;return null!=n&&t.code===n.code&&t.version===n.version&&a.fS(t.multihash,n.multihash)}toString(t){return h(this,t)}toJSON(){return{"/":h(this)}}link(){return this}[l](){return`CID(${this.toString()})`}static asCID(t){if(null==t)return null;const e=t;if(e instanceof p)return e;if(null!=e["/"]&&e["/"]===e.bytes||e.asCID===e){const{version:t,code:n,multihash:r,bytes:i}=e;return new p(t,n,r,i??v(t,n,r.bytes))}if(!0===e[E]){const{version:t,multihash:n,code:r}=e,i=a.Jx(n);return p.create(t,r,i)}return null}static create(t,e,n){if("number"!==typeof e)throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(t){case 0:if(e!==w)throw new Error(`Version 0 CID must use dag-pb (code: ${w}) block encoding`);return new p(t,e,n,n.bytes);case 1:{const r=v(t,e,n.bytes);return new p(t,e,n,r)}default:throw new Error("Invalid version")}}static createV0(t){return p.create(0,w,t)}static createV1(t,e){return p.create(1,t,e)}static decode(t){const[e,n]=p.decodeFirst(t);if(0!==n.length)throw new Error("Incorrect length");return e}static decodeFirst(t){const e=p.inspectBytes(t),n=e.size-e.multihashSize,r=(0,o.oQ)(t.subarray(n,n+e.multihashSize));if(r.byteLength!==e.multihashSize)throw new Error("Incorrect length");const i=r.subarray(e.multihashSize-e.digestSize),s=new a.zZ(e.multihashCode,e.digestSize,i,r),c=0===e.version?p.createV0(s):p.createV1(e.codec,s);return[c,t.subarray(e.size)]}static inspectBytes(t){let e=0;const n=()=>{const[n,r]=c.Jx(t.subarray(e));return e+=r,n};let r=n(),i=w;if(18===r?(r=0,e=0):i=n(),0!==r&&1!==r)throw new RangeError(`Invalid CID version ${r}`);const s=e,o=n(),a=n(),u=e+a,l=u-s;return{version:r,codec:i,multihashCode:o,digestSize:a,multihashSize:l,size:u}}static parse(t,e){const[n,r]=g(t,e),i=p.decode(r);if(0===i.version&&"Q"!==t[0])throw Error("Version 0 CID string must not include multibase prefix");return f(i).set(n,t),i}}function g(t,e){switch(t[0]){case"Q":{const n=e??s.base58btc;return[s.base58btc.prefix,n.decode(`${s.base58btc.prefix}${t}`)]}case s.base58btc.prefix:{const n=e??s.base58btc;return[s.base58btc.prefix,n.decode(t)]}case i.base32.prefix:{const n=e??i.base32;return[i.base32.prefix,n.decode(t)]}default:if(null==e)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}}function y(t,e,n){const{prefix:r}=n;if(r!==s.base58btc.prefix)throw Error(`Cannot string encode V0 in ${n.name} encoding`);const i=e.get(r);if(null==i){const i=n.encode(t).slice(1);return e.set(r,i),i}return i}function b(t,e,n){const{prefix:r}=n,i=e.get(r);if(null==i){const i=n.encode(t);return e.set(r,i),i}return i}const w=112,m=18;function v(t,e,n){const r=c.P$(t),i=r+c.P$(e),s=new Uint8Array(i+n.byteLength);return c.mL(t,s,0),c.mL(e,s,r),s.set(n,i),s}const E=Symbol.for("@ipld/js-cid/CID")},4320:function(t,e,n){"use strict";n.d(e,{Jx:function(){return a},Ue:function(){return o},fS:function(){return c},zZ:function(){return u}});var r=n(7327),i=(n(1439),n(7585),n(5315),n(7119)),s=n(6793);function o(t,e){const n=e.byteLength,r=s.P$(t),i=r+s.P$(n),o=new Uint8Array(i+n);return s.mL(t,o,0),s.mL(n,o,r),o.set(e,i),new u(t,n,e,o)}function a(t){const e=(0,i.oQ)(t),[n,r]=s.Jx(e),[o,a]=s.Jx(e.subarray(r)),c=e.subarray(r+a);if(c.byteLength!==o)throw new Error("Incorrect length");return new u(n,o,c,e)}function c(t,e){if(t===e)return!0;{const n=e;return t.code===n.code&&t.size===n.size&&n.bytes instanceof Uint8Array&&(0,i.fS)(t.bytes,n.bytes)}}class u{constructor(t,e,n,i){(0,r.Z)(this,"code",void 0),(0,r.Z)(this,"size",void 0),(0,r.Z)(this,"digest",void 0),(0,r.Z)(this,"bytes",void 0),this.code=t,this.size=e,this.digest=n,this.bytes=i}}},3099:function(t,e,n){"use strict";n.d(e,{D:function(){return s}});var r=n(7327),i=(n(1439),n(7585),n(5315),n(4320));function s({name:t,code:e,encode:n}){return new o(t,e,n)}class o{constructor(t,e,n){(0,r.Z)(this,"name",void 0),(0,r.Z)(this,"code",void 0),(0,r.Z)(this,"encode",void 0),this.name=t,this.code=e,this.encode=n}digest(t){if(t instanceof Uint8Array){const e=this.encode(t);return e instanceof Uint8Array?i.Ue(this.code,e):e.then((t=>i.Ue(this.code,t)))}throw Error("Unknown type, must be binary type")}}},5968:function(t,e,n){"use strict";n.r(e),n.d(e,{identity:function(){return u}});var r=n(7119),i=n(4320);const s=0,o="identity",a=r.oQ;function c(t){return i.Ue(s,a(t))}const u={code:s,name:o,encode:a,digest:c}},441:function(t,e,n){"use strict";n.r(e),n.d(e,{sha256:function(){return s},sha512:function(){return o}});n(1439),n(7585),n(5315);var r=n(3099);function i(t){return async e=>new Uint8Array(await crypto.subtle.digest(t,e))}const s=(0,r.D)({name:"sha2-256",code:18,encode:i("SHA-256")}),o=(0,r.D)({name:"sha2-512",code:19,encode:i("SHA-512")})},6793:function(t,e,n){"use strict";n.d(e,{Jx:function(){return I},mL:function(){return R},P$:function(){return C}});var r=c,i=128,s=127,o=~s,a=Math.pow(2,31);function c(t,e,n){e=e||[],n=n||0;var r=n;while(t>=a)e[n++]=255&t|i,t/=128;while(t&o)e[n++]=255&t|i,t>>>=7;return e[n]=0|t,c.bytes=n-r+1,e}var u=d,l=128,h=127;function d(t,e){var n,r=0,i=(e=e||0,0),s=e,o=t.length;do{if(s>=o)throw d.bytes=0,new RangeError("Could not decode varint");n=t[s++],r+=i<28?(n&h)<<i:(n&h)*Math.pow(2,i),i+=7}while(n>=l);return d.bytes=s-e,r}var f=Math.pow(2,7),p=Math.pow(2,14),g=Math.pow(2,21),y=Math.pow(2,28),b=Math.pow(2,35),w=Math.pow(2,42),m=Math.pow(2,49),v=Math.pow(2,56),E=Math.pow(2,63),A=function(t){return t<f?1:t<p?2:t<g?3:t<y?4:t<b?5:t<w?6:t<m?7:t<v?8:t<E?9:10},x={encode:r,decode:u,encodingLength:A},S=x,_=S;function I(t,e=0){const n=_.decode(t,e);return[n,_.decode.bytes]}function R(t,e,n=0){return _.encode(t,e,n),e}function C(t){return _.encodingLength(t)}},4622:function(t,e,n){"use strict";function r(){const t={};return t.promise=new Promise(((e,n)=>{t.resolve=e,t.reject=n})),t}n.d(e,{Z:function(){return r}})},5065:function(t,e,n){"use strict";n.d(e,{C6:function(){return _},LE:function(){return j},Ji:function(){return q},yw:function(){return G}});var r=n(7327),i=(n(1439),n(7585),n(5315),n(645));const s=new Float32Array([-0]),o=new Uint8Array(s.buffer);function a(t,e,n){s[0]=t,e[n]=o[0],e[n+1]=o[1],e[n+2]=o[2],e[n+3]=o[3]}function c(t,e){return o[0]=t[e],o[1]=t[e+1],o[2]=t[e+2],o[3]=t[e+3],s[0]}const u=new Float64Array([-0]),l=new Uint8Array(u.buffer);function h(t,e,n){u[0]=t,e[n]=l[0],e[n+1]=l[1],e[n+2]=l[2],e[n+3]=l[3],e[n+4]=l[4],e[n+5]=l[5],e[n+6]=l[6],e[n+7]=l[7]}function d(t,e){return l[0]=t[e],l[1]=t[e+1],l[2]=t[e+2],l[3]=t[e+3],l[4]=t[e+4],l[5]=t[e+5],l[6]=t[e+6],l[7]=t[e+7],u[0]}const f=BigInt(Number.MAX_SAFE_INTEGER),p=BigInt(Number.MIN_SAFE_INTEGER);class g{constructor(t,e){(0,r.Z)(this,"lo",void 0),(0,r.Z)(this,"hi",void 0),this.lo=0|t,this.hi=0|e}toNumber(t=!1){if(!t&&this.hi>>>31>0){const t=1+~this.lo>>>0;let e=~this.hi>>>0;return 0===t&&(e=e+1>>>0),-(t+4294967296*e)}return this.lo+4294967296*this.hi}toBigInt(t=!1){if(t)return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n);if(this.hi>>>31!==0){const t=1+~this.lo>>>0;let e=~this.hi>>>0;return 0===t&&(e=e+1>>>0),-(BigInt(t)+(BigInt(e)<<32n))}return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n)}toString(t=!1){return this.toBigInt(t).toString()}zzEncode(){const t=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^t)>>>0,this.lo=(this.lo<<1^t)>>>0,this}zzDecode(){const t=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^t)>>>0,this.hi=(this.hi>>>1^t)>>>0,this}length(){const t=this.lo,e=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return 0===n?0===e?t<16384?t<128?1:2:t<2097152?3:4:e<16384?e<128?5:6:e<2097152?7:8:n<128?9:10}static fromBigInt(t){if(0n===t)return y;if(t<f&&t>p)return this.fromNumber(Number(t));const e=t<0n;e&&(t=-t);let n=t>>32n,r=t-(n<<32n);return e&&(n=0n|~n,r=0n|~r,++r>b&&(r=0n,++n>b&&(n=0n))),new g(Number(r),Number(n))}static fromNumber(t){if(0===t)return y;const e=t<0;e&&(t=-t);let n=t>>>0,r=(t-n)/4294967296>>>0;return e&&(r=~r>>>0,n=~n>>>0,++n>4294967295&&(n=0,++r>4294967295&&(r=0))),new g(n,r)}static from(t){return"number"===typeof t?g.fromNumber(t):"bigint"===typeof t?g.fromBigInt(t):"string"===typeof t?g.fromBigInt(BigInt(t)):null!=t.low||null!=t.high?new g(t.low>>>0,t.high>>>0):y}}const y=new g(0,0);y.toBigInt=function(){return 0n},y.zzEncode=y.zzDecode=function(){return this},y.length=function(){return 1};const b=4294967296n;n(7658);function w(t){let e=0,n=0;for(let r=0;r<t.length;++r)n=t.charCodeAt(r),n<128?e+=1:n<2048?e+=2:55296===(64512&n)&&56320===(64512&t.charCodeAt(r+1))?(++r,e+=4):e+=3;return e}function m(t,e,n){const r=n-e;if(r<1)return"";let i;const s=[];let o,a=0;while(e<n)o=t[e++],o<128?s[a++]=o:o>191&&o<224?s[a++]=(31&o)<<6|63&t[e++]:o>239&&o<365?(o=((7&o)<<18|(63&t[e++])<<12|(63&t[e++])<<6|63&t[e++])-65536,s[a++]=55296+(o>>10),s[a++]=56320+(1023&o)):s[a++]=(15&o)<<12|(63&t[e++])<<6|63&t[e++],a>8191&&((i??(i=[])).push(String.fromCharCode.apply(String,s)),a=0);return null!=i?(a>0&&i.push(String.fromCharCode.apply(String,s.slice(0,a))),i.join("")):String.fromCharCode.apply(String,s.slice(0,a))}function v(t,e,n){const r=n;let i,s;for(let o=0;o<t.length;++o)i=t.charCodeAt(o),i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296===(64512&i)&&56320===(64512&(s=t.charCodeAt(o+1)))?(i=65536+((1023&i)<<10)+(1023&s),++o,e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128);return n-r}function E(t,e){return RangeError(`index out of range: ${t.pos} + ${e??1} > ${t.len}`)}function A(t,e){return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0}class x{constructor(t){(0,r.Z)(this,"buf",void 0),(0,r.Z)(this,"pos",void 0),(0,r.Z)(this,"len",void 0),(0,r.Z)(this,"_slice",Uint8Array.prototype.subarray),this.buf=t,this.pos=0,this.len=t.length}uint32(){let t=4294967295;if(t=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return t;if(t=(t|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return t;if(t=(t|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return t;if(t=(t|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return t;if(t=(t|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return t;if((this.pos+=5)>this.len)throw this.pos=this.len,E(this,10);return t}int32(){return 0|this.uint32()}sint32(){const t=this.uint32();return t>>>1^-(1&t)|0}bool(){return 0!==this.uint32()}fixed32(){if(this.pos+4>this.len)throw E(this,4);const t=A(this.buf,this.pos+=4);return t}sfixed32(){if(this.pos+4>this.len)throw E(this,4);const t=0|A(this.buf,this.pos+=4);return t}float(){if(this.pos+4>this.len)throw E(this,4);const t=c(this.buf,this.pos);return this.pos+=4,t}double(){if(this.pos+8>this.len)throw E(this,4);const t=d(this.buf,this.pos);return this.pos+=8,t}bytes(){const t=this.uint32(),e=this.pos,n=this.pos+t;if(n>this.len)throw E(this,t);return this.pos+=t,e===n?new Uint8Array(0):this.buf.subarray(e,n)}string(){const t=this.bytes();return m(t,0,t.length)}skip(t){if("number"===typeof t){if(this.pos+t>this.len)throw E(this,t);this.pos+=t}else do{if(this.pos>=this.len)throw E(this)}while(0!==(128&this.buf[this.pos++]));return this}skipType(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:while(4!==(t=7&this.uint32()))this.skipType(t);break;case 5:this.skip(4);break;default:throw Error(`invalid wire type ${t} at offset ${this.pos}`)}return this}readLongVarint(){const t=new g(0,0);let e=0;if(!(this.len-this.pos>4)){for(;e<3;++e){if(this.pos>=this.len)throw E(this);if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*e)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(127&this.buf[this.pos++])<<7*e)>>>0,t}for(;e<4;++e)if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*e)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(127&this.buf[this.pos])<<28)>>>0,t.hi=(t.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return t;if(e=0,this.len-this.pos>4){for(;e<5;++e)if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*e+3)>>>0,this.buf[this.pos++]<128)return t}else for(;e<5;++e){if(this.pos>=this.len)throw E(this);if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*e+3)>>>0,this.buf[this.pos++]<128)return t}throw Error("invalid varint encoding")}readFixed64(){if(this.pos+8>this.len)throw E(this,8);const t=A(this.buf,this.pos+=4),e=A(this.buf,this.pos+=4);return new g(t,e)}int64(){return this.readLongVarint().toBigInt()}int64Number(){return this.readLongVarint().toNumber()}int64String(){return this.readLongVarint().toString()}uint64(){return this.readLongVarint().toBigInt(!0)}uint64Number(){const t=(0,i.CJ)(this.buf,this.pos);return this.pos+=(0,i.P$)(t),t}uint64String(){return this.readLongVarint().toString(!0)}sint64(){return this.readLongVarint().zzDecode().toBigInt()}sint64Number(){return this.readLongVarint().zzDecode().toNumber()}sint64String(){return this.readLongVarint().zzDecode().toString()}fixed64(){return this.readFixed64().toBigInt()}fixed64Number(){return this.readFixed64().toNumber()}fixed64String(){return this.readFixed64().toString()}sfixed64(){return this.readFixed64().toBigInt()}sfixed64Number(){return this.readFixed64().toNumber()}sfixed64String(){return this.readFixed64().toString()}}function S(t){return new x(t instanceof Uint8Array?t:t.subarray())}function _(t,e,n){const r=S(t);return e.decode(r,void 0,n)}var I=n(800),R=n(2543);function C(t){const e=t??8192,n=e>>>1;let r,i=e;return function(t){if(t<1||t>n)return(0,I.E)(t);i+t>e&&(r=(0,I.E)(e),i=0);const s=r.subarray(i,i+=t);return 0!==(7&i)&&(i=1+(7|i)),s}}class k{constructor(t,e,n){(0,r.Z)(this,"fn",void 0),(0,r.Z)(this,"len",void 0),(0,r.Z)(this,"next",void 0),(0,r.Z)(this,"val",void 0),this.fn=t,this.len=e,this.next=void 0,this.val=n}}function L(){}class T{constructor(t){(0,r.Z)(this,"head",void 0),(0,r.Z)(this,"tail",void 0),(0,r.Z)(this,"len",void 0),(0,r.Z)(this,"next",void 0),this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}}const B=C();function O(t){return null!=globalThis.Buffer?(0,I.E)(t):B(t)}class N{constructor(){(0,r.Z)(this,"len",void 0),(0,r.Z)(this,"head",void 0),(0,r.Z)(this,"tail",void 0),(0,r.Z)(this,"states",void 0),this.len=0,this.head=new k(L,0,0),this.tail=this.head,this.states=null}_push(t,e,n){return this.tail=this.tail.next=new k(t,e,n),this.len+=e,this}uint32(t){return this.len+=(this.tail=this.tail.next=new P((t>>>=0)<128?1:t<16384?2:t<2097152?3:t<268435456?4:5,t)).len,this}int32(t){return t<0?this._push(M,10,g.fromNumber(t)):this.uint32(t)}sint32(t){return this.uint32((t<<1^t>>31)>>>0)}uint64(t){const e=g.fromBigInt(t);return this._push(M,e.length(),e)}uint64Number(t){return this._push(i.lN,(0,i.P$)(t),t)}uint64String(t){return this.uint64(BigInt(t))}int64(t){return this.uint64(t)}int64Number(t){return this.uint64Number(t)}int64String(t){return this.uint64String(t)}sint64(t){const e=g.fromBigInt(t).zzEncode();return this._push(M,e.length(),e)}sint64Number(t){const e=g.fromNumber(t).zzEncode();return this._push(M,e.length(),e)}sint64String(t){return this.sint64(BigInt(t))}bool(t){return this._push(D,1,t?1:0)}fixed32(t){return this._push(Z,4,t>>>0)}sfixed32(t){return this.fixed32(t)}fixed64(t){const e=g.fromBigInt(t);return this._push(Z,4,e.lo)._push(Z,4,e.hi)}fixed64Number(t){const e=g.fromNumber(t);return this._push(Z,4,e.lo)._push(Z,4,e.hi)}fixed64String(t){return this.fixed64(BigInt(t))}sfixed64(t){return this.fixed64(t)}sfixed64Number(t){return this.fixed64Number(t)}sfixed64String(t){return this.fixed64String(t)}float(t){return this._push(a,4,t)}double(t){return this._push(h,8,t)}bytes(t){const e=t.length>>>0;return 0===e?this._push(D,1,0):this.uint32(e)._push(F,e,t)}string(t){const e=w(t);return 0!==e?this.uint32(e)._push(v,e,t):this._push(D,1,0)}fork(){return this.states=new T(this),this.head=this.tail=new k(L,0,0),this.len=0,this}reset(){return null!=this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new k(L,0,0),this.len=0),this}ldelim(){const t=this.head,e=this.tail,n=this.len;return this.reset().uint32(n),0!==n&&(this.tail.next=t.next,this.tail=e,this.len+=n),this}finish(){let t=this.head.next;const e=O(this.len);let n=0;while(null!=t)t.fn(t.val,e,n),n+=t.len,t=t.next;return e}}function D(t,e,n){e[n]=255&t}function U(t,e,n){while(t>127)e[n++]=127&t|128,t>>>=7;e[n]=t}class P extends k{constructor(t,e){super(U,t,e),(0,r.Z)(this,"next",void 0),this.next=void 0}}function M(t,e,n){while(0!==t.hi)e[n++]=127&t.lo|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;while(t.lo>127)e[n++]=127&t.lo|128,t.lo=t.lo>>>7;e[n++]=t.lo}function Z(t,e,n){e[n]=255&t,e[n+1]=t>>>8&255,e[n+2]=t>>>16&255,e[n+3]=t>>>24}function F(t,e,n){e.set(t,n)}function V(t,e,n){e.set(t,n)}function H(t,e,n){t.length<40?v(t,e,n):null!=e.utf8Write?e.utf8Write(t,n):e.set((0,R.m)(t),n)}function $(){return new N}function j(t,e){const n=$();return e.encode(t,n,{lengthDelimited:!1}),n.finish()}var K;function z(t,e,n,r){return{name:t,type:e,encode:n,decode:r}}function q(t){function e(e){if(null==t[e.toString()])throw new Error("Invalid enum value");return t[e]}const n=function(t,n){const r=e(t);n.int32(r)},r=function(t){const n=t.int32();return e(n)};return z("enum",K.VARINT,n,r)}function G(t,e){return z("message",K.LENGTH_DELIMITED,t,e)}null!=globalThis.Buffer&&(N.prototype.bytes=function(t){const e=t.length>>>0;return this.uint32(e),e>0&&this._push(V,e,t),this},N.prototype.string=function(t){const e=globalThis.Buffer.byteLength(t);return this.uint32(e),e>0&&this._push(H,e,t),this}),function(t){t[t["VARINT"]=0]="VARINT",t[t["BIT64"]=1]="BIT64",t[t["LENGTH_DELIMITED"]=2]="LENGTH_DELIMITED",t[t["START_GROUP"]=3]="START_GROUP",t[t["END_GROUP"]=4]="END_GROUP",t[t["BIT32"]=5]="BIT32"}(K||(K={}))},1393:function(t,e,n){"use strict";n.d(e,{h:function(){return s}});var r=n(7327);class i extends Error{constructor(t,e){super(t??"The operation was aborted"),(0,r.Z)(this,"type",void 0),(0,r.Z)(this,"code",void 0),this.type="aborted",this.name="AbortError",this.code=e??"ABORT_ERR"}}async function s(t,e,n){if(null==e)return t;if(e.aborted)return Promise.reject(new i(n?.errorMessage,n?.errorCode));let r;const s=new i(n?.errorMessage,n?.errorCode);try{return await Promise.race([t,new Promise(((t,n)=>{r=()=>{n(s)},e.addEventListener("abort",r)}))])}finally{null!=r&&e.removeEventListener("abort",r)}}},645:function(t,e,n){"use strict";n.d(e,{CJ:function(){return y},Jx:function(){return m},P$:function(){return f},cv:function(){return w},lN:function(){return p}});n(1439),n(7585),n(5315);var r=n(800);const i=Math.pow(2,7),s=Math.pow(2,14),o=Math.pow(2,21),a=Math.pow(2,28),c=Math.pow(2,35),u=Math.pow(2,42),l=Math.pow(2,49),h=128,d=127;function f(t){if(t<i)return 1;if(t<s)return 2;if(t<o)return 3;if(t<a)return 4;if(t<c)return 5;if(t<u)return 6;if(t<l)return 7;if(null!=Number.MAX_SAFE_INTEGER&&t>Number.MAX_SAFE_INTEGER)throw new RangeError("Could not encode varint");return 8}function p(t,e,n=0){switch(f(t)){case 8:e[n++]=255&t|h,t/=128;case 7:e[n++]=255&t|h,t/=128;case 6:e[n++]=255&t|h,t/=128;case 5:e[n++]=255&t|h,t/=128;case 4:e[n++]=255&t|h,t>>>=7;case 3:e[n++]=255&t|h,t>>>=7;case 2:e[n++]=255&t|h,t>>>=7;case 1:e[n++]=255&t,t>>>=7;break;default:throw new Error("unreachable")}return e}function g(t,e,n=0){switch(f(t)){case 8:e.set(n++,255&t|h),t/=128;case 7:e.set(n++,255&t|h),t/=128;case 6:e.set(n++,255&t|h),t/=128;case 5:e.set(n++,255&t|h),t/=128;case 4:e.set(n++,255&t|h),t>>>=7;case 3:e.set(n++,255&t|h),t>>>=7;case 2:e.set(n++,255&t|h),t>>>=7;case 1:e.set(n++,255&t),t>>>=7;break;default:throw new Error("unreachable")}return e}function y(t,e){let n=t[e],r=0;if(r+=n&d,n<h)return r;if(n=t[e+1],r+=(n&d)<<7,n<h)return r;if(n=t[e+2],r+=(n&d)<<14,n<h)return r;if(n=t[e+3],r+=(n&d)<<21,n<h)return r;if(n=t[e+4],r+=(n&d)*a,n<h)return r;if(n=t[e+5],r+=(n&d)*c,n<h)return r;if(n=t[e+6],r+=(n&d)*u,n<h)return r;if(n=t[e+7],r+=(n&d)*l,n<h)return r;throw new RangeError("Could not decode varint")}function b(t,e){let n=t.get(e),r=0;if(r+=n&d,n<h)return r;if(n=t.get(e+1),r+=(n&d)<<7,n<h)return r;if(n=t.get(e+2),r+=(n&d)<<14,n<h)return r;if(n=t.get(e+3),r+=(n&d)<<21,n<h)return r;if(n=t.get(e+4),r+=(n&d)*a,n<h)return r;if(n=t.get(e+5),r+=(n&d)*c,n<h)return r;if(n=t.get(e+6),r+=(n&d)*u,n<h)return r;if(n=t.get(e+7),r+=(n&d)*l,n<h)return r;throw new RangeError("Could not decode varint")}function w(t,e,n=0){return null==e&&(e=(0,r.E)(f(t))),e instanceof Uint8Array?p(t,e,n):g(t,e,n)}function m(t,e=0){return t instanceof Uint8Array?y(t,e):b(t,e)}},9109:function(t,e,n){"use strict";n.d(e,{H:function(){return h}});var r=n(7327),i=(n(1439),n(7585),n(5315),n(7658),n(800)),s=n(6997),o=n(7708);let a;const c=Symbol.for("@achingbrain/uint8arraylist");function u(t,e){if(null==e||e<0)throw new RangeError("index is out of bounds");let n=0;for(const r of t){const t=n+r.byteLength;if(e<t)return{buf:r,index:e-n};n=t}throw new RangeError("index is out of bounds")}function l(t){return Boolean(t?.[c])}a=Symbol.iterator;class h{constructor(...t){(0,r.Z)(this,"bufs",void 0),(0,r.Z)(this,"length",void 0),(0,r.Z)(this,c,!0),this.bufs=[],this.length=0,t.length>0&&this.appendAll(t)}*[a](){yield*this.bufs}get byteLength(){return this.length}append(...t){this.appendAll(t)}appendAll(t){let e=0;for(const n of t)if(n instanceof Uint8Array)e+=n.byteLength,this.bufs.push(n);else{if(!l(n))throw new Error("Could not append value, must be an Uint8Array or a Uint8ArrayList");e+=n.byteLength,this.bufs.push(...n.bufs)}this.length+=e}prepend(...t){this.prependAll(t)}prependAll(t){let e=0;for(const n of t.reverse())if(n instanceof Uint8Array)e+=n.byteLength,this.bufs.unshift(n);else{if(!l(n))throw new Error("Could not prepend value, must be an Uint8Array or a Uint8ArrayList");e+=n.byteLength,this.bufs.unshift(...n.bufs)}this.length+=e}get(t){const e=u(this.bufs,t);return e.buf[e.index]}set(t,e){const n=u(this.bufs,t);n.buf[n.index]=e}write(t,e=0){if(t instanceof Uint8Array)for(let n=0;n<t.length;n++)this.set(e+n,t[n]);else{if(!l(t))throw new Error("Could not write value, must be an Uint8Array or a Uint8ArrayList");for(let n=0;n<t.length;n++)this.set(e+n,t.get(n))}}consume(t){if(t=Math.trunc(t),!(Number.isNaN(t)||t<=0)){if(t===this.byteLength)return this.bufs=[],void(this.length=0);while(this.bufs.length>0){if(!(t>=this.bufs[0].byteLength)){this.bufs[0]=this.bufs[0].subarray(t),this.length-=t;break}t-=this.bufs[0].byteLength,this.length-=this.bufs[0].byteLength,this.bufs.shift()}}}slice(t,e){const{bufs:n,length:r}=this._subList(t,e);return(0,s.z)(n,r)}subarray(t,e){const{bufs:n,length:r}=this._subList(t,e);return 1===n.length?n[0]:(0,s.z)(n,r)}sublist(t,e){const{bufs:n,length:r}=this._subList(t,e),i=new h;return i.length=r,i.bufs=[...n],i}_subList(t,e){if(t=t??0,e=e??this.length,t<0&&(t=this.length+t),e<0&&(e=this.length+e),t<0||e>this.length)throw new RangeError("index is out of bounds");if(t===e)return{bufs:[],length:0};if(0===t&&e===this.length)return{bufs:this.bufs,length:this.length};const n=[];let r=0;for(let i=0;i<this.bufs.length;i++){const s=this.bufs[i],o=r,a=o+s.byteLength;if(r=a,t>=a)continue;const c=t>=o&&t<a,u=e>o&&e<=a;if(c&&u){if(t===o&&e===a){n.push(s);break}const r=t-o;n.push(s.subarray(r,r+(e-t)));break}if(c){if(0===t){n.push(s);continue}n.push(s.subarray(t-o))}else{if(u){if(e===a){n.push(s);break}n.push(s.subarray(0,e-o));break}n.push(s)}}return{bufs:n,length:e-t}}indexOf(t,e=0){if(!l(t)&&!(t instanceof Uint8Array))throw new TypeError('The "value" argument must be a Uint8ArrayList or Uint8Array');const n=t instanceof Uint8Array?t:t.subarray();if(e=Number(e??0),isNaN(e)&&(e=0),e<0&&(e=this.length+e),e<0&&(e=0),0===t.length)return e>this.length?this.length:e;const r=n.byteLength;if(0===r)throw new TypeError("search must be at least 1 byte long");const i=256,s=new Int32Array(i);for(let l=0;l<i;l++)s[l]=-1;for(let l=0;l<r;l++)s[n[l]]=l;const o=s,a=this.byteLength-n.byteLength,c=n.byteLength-1;let u;for(let l=e;l<=a;l+=u){u=0;for(let t=c;t>=0;t--){const e=this.get(l+t);if(n[t]!==e){u=Math.max(1,t-o[e]);break}}if(0===u)return l}return-1}getInt8(t){const e=this.subarray(t,t+1),n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.getInt8(0)}setInt8(t,e){const n=(0,i.E)(1),r=new DataView(n.buffer,n.byteOffset,n.byteLength);r.setInt8(0,e),this.write(n,t)}getInt16(t,e){const n=this.subarray(t,t+2),r=new DataView(n.buffer,n.byteOffset,n.byteLength);return r.getInt16(0,e)}setInt16(t,e,n){const r=(0,i.u)(2),s=new DataView(r.buffer,r.byteOffset,r.byteLength);s.setInt16(0,e,n),this.write(r,t)}getInt32(t,e){const n=this.subarray(t,t+4),r=new DataView(n.buffer,n.byteOffset,n.byteLength);return r.getInt32(0,e)}setInt32(t,e,n){const r=(0,i.u)(4),s=new DataView(r.buffer,r.byteOffset,r.byteLength);s.setInt32(0,e,n),this.write(r,t)}getBigInt64(t,e){const n=this.subarray(t,t+8),r=new DataView(n.buffer,n.byteOffset,n.byteLength);return r.getBigInt64(0,e)}setBigInt64(t,e,n){const r=(0,i.u)(8),s=new DataView(r.buffer,r.byteOffset,r.byteLength);s.setBigInt64(0,e,n),this.write(r,t)}getUint8(t){const e=this.subarray(t,t+1),n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.getUint8(0)}setUint8(t,e){const n=(0,i.E)(1),r=new DataView(n.buffer,n.byteOffset,n.byteLength);r.setUint8(0,e),this.write(n,t)}getUint16(t,e){const n=this.subarray(t,t+2),r=new DataView(n.buffer,n.byteOffset,n.byteLength);return r.getUint16(0,e)}setUint16(t,e,n){const r=(0,i.u)(2),s=new DataView(r.buffer,r.byteOffset,r.byteLength);s.setUint16(0,e,n),this.write(r,t)}getUint32(t,e){const n=this.subarray(t,t+4),r=new DataView(n.buffer,n.byteOffset,n.byteLength);return r.getUint32(0,e)}setUint32(t,e,n){const r=(0,i.u)(4),s=new DataView(r.buffer,r.byteOffset,r.byteLength);s.setUint32(0,e,n),this.write(r,t)}getBigUint64(t,e){const n=this.subarray(t,t+8),r=new DataView(n.buffer,n.byteOffset,n.byteLength);return r.getBigUint64(0,e)}setBigUint64(t,e,n){const r=(0,i.u)(8),s=new DataView(r.buffer,r.byteOffset,r.byteLength);s.setBigUint64(0,e,n),this.write(r,t)}getFloat32(t,e){const n=this.subarray(t,t+4),r=new DataView(n.buffer,n.byteOffset,n.byteLength);return r.getFloat32(0,e)}setFloat32(t,e,n){const r=(0,i.u)(4),s=new DataView(r.buffer,r.byteOffset,r.byteLength);s.setFloat32(0,e,n),this.write(r,t)}getFloat64(t,e){const n=this.subarray(t,t+8),r=new DataView(n.buffer,n.byteOffset,n.byteLength);return r.getFloat64(0,e)}setFloat64(t,e,n){const r=(0,i.u)(8),s=new DataView(r.buffer,r.byteOffset,r.byteLength);s.setFloat64(0,e,n),this.write(r,t)}equals(t){if(null==t)return!1;if(!(t instanceof h))return!1;if(t.bufs.length!==this.bufs.length)return!1;for(let e=0;e<this.bufs.length;e++)if(!(0,o.f)(this.bufs[e],t.bufs[e]))return!1;return!0}static fromUint8Arrays(t,e){const n=new h;return n.bufs=t,null==e&&(e=t.reduce(((t,e)=>t+e.byteLength),0)),n.length=e,n}}},800:function(t,e,n){"use strict";n.d(e,{E:function(){return i},u:function(){return r}});n(1439),n(7585),n(5315);function r(t=0){return new Uint8Array(t)}function i(t=0){return new Uint8Array(t)}},6997:function(t,e,n){"use strict";n.d(e,{z:function(){return s}});var r=n(800);function i(t){return t}function s(t,e){null==e&&(e=t.reduce(((t,e)=>t+e.length),0));const n=(0,r.E)(e);let s=0;for(const r of t)n.set(r,s),s+=r.length;return i(n)}},7708:function(t,e,n){"use strict";function r(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let n=0;n<t.byteLength;n++)if(t[n]!==e[n])return!1;return!0}n.d(e,{f:function(){return r}})},2543:function(t,e,n){"use strict";n.d(e,{m:function(){return i}});var r=n(9357);function i(t,e="utf8"){const n=r.Z[e];if(null==n)throw new Error(`Unsupported encoding "${e}"`);return n.decoder.decode(`${n.prefix}${t}`)}},7998:function(t,e,n){"use strict";n.d(e,{fS:function(){return r.f},mL:function(){return i.m},BB:function(){return s.B}});var r=n(7708);n(800);n(6997);var i=n(2543),s=n(7010)},7010:function(t,e,n){"use strict";n.d(e,{B:function(){return i}});var r=n(9357);function i(t,e="utf8"){const n=r.Z[e];if(null==n)throw new Error(`Unsupported encoding "${e}"`);return n.encoder.encode(t).substring(1)}},9357:function(t,e,n){"use strict";var r=n(7738),i=n(800);function s(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const o=s("utf8","u",(t=>{const e=new TextDecoder("utf8");return"u"+e.decode(t)}),(t=>{const e=new TextEncoder;return e.encode(t.substring(1))})),a=s("ascii","a",(t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e}),(t=>{t=t.substring(1);const e=(0,i.E)(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e})),c={utf8:o,"utf-8":o,hex:r.gh.base16,latin1:a,ascii:a,binary:a,...r.gh};e.Z=c},8631:function(t,e,n){"use strict";n.d(e,{$l:function(){return a},UG:function(){return u},b$:function(){return h},iP:function(){return c},jU:function(){return o},n2:function(){return l}});var r=n(4024);const i="object"===typeof window&&"object"===typeof document&&9===document.nodeType,s=r(),o=i&&!s,a=s&&!i,c=s&&i,u="undefined"!==typeof globalThis.process&&"undefined"!==typeof globalThis.process.release&&"node"===globalThis.process.release.name&&!s,l="function"===typeof importScripts&&"undefined"!==typeof self&&"undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,h=("undefined"!==typeof globalThis.process&&"undefined"!==typeof globalThis.process.env&&globalThis.process.env["NODE"+(()=>"_")()+"ENV"],"undefined"!==typeof navigator&&"ReactNative"===navigator.product)}}]);
//# sourceMappingURL=chunk-vendors.40e4b42c.js.map